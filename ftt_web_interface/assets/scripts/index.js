/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "assets/scripts/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/database_interface/Image.js":
/*!*****************************************!*\
  !*** ./src/database_interface/Image.js ***!
  \*****************************************/
/*! exports provided: Image, ImageInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Image\", function() { return Image; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageInterface\", function() { return ImageInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Image data container class.\nclass Image {\n  constructor(\n    id,\n    segmentId,\n    secs,\n    imageFilename,\n    imageData,\n    description,\n    origSecs\n  ) {\n    this.id = id;\n    this.segmentId = segmentId;\n    this.secs = secs;\n    this.imageFilename = imageFilename;\n    this.imageData = imageData;\n    this.description = description;\n    this.origSecs = origSecs;\n  }\n}\n\n//Image database interaction class.\nclass ImageInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"segment_id\",\n      \"secs\",\n      \"image_filename\",\n      \"image_data\",\n      \"description\",\n      \"orig_secs\",\n    ];\n  }\n\n  async get(segmentId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"image\",\n      \"segment_id=\" + segmentId\n    );\n    return data.map(\n      (entry) =>\n        new Image(\n          entry[0],\n          entry[1],\n          entry[2],\n          entry[3],\n          \"data:image/jpeg;base64, \" + atob(entry[4]),\n          entry[5],\n          entry[6]\n        )\n    );\n  }\n\n  async post(segmentId, imageFilename, imageData, description) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: segmentId,\n      [this.paramNames[3]]: imageFilename,\n      [this.paramNames[4]]: imageData,\n      [this.paramNames[5]]: description,\n      [this.paramNames[6]]: new Date().getTime() / 1000,\n    };\n    await this.serverInterface.sendPostRequest(\"image\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"image\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL0ltYWdlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFiYXNlX2ludGVyZmFjZS9JbWFnZS5qcz82MWU3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG4vL0ltYWdlIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIEltYWdlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgaWQsXG4gICAgc2VnbWVudElkLFxuICAgIHNlY3MsXG4gICAgaW1hZ2VGaWxlbmFtZSxcbiAgICBpbWFnZURhdGEsXG4gICAgZGVzY3JpcHRpb24sXG4gICAgb3JpZ1NlY3NcbiAgKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuc2VnbWVudElkID0gc2VnbWVudElkO1xuICAgIHRoaXMuc2VjcyA9IHNlY3M7XG4gICAgdGhpcy5pbWFnZUZpbGVuYW1lID0gaW1hZ2VGaWxlbmFtZTtcbiAgICB0aGlzLmltYWdlRGF0YSA9IGltYWdlRGF0YTtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5vcmlnU2VjcyA9IG9yaWdTZWNzO1xuICB9XG59XG5cbi8vSW1hZ2UgZGF0YWJhc2UgaW50ZXJhY3Rpb24gY2xhc3MuXG5leHBvcnQgY2xhc3MgSW1hZ2VJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UpIHtcbiAgICAvL1NldCBhcmd1bWVudHMgYXMgcHJvcGVydGllcy5cbiAgICB0aGlzLnNlcnZlckludGVyZmFjZSA9IHNlcnZlckludGVyZmFjZTtcbiAgICB0aGlzLnBhcmFtTmFtZXMgPSBbXG4gICAgICBcImlkXCIsXG4gICAgICBcInNlZ21lbnRfaWRcIixcbiAgICAgIFwic2Vjc1wiLFxuICAgICAgXCJpbWFnZV9maWxlbmFtZVwiLFxuICAgICAgXCJpbWFnZV9kYXRhXCIsXG4gICAgICBcImRlc2NyaXB0aW9uXCIsXG4gICAgICBcIm9yaWdfc2Vjc1wiLFxuICAgIF07XG4gIH1cblxuICBhc3luYyBnZXQoc2VnbWVudElkKSB7XG4gICAgLy9HZXQgdGFibGUgZGF0YSBmcm9tIHNlcnZlci5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3QoXG4gICAgICBcImltYWdlXCIsXG4gICAgICBcInNlZ21lbnRfaWQ9XCIgKyBzZWdtZW50SWRcbiAgICApO1xuICAgIHJldHVybiBkYXRhLm1hcChcbiAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgbmV3IEltYWdlKFxuICAgICAgICAgIGVudHJ5WzBdLFxuICAgICAgICAgIGVudHJ5WzFdLFxuICAgICAgICAgIGVudHJ5WzJdLFxuICAgICAgICAgIGVudHJ5WzNdLFxuICAgICAgICAgIFwiZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwgXCIgKyBhdG9iKGVudHJ5WzRdKSxcbiAgICAgICAgICBlbnRyeVs1XSxcbiAgICAgICAgICBlbnRyeVs2XVxuICAgICAgICApXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHBvc3Qoc2VnbWVudElkLCBpbWFnZUZpbGVuYW1lLCBpbWFnZURhdGEsIGRlc2NyaXB0aW9uKSB7XG4gICAgLy9DcmVhdGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzFdXTogc2VnbWVudElkLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1szXV06IGltYWdlRmlsZW5hbWUsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzRdXTogaW1hZ2VEYXRhLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1s1XV06IGRlc2NyaXB0aW9uLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1s2XV06IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMCxcbiAgICB9O1xuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRQb3N0UmVxdWVzdChcImltYWdlXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGlkKSB7XG4gICAgLy9EZWxldGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmREZWxldGVSZXF1ZXN0KFwiaW1hZ2VcIiwgXCJpZD1cIiArIGlkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/database_interface/Image.js\n");

/***/ }),

/***/ "./src/database_interface/ItoReason.js":
/*!*********************************************!*\
  !*** ./src/database_interface/ItoReason.js ***!
  \*********************************************/
/*! exports provided: ItoReason, ItoReasonInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItoReason\", function() { return ItoReason; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItoReasonInterface\", function() { return ItoReasonInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//ItoReason data container class.\nclass ItoReason {\n  constructor(id, shortDescription) {\n    this.id = id;\n    this.shortDescription = shortDescription;\n  }\n}\n\n//ItoReason database interaction class.\nclass ItoReasonInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\"id\", \"short_description\"];\n  }\n\n  async get() {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\"ito_reason\");\n    return data.map((entry) => new ItoReason(entry[0], entry[1]));\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL0l0b1JlYXNvbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kYXRhYmFzZV9pbnRlcmZhY2UvSXRvUmVhc29uLmpzPzQ4NmEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vSXRvUmVhc29uIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIEl0b1JlYXNvbiB7XG4gIGNvbnN0cnVjdG9yKGlkLCBzaG9ydERlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuc2hvcnREZXNjcmlwdGlvbiA9IHNob3J0RGVzY3JpcHRpb247XG4gIH1cbn1cblxuLy9JdG9SZWFzb24gZGF0YWJhc2UgaW50ZXJhY3Rpb24gY2xhc3MuXG5leHBvcnQgY2xhc3MgSXRvUmVhc29uSW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1wiaWRcIiwgXCJzaG9ydF9kZXNjcmlwdGlvblwiXTtcbiAgfVxuXG4gIGFzeW5jIGdldCgpIHtcbiAgICAvL0dldCB0YWJsZSBkYXRhIGZyb20gc2VydmVyLlxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kR2V0UmVxdWVzdChcIml0b19yZWFzb25cIik7XG4gICAgcmV0dXJuIGRhdGEubWFwKChlbnRyeSkgPT4gbmV3IEl0b1JlYXNvbihlbnRyeVswXSwgZW50cnlbMV0pKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/database_interface/ItoReason.js\n");

/***/ }),

/***/ "./src/database_interface/Leg.js":
/*!***************************************!*\
  !*** ./src/database_interface/Leg.js ***!
  \***************************************/
/*! exports provided: Leg, LegInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Leg\", function() { return Leg; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LegInterface\", function() { return LegInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Leg data container class.\nclass Leg {\n  constructor(\n    id,\n    shiftId,\n    startTime,\n    endTime,\n    weatherId,\n    defaultPoseSourceId,\n    note,\n    number\n  ) {\n    this.id = id;\n    this.shiftId = shiftId;\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.weatherId = weatherId;\n    this.defaultPoseSourceId = defaultPoseSourceId;\n    this.note = note;\n    this.number = number;\n  }\n}\n\n//Leg database interaction class.\nclass LegInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"shift_id\",\n      \"starttime_secs\",\n      \"endtime_secs\",\n      \"weather_id\",\n      \"default_pose_source_id\",\n      \"note\",\n      \"number\",\n    ];\n  }\n\n  async get(shiftId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"leg\",\n      \"shift_id=\" + shiftId\n    );\n    return data.map(\n      (entry) =>\n        new Leg(\n          entry[0],\n          entry[1],\n          entry[2],\n          entry[3],\n          entry[4],\n          entry[5],\n          entry[6],\n          entry[7]\n        )\n    );\n  }\n\n  async post(shiftId, weatherId, defaultPoseSourceId, note) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: shiftId,\n      [this.paramNames[4]]: weatherId,\n      [this.paramNames[5]]: defaultPoseSourceId,\n      [this.paramNames[6]]: note,\n    };\n    await this.serverInterface.sendPostRequest(\"leg\", data);\n  }\n\n  async put(\n    id,\n    action,\n    weatherId = null,\n    defaultPoseSourceId = null,\n    note = null\n  ) {\n    //Update entry in server table.\n    //The action parameter can be either \"edit\" or \"close\".\n    //Mandatory parameters:\n    const data = {\n      [this.paramNames[0]]: id,\n      [\"action\"]: action,\n    };\n    //Optional parameters:\n    Object.assign(\n      data,\n      weatherId !== null && { [this.paramNames[4]]: weatherId },\n      defaultPoseSourceId !== null && { [this.paramNames[5]]: defaultPoseSourceId },\n      note !== null && { [this.paramNames[6]]: note }\n    );\n    await this.serverInterface.sendPutRequest(\"leg\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"leg\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL0xlZy5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kYXRhYmFzZV9pbnRlcmZhY2UvTGVnLmpzPzJmODUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vTGVnIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIExlZyB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGlkLFxuICAgIHNoaWZ0SWQsXG4gICAgc3RhcnRUaW1lLFxuICAgIGVuZFRpbWUsXG4gICAgd2VhdGhlcklkLFxuICAgIGRlZmF1bHRQb3NlU291cmNlSWQsXG4gICAgbm90ZSxcbiAgICBudW1iZXJcbiAgKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuc2hpZnRJZCA9IHNoaWZ0SWQ7XG4gICAgdGhpcy5zdGFydFRpbWUgPSBzdGFydFRpbWU7XG4gICAgdGhpcy5lbmRUaW1lID0gZW5kVGltZTtcbiAgICB0aGlzLndlYXRoZXJJZCA9IHdlYXRoZXJJZDtcbiAgICB0aGlzLmRlZmF1bHRQb3NlU291cmNlSWQgPSBkZWZhdWx0UG9zZVNvdXJjZUlkO1xuICAgIHRoaXMubm90ZSA9IG5vdGU7XG4gICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gIH1cbn1cblxuLy9MZWcgZGF0YWJhc2UgaW50ZXJhY3Rpb24gY2xhc3MuXG5leHBvcnQgY2xhc3MgTGVnSW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1xuICAgICAgXCJpZFwiLFxuICAgICAgXCJzaGlmdF9pZFwiLFxuICAgICAgXCJzdGFydHRpbWVfc2Vjc1wiLFxuICAgICAgXCJlbmR0aW1lX3NlY3NcIixcbiAgICAgIFwid2VhdGhlcl9pZFwiLFxuICAgICAgXCJkZWZhdWx0X3Bvc2Vfc291cmNlX2lkXCIsXG4gICAgICBcIm5vdGVcIixcbiAgICAgIFwibnVtYmVyXCIsXG4gICAgXTtcbiAgfVxuXG4gIGFzeW5jIGdldChzaGlmdElkKSB7XG4gICAgLy9HZXQgdGFibGUgZGF0YSBmcm9tIHNlcnZlci5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3QoXG4gICAgICBcImxlZ1wiLFxuICAgICAgXCJzaGlmdF9pZD1cIiArIHNoaWZ0SWRcbiAgICApO1xuICAgIHJldHVybiBkYXRhLm1hcChcbiAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgbmV3IExlZyhcbiAgICAgICAgICBlbnRyeVswXSxcbiAgICAgICAgICBlbnRyeVsxXSxcbiAgICAgICAgICBlbnRyeVsyXSxcbiAgICAgICAgICBlbnRyeVszXSxcbiAgICAgICAgICBlbnRyeVs0XSxcbiAgICAgICAgICBlbnRyeVs1XSxcbiAgICAgICAgICBlbnRyeVs2XSxcbiAgICAgICAgICBlbnRyeVs3XVxuICAgICAgICApXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHBvc3Qoc2hpZnRJZCwgd2VhdGhlcklkLCBkZWZhdWx0UG9zZVNvdXJjZUlkLCBub3RlKSB7XG4gICAgLy9DcmVhdGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzFdXTogc2hpZnRJZCxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbNF1dOiB3ZWF0aGVySWQsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzVdXTogZGVmYXVsdFBvc2VTb3VyY2VJZCxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbNl1dOiBub3RlLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFBvc3RSZXF1ZXN0KFwibGVnXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgcHV0KFxuICAgIGlkLFxuICAgIGFjdGlvbixcbiAgICB3ZWF0aGVySWQgPSBudWxsLFxuICAgIGRlZmF1bHRQb3NlU291cmNlSWQgPSBudWxsLFxuICAgIG5vdGUgPSBudWxsXG4gICkge1xuICAgIC8vVXBkYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICAvL1RoZSBhY3Rpb24gcGFyYW1ldGVyIGNhbiBiZSBlaXRoZXIgXCJlZGl0XCIgb3IgXCJjbG9zZVwiLlxuICAgIC8vTWFuZGF0b3J5IHBhcmFtZXRlcnM6XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbMF1dOiBpZCxcbiAgICAgIFtcImFjdGlvblwiXTogYWN0aW9uLFxuICAgIH07XG4gICAgLy9PcHRpb25hbCBwYXJhbWV0ZXJzOlxuICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICBkYXRhLFxuICAgICAgd2VhdGhlcklkICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1s0XV06IHdlYXRoZXJJZCB9LFxuICAgICAgZGVmYXVsdFBvc2VTb3VyY2VJZCAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNV1dOiBkZWZhdWx0UG9zZVNvdXJjZUlkIH0sXG4gICAgICBub3RlICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1s2XV06IG5vdGUgfVxuICAgICk7XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFB1dFJlcXVlc3QoXCJsZWdcIiwgZGF0YSk7XG4gIH1cblxuICBhc3luYyBkZWxldGUoaWQpIHtcbiAgICAvL0RlbGV0ZSBlbnRyeSBpbiBzZXJ2ZXIgdGFibGUuXG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZERlbGV0ZVJlcXVlc3QoXCJsZWdcIiwgXCJpZD1cIiArIGlkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/database_interface/Leg.js\n");

/***/ }),

/***/ "./src/database_interface/LocalPose.js":
/*!*********************************************!*\
  !*** ./src/database_interface/LocalPose.js ***!
  \*********************************************/
/*! exports provided: LocalPose, LocalPoseInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LocalPose\", function() { return LocalPose; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LocalPoseInterface\", function() { return LocalPoseInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//LocalPose data container class.\nclass LocalPose {\n  constructor(id, segmentId, secs, frameId, x, y, type, origSecs) {\n    this.id = id;\n    this.segmentId = segmentId;\n    this.secs = secs;\n    this.frameId = frameId;\n    this.x = x;\n    this.y = y;\n    this.type = type;\n    this.origSecs = origSecs;\n  }\n}\n\n//LocalPose database interaction class.\nclass LocalPoseInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"segment_id\",\n      \"secs\",\n      \"frame_id\",\n      \"x\",\n      \"y\",\n      \"type\",\n      \"orig_secs\",\n    ];\n  }\n\n  async get(segmentId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"local_pose\",\n      \"segment_id=\" + segmentId\n    );\n    return data.map(\n      (entry) =>\n        new LocalPose(\n          entry[0],\n          entry[1],\n          entry[2],\n          entry[3],\n          entry[4],\n          entry[5],\n          entry[6],\n          entry[7]\n        )\n    );\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL0xvY2FsUG9zZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kYXRhYmFzZV9pbnRlcmZhY2UvTG9jYWxQb3NlLmpzPzFhNjQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vTG9jYWxQb3NlIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIExvY2FsUG9zZSB7XG4gIGNvbnN0cnVjdG9yKGlkLCBzZWdtZW50SWQsIHNlY3MsIGZyYW1lSWQsIHgsIHksIHR5cGUsIG9yaWdTZWNzKSB7XG4gICAgdGhpcy5pZCA9IGlkO1xuICAgIHRoaXMuc2VnbWVudElkID0gc2VnbWVudElkO1xuICAgIHRoaXMuc2VjcyA9IHNlY3M7XG4gICAgdGhpcy5mcmFtZUlkID0gZnJhbWVJZDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLm9yaWdTZWNzID0gb3JpZ1NlY3M7XG4gIH1cbn1cblxuLy9Mb2NhbFBvc2UgZGF0YWJhc2UgaW50ZXJhY3Rpb24gY2xhc3MuXG5leHBvcnQgY2xhc3MgTG9jYWxQb3NlSW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1xuICAgICAgXCJpZFwiLFxuICAgICAgXCJzZWdtZW50X2lkXCIsXG4gICAgICBcInNlY3NcIixcbiAgICAgIFwiZnJhbWVfaWRcIixcbiAgICAgIFwieFwiLFxuICAgICAgXCJ5XCIsXG4gICAgICBcInR5cGVcIixcbiAgICAgIFwib3JpZ19zZWNzXCIsXG4gICAgXTtcbiAgfVxuXG4gIGFzeW5jIGdldChzZWdtZW50SWQpIHtcbiAgICAvL0dldCB0YWJsZSBkYXRhIGZyb20gc2VydmVyLlxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kR2V0UmVxdWVzdChcbiAgICAgIFwibG9jYWxfcG9zZVwiLFxuICAgICAgXCJzZWdtZW50X2lkPVwiICsgc2VnbWVudElkXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YS5tYXAoXG4gICAgICAoZW50cnkpID0+XG4gICAgICAgIG5ldyBMb2NhbFBvc2UoXG4gICAgICAgICAgZW50cnlbMF0sXG4gICAgICAgICAgZW50cnlbMV0sXG4gICAgICAgICAgZW50cnlbMl0sXG4gICAgICAgICAgZW50cnlbM10sXG4gICAgICAgICAgZW50cnlbNF0sXG4gICAgICAgICAgZW50cnlbNV0sXG4gICAgICAgICAgZW50cnlbNl0sXG4gICAgICAgICAgZW50cnlbN11cbiAgICAgICAgKVxuICAgICk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/database_interface/LocalPose.js\n");

/***/ }),

/***/ "./src/database_interface/MapImage.js":
/*!********************************************!*\
  !*** ./src/database_interface/MapImage.js ***!
  \********************************************/
/*! exports provided: MapImage, MapImageInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MapImage\", function() { return MapImage; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MapImageInterface\", function() { return MapImageInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//MapImage data container class.\nclass MapImage {\n  constructor(\n    id,\n    shiftId,\n    secs,\n    frameId,\n    width,\n    height,\n    resolution,\n    originX,\n    originY,\n    imageData,\n    origSecs\n  ) {\n    this.id = id;\n    this.shiftId = shiftId;\n    this.secs = secs;\n    this.frameId = frameId;\n    this.width = width;\n    this.height = height;\n    this.resolution = resolution;\n    this.originX = originX;\n    this.originY = originY;\n    this.imageData = imageData;\n    this.origSecs = origSecs;\n  }\n}\n\n//MapImage database interaction class.\nclass MapImageInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"shift_id\",\n      \"secs\",\n      \"frame_id\",\n      \"width\",\n      \"height\",\n      \"resolution\",\n      \"origin_x\",\n      \"origin_y\",\n      \"image_data\",\n      \"orig_secs\",\n    ];\n  }\n\n  async get(testEventId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"map_image\",\n      \"shift_id=\" + testEventId\n    );\n    return new MapImage(\n      data[0],\n      data[1],\n      data[2],\n      data[3],\n      data[4],\n      data[5],\n      data[6],\n      data[7],\n      data[8],\n      \"data:image/jpeg;base64, \" + atob(data[9]),\n      data[10]\n    );\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL01hcEltYWdlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFiYXNlX2ludGVyZmFjZS9NYXBJbWFnZS5qcz9mZTM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG4vL01hcEltYWdlIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIE1hcEltYWdlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgaWQsXG4gICAgc2hpZnRJZCxcbiAgICBzZWNzLFxuICAgIGZyYW1lSWQsXG4gICAgd2lkdGgsXG4gICAgaGVpZ2h0LFxuICAgIHJlc29sdXRpb24sXG4gICAgb3JpZ2luWCxcbiAgICBvcmlnaW5ZLFxuICAgIGltYWdlRGF0YSxcbiAgICBvcmlnU2Vjc1xuICApIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5zaGlmdElkID0gc2hpZnRJZDtcbiAgICB0aGlzLnNlY3MgPSBzZWNzO1xuICAgIHRoaXMuZnJhbWVJZCA9IGZyYW1lSWQ7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgdGhpcy5vcmlnaW5YID0gb3JpZ2luWDtcbiAgICB0aGlzLm9yaWdpblkgPSBvcmlnaW5ZO1xuICAgIHRoaXMuaW1hZ2VEYXRhID0gaW1hZ2VEYXRhO1xuICAgIHRoaXMub3JpZ1NlY3MgPSBvcmlnU2VjcztcbiAgfVxufVxuXG4vL01hcEltYWdlIGRhdGFiYXNlIGludGVyYWN0aW9uIGNsYXNzLlxuZXhwb3J0IGNsYXNzIE1hcEltYWdlSW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1xuICAgICAgXCJpZFwiLFxuICAgICAgXCJzaGlmdF9pZFwiLFxuICAgICAgXCJzZWNzXCIsXG4gICAgICBcImZyYW1lX2lkXCIsXG4gICAgICBcIndpZHRoXCIsXG4gICAgICBcImhlaWdodFwiLFxuICAgICAgXCJyZXNvbHV0aW9uXCIsXG4gICAgICBcIm9yaWdpbl94XCIsXG4gICAgICBcIm9yaWdpbl95XCIsXG4gICAgICBcImltYWdlX2RhdGFcIixcbiAgICAgIFwib3JpZ19zZWNzXCIsXG4gICAgXTtcbiAgfVxuXG4gIGFzeW5jIGdldCh0ZXN0RXZlbnRJZCkge1xuICAgIC8vR2V0IHRhYmxlIGRhdGEgZnJvbSBzZXJ2ZXIuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRHZXRSZXF1ZXN0KFxuICAgICAgXCJtYXBfaW1hZ2VcIixcbiAgICAgIFwic2hpZnRfaWQ9XCIgKyB0ZXN0RXZlbnRJZFxuICAgICk7XG4gICAgcmV0dXJuIG5ldyBNYXBJbWFnZShcbiAgICAgIGRhdGFbMF0sXG4gICAgICBkYXRhWzFdLFxuICAgICAgZGF0YVsyXSxcbiAgICAgIGRhdGFbM10sXG4gICAgICBkYXRhWzRdLFxuICAgICAgZGF0YVs1XSxcbiAgICAgIGRhdGFbNl0sXG4gICAgICBkYXRhWzddLFxuICAgICAgZGF0YVs4XSxcbiAgICAgIFwiZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwgXCIgKyBhdG9iKGRhdGFbOV0pLFxuICAgICAgZGF0YVsxMF1cbiAgICApO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/database_interface/MapImage.js\n");

/***/ }),

/***/ "./src/database_interface/Note.js":
/*!****************************************!*\
  !*** ./src/database_interface/Note.js ***!
  \****************************************/
/*! exports provided: Note, NoteInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Note\", function() { return Note; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NoteInterface\", function() { return NoteInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Note data container class.\nclass Note {\n  constructor(id, segmentId, secs, personnelId, note) {\n    this.id = id;\n    this.segmentId = segmentId;\n    this.secs = secs;\n    this.personnelId = personnelId;\n    this.note = note;\n  }\n}\n\n//Note database interaction class.\nclass NoteInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\"id\", \"segment_id\", \"secs\", \"personnel_id\", \"note\"];\n  }\n\n  async get(segmentId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"note\",\n      \"segment_id=\" + segmentId\n    );\n    return data.map(\n      (entry) => new Note(entry[0], entry[1], entry[2], entry[3], entry[4])\n    );\n  }\n\n  async post(segmentId, personnelId, note) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: segmentId,\n      [this.paramNames[3]]: personnelId,\n      [this.paramNames[4]]: note,\n    };\n    await this.serverInterface.sendPostRequest(\"note\", data);\n  }\n\n  async put(id, personnelId = null, note = null) {\n    //Update entry in server table.\n    //Mandatory parameters:\n    const data = { [this.paramNames[0]]: id };\n    //Optional parameters:\n    Object.assign(\n      data,\n      personnelId !== null && { [this.paramNames[3]]: personnelId },\n      note !== null && { [this.paramNames[4]]: note }\n    );\n    await this.serverInterface.sendPutRequest(\"note\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"note\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL05vdGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL05vdGUuanM/ODJkMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9Ob3RlIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIE5vdGUge1xuICBjb25zdHJ1Y3RvcihpZCwgc2VnbWVudElkLCBzZWNzLCBwZXJzb25uZWxJZCwgbm90ZSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnNlZ21lbnRJZCA9IHNlZ21lbnRJZDtcbiAgICB0aGlzLnNlY3MgPSBzZWNzO1xuICAgIHRoaXMucGVyc29ubmVsSWQgPSBwZXJzb25uZWxJZDtcbiAgICB0aGlzLm5vdGUgPSBub3RlO1xuICB9XG59XG5cbi8vTm90ZSBkYXRhYmFzZSBpbnRlcmFjdGlvbiBjbGFzcy5cbmV4cG9ydCBjbGFzcyBOb3RlSW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1wiaWRcIiwgXCJzZWdtZW50X2lkXCIsIFwic2Vjc1wiLCBcInBlcnNvbm5lbF9pZFwiLCBcIm5vdGVcIl07XG4gIH1cblxuICBhc3luYyBnZXQoc2VnbWVudElkKSB7XG4gICAgLy9HZXQgdGFibGUgZGF0YSBmcm9tIHNlcnZlci5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3QoXG4gICAgICBcIm5vdGVcIixcbiAgICAgIFwic2VnbWVudF9pZD1cIiArIHNlZ21lbnRJZFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGEubWFwKFxuICAgICAgKGVudHJ5KSA9PiBuZXcgTm90ZShlbnRyeVswXSwgZW50cnlbMV0sIGVudHJ5WzJdLCBlbnRyeVszXSwgZW50cnlbNF0pXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHBvc3Qoc2VnbWVudElkLCBwZXJzb25uZWxJZCwgbm90ZSkge1xuICAgIC8vQ3JlYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxXV06IHNlZ21lbnRJZCxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbM11dOiBwZXJzb25uZWxJZCxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbNF1dOiBub3RlLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFBvc3RSZXF1ZXN0KFwibm90ZVwiLCBkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIHB1dChpZCwgcGVyc29ubmVsSWQgPSBudWxsLCBub3RlID0gbnVsbCkge1xuICAgIC8vVXBkYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICAvL01hbmRhdG9yeSBwYXJhbWV0ZXJzOlxuICAgIGNvbnN0IGRhdGEgPSB7IFt0aGlzLnBhcmFtTmFtZXNbMF1dOiBpZCB9O1xuICAgIC8vT3B0aW9uYWwgcGFyYW1ldGVyczpcbiAgICBPYmplY3QuYXNzaWduKFxuICAgICAgZGF0YSxcbiAgICAgIHBlcnNvbm5lbElkICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1szXV06IHBlcnNvbm5lbElkIH0sXG4gICAgICBub3RlICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1s0XV06IG5vdGUgfVxuICAgICk7XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFB1dFJlcXVlc3QoXCJub3RlXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGlkKSB7XG4gICAgLy9EZWxldGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmREZWxldGVSZXF1ZXN0KFwibm90ZVwiLCBcImlkPVwiICsgaWQpO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/database_interface/Note.js\n");

/***/ }),

/***/ "./src/database_interface/Performer.js":
/*!*********************************************!*\
  !*** ./src/database_interface/Performer.js ***!
  \*********************************************/
/*! exports provided: Performer, PerformerInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Performer\", function() { return Performer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PerformerInterface\", function() { return PerformerInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Performer data container class.\nclass Performer {\n  constructor(id, institution) {\n    this.id = id;\n    this.institution = institution;\n  }\n}\n\n//Performer database interaction class.\nclass PerformerInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\"id\", \"institution\"];\n  }\n\n  async get() {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\"performer\");\n    return data.map((entry) => new Performer(entry[0], entry[1]));\n  }\n\n  async post(institution) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: institution,\n    };\n    await this.serverInterface.sendPostRequest(\"performer\", data);\n  }\n\n  async put(id, institution) {\n    //Update entry in server table.\n    //Mandatory parameters:\n    const data = { [this.paramNames[0]]: id };\n    //Optional parameters:\n    Object.assign(data, institution !== null && { [this.paramNames[1]]: institution });\n    await this.serverInterface.sendPutRequest(\"performer\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"performer\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1BlcmZvcm1lci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kYXRhYmFzZV9pbnRlcmZhY2UvUGVyZm9ybWVyLmpzP2Y5YzAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vUGVyZm9ybWVyIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFBlcmZvcm1lciB7XG4gIGNvbnN0cnVjdG9yKGlkLCBpbnN0aXR1dGlvbikge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmluc3RpdHV0aW9uID0gaW5zdGl0dXRpb247XG4gIH1cbn1cblxuLy9QZXJmb3JtZXIgZGF0YWJhc2UgaW50ZXJhY3Rpb24gY2xhc3MuXG5leHBvcnQgY2xhc3MgUGVyZm9ybWVySW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1wiaWRcIiwgXCJpbnN0aXR1dGlvblwiXTtcbiAgfVxuXG4gIGFzeW5jIGdldCgpIHtcbiAgICAvL0dldCB0YWJsZSBkYXRhIGZyb20gc2VydmVyLlxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kR2V0UmVxdWVzdChcInBlcmZvcm1lclwiKTtcbiAgICByZXR1cm4gZGF0YS5tYXAoKGVudHJ5KSA9PiBuZXcgUGVyZm9ybWVyKGVudHJ5WzBdLCBlbnRyeVsxXSkpO1xuICB9XG5cbiAgYXN5bmMgcG9zdChpbnN0aXR1dGlvbikge1xuICAgIC8vQ3JlYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxXV06IGluc3RpdHV0aW9uLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFBvc3RSZXF1ZXN0KFwicGVyZm9ybWVyXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgcHV0KGlkLCBpbnN0aXR1dGlvbikge1xuICAgIC8vVXBkYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICAvL01hbmRhdG9yeSBwYXJhbWV0ZXJzOlxuICAgIGNvbnN0IGRhdGEgPSB7IFt0aGlzLnBhcmFtTmFtZXNbMF1dOiBpZCB9O1xuICAgIC8vT3B0aW9uYWwgcGFyYW1ldGVyczpcbiAgICBPYmplY3QuYXNzaWduKGRhdGEsIGluc3RpdHV0aW9uICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1sxXV06IGluc3RpdHV0aW9uIH0pO1xuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRQdXRSZXF1ZXN0KFwicGVyZm9ybWVyXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGlkKSB7XG4gICAgLy9EZWxldGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmREZWxldGVSZXF1ZXN0KFwicGVyZm9ybWVyXCIsIFwiaWQ9XCIgKyBpZCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/database_interface/Performer.js\n");

/***/ }),

/***/ "./src/database_interface/Personnel.js":
/*!*********************************************!*\
  !*** ./src/database_interface/Personnel.js ***!
  \*********************************************/
/*! exports provided: Personnel, PersonnelInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Personnel\", function() { return Personnel; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PersonnelInterface\", function() { return PersonnelInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Personnel data container class.\nclass Personnel {\n  constructor(id, name, institution) {\n    this.id = id;\n    this.name = name;\n    this.institution = institution;\n  }\n}\n\n//Personnel database interaction class.\nclass PersonnelInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\"id\", \"name\", \"institution\"];\n  }\n\n  async get() {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\"personnel\");\n    return data.map((entry) => new Personnel(entry[0], entry[1], entry[2]));\n  }\n\n  async post(name, institution) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: name,\n      [this.paramNames[2]]: institution,\n    };\n    await this.serverInterface.sendPostRequest(\"personnel\", data);\n  }\n\n  async put(id, name, institution) {\n    //Update entry in server table.\n    //Mandatory parameters:\n    const data = { [this.paramNames[0]]: id };\n    //Optional parameters:\n    Object.assign(\n      data,\n      name !== null && { [this.paramNames[1]]: name },\n      institution !== null && { [this.paramNames[2]]: institution }\n    );\n    await this.serverInterface.sendPutRequest(\"personnel\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"personnel\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1BlcnNvbm5lbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kYXRhYmFzZV9pbnRlcmZhY2UvUGVyc29ubmVsLmpzPzQ5NzAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vUGVyc29ubmVsIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFBlcnNvbm5lbCB7XG4gIGNvbnN0cnVjdG9yKGlkLCBuYW1lLCBpbnN0aXR1dGlvbikge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaW5zdGl0dXRpb24gPSBpbnN0aXR1dGlvbjtcbiAgfVxufVxuXG4vL1BlcnNvbm5lbCBkYXRhYmFzZSBpbnRlcmFjdGlvbiBjbGFzcy5cbmV4cG9ydCBjbGFzcyBQZXJzb25uZWxJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UpIHtcbiAgICAvL1NldCBhcmd1bWVudHMgYXMgcHJvcGVydGllcy5cbiAgICB0aGlzLnNlcnZlckludGVyZmFjZSA9IHNlcnZlckludGVyZmFjZTtcbiAgICB0aGlzLnBhcmFtTmFtZXMgPSBbXCJpZFwiLCBcIm5hbWVcIiwgXCJpbnN0aXR1dGlvblwiXTtcbiAgfVxuXG4gIGFzeW5jIGdldCgpIHtcbiAgICAvL0dldCB0YWJsZSBkYXRhIGZyb20gc2VydmVyLlxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kR2V0UmVxdWVzdChcInBlcnNvbm5lbFwiKTtcbiAgICByZXR1cm4gZGF0YS5tYXAoKGVudHJ5KSA9PiBuZXcgUGVyc29ubmVsKGVudHJ5WzBdLCBlbnRyeVsxXSwgZW50cnlbMl0pKTtcbiAgfVxuXG4gIGFzeW5jIHBvc3QobmFtZSwgaW5zdGl0dXRpb24pIHtcbiAgICAvL0NyZWF0ZSBlbnRyeSBpbiBzZXJ2ZXIgdGFibGUuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbMV1dOiBuYW1lLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1syXV06IGluc3RpdHV0aW9uLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFBvc3RSZXF1ZXN0KFwicGVyc29ubmVsXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgcHV0KGlkLCBuYW1lLCBpbnN0aXR1dGlvbikge1xuICAgIC8vVXBkYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICAvL01hbmRhdG9yeSBwYXJhbWV0ZXJzOlxuICAgIGNvbnN0IGRhdGEgPSB7IFt0aGlzLnBhcmFtTmFtZXNbMF1dOiBpZCB9O1xuICAgIC8vT3B0aW9uYWwgcGFyYW1ldGVyczpcbiAgICBPYmplY3QuYXNzaWduKFxuICAgICAgZGF0YSxcbiAgICAgIG5hbWUgIT09IG51bGwgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzFdXTogbmFtZSB9LFxuICAgICAgaW5zdGl0dXRpb24gIT09IG51bGwgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzJdXTogaW5zdGl0dXRpb24gfVxuICAgICk7XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFB1dFJlcXVlc3QoXCJwZXJzb25uZWxcIiwgZGF0YSk7XG4gIH1cblxuICBhc3luYyBkZWxldGUoaWQpIHtcbiAgICAvL0RlbGV0ZSBlbnRyeSBpbiBzZXJ2ZXIgdGFibGUuXG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZERlbGV0ZVJlcXVlc3QoXCJwZXJzb25uZWxcIiwgXCJpZD1cIiArIGlkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/database_interface/Personnel.js\n");

/***/ }),

/***/ "./src/database_interface/Pose.js":
/*!****************************************!*\
  !*** ./src/database_interface/Pose.js ***!
  \****************************************/
/*! exports provided: PoseInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PoseInterface\", function() { return PoseInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Pose database interaction class.\nclass PoseInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"segment_id\",\n      \"lat\",\n      \"lng\",\n      \"pose_source_id\",\n      \"orig_secs\",\n    ];\n  }\n\n  async get(segmentId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"pose\",\n      \"segment_id=\" + segmentId\n    );\n    //Server returns a GeoJSON object in the first position of the response array.\n    return data[0];\n  }\n\n  async post(segmentId, lat, lng, poseSourceId) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[0]]: segmentId,\n      [this.paramNames[1]]: lat,\n      [this.paramNames[2]]: lng,\n      [this.paramNames[3]]: poseSourceId,\n      [this.paramNames[4]]: new Date().getTime() / 1000,\n    };\n    await this.serverInterface.sendPostRequest(\"pose\", data);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1Bvc2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1Bvc2UuanM/Zjg4NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9Qb3NlIGRhdGFiYXNlIGludGVyYWN0aW9uIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFBvc2VJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UpIHtcbiAgICAvL1NldCBhcmd1bWVudHMgYXMgcHJvcGVydGllcy5cbiAgICB0aGlzLnNlcnZlckludGVyZmFjZSA9IHNlcnZlckludGVyZmFjZTtcbiAgICB0aGlzLnBhcmFtTmFtZXMgPSBbXG4gICAgICBcInNlZ21lbnRfaWRcIixcbiAgICAgIFwibGF0XCIsXG4gICAgICBcImxuZ1wiLFxuICAgICAgXCJwb3NlX3NvdXJjZV9pZFwiLFxuICAgICAgXCJvcmlnX3NlY3NcIixcbiAgICBdO1xuICB9XG5cbiAgYXN5bmMgZ2V0KHNlZ21lbnRJZCkge1xuICAgIC8vR2V0IHRhYmxlIGRhdGEgZnJvbSBzZXJ2ZXIuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRHZXRSZXF1ZXN0KFxuICAgICAgXCJwb3NlXCIsXG4gICAgICBcInNlZ21lbnRfaWQ9XCIgKyBzZWdtZW50SWRcbiAgICApO1xuICAgIC8vU2VydmVyIHJldHVybnMgYSBHZW9KU09OIG9iamVjdCBpbiB0aGUgZmlyc3QgcG9zaXRpb24gb2YgdGhlIHJlc3BvbnNlIGFycmF5LlxuICAgIHJldHVybiBkYXRhWzBdO1xuICB9XG5cbiAgYXN5bmMgcG9zdChzZWdtZW50SWQsIGxhdCwgbG5nLCBwb3NlU291cmNlSWQpIHtcbiAgICAvL0NyZWF0ZSBlbnRyeSBpbiBzZXJ2ZXIgdGFibGUuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbMF1dOiBzZWdtZW50SWQsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzFdXTogbGF0LFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1syXV06IGxuZyxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbM11dOiBwb3NlU291cmNlSWQsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzRdXTogbmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFBvc3RSZXF1ZXN0KFwicG9zZVwiLCBkYXRhKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/database_interface/Pose.js\n");

/***/ }),

/***/ "./src/database_interface/PoseSource.js":
/*!**********************************************!*\
  !*** ./src/database_interface/PoseSource.js ***!
  \**********************************************/
/*! exports provided: PoseSource, PoseSourceInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PoseSource\", function() { return PoseSource; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"PoseSourceInterface\", function() { return PoseSourceInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//PoseSource data container class.\nclass PoseSource {\n  constructor(id, key, shortDescription, longDescription) {\n    this.id = id;\n    this.key = key;\n    this.shortDescription = shortDescription;\n    this.longDescription = longDescription;\n  }\n}\n\n//PoseSource database interaction class.\nclass PoseSourceInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\"id\", \"key\", \"short_description\", \"long_description\"];\n  }\n\n  async get() {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\"pose_source\");\n    return data.map(\n      (entry) => new PoseSource(entry[0], entry[1], entry[2], entry[3])\n    );\n  }\n\n  async post(key, shortDescription, longDescription) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: key,\n      [this.paramNames[2]]: shortDescription,\n      [this.paramNames[3]]: longDescription,\n    };\n    await this.serverInterface.sendPostRequest(\"pose_source\", data);\n  }\n\n  async put(id, key, shortDescription, longDescription) {\n    //Update entry in server table.\n    //Mandatory parameters:\n    const data = { [this.paramNames[0]]: id };\n    //Optional parameters:\n    Object.assign(\n      data,\n      key !== null && { [this.paramNames[1]]: key },\n      shortDescription !== null && { [this.paramNames[2]]: shortDescription },\n      longDescription !== null && { [this.paramNames[3]]: longDescription }\n    );\n    await this.serverInterface.sendPutRequest(\"pose_source\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"pose_source\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1Bvc2VTb3VyY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1Bvc2VTb3VyY2UuanM/Nzc2MCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9Qb3NlU291cmNlIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFBvc2VTb3VyY2Uge1xuICBjb25zdHJ1Y3RvcihpZCwga2V5LCBzaG9ydERlc2NyaXB0aW9uLCBsb25nRGVzY3JpcHRpb24pIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy5zaG9ydERlc2NyaXB0aW9uID0gc2hvcnREZXNjcmlwdGlvbjtcbiAgICB0aGlzLmxvbmdEZXNjcmlwdGlvbiA9IGxvbmdEZXNjcmlwdGlvbjtcbiAgfVxufVxuXG4vL1Bvc2VTb3VyY2UgZGF0YWJhc2UgaW50ZXJhY3Rpb24gY2xhc3MuXG5leHBvcnQgY2xhc3MgUG9zZVNvdXJjZUludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKHNlcnZlckludGVyZmFjZSkge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMuc2VydmVySW50ZXJmYWNlID0gc2VydmVySW50ZXJmYWNlO1xuICAgIHRoaXMucGFyYW1OYW1lcyA9IFtcImlkXCIsIFwia2V5XCIsIFwic2hvcnRfZGVzY3JpcHRpb25cIiwgXCJsb25nX2Rlc2NyaXB0aW9uXCJdO1xuICB9XG5cbiAgYXN5bmMgZ2V0KCkge1xuICAgIC8vR2V0IHRhYmxlIGRhdGEgZnJvbSBzZXJ2ZXIuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRHZXRSZXF1ZXN0KFwicG9zZV9zb3VyY2VcIik7XG4gICAgcmV0dXJuIGRhdGEubWFwKFxuICAgICAgKGVudHJ5KSA9PiBuZXcgUG9zZVNvdXJjZShlbnRyeVswXSwgZW50cnlbMV0sIGVudHJ5WzJdLCBlbnRyeVszXSlcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgcG9zdChrZXksIHNob3J0RGVzY3JpcHRpb24sIGxvbmdEZXNjcmlwdGlvbikge1xuICAgIC8vQ3JlYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxXV06IGtleSxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbMl1dOiBzaG9ydERlc2NyaXB0aW9uLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1szXV06IGxvbmdEZXNjcmlwdGlvbixcbiAgICB9O1xuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRQb3N0UmVxdWVzdChcInBvc2Vfc291cmNlXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgcHV0KGlkLCBrZXksIHNob3J0RGVzY3JpcHRpb24sIGxvbmdEZXNjcmlwdGlvbikge1xuICAgIC8vVXBkYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICAvL01hbmRhdG9yeSBwYXJhbWV0ZXJzOlxuICAgIGNvbnN0IGRhdGEgPSB7IFt0aGlzLnBhcmFtTmFtZXNbMF1dOiBpZCB9O1xuICAgIC8vT3B0aW9uYWwgcGFyYW1ldGVyczpcbiAgICBPYmplY3QuYXNzaWduKFxuICAgICAgZGF0YSxcbiAgICAgIGtleSAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbMV1dOiBrZXkgfSxcbiAgICAgIHNob3J0RGVzY3JpcHRpb24gIT09IG51bGwgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzJdXTogc2hvcnREZXNjcmlwdGlvbiB9LFxuICAgICAgbG9uZ0Rlc2NyaXB0aW9uICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1szXV06IGxvbmdEZXNjcmlwdGlvbiB9XG4gICAgKTtcbiAgICBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kUHV0UmVxdWVzdChcInBvc2Vfc291cmNlXCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGlkKSB7XG4gICAgLy9EZWxldGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmREZWxldGVSZXF1ZXN0KFwicG9zZV9zb3VyY2VcIiwgXCJpZD1cIiArIGlkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/database_interface/PoseSource.js\n");

/***/ }),

/***/ "./src/database_interface/Segment.js":
/*!*******************************************!*\
  !*** ./src/database_interface/Segment.js ***!
  \*******************************************/
/*! exports provided: Segment, SegmentInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Segment\", function() { return Segment; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SegmentInterface\", function() { return SegmentInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Segment data container class.\nclass Segment {\n  constructor(\n    id,\n    legId,\n    parentId,\n    startTime,\n    endTime,\n    itoReasonId,\n    itoReason,\n    segmentTypeId,\n    segmentType,\n    obstacle,\n    lighting,\n    slope,\n    lng,\n    lat,\n    local_x,\n    local_y,\n    origStartTime\n  ) {\n    this.id = id;\n    this.legId = legId;\n    this.parentId = parentId;\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.itoReasonId = itoReasonId;\n    this.itoReason = itoReason;\n    this.segmentTypeId = segmentTypeId;\n    this.segmentType = segmentType;\n    this.obstacle = obstacle;\n    this.lighting = lighting;\n    this.slope = slope;\n    this.lng = lng;\n    this.lat = lat;\n    this.local_x = local_x;\n    this.local_y = local_y;\n    this.origStartTime = origStartTime;\n  }\n}\n\n//Segment database interaction class.\nclass SegmentInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"leg_id\",\n      \"parent_id\",\n      \"starttime_secs\",\n      \"endtime_secs\",\n      \"ito_reason_id\",\n      \"ito_reason\",\n      \"segment_type_id\",\n      \"segment_type\",\n      \"obstacle\",\n      \"lighting\",\n      \"slope\",\n      \"lng\",\n      \"lat\",\n      \"local_x\",\n      \"local_y\",\n      \"orig_starttime_secs\",\n    ];\n  }\n\n  async get(legId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"segment\",\n      \"leg_id=\" + legId\n    );\n    return data.map(\n      (entry) =>\n        new Segment(\n          entry[0],\n          entry[1],\n          entry[2],\n          entry[3],\n          entry[4],\n          entry[5],\n          entry[6],\n          entry[7],\n          entry[8],\n          entry[9],\n          entry[10],\n          entry[11],\n          entry[12],\n          entry[13],\n          entry[14],\n          entry[15],\n          entry[16]\n        )\n    );\n  }\n\n  async post(legId, itoReasonId, segmentTypeId, lng, lat, local_x, local_y) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: legId,\n      [this.paramNames[5]]: itoReasonId,\n      [this.paramNames[7]]: segmentTypeId,\n      [this.paramNames[12]]: lng,\n      [this.paramNames[13]]: lat,\n      [this.paramNames[14]]: local_x,\n      [this.paramNames[15]]: local_y,\n      [this.paramNames[16]]: new Date().getTime() / 1000,\n    };\n    await this.serverInterface.sendPostRequest(\"segment\", data);\n  }\n\n  async put(\n    id,\n    action,\n    itoReasonId = null,\n    obstacle = null,\n    lighting = null,\n    slope = null\n  ) {\n    //Update entry in server table.\n    //The action parameter can be either \"edit\" or \"close\".\n    //Mandatory parameters:\n    const data = {\n      [this.paramNames[0]]: id,\n      [\"action\"]: action,\n    };\n    //Optional parameters:\n    Object.assign(\n      data,\n      itoReasonId && { [this.paramNames[5]]: itoReasonId },\n      obstacle && { [this.paramNames[9]]: obstacle },\n      lighting && { [this.paramNames[10]]: lighting },\n      slope && { [this.paramNames[11]]: slope }\n    );\n    //Update entry in server table.\n    await this.serverInterface.sendPutRequest(\"segment\", data);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1NlZ21lbnQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1NlZ21lbnQuanM/NjhmYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9TZWdtZW50IGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFNlZ21lbnQge1xuICBjb25zdHJ1Y3RvcihcbiAgICBpZCxcbiAgICBsZWdJZCxcbiAgICBwYXJlbnRJZCxcbiAgICBzdGFydFRpbWUsXG4gICAgZW5kVGltZSxcbiAgICBpdG9SZWFzb25JZCxcbiAgICBpdG9SZWFzb24sXG4gICAgc2VnbWVudFR5cGVJZCxcbiAgICBzZWdtZW50VHlwZSxcbiAgICBvYnN0YWNsZSxcbiAgICBsaWdodGluZyxcbiAgICBzbG9wZSxcbiAgICBsbmcsXG4gICAgbGF0LFxuICAgIGxvY2FsX3gsXG4gICAgbG9jYWxfeSxcbiAgICBvcmlnU3RhcnRUaW1lXG4gICkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmxlZ0lkID0gbGVnSWQ7XG4gICAgdGhpcy5wYXJlbnRJZCA9IHBhcmVudElkO1xuICAgIHRoaXMuc3RhcnRUaW1lID0gc3RhcnRUaW1lO1xuICAgIHRoaXMuZW5kVGltZSA9IGVuZFRpbWU7XG4gICAgdGhpcy5pdG9SZWFzb25JZCA9IGl0b1JlYXNvbklkO1xuICAgIHRoaXMuaXRvUmVhc29uID0gaXRvUmVhc29uO1xuICAgIHRoaXMuc2VnbWVudFR5cGVJZCA9IHNlZ21lbnRUeXBlSWQ7XG4gICAgdGhpcy5zZWdtZW50VHlwZSA9IHNlZ21lbnRUeXBlO1xuICAgIHRoaXMub2JzdGFjbGUgPSBvYnN0YWNsZTtcbiAgICB0aGlzLmxpZ2h0aW5nID0gbGlnaHRpbmc7XG4gICAgdGhpcy5zbG9wZSA9IHNsb3BlO1xuICAgIHRoaXMubG5nID0gbG5nO1xuICAgIHRoaXMubGF0ID0gbGF0O1xuICAgIHRoaXMubG9jYWxfeCA9IGxvY2FsX3g7XG4gICAgdGhpcy5sb2NhbF95ID0gbG9jYWxfeTtcbiAgICB0aGlzLm9yaWdTdGFydFRpbWUgPSBvcmlnU3RhcnRUaW1lO1xuICB9XG59XG5cbi8vU2VnbWVudCBkYXRhYmFzZSBpbnRlcmFjdGlvbiBjbGFzcy5cbmV4cG9ydCBjbGFzcyBTZWdtZW50SW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1xuICAgICAgXCJpZFwiLFxuICAgICAgXCJsZWdfaWRcIixcbiAgICAgIFwicGFyZW50X2lkXCIsXG4gICAgICBcInN0YXJ0dGltZV9zZWNzXCIsXG4gICAgICBcImVuZHRpbWVfc2Vjc1wiLFxuICAgICAgXCJpdG9fcmVhc29uX2lkXCIsXG4gICAgICBcIml0b19yZWFzb25cIixcbiAgICAgIFwic2VnbWVudF90eXBlX2lkXCIsXG4gICAgICBcInNlZ21lbnRfdHlwZVwiLFxuICAgICAgXCJvYnN0YWNsZVwiLFxuICAgICAgXCJsaWdodGluZ1wiLFxuICAgICAgXCJzbG9wZVwiLFxuICAgICAgXCJsbmdcIixcbiAgICAgIFwibGF0XCIsXG4gICAgICBcImxvY2FsX3hcIixcbiAgICAgIFwibG9jYWxfeVwiLFxuICAgICAgXCJvcmlnX3N0YXJ0dGltZV9zZWNzXCIsXG4gICAgXTtcbiAgfVxuXG4gIGFzeW5jIGdldChsZWdJZCkge1xuICAgIC8vR2V0IHRhYmxlIGRhdGEgZnJvbSBzZXJ2ZXIuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRHZXRSZXF1ZXN0KFxuICAgICAgXCJzZWdtZW50XCIsXG4gICAgICBcImxlZ19pZD1cIiArIGxlZ0lkXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YS5tYXAoXG4gICAgICAoZW50cnkpID0+XG4gICAgICAgIG5ldyBTZWdtZW50KFxuICAgICAgICAgIGVudHJ5WzBdLFxuICAgICAgICAgIGVudHJ5WzFdLFxuICAgICAgICAgIGVudHJ5WzJdLFxuICAgICAgICAgIGVudHJ5WzNdLFxuICAgICAgICAgIGVudHJ5WzRdLFxuICAgICAgICAgIGVudHJ5WzVdLFxuICAgICAgICAgIGVudHJ5WzZdLFxuICAgICAgICAgIGVudHJ5WzddLFxuICAgICAgICAgIGVudHJ5WzhdLFxuICAgICAgICAgIGVudHJ5WzldLFxuICAgICAgICAgIGVudHJ5WzEwXSxcbiAgICAgICAgICBlbnRyeVsxMV0sXG4gICAgICAgICAgZW50cnlbMTJdLFxuICAgICAgICAgIGVudHJ5WzEzXSxcbiAgICAgICAgICBlbnRyeVsxNF0sXG4gICAgICAgICAgZW50cnlbMTVdLFxuICAgICAgICAgIGVudHJ5WzE2XVxuICAgICAgICApXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHBvc3QobGVnSWQsIGl0b1JlYXNvbklkLCBzZWdtZW50VHlwZUlkLCBsbmcsIGxhdCwgbG9jYWxfeCwgbG9jYWxfeSkge1xuICAgIC8vQ3JlYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxXV06IGxlZ0lkLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1s1XV06IGl0b1JlYXNvbklkLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1s3XV06IHNlZ21lbnRUeXBlSWQsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzEyXV06IGxuZyxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbMTNdXTogbGF0LFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxNF1dOiBsb2NhbF94LFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxNV1dOiBsb2NhbF95LFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxNl1dOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDAsXG4gICAgfTtcbiAgICBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kUG9zdFJlcXVlc3QoXCJzZWdtZW50XCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgcHV0KFxuICAgIGlkLFxuICAgIGFjdGlvbixcbiAgICBpdG9SZWFzb25JZCA9IG51bGwsXG4gICAgb2JzdGFjbGUgPSBudWxsLFxuICAgIGxpZ2h0aW5nID0gbnVsbCxcbiAgICBzbG9wZSA9IG51bGxcbiAgKSB7XG4gICAgLy9VcGRhdGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIC8vVGhlIGFjdGlvbiBwYXJhbWV0ZXIgY2FuIGJlIGVpdGhlciBcImVkaXRcIiBvciBcImNsb3NlXCIuXG4gICAgLy9NYW5kYXRvcnkgcGFyYW1ldGVyczpcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgW3RoaXMucGFyYW1OYW1lc1swXV06IGlkLFxuICAgICAgW1wiYWN0aW9uXCJdOiBhY3Rpb24sXG4gICAgfTtcbiAgICAvL09wdGlvbmFsIHBhcmFtZXRlcnM6XG4gICAgT2JqZWN0LmFzc2lnbihcbiAgICAgIGRhdGEsXG4gICAgICBpdG9SZWFzb25JZCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNV1dOiBpdG9SZWFzb25JZCB9LFxuICAgICAgb2JzdGFjbGUgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzldXTogb2JzdGFjbGUgfSxcbiAgICAgIGxpZ2h0aW5nICYmIHsgW3RoaXMucGFyYW1OYW1lc1sxMF1dOiBsaWdodGluZyB9LFxuICAgICAgc2xvcGUgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzExXV06IHNsb3BlIH1cbiAgICApO1xuICAgIC8vVXBkYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kUHV0UmVxdWVzdChcInNlZ21lbnRcIiwgZGF0YSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/database_interface/Segment.js\n");

/***/ }),

/***/ "./src/database_interface/Shift.js":
/*!*****************************************!*\
  !*** ./src/database_interface/Shift.js ***!
  \*****************************************/
/*! exports provided: Shift, ShiftInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Shift\", function() { return Shift; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShiftInterface\", function() { return ShiftInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Shift data container class.\nclass Shift {\n  constructor(\n    id,\n    testEventId,\n    startTime,\n    endTime,\n    testAdministratorId,\n    testDirectorId,\n    safetyOfficerId,\n    robotOperatorId,\n    performerId,\n    testIntent,\n    workspace,\n    vehicleId,\n    note,\n    number\n  ) {\n    this.id = id;\n    this.testEventId = testEventId;\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.testAdministratorId = testAdministratorId;\n    this.testDirectorId = testDirectorId;\n    this.safetyOfficerId = safetyOfficerId;\n    this.robotOperatorId = robotOperatorId;\n    this.performerId = performerId;\n    this.testIntent = testIntent;\n    this.workspace = workspace;\n    this.vehicleId = vehicleId;\n    this.note = note;\n    this.number = number;\n  }\n}\n\n//Shift database interaction class.\nclass ShiftInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"test_event_id\",\n      \"starttime_secs\",\n      \"endtime_secs\",\n      \"test_administrator_id\",\n      \"test_director_id\",\n      \"safety_officer_id\",\n      \"robot_operator_id\",\n      \"performer_id\",\n      \"test_intent\",\n      \"workspace\",\n      \"vehicle_id\",\n      \"note\",\n      \"number\",\n    ];\n  }\n\n  async get(testEventId) {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\n      \"shift\",\n      \"test_event_id=\" + testEventId\n    );\n    return data.map(\n      (entry) =>\n        new Shift(\n          entry[0],\n          entry[1],\n          entry[2],\n          entry[3],\n          entry[4],\n          entry[5],\n          entry[6],\n          entry[7],\n          entry[8],\n          entry[9],\n          entry[10],\n          entry[11],\n          entry[12],\n          entry[13]\n        )\n    );\n  }\n\n  async post(\n    testEventId,\n    testAdministratorId,\n    testDirectorId,\n    safetyOfficerId,\n    robotOperatorId,\n    performerId,\n    testIntent,\n    workspace,\n    vehicleId,\n    note\n  ) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: testEventId,\n      [this.paramNames[4]]: testAdministratorId,\n      [this.paramNames[5]]: testDirectorId,\n      [this.paramNames[6]]: safetyOfficerId,\n      [this.paramNames[7]]: robotOperatorId,\n      [this.paramNames[8]]: performerId,\n      [this.paramNames[9]]: testIntent,\n      [this.paramNames[10]]: workspace,\n      [this.paramNames[11]]: vehicleId,\n      [this.paramNames[12]]: note,\n    };\n    await this.serverInterface.sendPostRequest(\"shift\", data);\n  }\n\n  async put(\n    id,\n    action,\n    testAdministratorId = null,\n    testDirectorId = null,\n    safetyOfficerId = null,\n    robotOperatorId = null,\n    performerId = null,\n    testIntent = null,\n    workspace = null,\n    vehicleId = null,\n    note = null\n  ) {\n    //Update entry in server table.\n    //The action parameter can be either \"edit\" or \"close\".\n    //Mandatory parameters:\n    const data = {\n      [this.paramNames[0]]: id,\n      [\"action\"]: action,\n    };\n    //Optional parameters:\n    Object.assign(\n      data,\n      testAdministratorId !== null && { [this.paramNames[4]]: testAdministratorId },\n      testDirectorId !== null && { [this.paramNames[5]]: testDirectorId },\n      safetyOfficerId !== null && { [this.paramNames[6]]: safetyOfficerId },\n      robotOperatorId !== null && { [this.paramNames[7]]: robotOperatorId },\n      performerId !== null && { [this.paramNames[8]]: performerId },\n      testIntent !== null && { [this.paramNames[9]]: testIntent },\n      workspace !== null && { [this.paramNames[10]]: workspace },\n      vehicleId !== null && { [this.paramNames[11]]: vehicleId },\n      note !== null && { [this.paramNames[12]]: note }\n    );\n    await this.serverInterface.sendPutRequest(\"shift\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"shift\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1NoaWZ0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RhdGFiYXNlX2ludGVyZmFjZS9TaGlmdC5qcz9hMzdhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG4vL1NoaWZ0IGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFNoaWZ0IHtcbiAgY29uc3RydWN0b3IoXG4gICAgaWQsXG4gICAgdGVzdEV2ZW50SWQsXG4gICAgc3RhcnRUaW1lLFxuICAgIGVuZFRpbWUsXG4gICAgdGVzdEFkbWluaXN0cmF0b3JJZCxcbiAgICB0ZXN0RGlyZWN0b3JJZCxcbiAgICBzYWZldHlPZmZpY2VySWQsXG4gICAgcm9ib3RPcGVyYXRvcklkLFxuICAgIHBlcmZvcm1lcklkLFxuICAgIHRlc3RJbnRlbnQsXG4gICAgd29ya3NwYWNlLFxuICAgIHZlaGljbGVJZCxcbiAgICBub3RlLFxuICAgIG51bWJlclxuICApIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy50ZXN0RXZlbnRJZCA9IHRlc3RFdmVudElkO1xuICAgIHRoaXMuc3RhcnRUaW1lID0gc3RhcnRUaW1lO1xuICAgIHRoaXMuZW5kVGltZSA9IGVuZFRpbWU7XG4gICAgdGhpcy50ZXN0QWRtaW5pc3RyYXRvcklkID0gdGVzdEFkbWluaXN0cmF0b3JJZDtcbiAgICB0aGlzLnRlc3REaXJlY3RvcklkID0gdGVzdERpcmVjdG9ySWQ7XG4gICAgdGhpcy5zYWZldHlPZmZpY2VySWQgPSBzYWZldHlPZmZpY2VySWQ7XG4gICAgdGhpcy5yb2JvdE9wZXJhdG9ySWQgPSByb2JvdE9wZXJhdG9ySWQ7XG4gICAgdGhpcy5wZXJmb3JtZXJJZCA9IHBlcmZvcm1lcklkO1xuICAgIHRoaXMudGVzdEludGVudCA9IHRlc3RJbnRlbnQ7XG4gICAgdGhpcy53b3Jrc3BhY2UgPSB3b3Jrc3BhY2U7XG4gICAgdGhpcy52ZWhpY2xlSWQgPSB2ZWhpY2xlSWQ7XG4gICAgdGhpcy5ub3RlID0gbm90ZTtcbiAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgfVxufVxuXG4vL1NoaWZ0IGRhdGFiYXNlIGludGVyYWN0aW9uIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFNoaWZ0SW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1xuICAgICAgXCJpZFwiLFxuICAgICAgXCJ0ZXN0X2V2ZW50X2lkXCIsXG4gICAgICBcInN0YXJ0dGltZV9zZWNzXCIsXG4gICAgICBcImVuZHRpbWVfc2Vjc1wiLFxuICAgICAgXCJ0ZXN0X2FkbWluaXN0cmF0b3JfaWRcIixcbiAgICAgIFwidGVzdF9kaXJlY3Rvcl9pZFwiLFxuICAgICAgXCJzYWZldHlfb2ZmaWNlcl9pZFwiLFxuICAgICAgXCJyb2JvdF9vcGVyYXRvcl9pZFwiLFxuICAgICAgXCJwZXJmb3JtZXJfaWRcIixcbiAgICAgIFwidGVzdF9pbnRlbnRcIixcbiAgICAgIFwid29ya3NwYWNlXCIsXG4gICAgICBcInZlaGljbGVfaWRcIixcbiAgICAgIFwibm90ZVwiLFxuICAgICAgXCJudW1iZXJcIixcbiAgICBdO1xuICB9XG5cbiAgYXN5bmMgZ2V0KHRlc3RFdmVudElkKSB7XG4gICAgLy9HZXQgdGFibGUgZGF0YSBmcm9tIHNlcnZlci5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3QoXG4gICAgICBcInNoaWZ0XCIsXG4gICAgICBcInRlc3RfZXZlbnRfaWQ9XCIgKyB0ZXN0RXZlbnRJZFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGEubWFwKFxuICAgICAgKGVudHJ5KSA9PlxuICAgICAgICBuZXcgU2hpZnQoXG4gICAgICAgICAgZW50cnlbMF0sXG4gICAgICAgICAgZW50cnlbMV0sXG4gICAgICAgICAgZW50cnlbMl0sXG4gICAgICAgICAgZW50cnlbM10sXG4gICAgICAgICAgZW50cnlbNF0sXG4gICAgICAgICAgZW50cnlbNV0sXG4gICAgICAgICAgZW50cnlbNl0sXG4gICAgICAgICAgZW50cnlbN10sXG4gICAgICAgICAgZW50cnlbOF0sXG4gICAgICAgICAgZW50cnlbOV0sXG4gICAgICAgICAgZW50cnlbMTBdLFxuICAgICAgICAgIGVudHJ5WzExXSxcbiAgICAgICAgICBlbnRyeVsxMl0sXG4gICAgICAgICAgZW50cnlbMTNdXG4gICAgICAgIClcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgcG9zdChcbiAgICB0ZXN0RXZlbnRJZCxcbiAgICB0ZXN0QWRtaW5pc3RyYXRvcklkLFxuICAgIHRlc3REaXJlY3RvcklkLFxuICAgIHNhZmV0eU9mZmljZXJJZCxcbiAgICByb2JvdE9wZXJhdG9ySWQsXG4gICAgcGVyZm9ybWVySWQsXG4gICAgdGVzdEludGVudCxcbiAgICB3b3Jrc3BhY2UsXG4gICAgdmVoaWNsZUlkLFxuICAgIG5vdGVcbiAgKSB7XG4gICAgLy9DcmVhdGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzFdXTogdGVzdEV2ZW50SWQsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzRdXTogdGVzdEFkbWluaXN0cmF0b3JJZCxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbNV1dOiB0ZXN0RGlyZWN0b3JJZCxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbNl1dOiBzYWZldHlPZmZpY2VySWQsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzddXTogcm9ib3RPcGVyYXRvcklkLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1s4XV06IHBlcmZvcm1lcklkLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1s5XV06IHRlc3RJbnRlbnQsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzEwXV06IHdvcmtzcGFjZSxcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbMTFdXTogdmVoaWNsZUlkLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1sxMl1dOiBub3RlLFxuICAgIH07XG4gICAgYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZFBvc3RSZXF1ZXN0KFwic2hpZnRcIiwgZGF0YSk7XG4gIH1cblxuICBhc3luYyBwdXQoXG4gICAgaWQsXG4gICAgYWN0aW9uLFxuICAgIHRlc3RBZG1pbmlzdHJhdG9ySWQgPSBudWxsLFxuICAgIHRlc3REaXJlY3RvcklkID0gbnVsbCxcbiAgICBzYWZldHlPZmZpY2VySWQgPSBudWxsLFxuICAgIHJvYm90T3BlcmF0b3JJZCA9IG51bGwsXG4gICAgcGVyZm9ybWVySWQgPSBudWxsLFxuICAgIHRlc3RJbnRlbnQgPSBudWxsLFxuICAgIHdvcmtzcGFjZSA9IG51bGwsXG4gICAgdmVoaWNsZUlkID0gbnVsbCxcbiAgICBub3RlID0gbnVsbFxuICApIHtcbiAgICAvL1VwZGF0ZSBlbnRyeSBpbiBzZXJ2ZXIgdGFibGUuXG4gICAgLy9UaGUgYWN0aW9uIHBhcmFtZXRlciBjYW4gYmUgZWl0aGVyIFwiZWRpdFwiIG9yIFwiY2xvc2VcIi5cbiAgICAvL01hbmRhdG9yeSBwYXJhbWV0ZXJzOlxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzBdXTogaWQsXG4gICAgICBbXCJhY3Rpb25cIl06IGFjdGlvbixcbiAgICB9O1xuICAgIC8vT3B0aW9uYWwgcGFyYW1ldGVyczpcbiAgICBPYmplY3QuYXNzaWduKFxuICAgICAgZGF0YSxcbiAgICAgIHRlc3RBZG1pbmlzdHJhdG9ySWQgIT09IG51bGwgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzRdXTogdGVzdEFkbWluaXN0cmF0b3JJZCB9LFxuICAgICAgdGVzdERpcmVjdG9ySWQgIT09IG51bGwgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzVdXTogdGVzdERpcmVjdG9ySWQgfSxcbiAgICAgIHNhZmV0eU9mZmljZXJJZCAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNl1dOiBzYWZldHlPZmZpY2VySWQgfSxcbiAgICAgIHJvYm90T3BlcmF0b3JJZCAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbN11dOiByb2JvdE9wZXJhdG9ySWQgfSxcbiAgICAgIHBlcmZvcm1lcklkICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1s4XV06IHBlcmZvcm1lcklkIH0sXG4gICAgICB0ZXN0SW50ZW50ICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1s5XV06IHRlc3RJbnRlbnQgfSxcbiAgICAgIHdvcmtzcGFjZSAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbMTBdXTogd29ya3NwYWNlIH0sXG4gICAgICB2ZWhpY2xlSWQgIT09IG51bGwgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzExXV06IHZlaGljbGVJZCB9LFxuICAgICAgbm90ZSAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbMTJdXTogbm90ZSB9XG4gICAgKTtcbiAgICBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kUHV0UmVxdWVzdChcInNoaWZ0XCIsIGRhdGEpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlKGlkKSB7XG4gICAgLy9EZWxldGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmREZWxldGVSZXF1ZXN0KFwic2hpZnRcIiwgXCJpZD1cIiArIGlkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/database_interface/Shift.js\n");

/***/ }),

/***/ "./src/database_interface/TestEvent.js":
/*!*********************************************!*\
  !*** ./src/database_interface/TestEvent.js ***!
  \*********************************************/
/*! exports provided: TestEvent, TestEventInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestEvent\", function() { return TestEvent; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestEventInterface\", function() { return TestEventInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//TestEvent data container class.\nclass TestEvent {\n  constructor(id, startTime, endTime, location, version, timeZone, note) {\n    this.id = id;\n    this.startTime = startTime;\n    this.endTime = endTime;\n    this.location = location;\n    this.version = version;\n    this.timeZone = timeZone;\n    this.note = note;\n  }\n}\n\n//TestEvent database interaction class.\nclass TestEventInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"starttime_secs\",\n      \"endtime_secs\",\n      \"location\",\n      \"version\",\n      \"time_zone\",\n      \"note\",\n    ];\n  }\n\n  async get() {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\"test_event\");\n    return data.map(\n      (entry) =>\n        new TestEvent(\n          entry[0],\n          entry[1],\n          entry[2],\n          entry[3],\n          entry[4],\n          entry[5],\n          entry[6]\n        )\n    );\n  }\n\n  async post(location, version, timeZone, note) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[3]]: location,\n      [this.paramNames[4]]: version,\n      [this.paramNames[5]]: timeZone,\n      [this.paramNames[6]]: note,\n    };\n    await this.serverInterface.sendPostRequest(\"test_event\", data);\n  }\n\n  async put(\n    id,\n    action,\n    location = null,\n    version = null,\n    timeZone = null,\n    note = null\n  ) {\n    //Update entry in server table.\n    //The action parameter can be either \"edit\" or \"close\".\n    //Mandatory parameters:\n    const data = {\n      [this.paramNames[0]]: id,\n      [\"action\"]: action,\n    };\n    //Optional parameters:\n    Object.assign(\n      data,\n      location !== null && { [this.paramNames[3]]: location },\n      version !== null && { [this.paramNames[4]]: version },\n      timeZone !== null && { [this.paramNames[5]]: timeZone },\n      note !== null && { [this.paramNames[6]]: note }\n    );\n    await this.serverInterface.sendPutRequest(\"test_event\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"test_event\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1Rlc3RFdmVudC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9kYXRhYmFzZV9pbnRlcmZhY2UvVGVzdEV2ZW50LmpzPzZmZGIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vVGVzdEV2ZW50IGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFRlc3RFdmVudCB7XG4gIGNvbnN0cnVjdG9yKGlkLCBzdGFydFRpbWUsIGVuZFRpbWUsIGxvY2F0aW9uLCB2ZXJzaW9uLCB0aW1lWm9uZSwgbm90ZSkge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IHN0YXJ0VGltZTtcbiAgICB0aGlzLmVuZFRpbWUgPSBlbmRUaW1lO1xuICAgIHRoaXMubG9jYXRpb24gPSBsb2NhdGlvbjtcbiAgICB0aGlzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgIHRoaXMudGltZVpvbmUgPSB0aW1lWm9uZTtcbiAgICB0aGlzLm5vdGUgPSBub3RlO1xuICB9XG59XG5cbi8vVGVzdEV2ZW50IGRhdGFiYXNlIGludGVyYWN0aW9uIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFRlc3RFdmVudEludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKHNlcnZlckludGVyZmFjZSkge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMuc2VydmVySW50ZXJmYWNlID0gc2VydmVySW50ZXJmYWNlO1xuICAgIHRoaXMucGFyYW1OYW1lcyA9IFtcbiAgICAgIFwiaWRcIixcbiAgICAgIFwic3RhcnR0aW1lX3NlY3NcIixcbiAgICAgIFwiZW5kdGltZV9zZWNzXCIsXG4gICAgICBcImxvY2F0aW9uXCIsXG4gICAgICBcInZlcnNpb25cIixcbiAgICAgIFwidGltZV96b25lXCIsXG4gICAgICBcIm5vdGVcIixcbiAgICBdO1xuICB9XG5cbiAgYXN5bmMgZ2V0KCkge1xuICAgIC8vR2V0IHRhYmxlIGRhdGEgZnJvbSBzZXJ2ZXIuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRHZXRSZXF1ZXN0KFwidGVzdF9ldmVudFwiKTtcbiAgICByZXR1cm4gZGF0YS5tYXAoXG4gICAgICAoZW50cnkpID0+XG4gICAgICAgIG5ldyBUZXN0RXZlbnQoXG4gICAgICAgICAgZW50cnlbMF0sXG4gICAgICAgICAgZW50cnlbMV0sXG4gICAgICAgICAgZW50cnlbMl0sXG4gICAgICAgICAgZW50cnlbM10sXG4gICAgICAgICAgZW50cnlbNF0sXG4gICAgICAgICAgZW50cnlbNV0sXG4gICAgICAgICAgZW50cnlbNl1cbiAgICAgICAgKVxuICAgICk7XG4gIH1cblxuICBhc3luYyBwb3N0KGxvY2F0aW9uLCB2ZXJzaW9uLCB0aW1lWm9uZSwgbm90ZSkge1xuICAgIC8vQ3JlYXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgW3RoaXMucGFyYW1OYW1lc1szXV06IGxvY2F0aW9uLFxuICAgICAgW3RoaXMucGFyYW1OYW1lc1s0XV06IHZlcnNpb24sXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzVdXTogdGltZVpvbmUsXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzZdXTogbm90ZSxcbiAgICB9O1xuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRQb3N0UmVxdWVzdChcInRlc3RfZXZlbnRcIiwgZGF0YSk7XG4gIH1cblxuICBhc3luYyBwdXQoXG4gICAgaWQsXG4gICAgYWN0aW9uLFxuICAgIGxvY2F0aW9uID0gbnVsbCxcbiAgICB2ZXJzaW9uID0gbnVsbCxcbiAgICB0aW1lWm9uZSA9IG51bGwsXG4gICAgbm90ZSA9IG51bGxcbiAgKSB7XG4gICAgLy9VcGRhdGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIC8vVGhlIGFjdGlvbiBwYXJhbWV0ZXIgY2FuIGJlIGVpdGhlciBcImVkaXRcIiBvciBcImNsb3NlXCIuXG4gICAgLy9NYW5kYXRvcnkgcGFyYW1ldGVyczpcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgW3RoaXMucGFyYW1OYW1lc1swXV06IGlkLFxuICAgICAgW1wiYWN0aW9uXCJdOiBhY3Rpb24sXG4gICAgfTtcbiAgICAvL09wdGlvbmFsIHBhcmFtZXRlcnM6XG4gICAgT2JqZWN0LmFzc2lnbihcbiAgICAgIGRhdGEsXG4gICAgICBsb2NhdGlvbiAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbM11dOiBsb2NhdGlvbiB9LFxuICAgICAgdmVyc2lvbiAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNF1dOiB2ZXJzaW9uIH0sXG4gICAgICB0aW1lWm9uZSAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNV1dOiB0aW1lWm9uZSB9LFxuICAgICAgbm90ZSAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNl1dOiBub3RlIH1cbiAgICApO1xuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRQdXRSZXF1ZXN0KFwidGVzdF9ldmVudFwiLCBkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZShpZCkge1xuICAgIC8vRGVsZXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kRGVsZXRlUmVxdWVzdChcInRlc3RfZXZlbnRcIiwgXCJpZD1cIiArIGlkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/database_interface/TestEvent.js\n");

/***/ }),

/***/ "./src/database_interface/Vehicle.js":
/*!*******************************************!*\
  !*** ./src/database_interface/Vehicle.js ***!
  \*******************************************/
/*! exports provided: Vehicle, VehicleInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vehicle\", function() { return Vehicle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VehicleInterface\", function() { return VehicleInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Vehicle data container class.\nclass Vehicle {\n  constructor(\n    id,\n    key,\n    shortDescription,\n    longDescription,\n    institution,\n    configuration\n  ) {\n    this.id = id;\n    this.key = key;\n    this.shortDescription = shortDescription;\n    this.longDescription = longDescription;\n    this.institution = institution;\n    this.configuration = configuration;\n  }\n}\n\n//Vehicle database interaction class.\nclass VehicleInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\n      \"id\",\n      \"key\",\n      \"short_description\",\n      \"long_description\",\n      \"institution\",\n      \"configuration\",\n    ];\n  }\n\n  async get() {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\"vehicle\");\n    return data.map(\n      (entry) =>\n        new Vehicle(entry[0], entry[1], entry[2], entry[3], entry[4], entry[5])\n    );\n  }\n\n  async post(\n    key,\n    shortDescription,\n    longDescription,\n    institution,\n    configuration\n  ) {\n    //Create entry in server table.\n    const data = {\n      [this.paramNames[1]]: key,\n      [this.paramNames[2]]: shortDescription,\n      [this.paramNames[3]]: longDescription,\n      [this.paramNames[4]]: institution,\n      [this.paramNames[5]]: configuration,\n    };\n    await this.serverInterface.sendPostRequest(\"vehicle\", data);\n  }\n\n  async put(\n    id,\n    key,\n    shortDescription,\n    longDescription,\n    institution,\n    configuration\n  ) {\n    //Update entry in server table.\n    //Mandatory parameters:\n    const data = { [this.paramNames[0]]: id };\n    //Optional parameters:\n    Object.assign(\n      data,\n      key !== null && { [this.paramNames[1]]: key },\n      shortDescription !== null && { [this.paramNames[2]]: shortDescription },\n      longDescription !== null && { [this.paramNames[3]]: longDescription },\n      institution !== null && { [this.paramNames[4]]: institution },\n      configuration !== null && { [this.paramNames[5]]: configuration }\n    );\n    await this.serverInterface.sendPutRequest(\"vehicle\", data);\n  }\n\n  async delete(id) {\n    //Delete entry in server table.\n    await this.serverInterface.sendDeleteRequest(\"vehicle\", \"id=\" + id);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1ZlaGljbGUuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1ZlaGljbGUuanM/NjE0NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9WZWhpY2xlIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFZlaGljbGUge1xuICBjb25zdHJ1Y3RvcihcbiAgICBpZCxcbiAgICBrZXksXG4gICAgc2hvcnREZXNjcmlwdGlvbixcbiAgICBsb25nRGVzY3JpcHRpb24sXG4gICAgaW5zdGl0dXRpb24sXG4gICAgY29uZmlndXJhdGlvblxuICApIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgdGhpcy5zaG9ydERlc2NyaXB0aW9uID0gc2hvcnREZXNjcmlwdGlvbjtcbiAgICB0aGlzLmxvbmdEZXNjcmlwdGlvbiA9IGxvbmdEZXNjcmlwdGlvbjtcbiAgICB0aGlzLmluc3RpdHV0aW9uID0gaW5zdGl0dXRpb247XG4gICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbjtcbiAgfVxufVxuXG4vL1ZlaGljbGUgZGF0YWJhc2UgaW50ZXJhY3Rpb24gY2xhc3MuXG5leHBvcnQgY2xhc3MgVmVoaWNsZUludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKHNlcnZlckludGVyZmFjZSkge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMuc2VydmVySW50ZXJmYWNlID0gc2VydmVySW50ZXJmYWNlO1xuICAgIHRoaXMucGFyYW1OYW1lcyA9IFtcbiAgICAgIFwiaWRcIixcbiAgICAgIFwia2V5XCIsXG4gICAgICBcInNob3J0X2Rlc2NyaXB0aW9uXCIsXG4gICAgICBcImxvbmdfZGVzY3JpcHRpb25cIixcbiAgICAgIFwiaW5zdGl0dXRpb25cIixcbiAgICAgIFwiY29uZmlndXJhdGlvblwiLFxuICAgIF07XG4gIH1cblxuICBhc3luYyBnZXQoKSB7XG4gICAgLy9HZXQgdGFibGUgZGF0YSBmcm9tIHNlcnZlci5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5zZXJ2ZXJJbnRlcmZhY2Uuc2VuZEdldFJlcXVlc3QoXCJ2ZWhpY2xlXCIpO1xuICAgIHJldHVybiBkYXRhLm1hcChcbiAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgbmV3IFZlaGljbGUoZW50cnlbMF0sIGVudHJ5WzFdLCBlbnRyeVsyXSwgZW50cnlbM10sIGVudHJ5WzRdLCBlbnRyeVs1XSlcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgcG9zdChcbiAgICBrZXksXG4gICAgc2hvcnREZXNjcmlwdGlvbixcbiAgICBsb25nRGVzY3JpcHRpb24sXG4gICAgaW5zdGl0dXRpb24sXG4gICAgY29uZmlndXJhdGlvblxuICApIHtcbiAgICAvL0NyZWF0ZSBlbnRyeSBpbiBzZXJ2ZXIgdGFibGUuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbMV1dOiBrZXksXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzJdXTogc2hvcnREZXNjcmlwdGlvbixcbiAgICAgIFt0aGlzLnBhcmFtTmFtZXNbM11dOiBsb25nRGVzY3JpcHRpb24sXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzRdXTogaW5zdGl0dXRpb24sXG4gICAgICBbdGhpcy5wYXJhbU5hbWVzWzVdXTogY29uZmlndXJhdGlvbixcbiAgICB9O1xuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRQb3N0UmVxdWVzdChcInZlaGljbGVcIiwgZGF0YSk7XG4gIH1cblxuICBhc3luYyBwdXQoXG4gICAgaWQsXG4gICAga2V5LFxuICAgIHNob3J0RGVzY3JpcHRpb24sXG4gICAgbG9uZ0Rlc2NyaXB0aW9uLFxuICAgIGluc3RpdHV0aW9uLFxuICAgIGNvbmZpZ3VyYXRpb25cbiAgKSB7XG4gICAgLy9VcGRhdGUgZW50cnkgaW4gc2VydmVyIHRhYmxlLlxuICAgIC8vTWFuZGF0b3J5IHBhcmFtZXRlcnM6XG4gICAgY29uc3QgZGF0YSA9IHsgW3RoaXMucGFyYW1OYW1lc1swXV06IGlkIH07XG4gICAgLy9PcHRpb25hbCBwYXJhbWV0ZXJzOlxuICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICBkYXRhLFxuICAgICAga2V5ICE9PSBudWxsICYmIHsgW3RoaXMucGFyYW1OYW1lc1sxXV06IGtleSB9LFxuICAgICAgc2hvcnREZXNjcmlwdGlvbiAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbMl1dOiBzaG9ydERlc2NyaXB0aW9uIH0sXG4gICAgICBsb25nRGVzY3JpcHRpb24gIT09IG51bGwgJiYgeyBbdGhpcy5wYXJhbU5hbWVzWzNdXTogbG9uZ0Rlc2NyaXB0aW9uIH0sXG4gICAgICBpbnN0aXR1dGlvbiAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNF1dOiBpbnN0aXR1dGlvbiB9LFxuICAgICAgY29uZmlndXJhdGlvbiAhPT0gbnVsbCAmJiB7IFt0aGlzLnBhcmFtTmFtZXNbNV1dOiBjb25maWd1cmF0aW9uIH1cbiAgICApO1xuICAgIGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRQdXRSZXF1ZXN0KFwidmVoaWNsZVwiLCBkYXRhKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZShpZCkge1xuICAgIC8vRGVsZXRlIGVudHJ5IGluIHNlcnZlciB0YWJsZS5cbiAgICBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kRGVsZXRlUmVxdWVzdChcInZlaGljbGVcIiwgXCJpZD1cIiArIGlkKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/database_interface/Vehicle.js\n");

/***/ }),

/***/ "./src/database_interface/Weather.js":
/*!*******************************************!*\
  !*** ./src/database_interface/Weather.js ***!
  \*******************************************/
/*! exports provided: Weather, WeatherInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Weather\", function() { return Weather; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"WeatherInterface\", function() { return WeatherInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Weather data container class.\nclass Weather {\n  constructor(id, shortDescription) {\n    this.id = id;\n    this.shortDescription = shortDescription;\n  }\n}\n\n//Weather database interaction class.\nclass WeatherInterface {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.paramNames = [\"id\", \"short_description\"];\n  }\n\n  async get() {\n    //Get table data from server.\n    const data = await this.serverInterface.sendGetRequest(\"weather\");\n    return data.map((entry) => new Weather(entry[0], entry[1]));\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1dlYXRoZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZGF0YWJhc2VfaW50ZXJmYWNlL1dlYXRoZXIuanM/N2E5NyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9XZWF0aGVyIGRhdGEgY29udGFpbmVyIGNsYXNzLlxuZXhwb3J0IGNsYXNzIFdlYXRoZXIge1xuICBjb25zdHJ1Y3RvcihpZCwgc2hvcnREZXNjcmlwdGlvbikge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnNob3J0RGVzY3JpcHRpb24gPSBzaG9ydERlc2NyaXB0aW9uO1xuICB9XG59XG5cbi8vV2VhdGhlciBkYXRhYmFzZSBpbnRlcmFjdGlvbiBjbGFzcy5cbmV4cG9ydCBjbGFzcyBXZWF0aGVySW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJhbU5hbWVzID0gW1wiaWRcIiwgXCJzaG9ydF9kZXNjcmlwdGlvblwiXTtcbiAgfVxuXG4gIGFzeW5jIGdldCgpIHtcbiAgICAvL0dldCB0YWJsZSBkYXRhIGZyb20gc2VydmVyLlxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kR2V0UmVxdWVzdChcIndlYXRoZXJcIik7XG4gICAgcmV0dXJuIGRhdGEubWFwKChlbnRyeSkgPT4gbmV3IFdlYXRoZXIoZW50cnlbMF0sIGVudHJ5WzFdKSk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/database_interface/Weather.js\n");

/***/ }),

/***/ "./src/frames/LogSelection.js":
/*!************************************!*\
  !*** ./src/frames/LogSelection.js ***!
  \************************************/
/*! exports provided: LogSelection */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LogSelection\", function() { return LogSelection; });\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/* harmony import */ var _utility_Modal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility/Modal.js */ \"./src/utility/Modal.js\");\n/* harmony import */ var _utility_ConfirmationModal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility/ConfirmationModal.js */ \"./src/utility/ConfirmationModal.js\");\n/* harmony import */ var _database_interface_TestEvent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../database_interface/TestEvent.js */ \"./src/database_interface/TestEvent.js\");\n/* harmony import */ var _database_interface_Shift_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../database_interface/Shift.js */ \"./src/database_interface/Shift.js\");\n/* harmony import */ var _database_interface_Leg_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../database_interface/Leg.js */ \"./src/database_interface/Leg.js\");\n/* harmony import */ var _database_interface_Performer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../database_interface/Performer.js */ \"./src/database_interface/Performer.js\");\n/* harmony import */ var _database_interface_Personnel_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../database_interface/Personnel.js */ \"./src/database_interface/Personnel.js\");\n/* harmony import */ var _database_interface_Vehicle_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../database_interface/Vehicle.js */ \"./src/database_interface/Vehicle.js\");\n/* harmony import */ var _database_interface_Weather_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../database_interface/Weather.js */ \"./src/database_interface/Weather.js\");\n/* harmony import */ var _database_interface_PoseSource_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../database_interface/PoseSource.js */ \"./src/database_interface/PoseSource.js\");\n/* harmony import */ var _overlays_TestEventEdit_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../overlays/TestEventEdit.js */ \"./src/overlays/TestEventEdit.js\");\n/* harmony import */ var _overlays_ShiftEdit_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../overlays/ShiftEdit.js */ \"./src/overlays/ShiftEdit.js\");\n/* harmony import */ var _overlays_LegEdit_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../overlays/LegEdit.js */ \"./src/overlays/LegEdit.js\");\n/* eslint-disable no-undef */\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nclass Log {\n  //Helper base class to contain log related data and functions.\n  constructor(\n    name,\n    dataInterface,\n    parentSelect = null,\n    childClass = null,\n    checkSelectionCallback\n  ) {\n    //Set arguments as properties.\n    this.name = name;\n    this.dataInterface = dataInterface;\n    this.parentSelect = parentSelect;\n    this.childClass = childClass;\n    this.checkSelectionFcn = checkSelectionCallback;\n    //Get DOM element hooks.\n    this.statusDot = document.getElementById(`${name}-status-dot`);\n    this.select = document.getElementById(`${name}-id`);\n    this.newBtn = document.getElementById(`new-${name}-btn`);\n    this.endBtn = document.getElementById(`end-${name}-btn`);\n    this.editBtn = document.getElementById(`edit-${name}-btn`);\n    this.deleteBtn = document.getElementById(`delete-${name}-btn`);\n    //Initialize variables.\n    this.postData = null; //To be redefined by child class.\n    this.dataList = [];\n    this.open = false;\n    //Add event listeners.\n    this.select.addEventListener(\"change\", this.selectChangeHandler.bind(this));\n    this.newBtn.addEventListener(\"click\", this.newBtnClickHandler.bind(this));\n    this.endBtn.addEventListener(\"click\", this.endBtnClickHandler.bind(this));\n    this.editBtn.addEventListener(\"click\", this.editBtnClickHandler.bind(this));\n    this.deleteBtn.addEventListener(\n      \"click\",\n      this.deleteBtnClickHandler.bind(this)\n    );\n  }\n\n  checkSelectionCallback() {\n    //Execute callback passed in constructor's arguments.\n    this.checkSelectionFcn();\n  }\n\n  clearSelectData() {\n    //Clear the child select data.\n    if (this.childClass) {\n      this.childClass.clearSelectData();\n    }\n    //Clear own select data.\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].clearChildren(this.select);\n  }\n\n  async updateData() {\n    this.dataList = await this.dataInterface.get(\n      this.parentSelect && this.parentSelect.value\n    );\n  }\n\n  async updateSelect() {\n    //Check parent select value.\n    if (this.parentSelect && !this.parentSelect.value) {\n      alert(\"Please select an ID in the parent select first.\");\n      return;\n    }\n    try {\n      //Get table data from server.\n      await this.updateData();\n      //Fill the specified select with the fetched data.\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n        this.select,\n        this.dataList.map((entry) => entry.id).reverse(),\n        this.dataList\n          .map((entry) => (entry.endTime ? \"closed-log\" : \"open-log\"))\n          .reverse()\n      );\n      //Clear the child select data.\n      if (this.childClass) {\n        this.childClass.clearSelectData();\n      }\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async selectChangeHandler() {\n    //Remove top blank option.\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(this.select);\n    //Update open log status\n    this.open = !this.dataList.find((entry) => entry.id == this.select.value)\n      .endTime;\n    //Update the child options.\n    if (this.childClass) {\n      await this.childClass.updateSelect();\n    }\n    if (this.childClass && this.childClass.dataList.length === 1) {\n      //If the child only has one option, select it and call recursion.\n      this.childClass.select.value = this.childClass.dataList[0].id;\n      this.childClass.selectChangeHandler();\n    } else {\n      //Else finish: Check log IDs, hide segments and map.\n      this.checkSelectionCallback();\n    }\n  }\n\n  async newBtnClickHandler() {\n    try {\n      //Send request for the creation of a new log entry.\n      await this.dataInterface.post(...this.postData);\n      //Update the select options.\n      await this.updateSelect();\n      //Remove top blank option.\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(this.select);\n      //Choose the newly created log entry from the select.\n      this.select.value = Math.max(...this.dataList.map((entry) => entry.id));\n      //Update open log status.\n      this.open = true;\n      //Trigger the edit behavior.\n      await this.editBtnClickHandler();\n      //Check log IDs, hide segments and map.\n      this.checkSelectionCallback();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async recursiveUpdate() {\n    //Method to update the dataList and select options after a put request.\n    //This won't rebuild the selects, but rather update the log status.\n    //Child recursiveUpdate.\n    if (this.childClass) {\n      await this.childClass.recursiveUpdate();\n    }\n    if (!this.parentSelect || (this.parentSelect && this.parentSelect.value)) {\n      //Update this dataList:\n      await this.updateData();\n      //Update open log status\n      if (this.select.value) {\n        this.open = !this.dataList.find(\n          (entry) => entry.id == this.select.value\n        ).endTime;\n      }\n      //Change the select option html class for the logs.\n      Array.from(this.select.children).forEach((option) => {\n        if (option.value) {\n          //Find the log entry for the option.\n          const matchedEntry = this.dataList.find(\n            (entry) => entry.id == option.value\n          );\n          //Update the option's html class.\n          option.className = matchedEntry.endTime ? \"closed-log\" : \"open-log\";\n        }\n      });\n    }\n  }\n\n  async endBtnClickHandler() {\n    //Check select value.\n    if (!this.select.value) {\n      alert(\"Please select an ID to close.\");\n      return;\n    }\n    try {\n      //Stop logging.\n      const startLoggingBtn = document.getElementById(\"start-logging-btn\");\n      if (startLoggingBtn.textContent === \"Stop Logging\") {\n        startLoggingBtn.click();\n      }\n      //Close log entry.\n      await this.dataInterface.put(this.select.value, \"close\");\n      //Update dataList and select options' status for this and all the children classes.\n      await this.recursiveUpdate();\n      //Check log IDs, hide segments and map.\n      this.checkSelectionCallback();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async editBtnClickHandler() {\n    //Display the edit window built in the child function.\n    const modal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_1__[\"Modal\"](\n      this.editContainer,\n      \"Your browser does't support this feature! - Please change to a more modern one.\",\n      this.updateData.bind(this)\n    );\n    modal.show();\n  }\n\n  async deleteLogEntry() {\n    try {\n      //Send request for the deletion of the current log entry.\n      await this.dataInterface.delete(this.select.value);\n      //Update the select options.\n      await this.updateSelect();\n      //Reset log status.\n      this.open = false;\n      //Check log IDs, hide segments and map.\n      this.checkSelectionCallback();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async deleteBtnClickHandler() {\n    //Make sure an id selected.\n    if (!this.select.value) {\n      alert(\"Please select an ID to delete!\");\n      return;\n    }\n    //Prompt confirmation.\n    const modal = new _utility_ConfirmationModal_js__WEBPACK_IMPORTED_MODULE_2__[\"ConfirmationModal\"](\n      \"Warning!\",\n      `<strong>This operation cannot be undone!</strong>\n      Are you sure you want to delete <b>${this.name.replace(/-/g, \" \")} ${\n        this.select.value\n      }</b> and all its children?`,\n      \"Your browser does't support this feature! - Please change to a more modern one.\",\n      this.deleteLogEntry.bind(this) //Delete the entry if confirmed.\n    );\n    modal.show();\n  }\n}\n\nclass TestEventLog extends Log {\n  //Specific test event class to deal with log interactions.\n  constructor(serverInterface, childClass, checkSelectionCallback) {\n    //Parent constructor.\n    super(\n      \"test-event\",\n      new _database_interface_TestEvent_js__WEBPACK_IMPORTED_MODULE_3__[\"TestEventInterface\"](serverInterface),\n      null,\n      childClass,\n      checkSelectionCallback\n    );\n    //Add option to open the test event.\n    this.openBtn = document.getElementById(\"open-test-event-btn\");\n    this.openBtn.addEventListener(\"click\", this.openBtnClickHandler.bind(this));\n  }\n\n  async newBtnClickHandler() {\n    //Set postData.\n    this.postData = [null, null, null, null];\n    //Call parent function.\n    await super.newBtnClickHandler();\n  }\n\n  async openBtnClickHandler() {\n    //Check select value.\n    if (!this.select.value) {\n      alert(\"Please select an ID to open.\");\n      return;\n    }\n    try {\n      //Open log entry.\n      await this.dataInterface.put(this.select.value, \"open\");\n      //Update dataList and select options' status for this and all the children classes.\n      await this.recursiveUpdate();\n      //Check log IDs, hide segments and map.\n      this.checkSelectionCallback();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async editBtnClickHandler() {\n    //Check select value.\n    if (!this.select.value) {\n      alert(\"Please select an ID to edit.\");\n      return;\n    }\n    //Find the selected log entry.\n    const selectedLog = this.dataList.find(\n      (entry) => entry.id == this.select.value\n    );\n    //Build the edit window.\n    this.editContainer = new _overlays_TestEventEdit_js__WEBPACK_IMPORTED_MODULE_11__[\"TestEventEdit\"](selectedLog, this.dataInterface);\n    //Call parent function.\n    await super.editBtnClickHandler();\n  }\n}\n\nclass ShiftLog extends Log {\n  //Specific shift class to deal with log interactions.\n  constructor(\n    serverInterface,\n    childClass,\n    checkSelectionCallback,\n    currentUser\n  ) {\n    //Parent constructor.\n    super(\n      \"shift\",\n      new _database_interface_Shift_js__WEBPACK_IMPORTED_MODULE_4__[\"ShiftInterface\"](serverInterface),\n      document.getElementById(\"test-event-id\"),\n      childClass,\n      checkSelectionCallback\n    );\n    //Initialize child variables and objects.\n    this.currentUser = currentUser;\n    this.performerInterface = new _database_interface_Performer_js__WEBPACK_IMPORTED_MODULE_6__[\"PerformerInterface\"](serverInterface);\n    this.personnelInterface = new _database_interface_Personnel_js__WEBPACK_IMPORTED_MODULE_7__[\"PersonnelInterface\"](serverInterface);\n    this.vehicleInterface = new _database_interface_Vehicle_js__WEBPACK_IMPORTED_MODULE_8__[\"VehicleInterface\"](serverInterface);\n    this.performerList = null;\n    this.personnelList = null;\n    this.vehicleList = null;\n  }\n\n  async newBtnClickHandler() {\n    //Make sure a test event is selected.\n    if (!this.parentSelect.value) {\n      alert(\"Please select a test event to add a new shift!\");\n      return;\n    }\n    //Make sure a user is selected from the interface.\n    if (!this.currentUser.id) {\n      document.getElementById(\"user-icon\").click();\n      return;\n    }\n    //Fetch performer and vehicle data from server.\n    try {\n      this.performerList = await this.performerInterface.get();\n      this.vehicleList = await this.vehicleInterface.get();\n    } catch (error) {\n      alert(error.message);\n      return;\n    }\n    //If there are no performers or vehicles in the list, alert the user.\n    if (this.performerList.length == 0 || this.vehicleList.length == 0) {\n      alert(\n        \"Please configure a performer and a vehicle before trying to add a new shift!\"\n      );\n      return;\n    }\n    //Find the performer that matches the selected user. If none matches, use the first one.\n    let matchedPerformer =\n      this.performerList.find(\n        (performer) => performer.institution == this.currentUser.institution\n      ) || this.performerList[0];\n    //Find a vehicle that matches the selected user's institution. If none matches, use the first one.\n    let matchedVehicle =\n      this.vehicleList.find(\n        (vehicle) => vehicle.institution == this.currentUser.institution\n      ) || this.vehicleList[0];\n    //Set postData.\n    this.postData = [\n      this.parentSelect.value,\n      this.currentUser.id,\n      this.currentUser.id,\n      this.currentUser.id,\n      this.currentUser.id,\n      matchedPerformer.id,\n      null,\n      null,\n      matchedVehicle.id,\n      null,\n    ];\n    //Call parent function.\n    await super.newBtnClickHandler();\n  }\n\n  async editBtnClickHandler() {\n    //Check select value.\n    if (!this.select.value) {\n      alert(\"Please select an ID to edit.\");\n      return;\n    }\n    //Find the selected log entry.\n    const selectedLog = this.dataList.find(\n      (entry) => entry.id == this.select.value\n    );\n    //Fetch performer, personnel and vehicle data from server.\n    try {\n      this.performerList = await this.performerInterface.get();\n      this.personnelList = await this.personnelInterface.get();\n      this.vehicleList = await this.vehicleInterface.get();\n    } catch (error) {\n      alert(error.message);\n      return;\n    }\n    //Build the edit window.\n    this.editContainer = new _overlays_ShiftEdit_js__WEBPACK_IMPORTED_MODULE_12__[\"ShiftEdit\"](\n      selectedLog,\n      this.dataInterface,\n      this.performerList,\n      this.personnelList,\n      this.vehicleList\n    );\n    //Call parent function.\n    await super.editBtnClickHandler();\n  }\n}\n\nclass LegLog extends Log {\n  //Specific leg class to deal with log interactions.\n  constructor(serverInterface, checkSelectionCallback) {\n    //Parent constructor.\n    super(\n      \"leg\",\n      new _database_interface_Leg_js__WEBPACK_IMPORTED_MODULE_5__[\"LegInterface\"](serverInterface),\n      document.getElementById(\"shift-id\"),\n      null,\n      checkSelectionCallback\n    );\n    //Initialize child variables and objects.\n    this.weatherInterface = new _database_interface_Weather_js__WEBPACK_IMPORTED_MODULE_9__[\"WeatherInterface\"](serverInterface);\n    this.poseSourceInterface = new _database_interface_PoseSource_js__WEBPACK_IMPORTED_MODULE_10__[\"PoseSourceInterface\"](serverInterface);\n\n    this.weatherList = null;\n    this.poseSourceList = null;\n  }\n\n  async newBtnClickHandler() {\n    //Make sure a shift is selected.\n    if (!this.parentSelect.value) {\n      alert(\"Please select a shift to add a new leg!\");\n      return;\n    }\n    //Fetch weather and pose source data from server.\n    try {\n      //Weather data is static. Skip if already fetched.\n      if (!this.weatherList || this.weatherList.length == 0) {\n        this.weatherList = await this.weatherInterface.get();\n      }\n      this.poseSourceList = await this.poseSourceInterface.get();\n    } catch (error) {\n      alert(error.message);\n      return;\n    }\n    //If there are no weather states, alert the user.\n    if (this.weatherList.length == 0) {\n      alert(\n        \"Weather list empty. Your database was not properly initialized. Please fix this before continuing.\"\n      );\n      return;\n    }\n    //If the pose source list is empty, alert the user.\n    if (this.poseSourceList.length == 0) {\n      alert(\"Please configure a pose source before trying to add a new leg!\");\n      return;\n    }\n    //Set postData.\n    this.postData = [\n      this.parentSelect.value,\n      this.weatherList[0].id,\n      this.poseSourceList[0].id,\n      null,\n    ];\n    //Call parent function.\n    await super.newBtnClickHandler();\n  }\n\n  async editBtnClickHandler() {\n    //Check select value.\n    if (!this.select.value) {\n      alert(\"Please select an ID to edit.\");\n      return;\n    }\n    //Find the selected log entry.\n    const selectedLog = this.dataList.find(\n      (entry) => entry.id == this.select.value\n    );\n    //Fetch weather and pose source data from server.\n    try {\n      //Weather data is static. Skip if already fetched.\n      if (!this.weatherList || this.weatherList.length == 0) {\n        this.weatherList = await this.weatherInterface.get();\n      }\n      this.poseSourceList = await this.poseSourceInterface.get();\n    } catch (error) {\n      alert(error.message);\n      return;\n    }\n    //Build the edit window.\n    this.editContainer = new _overlays_LegEdit_js__WEBPACK_IMPORTED_MODULE_13__[\"LegEdit\"](\n      selectedLog,\n      this.dataInterface,\n      this.weatherList,\n      this.poseSourceList\n    );\n    //Call parent function.\n    await super.editBtnClickHandler();\n  }\n}\n\nclass LogSelection {\n  //Container class for the log selection section of the web page.\n  constructor(serverInterface, rosInterface, currentUser, doneCallback) {\n    //Set arguments as properties.\n    this.ros = rosInterface;\n    this.doneCallback = doneCallback;\n    //Reach to DOM elements.\n    this.startLoggingBtn = document.getElementById(\"start-logging-btn\");\n    this.autoRefreshBox = document.getElementById(\"auto-refresh\");\n    //Initialize variables.\n    this.isLogging = false;\n    this.setLoggingClient = new ROSLIB.Service({\n      ros: this.ros,\n      name: \"/ftt_ros/set_status\",\n      serviceType: \"std_srvs/SetBool\",\n    });\n    this.getLoggingClient = new ROSLIB.Service({\n      ros: this.ros,\n      name: \"/ftt_ros/get_status\",\n      serviceType: \"std_srvs/Trigger\",\n    });\n    //Initialize log objects.\n    this.legLog = new LegLog(\n      serverInterface,\n      this.checkSelectedLogs.bind(this)\n    );\n    this.shiftLog = new ShiftLog(\n      serverInterface,\n      this.legLog,\n      this.checkSelectedLogs.bind(this),\n      currentUser\n    );\n    this.testEventLog = new TestEventLog(\n      serverInterface,\n      this.shiftLog,\n      this.checkSelectedLogs.bind(this)\n    );\n    //Add event listeners.\n    this.startLoggingBtn.addEventListener(\n      \"click\",\n      this.loggingBtnClickHandler.bind(this)\n    );\n    //Trigger init behavior.\n    this.init();\n  }\n\n  async init() {\n    await this.testEventLog.updateSelect();\n    const personnelList = await this.shiftLog.personnelInterface.get();\n    if (personnelList.length > 0) {\n      document.getElementById(\"user-icon\").click();\n    } else {\n      //Prompt configuration notice.\n      const modal = new _utility_ConfirmationModal_js__WEBPACK_IMPORTED_MODULE_2__[\"ConfirmationModal\"](\n        \"Welcome!\",\n        `It looks like you haven't configured any users yet. \n        Please input at least one entry for each <strong>Database Configuration</strong> table. \n        Clicking on the top left cogwheel of the main page or on the <i>confirm</i> button below will take you to the configuration page.`,\n        \"Your browser does't support this feature! - Please change to a more modern one.\",\n        () => {\n          document.getElementById(\"config-icon\").click();\n        }\n      );\n      modal.show();\n    }\n  }\n\n  toggleLogging() {\n    //Toggle logging status.\n    this.isLogging = !this.isLogging;\n    //Update button display.\n    if (!this.isLogging) {\n      this.startLoggingBtn.textContent = \"Start Logging\";\n    } else {\n      this.startLoggingBtn.textContent = \"Stop Logging\";\n    }\n  }\n\n  updateLogging() {\n    //If ROS is connected\n    if (this.ros.isConnected) {\n      //Check current logging status in ros.\n      const request = {};\n      this.getLoggingClient.callService(request, (result) => {\n        if (result.success != this.isLogging) {\n          //Toggle logging to match status in ros.\n          this.toggleLogging();\n        }\n        //If all log ids have been selected.\n        if (\n          this.testEventLog.select.value &&\n          this.shiftLog.select.value &&\n          this.legLog.select.value\n        ) {\n          //Enable the logging button if all logs are open or if the logging status is active and all the logs are closed.\n          let forceActivate = false;\n          if (this.isLogging) {\n            //Find if all test events are closed.\n            const testEventsClosed =\n              !this.testEventLog.open &&\n              this.testEventLog.dataList.reduce(\n                (closed, curr) => closed && !!curr.endTime,\n                true\n              );\n            if (testEventsClosed) {\n              forceActivate = true;\n            } else if (this.testEventLog.open) {\n              //This test event is open. Find if all shifts are closed.\n              const shiftsClosed =\n                !this.shiftLog.open &&\n                this.shiftLog.dataList.reduce(\n                  (closed, curr) => closed && !!curr.endTime,\n                  true\n                );\n              if (shiftsClosed) {\n                forceActivate = true;\n              } else if (this.shiftLog.open) {\n                //This shift is open. Find if all legs are closed.\n                const legsClosed =\n                  !this.legLog.open &&\n                  this.legLog.dataList.reduce(\n                    (closed, curr) => closed && !!curr.endTime,\n                    true\n                  );\n                if (legsClosed) {\n                  forceActivate = true;\n                }\n              }\n            }\n          }\n          if (\n            (this.testEventLog.open &&\n              this.shiftLog.open &&\n              this.legLog.open) ||\n            forceActivate\n          ) {\n            this.startLoggingBtn.disabled = false;\n          } else {\n            this.startLoggingBtn.disabled = true;\n          }\n          //Enable the auto refresh box if all logs are open.\n          if (\n            this.testEventLog.open &&\n            this.shiftLog.open &&\n            this.legLog.open\n          ) {\n            this.autoRefreshBox.disabled = false;\n          } else {\n            if (this.autoRefreshBox.checked) {\n              this.autoRefreshBox.click();\n            }\n            this.autoRefreshBox.disabled = true;\n          }\n          //Activate the auto refresh box if logging, deactivate it if not.\n          if (this.isLogging) {\n            if (!this.autoRefreshBox.checked) {\n              this.autoRefreshBox.click();\n            }\n          } else {\n            if (this.autoRefreshBox.checked) {\n              this.autoRefreshBox.click();\n            }\n          }\n        }\n      });\n    } else {\n      this.startLoggingBtn.disabled = true;\n      if (this.autoRefreshBox.checked) {\n        this.autoRefreshBox.click();\n      }\n      this.autoRefreshBox.disabled = true;\n    }\n  }\n\n  loggingBtnClickHandler() {\n    //Call ros service to start/stop logging.\n    const request = {\n      data: !this.isLogging,\n    };\n    this.setLoggingClient.callService(request, (result) => {\n      if (result.success) {\n        //Update the table.\n        this.doneCallback();\n        //Update the logging status\n        this.updateLogging();\n      } else {\n        alert(result.message);\n      }\n    });\n  }\n\n  checkSelectedLogs() {\n    //Hide the segment details and map.\n    document.getElementById(\"segment-detail\").style.display = \"none\";\n    document.getElementById(\"map-viewer\").style.display = \"none\";\n    //Update status dot for all logs\n    const logs = [this.testEventLog, this.shiftLog, this.legLog];\n    for (const log of logs) {\n      if (log.select.value) {\n        if (log.open) {\n          log.statusDot.classList.remove(\"status-red\");\n          log.statusDot.classList.add(\"status-green\");\n        } else {\n          log.statusDot.classList.remove(\"status-green\");\n          log.statusDot.classList.add(\"status-red\");\n        }\n      } else {\n        log.statusDot.classList.remove(\"status-red\");\n        log.statusDot.classList.remove(\"status-green\");\n      }\n    }\n    //Update end/open option for test event\n    if (this.testEventLog.open) {\n      this.testEventLog.endBtn.style.display = \"grid\";\n      this.testEventLog.openBtn.style.display = \"none\";\n    } else {\n      this.testEventLog.endBtn.style.display = \"none\";\n      this.testEventLog.openBtn.style.display = \"grid\";\n    }\n    //Guarantee the segment auto-refresh isn't active.\n    if (this.autoRefreshBox.checked) {\n      this.autoRefreshBox.click();\n    }\n    //Trigger callback if all log ids have been selected.\n    if (\n      this.testEventLog.select.value &&\n      this.shiftLog.select.value &&\n      this.legLog.select.value\n    ) {\n      this.doneCallback();\n      //Update the logging status.\n      this.updateLogging();\n    } else {\n      this.startLoggingBtn.disabled = true;\n      this.autoRefreshBox.disabled = true;\n    }\n    //Guarantee the gps map is disabled.\n    const gpsBox = document.getElementById(\"gps-map-box\");\n    if (gpsBox.checked) {\n      gpsBox.click();\n    }\n    //Guarantee the local map is disabled.\n    const localBox = document.getElementById(\"local-map-box\");\n    if (localBox.checked) {\n      localBox.click();\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZnJhbWVzL0xvZ1NlbGVjdGlvbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9mcmFtZXMvTG9nU2VsZWN0aW9uLmpzPzkzZGQiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG5pbXBvcnQgeyBET01HZW5lcmljIH0gZnJvbSBcIi4uL3V0aWxpdHkvRE9NR2VuZXJpYy5qc1wiO1xuaW1wb3J0IHsgTW9kYWwgfSBmcm9tIFwiLi4vdXRpbGl0eS9Nb2RhbC5qc1wiO1xuaW1wb3J0IHsgQ29uZmlybWF0aW9uTW9kYWwgfSBmcm9tIFwiLi4vdXRpbGl0eS9Db25maXJtYXRpb25Nb2RhbC5qc1wiO1xuaW1wb3J0IHsgVGVzdEV2ZW50SW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9UZXN0RXZlbnQuanNcIjtcbmltcG9ydCB7IFNoaWZ0SW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9TaGlmdC5qc1wiO1xuaW1wb3J0IHsgTGVnSW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9MZWcuanNcIjtcbmltcG9ydCB7IFBlcmZvcm1lckludGVyZmFjZSB9IGZyb20gXCIuLi9kYXRhYmFzZV9pbnRlcmZhY2UvUGVyZm9ybWVyLmpzXCI7XG5pbXBvcnQgeyBQZXJzb25uZWxJbnRlcmZhY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2VfaW50ZXJmYWNlL1BlcnNvbm5lbC5qc1wiO1xuaW1wb3J0IHsgVmVoaWNsZUludGVyZmFjZSB9IGZyb20gXCIuLi9kYXRhYmFzZV9pbnRlcmZhY2UvVmVoaWNsZS5qc1wiO1xuaW1wb3J0IHsgV2VhdGhlckludGVyZmFjZSB9IGZyb20gXCIuLi9kYXRhYmFzZV9pbnRlcmZhY2UvV2VhdGhlci5qc1wiO1xuaW1wb3J0IHsgUG9zZVNvdXJjZUludGVyZmFjZSB9IGZyb20gXCIuLi9kYXRhYmFzZV9pbnRlcmZhY2UvUG9zZVNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgVGVzdEV2ZW50RWRpdCB9IGZyb20gXCIuLi9vdmVybGF5cy9UZXN0RXZlbnRFZGl0LmpzXCI7XG5pbXBvcnQgeyBTaGlmdEVkaXQgfSBmcm9tIFwiLi4vb3ZlcmxheXMvU2hpZnRFZGl0LmpzXCI7XG5pbXBvcnQgeyBMZWdFZGl0IH0gZnJvbSBcIi4uL292ZXJsYXlzL0xlZ0VkaXQuanNcIjtcblxuY2xhc3MgTG9nIHtcbiAgLy9IZWxwZXIgYmFzZSBjbGFzcyB0byBjb250YWluIGxvZyByZWxhdGVkIGRhdGEgYW5kIGZ1bmN0aW9ucy5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZSxcbiAgICBkYXRhSW50ZXJmYWNlLFxuICAgIHBhcmVudFNlbGVjdCA9IG51bGwsXG4gICAgY2hpbGRDbGFzcyA9IG51bGwsXG4gICAgY2hlY2tTZWxlY3Rpb25DYWxsYmFja1xuICApIHtcbiAgICAvL1NldCBhcmd1bWVudHMgYXMgcHJvcGVydGllcy5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuZGF0YUludGVyZmFjZSA9IGRhdGFJbnRlcmZhY2U7XG4gICAgdGhpcy5wYXJlbnRTZWxlY3QgPSBwYXJlbnRTZWxlY3Q7XG4gICAgdGhpcy5jaGlsZENsYXNzID0gY2hpbGRDbGFzcztcbiAgICB0aGlzLmNoZWNrU2VsZWN0aW9uRmNuID0gY2hlY2tTZWxlY3Rpb25DYWxsYmFjaztcbiAgICAvL0dldCBET00gZWxlbWVudCBob29rcy5cbiAgICB0aGlzLnN0YXR1c0RvdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke25hbWV9LXN0YXR1cy1kb3RgKTtcbiAgICB0aGlzLnNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke25hbWV9LWlkYCk7XG4gICAgdGhpcy5uZXdCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbmV3LSR7bmFtZX0tYnRuYCk7XG4gICAgdGhpcy5lbmRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgZW5kLSR7bmFtZX0tYnRuYCk7XG4gICAgdGhpcy5lZGl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGVkaXQtJHtuYW1lfS1idG5gKTtcbiAgICB0aGlzLmRlbGV0ZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBkZWxldGUtJHtuYW1lfS1idG5gKTtcbiAgICAvL0luaXRpYWxpemUgdmFyaWFibGVzLlxuICAgIHRoaXMucG9zdERhdGEgPSBudWxsOyAvL1RvIGJlIHJlZGVmaW5lZCBieSBjaGlsZCBjbGFzcy5cbiAgICB0aGlzLmRhdGFMaXN0ID0gW107XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgLy9BZGQgZXZlbnQgbGlzdGVuZXJzLlxuICAgIHRoaXMuc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5zZWxlY3RDaGFuZ2VIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMubmV3QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLm5ld0J0bkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLmVuZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5lbmRCdG5DbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5lZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmVkaXRCdG5DbGlja0hhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgdGhpcy5kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIHRoaXMuZGVsZXRlQnRuQ2xpY2tIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICB9XG5cbiAgY2hlY2tTZWxlY3Rpb25DYWxsYmFjaygpIHtcbiAgICAvL0V4ZWN1dGUgY2FsbGJhY2sgcGFzc2VkIGluIGNvbnN0cnVjdG9yJ3MgYXJndW1lbnRzLlxuICAgIHRoaXMuY2hlY2tTZWxlY3Rpb25GY24oKTtcbiAgfVxuXG4gIGNsZWFyU2VsZWN0RGF0YSgpIHtcbiAgICAvL0NsZWFyIHRoZSBjaGlsZCBzZWxlY3QgZGF0YS5cbiAgICBpZiAodGhpcy5jaGlsZENsYXNzKSB7XG4gICAgICB0aGlzLmNoaWxkQ2xhc3MuY2xlYXJTZWxlY3REYXRhKCk7XG4gICAgfVxuICAgIC8vQ2xlYXIgb3duIHNlbGVjdCBkYXRhLlxuICAgIERPTUdlbmVyaWMuY2xlYXJDaGlsZHJlbih0aGlzLnNlbGVjdCk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVEYXRhKCkge1xuICAgIHRoaXMuZGF0YUxpc3QgPSBhd2FpdCB0aGlzLmRhdGFJbnRlcmZhY2UuZ2V0KFxuICAgICAgdGhpcy5wYXJlbnRTZWxlY3QgJiYgdGhpcy5wYXJlbnRTZWxlY3QudmFsdWVcbiAgICApO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlU2VsZWN0KCkge1xuICAgIC8vQ2hlY2sgcGFyZW50IHNlbGVjdCB2YWx1ZS5cbiAgICBpZiAodGhpcy5wYXJlbnRTZWxlY3QgJiYgIXRoaXMucGFyZW50U2VsZWN0LnZhbHVlKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gSUQgaW4gdGhlIHBhcmVudCBzZWxlY3QgZmlyc3QuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy9HZXQgdGFibGUgZGF0YSBmcm9tIHNlcnZlci5cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlRGF0YSgpO1xuICAgICAgLy9GaWxsIHRoZSBzcGVjaWZpZWQgc2VsZWN0IHdpdGggdGhlIGZldGNoZWQgZGF0YS5cbiAgICAgIERPTUdlbmVyaWMucG9wdWxhdGVTZWxlY3QoXG4gICAgICAgIHRoaXMuc2VsZWN0LFxuICAgICAgICB0aGlzLmRhdGFMaXN0Lm1hcCgoZW50cnkpID0+IGVudHJ5LmlkKS5yZXZlcnNlKCksXG4gICAgICAgIHRoaXMuZGF0YUxpc3RcbiAgICAgICAgICAubWFwKChlbnRyeSkgPT4gKGVudHJ5LmVuZFRpbWUgPyBcImNsb3NlZC1sb2dcIiA6IFwib3Blbi1sb2dcIikpXG4gICAgICAgICAgLnJldmVyc2UoKVxuICAgICAgKTtcbiAgICAgIC8vQ2xlYXIgdGhlIGNoaWxkIHNlbGVjdCBkYXRhLlxuICAgICAgaWYgKHRoaXMuY2hpbGRDbGFzcykge1xuICAgICAgICB0aGlzLmNoaWxkQ2xhc3MuY2xlYXJTZWxlY3REYXRhKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbGVjdENoYW5nZUhhbmRsZXIoKSB7XG4gICAgLy9SZW1vdmUgdG9wIGJsYW5rIG9wdGlvbi5cbiAgICBET01HZW5lcmljLnJlbW92ZUZpcnN0RW1wdHlPcHRpb24odGhpcy5zZWxlY3QpO1xuICAgIC8vVXBkYXRlIG9wZW4gbG9nIHN0YXR1c1xuICAgIHRoaXMub3BlbiA9ICF0aGlzLmRhdGFMaXN0LmZpbmQoKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSB0aGlzLnNlbGVjdC52YWx1ZSlcbiAgICAgIC5lbmRUaW1lO1xuICAgIC8vVXBkYXRlIHRoZSBjaGlsZCBvcHRpb25zLlxuICAgIGlmICh0aGlzLmNoaWxkQ2xhc3MpIHtcbiAgICAgIGF3YWl0IHRoaXMuY2hpbGRDbGFzcy51cGRhdGVTZWxlY3QoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2hpbGRDbGFzcyAmJiB0aGlzLmNoaWxkQ2xhc3MuZGF0YUxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAvL0lmIHRoZSBjaGlsZCBvbmx5IGhhcyBvbmUgb3B0aW9uLCBzZWxlY3QgaXQgYW5kIGNhbGwgcmVjdXJzaW9uLlxuICAgICAgdGhpcy5jaGlsZENsYXNzLnNlbGVjdC52YWx1ZSA9IHRoaXMuY2hpbGRDbGFzcy5kYXRhTGlzdFswXS5pZDtcbiAgICAgIHRoaXMuY2hpbGRDbGFzcy5zZWxlY3RDaGFuZ2VIYW5kbGVyKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vRWxzZSBmaW5pc2g6IENoZWNrIGxvZyBJRHMsIGhpZGUgc2VnbWVudHMgYW5kIG1hcC5cbiAgICAgIHRoaXMuY2hlY2tTZWxlY3Rpb25DYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIG5ld0J0bkNsaWNrSGFuZGxlcigpIHtcbiAgICB0cnkge1xuICAgICAgLy9TZW5kIHJlcXVlc3QgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIG5ldyBsb2cgZW50cnkuXG4gICAgICBhd2FpdCB0aGlzLmRhdGFJbnRlcmZhY2UucG9zdCguLi50aGlzLnBvc3REYXRhKTtcbiAgICAgIC8vVXBkYXRlIHRoZSBzZWxlY3Qgb3B0aW9ucy5cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlU2VsZWN0KCk7XG4gICAgICAvL1JlbW92ZSB0b3AgYmxhbmsgb3B0aW9uLlxuICAgICAgRE9NR2VuZXJpYy5yZW1vdmVGaXJzdEVtcHR5T3B0aW9uKHRoaXMuc2VsZWN0KTtcbiAgICAgIC8vQ2hvb3NlIHRoZSBuZXdseSBjcmVhdGVkIGxvZyBlbnRyeSBmcm9tIHRoZSBzZWxlY3QuXG4gICAgICB0aGlzLnNlbGVjdC52YWx1ZSA9IE1hdGgubWF4KC4uLnRoaXMuZGF0YUxpc3QubWFwKChlbnRyeSkgPT4gZW50cnkuaWQpKTtcbiAgICAgIC8vVXBkYXRlIG9wZW4gbG9nIHN0YXR1cy5cbiAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAvL1RyaWdnZXIgdGhlIGVkaXQgYmVoYXZpb3IuXG4gICAgICBhd2FpdCB0aGlzLmVkaXRCdG5DbGlja0hhbmRsZXIoKTtcbiAgICAgIC8vQ2hlY2sgbG9nIElEcywgaGlkZSBzZWdtZW50cyBhbmQgbWFwLlxuICAgICAgdGhpcy5jaGVja1NlbGVjdGlvbkNhbGxiYWNrKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlY3Vyc2l2ZVVwZGF0ZSgpIHtcbiAgICAvL01ldGhvZCB0byB1cGRhdGUgdGhlIGRhdGFMaXN0IGFuZCBzZWxlY3Qgb3B0aW9ucyBhZnRlciBhIHB1dCByZXF1ZXN0LlxuICAgIC8vVGhpcyB3b24ndCByZWJ1aWxkIHRoZSBzZWxlY3RzLCBidXQgcmF0aGVyIHVwZGF0ZSB0aGUgbG9nIHN0YXR1cy5cbiAgICAvL0NoaWxkIHJlY3Vyc2l2ZVVwZGF0ZS5cbiAgICBpZiAodGhpcy5jaGlsZENsYXNzKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoaWxkQ2xhc3MucmVjdXJzaXZlVXBkYXRlKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5wYXJlbnRTZWxlY3QgfHwgKHRoaXMucGFyZW50U2VsZWN0ICYmIHRoaXMucGFyZW50U2VsZWN0LnZhbHVlKSkge1xuICAgICAgLy9VcGRhdGUgdGhpcyBkYXRhTGlzdDpcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlRGF0YSgpO1xuICAgICAgLy9VcGRhdGUgb3BlbiBsb2cgc3RhdHVzXG4gICAgICBpZiAodGhpcy5zZWxlY3QudmFsdWUpIHtcbiAgICAgICAgdGhpcy5vcGVuID0gIXRoaXMuZGF0YUxpc3QuZmluZChcbiAgICAgICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IHRoaXMuc2VsZWN0LnZhbHVlXG4gICAgICAgICkuZW5kVGltZTtcbiAgICAgIH1cbiAgICAgIC8vQ2hhbmdlIHRoZSBzZWxlY3Qgb3B0aW9uIGh0bWwgY2xhc3MgZm9yIHRoZSBsb2dzLlxuICAgICAgQXJyYXkuZnJvbSh0aGlzLnNlbGVjdC5jaGlsZHJlbikuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgICAgIGlmIChvcHRpb24udmFsdWUpIHtcbiAgICAgICAgICAvL0ZpbmQgdGhlIGxvZyBlbnRyeSBmb3IgdGhlIG9wdGlvbi5cbiAgICAgICAgICBjb25zdCBtYXRjaGVkRW50cnkgPSB0aGlzLmRhdGFMaXN0LmZpbmQoXG4gICAgICAgICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IG9wdGlvbi52YWx1ZVxuICAgICAgICAgICk7XG4gICAgICAgICAgLy9VcGRhdGUgdGhlIG9wdGlvbidzIGh0bWwgY2xhc3MuXG4gICAgICAgICAgb3B0aW9uLmNsYXNzTmFtZSA9IG1hdGNoZWRFbnRyeS5lbmRUaW1lID8gXCJjbG9zZWQtbG9nXCIgOiBcIm9wZW4tbG9nXCI7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVuZEJ0bkNsaWNrSGFuZGxlcigpIHtcbiAgICAvL0NoZWNrIHNlbGVjdCB2YWx1ZS5cbiAgICBpZiAoIXRoaXMuc2VsZWN0LnZhbHVlKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gSUQgdG8gY2xvc2UuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy9TdG9wIGxvZ2dpbmcuXG4gICAgICBjb25zdCBzdGFydExvZ2dpbmdCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0LWxvZ2dpbmctYnRuXCIpO1xuICAgICAgaWYgKHN0YXJ0TG9nZ2luZ0J0bi50ZXh0Q29udGVudCA9PT0gXCJTdG9wIExvZ2dpbmdcIikge1xuICAgICAgICBzdGFydExvZ2dpbmdCdG4uY2xpY2soKTtcbiAgICAgIH1cbiAgICAgIC8vQ2xvc2UgbG9nIGVudHJ5LlxuICAgICAgYXdhaXQgdGhpcy5kYXRhSW50ZXJmYWNlLnB1dCh0aGlzLnNlbGVjdC52YWx1ZSwgXCJjbG9zZVwiKTtcbiAgICAgIC8vVXBkYXRlIGRhdGFMaXN0IGFuZCBzZWxlY3Qgb3B0aW9ucycgc3RhdHVzIGZvciB0aGlzIGFuZCBhbGwgdGhlIGNoaWxkcmVuIGNsYXNzZXMuXG4gICAgICBhd2FpdCB0aGlzLnJlY3Vyc2l2ZVVwZGF0ZSgpO1xuICAgICAgLy9DaGVjayBsb2cgSURzLCBoaWRlIHNlZ21lbnRzIGFuZCBtYXAuXG4gICAgICB0aGlzLmNoZWNrU2VsZWN0aW9uQ2FsbGJhY2soKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZWRpdEJ0bkNsaWNrSGFuZGxlcigpIHtcbiAgICAvL0Rpc3BsYXkgdGhlIGVkaXQgd2luZG93IGJ1aWx0IGluIHRoZSBjaGlsZCBmdW5jdGlvbi5cbiAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChcbiAgICAgIHRoaXMuZWRpdENvbnRhaW5lcixcbiAgICAgIFwiWW91ciBicm93c2VyIGRvZXMndCBzdXBwb3J0IHRoaXMgZmVhdHVyZSEgLSBQbGVhc2UgY2hhbmdlIHRvIGEgbW9yZSBtb2Rlcm4gb25lLlwiLFxuICAgICAgdGhpcy51cGRhdGVEYXRhLmJpbmQodGhpcylcbiAgICApO1xuICAgIG1vZGFsLnNob3coKTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUxvZ0VudHJ5KCkge1xuICAgIHRyeSB7XG4gICAgICAvL1NlbmQgcmVxdWVzdCBmb3IgdGhlIGRlbGV0aW9uIG9mIHRoZSBjdXJyZW50IGxvZyBlbnRyeS5cbiAgICAgIGF3YWl0IHRoaXMuZGF0YUludGVyZmFjZS5kZWxldGUodGhpcy5zZWxlY3QudmFsdWUpO1xuICAgICAgLy9VcGRhdGUgdGhlIHNlbGVjdCBvcHRpb25zLlxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVTZWxlY3QoKTtcbiAgICAgIC8vUmVzZXQgbG9nIHN0YXR1cy5cbiAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgLy9DaGVjayBsb2cgSURzLCBoaWRlIHNlZ21lbnRzIGFuZCBtYXAuXG4gICAgICB0aGlzLmNoZWNrU2VsZWN0aW9uQ2FsbGJhY2soKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQnRuQ2xpY2tIYW5kbGVyKCkge1xuICAgIC8vTWFrZSBzdXJlIGFuIGlkIHNlbGVjdGVkLlxuICAgIGlmICghdGhpcy5zZWxlY3QudmFsdWUpIHtcbiAgICAgIGFsZXJ0KFwiUGxlYXNlIHNlbGVjdCBhbiBJRCB0byBkZWxldGUhXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL1Byb21wdCBjb25maXJtYXRpb24uXG4gICAgY29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybWF0aW9uTW9kYWwoXG4gICAgICBcIldhcm5pbmchXCIsXG4gICAgICBgPHN0cm9uZz5UaGlzIG9wZXJhdGlvbiBjYW5ub3QgYmUgdW5kb25lITwvc3Ryb25nPlxuICAgICAgQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSA8Yj4ke3RoaXMubmFtZS5yZXBsYWNlKC8tL2csIFwiIFwiKX0gJHtcbiAgICAgICAgdGhpcy5zZWxlY3QudmFsdWVcbiAgICAgIH08L2I+IGFuZCBhbGwgaXRzIGNoaWxkcmVuP2AsXG4gICAgICBcIllvdXIgYnJvd3NlciBkb2VzJ3Qgc3VwcG9ydCB0aGlzIGZlYXR1cmUhIC0gUGxlYXNlIGNoYW5nZSB0byBhIG1vcmUgbW9kZXJuIG9uZS5cIixcbiAgICAgIHRoaXMuZGVsZXRlTG9nRW50cnkuYmluZCh0aGlzKSAvL0RlbGV0ZSB0aGUgZW50cnkgaWYgY29uZmlybWVkLlxuICAgICk7XG4gICAgbW9kYWwuc2hvdygpO1xuICB9XG59XG5cbmNsYXNzIFRlc3RFdmVudExvZyBleHRlbmRzIExvZyB7XG4gIC8vU3BlY2lmaWMgdGVzdCBldmVudCBjbGFzcyB0byBkZWFsIHdpdGggbG9nIGludGVyYWN0aW9ucy5cbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlLCBjaGlsZENsYXNzLCBjaGVja1NlbGVjdGlvbkNhbGxiYWNrKSB7XG4gICAgLy9QYXJlbnQgY29uc3RydWN0b3IuXG4gICAgc3VwZXIoXG4gICAgICBcInRlc3QtZXZlbnRcIixcbiAgICAgIG5ldyBUZXN0RXZlbnRJbnRlcmZhY2Uoc2VydmVySW50ZXJmYWNlKSxcbiAgICAgIG51bGwsXG4gICAgICBjaGlsZENsYXNzLFxuICAgICAgY2hlY2tTZWxlY3Rpb25DYWxsYmFja1xuICAgICk7XG4gICAgLy9BZGQgb3B0aW9uIHRvIG9wZW4gdGhlIHRlc3QgZXZlbnQuXG4gICAgdGhpcy5vcGVuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcGVuLXRlc3QtZXZlbnQtYnRuXCIpO1xuICAgIHRoaXMub3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5vcGVuQnRuQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgbmV3QnRuQ2xpY2tIYW5kbGVyKCkge1xuICAgIC8vU2V0IHBvc3REYXRhLlxuICAgIHRoaXMucG9zdERhdGEgPSBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF07XG4gICAgLy9DYWxsIHBhcmVudCBmdW5jdGlvbi5cbiAgICBhd2FpdCBzdXBlci5uZXdCdG5DbGlja0hhbmRsZXIoKTtcbiAgfVxuXG4gIGFzeW5jIG9wZW5CdG5DbGlja0hhbmRsZXIoKSB7XG4gICAgLy9DaGVjayBzZWxlY3QgdmFsdWUuXG4gICAgaWYgKCF0aGlzLnNlbGVjdC52YWx1ZSkge1xuICAgICAgYWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGFuIElEIHRvIG9wZW4uXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy9PcGVuIGxvZyBlbnRyeS5cbiAgICAgIGF3YWl0IHRoaXMuZGF0YUludGVyZmFjZS5wdXQodGhpcy5zZWxlY3QudmFsdWUsIFwib3BlblwiKTtcbiAgICAgIC8vVXBkYXRlIGRhdGFMaXN0IGFuZCBzZWxlY3Qgb3B0aW9ucycgc3RhdHVzIGZvciB0aGlzIGFuZCBhbGwgdGhlIGNoaWxkcmVuIGNsYXNzZXMuXG4gICAgICBhd2FpdCB0aGlzLnJlY3Vyc2l2ZVVwZGF0ZSgpO1xuICAgICAgLy9DaGVjayBsb2cgSURzLCBoaWRlIHNlZ21lbnRzIGFuZCBtYXAuXG4gICAgICB0aGlzLmNoZWNrU2VsZWN0aW9uQ2FsbGJhY2soKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZWRpdEJ0bkNsaWNrSGFuZGxlcigpIHtcbiAgICAvL0NoZWNrIHNlbGVjdCB2YWx1ZS5cbiAgICBpZiAoIXRoaXMuc2VsZWN0LnZhbHVlKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYW4gSUQgdG8gZWRpdC5cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vRmluZCB0aGUgc2VsZWN0ZWQgbG9nIGVudHJ5LlxuICAgIGNvbnN0IHNlbGVjdGVkTG9nID0gdGhpcy5kYXRhTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSB0aGlzLnNlbGVjdC52YWx1ZVxuICAgICk7XG4gICAgLy9CdWlsZCB0aGUgZWRpdCB3aW5kb3cuXG4gICAgdGhpcy5lZGl0Q29udGFpbmVyID0gbmV3IFRlc3RFdmVudEVkaXQoc2VsZWN0ZWRMb2csIHRoaXMuZGF0YUludGVyZmFjZSk7XG4gICAgLy9DYWxsIHBhcmVudCBmdW5jdGlvbi5cbiAgICBhd2FpdCBzdXBlci5lZGl0QnRuQ2xpY2tIYW5kbGVyKCk7XG4gIH1cbn1cblxuY2xhc3MgU2hpZnRMb2cgZXh0ZW5kcyBMb2cge1xuICAvL1NwZWNpZmljIHNoaWZ0IGNsYXNzIHRvIGRlYWwgd2l0aCBsb2cgaW50ZXJhY3Rpb25zLlxuICBjb25zdHJ1Y3RvcihcbiAgICBzZXJ2ZXJJbnRlcmZhY2UsXG4gICAgY2hpbGRDbGFzcyxcbiAgICBjaGVja1NlbGVjdGlvbkNhbGxiYWNrLFxuICAgIGN1cnJlbnRVc2VyXG4gICkge1xuICAgIC8vUGFyZW50IGNvbnN0cnVjdG9yLlxuICAgIHN1cGVyKFxuICAgICAgXCJzaGlmdFwiLFxuICAgICAgbmV3IFNoaWZ0SW50ZXJmYWNlKHNlcnZlckludGVyZmFjZSksXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRlc3QtZXZlbnQtaWRcIiksXG4gICAgICBjaGlsZENsYXNzLFxuICAgICAgY2hlY2tTZWxlY3Rpb25DYWxsYmFja1xuICAgICk7XG4gICAgLy9Jbml0aWFsaXplIGNoaWxkIHZhcmlhYmxlcyBhbmQgb2JqZWN0cy5cbiAgICB0aGlzLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG4gICAgdGhpcy5wZXJmb3JtZXJJbnRlcmZhY2UgPSBuZXcgUGVyZm9ybWVySW50ZXJmYWNlKHNlcnZlckludGVyZmFjZSk7XG4gICAgdGhpcy5wZXJzb25uZWxJbnRlcmZhY2UgPSBuZXcgUGVyc29ubmVsSW50ZXJmYWNlKHNlcnZlckludGVyZmFjZSk7XG4gICAgdGhpcy52ZWhpY2xlSW50ZXJmYWNlID0gbmV3IFZlaGljbGVJbnRlcmZhY2Uoc2VydmVySW50ZXJmYWNlKTtcbiAgICB0aGlzLnBlcmZvcm1lckxpc3QgPSBudWxsO1xuICAgIHRoaXMucGVyc29ubmVsTGlzdCA9IG51bGw7XG4gICAgdGhpcy52ZWhpY2xlTGlzdCA9IG51bGw7XG4gIH1cblxuICBhc3luYyBuZXdCdG5DbGlja0hhbmRsZXIoKSB7XG4gICAgLy9NYWtlIHN1cmUgYSB0ZXN0IGV2ZW50IGlzIHNlbGVjdGVkLlxuICAgIGlmICghdGhpcy5wYXJlbnRTZWxlY3QudmFsdWUpIHtcbiAgICAgIGFsZXJ0KFwiUGxlYXNlIHNlbGVjdCBhIHRlc3QgZXZlbnQgdG8gYWRkIGEgbmV3IHNoaWZ0IVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9NYWtlIHN1cmUgYSB1c2VyIGlzIHNlbGVjdGVkIGZyb20gdGhlIGludGVyZmFjZS5cbiAgICBpZiAoIXRoaXMuY3VycmVudFVzZXIuaWQpIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1pY29uXCIpLmNsaWNrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vRmV0Y2ggcGVyZm9ybWVyIGFuZCB2ZWhpY2xlIGRhdGEgZnJvbSBzZXJ2ZXIuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucGVyZm9ybWVyTGlzdCA9IGF3YWl0IHRoaXMucGVyZm9ybWVySW50ZXJmYWNlLmdldCgpO1xuICAgICAgdGhpcy52ZWhpY2xlTGlzdCA9IGF3YWl0IHRoaXMudmVoaWNsZUludGVyZmFjZS5nZXQoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vSWYgdGhlcmUgYXJlIG5vIHBlcmZvcm1lcnMgb3IgdmVoaWNsZXMgaW4gdGhlIGxpc3QsIGFsZXJ0IHRoZSB1c2VyLlxuICAgIGlmICh0aGlzLnBlcmZvcm1lckxpc3QubGVuZ3RoID09IDAgfHwgdGhpcy52ZWhpY2xlTGlzdC5sZW5ndGggPT0gMCkge1xuICAgICAgYWxlcnQoXG4gICAgICAgIFwiUGxlYXNlIGNvbmZpZ3VyZSBhIHBlcmZvcm1lciBhbmQgYSB2ZWhpY2xlIGJlZm9yZSB0cnlpbmcgdG8gYWRkIGEgbmV3IHNoaWZ0IVwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL0ZpbmQgdGhlIHBlcmZvcm1lciB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdGVkIHVzZXIuIElmIG5vbmUgbWF0Y2hlcywgdXNlIHRoZSBmaXJzdCBvbmUuXG4gICAgbGV0IG1hdGNoZWRQZXJmb3JtZXIgPVxuICAgICAgdGhpcy5wZXJmb3JtZXJMaXN0LmZpbmQoXG4gICAgICAgIChwZXJmb3JtZXIpID0+IHBlcmZvcm1lci5pbnN0aXR1dGlvbiA9PSB0aGlzLmN1cnJlbnRVc2VyLmluc3RpdHV0aW9uXG4gICAgICApIHx8IHRoaXMucGVyZm9ybWVyTGlzdFswXTtcbiAgICAvL0ZpbmQgYSB2ZWhpY2xlIHRoYXQgbWF0Y2hlcyB0aGUgc2VsZWN0ZWQgdXNlcidzIGluc3RpdHV0aW9uLiBJZiBub25lIG1hdGNoZXMsIHVzZSB0aGUgZmlyc3Qgb25lLlxuICAgIGxldCBtYXRjaGVkVmVoaWNsZSA9XG4gICAgICB0aGlzLnZlaGljbGVMaXN0LmZpbmQoXG4gICAgICAgICh2ZWhpY2xlKSA9PiB2ZWhpY2xlLmluc3RpdHV0aW9uID09IHRoaXMuY3VycmVudFVzZXIuaW5zdGl0dXRpb25cbiAgICAgICkgfHwgdGhpcy52ZWhpY2xlTGlzdFswXTtcbiAgICAvL1NldCBwb3N0RGF0YS5cbiAgICB0aGlzLnBvc3REYXRhID0gW1xuICAgICAgdGhpcy5wYXJlbnRTZWxlY3QudmFsdWUsXG4gICAgICB0aGlzLmN1cnJlbnRVc2VyLmlkLFxuICAgICAgdGhpcy5jdXJyZW50VXNlci5pZCxcbiAgICAgIHRoaXMuY3VycmVudFVzZXIuaWQsXG4gICAgICB0aGlzLmN1cnJlbnRVc2VyLmlkLFxuICAgICAgbWF0Y2hlZFBlcmZvcm1lci5pZCxcbiAgICAgIG51bGwsXG4gICAgICBudWxsLFxuICAgICAgbWF0Y2hlZFZlaGljbGUuaWQsXG4gICAgICBudWxsLFxuICAgIF07XG4gICAgLy9DYWxsIHBhcmVudCBmdW5jdGlvbi5cbiAgICBhd2FpdCBzdXBlci5uZXdCdG5DbGlja0hhbmRsZXIoKTtcbiAgfVxuXG4gIGFzeW5jIGVkaXRCdG5DbGlja0hhbmRsZXIoKSB7XG4gICAgLy9DaGVjayBzZWxlY3QgdmFsdWUuXG4gICAgaWYgKCF0aGlzLnNlbGVjdC52YWx1ZSkge1xuICAgICAgYWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGFuIElEIHRvIGVkaXQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL0ZpbmQgdGhlIHNlbGVjdGVkIGxvZyBlbnRyeS5cbiAgICBjb25zdCBzZWxlY3RlZExvZyA9IHRoaXMuZGF0YUxpc3QuZmluZChcbiAgICAgIChlbnRyeSkgPT4gZW50cnkuaWQgPT0gdGhpcy5zZWxlY3QudmFsdWVcbiAgICApO1xuICAgIC8vRmV0Y2ggcGVyZm9ybWVyLCBwZXJzb25uZWwgYW5kIHZlaGljbGUgZGF0YSBmcm9tIHNlcnZlci5cbiAgICB0cnkge1xuICAgICAgdGhpcy5wZXJmb3JtZXJMaXN0ID0gYXdhaXQgdGhpcy5wZXJmb3JtZXJJbnRlcmZhY2UuZ2V0KCk7XG4gICAgICB0aGlzLnBlcnNvbm5lbExpc3QgPSBhd2FpdCB0aGlzLnBlcnNvbm5lbEludGVyZmFjZS5nZXQoKTtcbiAgICAgIHRoaXMudmVoaWNsZUxpc3QgPSBhd2FpdCB0aGlzLnZlaGljbGVJbnRlcmZhY2UuZ2V0KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL0J1aWxkIHRoZSBlZGl0IHdpbmRvdy5cbiAgICB0aGlzLmVkaXRDb250YWluZXIgPSBuZXcgU2hpZnRFZGl0KFxuICAgICAgc2VsZWN0ZWRMb2csXG4gICAgICB0aGlzLmRhdGFJbnRlcmZhY2UsXG4gICAgICB0aGlzLnBlcmZvcm1lckxpc3QsXG4gICAgICB0aGlzLnBlcnNvbm5lbExpc3QsXG4gICAgICB0aGlzLnZlaGljbGVMaXN0XG4gICAgKTtcbiAgICAvL0NhbGwgcGFyZW50IGZ1bmN0aW9uLlxuICAgIGF3YWl0IHN1cGVyLmVkaXRCdG5DbGlja0hhbmRsZXIoKTtcbiAgfVxufVxuXG5jbGFzcyBMZWdMb2cgZXh0ZW5kcyBMb2cge1xuICAvL1NwZWNpZmljIGxlZyBjbGFzcyB0byBkZWFsIHdpdGggbG9nIGludGVyYWN0aW9ucy5cbiAgY29uc3RydWN0b3Ioc2VydmVySW50ZXJmYWNlLCBjaGVja1NlbGVjdGlvbkNhbGxiYWNrKSB7XG4gICAgLy9QYXJlbnQgY29uc3RydWN0b3IuXG4gICAgc3VwZXIoXG4gICAgICBcImxlZ1wiLFxuICAgICAgbmV3IExlZ0ludGVyZmFjZShzZXJ2ZXJJbnRlcmZhY2UpLFxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGlmdC1pZFwiKSxcbiAgICAgIG51bGwsXG4gICAgICBjaGVja1NlbGVjdGlvbkNhbGxiYWNrXG4gICAgKTtcbiAgICAvL0luaXRpYWxpemUgY2hpbGQgdmFyaWFibGVzIGFuZCBvYmplY3RzLlxuICAgIHRoaXMud2VhdGhlckludGVyZmFjZSA9IG5ldyBXZWF0aGVySW50ZXJmYWNlKHNlcnZlckludGVyZmFjZSk7XG4gICAgdGhpcy5wb3NlU291cmNlSW50ZXJmYWNlID0gbmV3IFBvc2VTb3VyY2VJbnRlcmZhY2Uoc2VydmVySW50ZXJmYWNlKTtcblxuICAgIHRoaXMud2VhdGhlckxpc3QgPSBudWxsO1xuICAgIHRoaXMucG9zZVNvdXJjZUxpc3QgPSBudWxsO1xuICB9XG5cbiAgYXN5bmMgbmV3QnRuQ2xpY2tIYW5kbGVyKCkge1xuICAgIC8vTWFrZSBzdXJlIGEgc2hpZnQgaXMgc2VsZWN0ZWQuXG4gICAgaWYgKCF0aGlzLnBhcmVudFNlbGVjdC52YWx1ZSkge1xuICAgICAgYWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGEgc2hpZnQgdG8gYWRkIGEgbmV3IGxlZyFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vRmV0Y2ggd2VhdGhlciBhbmQgcG9zZSBzb3VyY2UgZGF0YSBmcm9tIHNlcnZlci5cbiAgICB0cnkge1xuICAgICAgLy9XZWF0aGVyIGRhdGEgaXMgc3RhdGljLiBTa2lwIGlmIGFscmVhZHkgZmV0Y2hlZC5cbiAgICAgIGlmICghdGhpcy53ZWF0aGVyTGlzdCB8fCB0aGlzLndlYXRoZXJMaXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHRoaXMud2VhdGhlckxpc3QgPSBhd2FpdCB0aGlzLndlYXRoZXJJbnRlcmZhY2UuZ2V0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLnBvc2VTb3VyY2VMaXN0ID0gYXdhaXQgdGhpcy5wb3NlU291cmNlSW50ZXJmYWNlLmdldCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9JZiB0aGVyZSBhcmUgbm8gd2VhdGhlciBzdGF0ZXMsIGFsZXJ0IHRoZSB1c2VyLlxuICAgIGlmICh0aGlzLndlYXRoZXJMaXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICBhbGVydChcbiAgICAgICAgXCJXZWF0aGVyIGxpc3QgZW1wdHkuIFlvdXIgZGF0YWJhc2Ugd2FzIG5vdCBwcm9wZXJseSBpbml0aWFsaXplZC4gUGxlYXNlIGZpeCB0aGlzIGJlZm9yZSBjb250aW51aW5nLlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL0lmIHRoZSBwb3NlIHNvdXJjZSBsaXN0IGlzIGVtcHR5LCBhbGVydCB0aGUgdXNlci5cbiAgICBpZiAodGhpcy5wb3NlU291cmNlTGlzdC5sZW5ndGggPT0gMCkge1xuICAgICAgYWxlcnQoXCJQbGVhc2UgY29uZmlndXJlIGEgcG9zZSBzb3VyY2UgYmVmb3JlIHRyeWluZyB0byBhZGQgYSBuZXcgbGVnIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9TZXQgcG9zdERhdGEuXG4gICAgdGhpcy5wb3N0RGF0YSA9IFtcbiAgICAgIHRoaXMucGFyZW50U2VsZWN0LnZhbHVlLFxuICAgICAgdGhpcy53ZWF0aGVyTGlzdFswXS5pZCxcbiAgICAgIHRoaXMucG9zZVNvdXJjZUxpc3RbMF0uaWQsXG4gICAgICBudWxsLFxuICAgIF07XG4gICAgLy9DYWxsIHBhcmVudCBmdW5jdGlvbi5cbiAgICBhd2FpdCBzdXBlci5uZXdCdG5DbGlja0hhbmRsZXIoKTtcbiAgfVxuXG4gIGFzeW5jIGVkaXRCdG5DbGlja0hhbmRsZXIoKSB7XG4gICAgLy9DaGVjayBzZWxlY3QgdmFsdWUuXG4gICAgaWYgKCF0aGlzLnNlbGVjdC52YWx1ZSkge1xuICAgICAgYWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGFuIElEIHRvIGVkaXQuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvL0ZpbmQgdGhlIHNlbGVjdGVkIGxvZyBlbnRyeS5cbiAgICBjb25zdCBzZWxlY3RlZExvZyA9IHRoaXMuZGF0YUxpc3QuZmluZChcbiAgICAgIChlbnRyeSkgPT4gZW50cnkuaWQgPT0gdGhpcy5zZWxlY3QudmFsdWVcbiAgICApO1xuICAgIC8vRmV0Y2ggd2VhdGhlciBhbmQgcG9zZSBzb3VyY2UgZGF0YSBmcm9tIHNlcnZlci5cbiAgICB0cnkge1xuICAgICAgLy9XZWF0aGVyIGRhdGEgaXMgc3RhdGljLiBTa2lwIGlmIGFscmVhZHkgZmV0Y2hlZC5cbiAgICAgIGlmICghdGhpcy53ZWF0aGVyTGlzdCB8fCB0aGlzLndlYXRoZXJMaXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIHRoaXMud2VhdGhlckxpc3QgPSBhd2FpdCB0aGlzLndlYXRoZXJJbnRlcmZhY2UuZ2V0KCk7XG4gICAgICB9XG4gICAgICB0aGlzLnBvc2VTb3VyY2VMaXN0ID0gYXdhaXQgdGhpcy5wb3NlU291cmNlSW50ZXJmYWNlLmdldCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9CdWlsZCB0aGUgZWRpdCB3aW5kb3cuXG4gICAgdGhpcy5lZGl0Q29udGFpbmVyID0gbmV3IExlZ0VkaXQoXG4gICAgICBzZWxlY3RlZExvZyxcbiAgICAgIHRoaXMuZGF0YUludGVyZmFjZSxcbiAgICAgIHRoaXMud2VhdGhlckxpc3QsXG4gICAgICB0aGlzLnBvc2VTb3VyY2VMaXN0XG4gICAgKTtcbiAgICAvL0NhbGwgcGFyZW50IGZ1bmN0aW9uLlxuICAgIGF3YWl0IHN1cGVyLmVkaXRCdG5DbGlja0hhbmRsZXIoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTG9nU2VsZWN0aW9uIHtcbiAgLy9Db250YWluZXIgY2xhc3MgZm9yIHRoZSBsb2cgc2VsZWN0aW9uIHNlY3Rpb24gb2YgdGhlIHdlYiBwYWdlLlxuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UsIHJvc0ludGVyZmFjZSwgY3VycmVudFVzZXIsIGRvbmVDYWxsYmFjaykge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMucm9zID0gcm9zSW50ZXJmYWNlO1xuICAgIHRoaXMuZG9uZUNhbGxiYWNrID0gZG9uZUNhbGxiYWNrO1xuICAgIC8vUmVhY2ggdG8gRE9NIGVsZW1lbnRzLlxuICAgIHRoaXMuc3RhcnRMb2dnaW5nQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGFydC1sb2dnaW5nLWJ0blwiKTtcbiAgICB0aGlzLmF1dG9SZWZyZXNoQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhdXRvLXJlZnJlc2hcIik7XG4gICAgLy9Jbml0aWFsaXplIHZhcmlhYmxlcy5cbiAgICB0aGlzLmlzTG9nZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMuc2V0TG9nZ2luZ0NsaWVudCA9IG5ldyBST1NMSUIuU2VydmljZSh7XG4gICAgICByb3M6IHRoaXMucm9zLFxuICAgICAgbmFtZTogXCIvZnR0X3Jvcy9zZXRfc3RhdHVzXCIsXG4gICAgICBzZXJ2aWNlVHlwZTogXCJzdGRfc3J2cy9TZXRCb29sXCIsXG4gICAgfSk7XG4gICAgdGhpcy5nZXRMb2dnaW5nQ2xpZW50ID0gbmV3IFJPU0xJQi5TZXJ2aWNlKHtcbiAgICAgIHJvczogdGhpcy5yb3MsXG4gICAgICBuYW1lOiBcIi9mdHRfcm9zL2dldF9zdGF0dXNcIixcbiAgICAgIHNlcnZpY2VUeXBlOiBcInN0ZF9zcnZzL1RyaWdnZXJcIixcbiAgICB9KTtcbiAgICAvL0luaXRpYWxpemUgbG9nIG9iamVjdHMuXG4gICAgdGhpcy5sZWdMb2cgPSBuZXcgTGVnTG9nKFxuICAgICAgc2VydmVySW50ZXJmYWNlLFxuICAgICAgdGhpcy5jaGVja1NlbGVjdGVkTG9ncy5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLnNoaWZ0TG9nID0gbmV3IFNoaWZ0TG9nKFxuICAgICAgc2VydmVySW50ZXJmYWNlLFxuICAgICAgdGhpcy5sZWdMb2csXG4gICAgICB0aGlzLmNoZWNrU2VsZWN0ZWRMb2dzLmJpbmQodGhpcyksXG4gICAgICBjdXJyZW50VXNlclxuICAgICk7XG4gICAgdGhpcy50ZXN0RXZlbnRMb2cgPSBuZXcgVGVzdEV2ZW50TG9nKFxuICAgICAgc2VydmVySW50ZXJmYWNlLFxuICAgICAgdGhpcy5zaGlmdExvZyxcbiAgICAgIHRoaXMuY2hlY2tTZWxlY3RlZExvZ3MuYmluZCh0aGlzKVxuICAgICk7XG4gICAgLy9BZGQgZXZlbnQgbGlzdGVuZXJzLlxuICAgIHRoaXMuc3RhcnRMb2dnaW5nQnRuLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLmxvZ2dpbmdCdG5DbGlja0hhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgLy9UcmlnZ2VyIGluaXQgYmVoYXZpb3IuXG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBhc3luYyBpbml0KCkge1xuICAgIGF3YWl0IHRoaXMudGVzdEV2ZW50TG9nLnVwZGF0ZVNlbGVjdCgpO1xuICAgIGNvbnN0IHBlcnNvbm5lbExpc3QgPSBhd2FpdCB0aGlzLnNoaWZ0TG9nLnBlcnNvbm5lbEludGVyZmFjZS5nZXQoKTtcbiAgICBpZiAocGVyc29ubmVsTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItaWNvblwiKS5jbGljaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvL1Byb21wdCBjb25maWd1cmF0aW9uIG5vdGljZS5cbiAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENvbmZpcm1hdGlvbk1vZGFsKFxuICAgICAgICBcIldlbGNvbWUhXCIsXG4gICAgICAgIGBJdCBsb29rcyBsaWtlIHlvdSBoYXZlbid0IGNvbmZpZ3VyZWQgYW55IHVzZXJzIHlldC4gXG4gICAgICAgIFBsZWFzZSBpbnB1dCBhdCBsZWFzdCBvbmUgZW50cnkgZm9yIGVhY2ggPHN0cm9uZz5EYXRhYmFzZSBDb25maWd1cmF0aW9uPC9zdHJvbmc+IHRhYmxlLiBcbiAgICAgICAgQ2xpY2tpbmcgb24gdGhlIHRvcCBsZWZ0IGNvZ3doZWVsIG9mIHRoZSBtYWluIHBhZ2Ugb3Igb24gdGhlIDxpPmNvbmZpcm08L2k+IGJ1dHRvbiBiZWxvdyB3aWxsIHRha2UgeW91IHRvIHRoZSBjb25maWd1cmF0aW9uIHBhZ2UuYCxcbiAgICAgICAgXCJZb3VyIGJyb3dzZXIgZG9lcyd0IHN1cHBvcnQgdGhpcyBmZWF0dXJlISAtIFBsZWFzZSBjaGFuZ2UgdG8gYSBtb3JlIG1vZGVybiBvbmUuXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbmZpZy1pY29uXCIpLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBtb2RhbC5zaG93KCk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlTG9nZ2luZygpIHtcbiAgICAvL1RvZ2dsZSBsb2dnaW5nIHN0YXR1cy5cbiAgICB0aGlzLmlzTG9nZ2luZyA9ICF0aGlzLmlzTG9nZ2luZztcbiAgICAvL1VwZGF0ZSBidXR0b24gZGlzcGxheS5cbiAgICBpZiAoIXRoaXMuaXNMb2dnaW5nKSB7XG4gICAgICB0aGlzLnN0YXJ0TG9nZ2luZ0J0bi50ZXh0Q29udGVudCA9IFwiU3RhcnQgTG9nZ2luZ1wiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXJ0TG9nZ2luZ0J0bi50ZXh0Q29udGVudCA9IFwiU3RvcCBMb2dnaW5nXCI7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlTG9nZ2luZygpIHtcbiAgICAvL0lmIFJPUyBpcyBjb25uZWN0ZWRcbiAgICBpZiAodGhpcy5yb3MuaXNDb25uZWN0ZWQpIHtcbiAgICAgIC8vQ2hlY2sgY3VycmVudCBsb2dnaW5nIHN0YXR1cyBpbiByb3MuXG4gICAgICBjb25zdCByZXF1ZXN0ID0ge307XG4gICAgICB0aGlzLmdldExvZ2dpbmdDbGllbnQuY2FsbFNlcnZpY2UocmVxdWVzdCwgKHJlc3VsdCkgPT4ge1xuICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgIT0gdGhpcy5pc0xvZ2dpbmcpIHtcbiAgICAgICAgICAvL1RvZ2dsZSBsb2dnaW5nIHRvIG1hdGNoIHN0YXR1cyBpbiByb3MuXG4gICAgICAgICAgdGhpcy50b2dnbGVMb2dnaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy9JZiBhbGwgbG9nIGlkcyBoYXZlIGJlZW4gc2VsZWN0ZWQuXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLnRlc3RFdmVudExvZy5zZWxlY3QudmFsdWUgJiZcbiAgICAgICAgICB0aGlzLnNoaWZ0TG9nLnNlbGVjdC52YWx1ZSAmJlxuICAgICAgICAgIHRoaXMubGVnTG9nLnNlbGVjdC52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICAvL0VuYWJsZSB0aGUgbG9nZ2luZyBidXR0b24gaWYgYWxsIGxvZ3MgYXJlIG9wZW4gb3IgaWYgdGhlIGxvZ2dpbmcgc3RhdHVzIGlzIGFjdGl2ZSBhbmQgYWxsIHRoZSBsb2dzIGFyZSBjbG9zZWQuXG4gICAgICAgICAgbGV0IGZvcmNlQWN0aXZhdGUgPSBmYWxzZTtcbiAgICAgICAgICBpZiAodGhpcy5pc0xvZ2dpbmcpIHtcbiAgICAgICAgICAgIC8vRmluZCBpZiBhbGwgdGVzdCBldmVudHMgYXJlIGNsb3NlZC5cbiAgICAgICAgICAgIGNvbnN0IHRlc3RFdmVudHNDbG9zZWQgPVxuICAgICAgICAgICAgICAhdGhpcy50ZXN0RXZlbnRMb2cub3BlbiAmJlxuICAgICAgICAgICAgICB0aGlzLnRlc3RFdmVudExvZy5kYXRhTGlzdC5yZWR1Y2UoXG4gICAgICAgICAgICAgICAgKGNsb3NlZCwgY3VycikgPT4gY2xvc2VkICYmICEhY3Vyci5lbmRUaW1lLFxuICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmICh0ZXN0RXZlbnRzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgIGZvcmNlQWN0aXZhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRlc3RFdmVudExvZy5vcGVuKSB7XG4gICAgICAgICAgICAgIC8vVGhpcyB0ZXN0IGV2ZW50IGlzIG9wZW4uIEZpbmQgaWYgYWxsIHNoaWZ0cyBhcmUgY2xvc2VkLlxuICAgICAgICAgICAgICBjb25zdCBzaGlmdHNDbG9zZWQgPVxuICAgICAgICAgICAgICAgICF0aGlzLnNoaWZ0TG9nLm9wZW4gJiZcbiAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0TG9nLmRhdGFMaXN0LnJlZHVjZShcbiAgICAgICAgICAgICAgICAgIChjbG9zZWQsIGN1cnIpID0+IGNsb3NlZCAmJiAhIWN1cnIuZW5kVGltZSxcbiAgICAgICAgICAgICAgICAgIHRydWVcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBpZiAoc2hpZnRzQ2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgZm9yY2VBY3RpdmF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zaGlmdExvZy5vcGVuKSB7XG4gICAgICAgICAgICAgICAgLy9UaGlzIHNoaWZ0IGlzIG9wZW4uIEZpbmQgaWYgYWxsIGxlZ3MgYXJlIGNsb3NlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBsZWdzQ2xvc2VkID1cbiAgICAgICAgICAgICAgICAgICF0aGlzLmxlZ0xvZy5vcGVuICYmXG4gICAgICAgICAgICAgICAgICB0aGlzLmxlZ0xvZy5kYXRhTGlzdC5yZWR1Y2UoXG4gICAgICAgICAgICAgICAgICAgIChjbG9zZWQsIGN1cnIpID0+IGNsb3NlZCAmJiAhIWN1cnIuZW5kVGltZSxcbiAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAobGVnc0Nsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgZm9yY2VBY3RpdmF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICh0aGlzLnRlc3RFdmVudExvZy5vcGVuICYmXG4gICAgICAgICAgICAgIHRoaXMuc2hpZnRMb2cub3BlbiAmJlxuICAgICAgICAgICAgICB0aGlzLmxlZ0xvZy5vcGVuKSB8fFxuICAgICAgICAgICAgZm9yY2VBY3RpdmF0ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5zdGFydExvZ2dpbmdCdG4uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGFydExvZ2dpbmdCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvL0VuYWJsZSB0aGUgYXV0byByZWZyZXNoIGJveCBpZiBhbGwgbG9ncyBhcmUgb3Blbi5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnRlc3RFdmVudExvZy5vcGVuICYmXG4gICAgICAgICAgICB0aGlzLnNoaWZ0TG9nLm9wZW4gJiZcbiAgICAgICAgICAgIHRoaXMubGVnTG9nLm9wZW5cbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b1JlZnJlc2hCb3guZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXV0b1JlZnJlc2hCb3guY2hlY2tlZCkge1xuICAgICAgICAgICAgICB0aGlzLmF1dG9SZWZyZXNoQm94LmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmF1dG9SZWZyZXNoQm94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy9BY3RpdmF0ZSB0aGUgYXV0byByZWZyZXNoIGJveCBpZiBsb2dnaW5nLCBkZWFjdGl2YXRlIGl0IGlmIG5vdC5cbiAgICAgICAgICBpZiAodGhpcy5pc0xvZ2dpbmcpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRvUmVmcmVzaEJveC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgIHRoaXMuYXV0b1JlZnJlc2hCb3guY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXV0b1JlZnJlc2hCb3guY2hlY2tlZCkge1xuICAgICAgICAgICAgICB0aGlzLmF1dG9SZWZyZXNoQm94LmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydExvZ2dpbmdCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuYXV0b1JlZnJlc2hCb3guY2hlY2tlZCkge1xuICAgICAgICB0aGlzLmF1dG9SZWZyZXNoQm94LmNsaWNrKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmF1dG9SZWZyZXNoQm94LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBsb2dnaW5nQnRuQ2xpY2tIYW5kbGVyKCkge1xuICAgIC8vQ2FsbCByb3Mgc2VydmljZSB0byBzdGFydC9zdG9wIGxvZ2dpbmcuXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcbiAgICAgIGRhdGE6ICF0aGlzLmlzTG9nZ2luZyxcbiAgICB9O1xuICAgIHRoaXMuc2V0TG9nZ2luZ0NsaWVudC5jYWxsU2VydmljZShyZXF1ZXN0LCAocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgLy9VcGRhdGUgdGhlIHRhYmxlLlxuICAgICAgICB0aGlzLmRvbmVDYWxsYmFjaygpO1xuICAgICAgICAvL1VwZGF0ZSB0aGUgbG9nZ2luZyBzdGF0dXNcbiAgICAgICAgdGhpcy51cGRhdGVMb2dnaW5nKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChyZXN1bHQubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjaGVja1NlbGVjdGVkTG9ncygpIHtcbiAgICAvL0hpZGUgdGhlIHNlZ21lbnQgZGV0YWlscyBhbmQgbWFwLlxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VnbWVudC1kZXRhaWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXZpZXdlclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgLy9VcGRhdGUgc3RhdHVzIGRvdCBmb3IgYWxsIGxvZ3NcbiAgICBjb25zdCBsb2dzID0gW3RoaXMudGVzdEV2ZW50TG9nLCB0aGlzLnNoaWZ0TG9nLCB0aGlzLmxlZ0xvZ107XG4gICAgZm9yIChjb25zdCBsb2cgb2YgbG9ncykge1xuICAgICAgaWYgKGxvZy5zZWxlY3QudmFsdWUpIHtcbiAgICAgICAgaWYgKGxvZy5vcGVuKSB7XG4gICAgICAgICAgbG9nLnN0YXR1c0RvdC5jbGFzc0xpc3QucmVtb3ZlKFwic3RhdHVzLXJlZFwiKTtcbiAgICAgICAgICBsb2cuc3RhdHVzRG90LmNsYXNzTGlzdC5hZGQoXCJzdGF0dXMtZ3JlZW5cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbG9nLnN0YXR1c0RvdC5jbGFzc0xpc3QucmVtb3ZlKFwic3RhdHVzLWdyZWVuXCIpO1xuICAgICAgICAgIGxvZy5zdGF0dXNEb3QuY2xhc3NMaXN0LmFkZChcInN0YXR1cy1yZWRcIik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy5zdGF0dXNEb3QuY2xhc3NMaXN0LnJlbW92ZShcInN0YXR1cy1yZWRcIik7XG4gICAgICAgIGxvZy5zdGF0dXNEb3QuY2xhc3NMaXN0LnJlbW92ZShcInN0YXR1cy1ncmVlblwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy9VcGRhdGUgZW5kL29wZW4gb3B0aW9uIGZvciB0ZXN0IGV2ZW50XG4gICAgaWYgKHRoaXMudGVzdEV2ZW50TG9nLm9wZW4pIHtcbiAgICAgIHRoaXMudGVzdEV2ZW50TG9nLmVuZEJ0bi5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XG4gICAgICB0aGlzLnRlc3RFdmVudExvZy5vcGVuQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50ZXN0RXZlbnRMb2cuZW5kQnRuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIHRoaXMudGVzdEV2ZW50TG9nLm9wZW5CdG4uc3R5bGUuZGlzcGxheSA9IFwiZ3JpZFwiO1xuICAgIH1cbiAgICAvL0d1YXJhbnRlZSB0aGUgc2VnbWVudCBhdXRvLXJlZnJlc2ggaXNuJ3QgYWN0aXZlLlxuICAgIGlmICh0aGlzLmF1dG9SZWZyZXNoQm94LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuYXV0b1JlZnJlc2hCb3guY2xpY2soKTtcbiAgICB9XG4gICAgLy9UcmlnZ2VyIGNhbGxiYWNrIGlmIGFsbCBsb2cgaWRzIGhhdmUgYmVlbiBzZWxlY3RlZC5cbiAgICBpZiAoXG4gICAgICB0aGlzLnRlc3RFdmVudExvZy5zZWxlY3QudmFsdWUgJiZcbiAgICAgIHRoaXMuc2hpZnRMb2cuc2VsZWN0LnZhbHVlICYmXG4gICAgICB0aGlzLmxlZ0xvZy5zZWxlY3QudmFsdWVcbiAgICApIHtcbiAgICAgIHRoaXMuZG9uZUNhbGxiYWNrKCk7XG4gICAgICAvL1VwZGF0ZSB0aGUgbG9nZ2luZyBzdGF0dXMuXG4gICAgICB0aGlzLnVwZGF0ZUxvZ2dpbmcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGFydExvZ2dpbmdCdG4uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5hdXRvUmVmcmVzaEJveC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIC8vR3VhcmFudGVlIHRoZSBncHMgbWFwIGlzIGRpc2FibGVkLlxuICAgIGNvbnN0IGdwc0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3BzLW1hcC1ib3hcIik7XG4gICAgaWYgKGdwc0JveC5jaGVja2VkKSB7XG4gICAgICBncHNCb3guY2xpY2soKTtcbiAgICB9XG4gICAgLy9HdWFyYW50ZWUgdGhlIGxvY2FsIG1hcCBpcyBkaXNhYmxlZC5cbiAgICBjb25zdCBsb2NhbEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYWwtbWFwLWJveFwiKTtcbiAgICBpZiAobG9jYWxCb3guY2hlY2tlZCkge1xuICAgICAgbG9jYWxCb3guY2xpY2soKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/frames/LogSelection.js\n");

/***/ }),

/***/ "./src/frames/MainFrame.js":
/*!*********************************!*\
  !*** ./src/frames/MainFrame.js ***!
  \*********************************/
/*! exports provided: MainFrame */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MainFrame\", function() { return MainFrame; });\n/* harmony import */ var _SegmentDetail_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SegmentDetail.js */ \"./src/frames/SegmentDetail.js\");\n/* harmony import */ var _LogSelection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LogSelection.js */ \"./src/frames/LogSelection.js\");\n/* harmony import */ var _database_interface_Personnel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../database_interface/Personnel.js */ \"./src/database_interface/Personnel.js\");\n/* harmony import */ var _overlays_UserSelect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../overlays/UserSelect.js */ \"./src/overlays/UserSelect.js\");\n/* harmony import */ var _database_interface_TestEvent_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../database_interface/TestEvent.js */ \"./src/database_interface/TestEvent.js\");\n/* harmony import */ var _overlays_ReportDownload_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../overlays/ReportDownload.js */ \"./src/overlays/ReportDownload.js\");\n/* harmony import */ var _overlays_ShiftCompare_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../overlays/ShiftCompare.js */ \"./src/overlays/ShiftCompare.js\");\n/* harmony import */ var _utility_Modal_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utility/Modal.js */ \"./src/utility/Modal.js\");\n/* harmony import */ var _overlays_RosConfig_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../overlays/RosConfig.js */ \"./src/overlays/RosConfig.js\");\n/* eslint-disable no-undef */\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n\n\n\n\n\n\n\n\nclass MainFrame {\n  constructor(serverInterface) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    //Reach to DOM elements.\n    this.userIcon = document.getElementById(\"user-icon\");\n    this.userName = document.getElementById(\"user-name\");\n    this.reportIcon = document.getElementById(\"report-icon\");\n    this.downloadIcon = document.getElementById(\"download-icon\");\n    this.rosConnectIcon = document.getElementById(\"ros-status-light\");\n    this.selectForCompreBox = document.getElementById(\"select-for-compare\");\n    this.compareBtn = document.getElementById(\"compare-btn\");\n    //Initialize variables.\n    this.currentUser = new _database_interface_Personnel_js__WEBPACK_IMPORTED_MODULE_2__[\"Personnel\"]();\n    this.personnelInterface = new _database_interface_Personnel_js__WEBPACK_IMPORTED_MODULE_2__[\"PersonnelInterface\"](this.serverInterface);\n    this.testEventInterface = new _database_interface_TestEvent_js__WEBPACK_IMPORTED_MODULE_4__[\"TestEventInterface\"](this.serverInterface);\n    this.openLogsSelected = false;\n    this.ros = new ROSLIB.Ros();\n    this.rosConnectIntervalId = null;\n    this.forceRosConnect = false;\n    this.ros_server_adr = `ws://${location.hostname}:9090`;\n    this.compareIds = [];\n    //Check stored configuration.\n    let rosData = JSON.parse(localStorage.getItem(\"fttRosData\"));\n    if (rosData) {\n      //Update variable.\n      this.ros_server_adr = rosData.url;\n    }\n    //Contruct page sections.\n    this.segmentDetail = new _SegmentDetail_js__WEBPACK_IMPORTED_MODULE_0__[\"SegmentDetail\"](serverInterface, this.currentUser);\n    this.logSelection = new _LogSelection_js__WEBPACK_IMPORTED_MODULE_1__[\"LogSelection\"](\n      serverInterface,\n      this.ros,\n      this.currentUser,\n      this.logSelectionDoneCallback.bind(this)\n    );\n    //Add event listeners.\n    this.userIcon.addEventListener(\n      \"click\",\n      this.userIconClickHandler.bind(this)\n    );\n    this.reportIcon.addEventListener(\n      \"click\",\n      this.reportIconClickHandler.bind(this)\n    );\n    this.downloadIcon.addEventListener(\n      \"click\",\n      this.downloadIconClickHandler.bind(this)\n    );\n    this.rosConnectIcon.addEventListener(\n      \"click\",\n      this.rosConnectIconClickHandler.bind(this)\n    );\n    this.selectForCompreBox.addEventListener(\n      \"change\",\n      this.selectForCompreBoxHandler.bind(this)\n    );\n    this.compareBtn.addEventListener(\"click\", () => {\n      this.compareLogsHandler();\n    });\n    this.ros.on(\"error\", this.rosErrorHandler.bind(this));\n    this.ros.on(\"connection\", this.rosConnectionHandler.bind(this));\n    this.ros.on(\"close\", this.rosCloseHandler.bind(this));\n    //Try to connect to ROS.\n    this.rosConnect();\n  }\n\n  async logSelectionDoneCallback() {\n    //Display segment and map sections.\n    document.getElementById(\"segment-detail\").style.display = \"block\";\n    document.getElementById(\"map-viewer\").style.display = \"block\";\n    //Get new segment data from DB.\n    const segmentList = await this.segmentDetail.segmentInterface.get(\n      this.segmentDetail.legSelectHook.value\n    );\n    //If any segment has GPS poses, activate the GPS map\n    for (const entry of segmentList) {\n      if (entry.lng && entry.lat && !this.segmentDetail.gpsMapBox.checked) {\n        this.segmentDetail.gpsMapBox.checked = true;\n        this.segmentDetail.mapInterface.mapElement.style.display = \"block\";\n        this.segmentDetail.mapInterface.leafletMap.invalidateSize(true);\n        break;\n      }\n    }\n    //If any segment has local poses, activate the local map\n    for (const entry of segmentList) {\n      if (\n        entry.local_x &&\n        entry.local_y &&\n        !this.segmentDetail.localMapBox.checked\n      ) {\n        this.segmentDetail.localMapBox.checked = true;\n        this.segmentDetail.localMapInterface.mapElement.style.display = \"block\";\n        break;\n      }\n    }\n    //Update segments table.\n    this.segmentDetail.updateSegments(segmentList);\n    //Check if this shift id is selected for compare and update slider accodingly.\n    const shiftSelectValue = document.getElementById(\"shift-id\").value;\n    if (this.compareIds.includes(shiftSelectValue)) {\n      this.selectForCompreBox.checked = true;\n    } else {\n      this.selectForCompreBox.checked = false;\n    }\n  }\n\n  async userIconClickHandler() {\n    try {\n      //Get the latest personnel data from the server.\n      const personnelList = await this.personnelInterface.get();\n      //Build a user selection overlay.\n      const userSelect = new _overlays_UserSelect_js__WEBPACK_IMPORTED_MODULE_3__[\"UserSelect\"](this.currentUser, personnelList);\n      //Display the overlay.\n      const userModal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_7__[\"Modal\"](\n        userSelect,\n        \"Your browser doesn't support this feature! - Please change to a more modern one.\",\n        () => {\n          this.userName.textContent = this.currentUser.name || \"Select User\";\n        }\n      );\n      userModal.show();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async reportIconClickHandler() {\n    try {\n      //Get the latest test event data from the server.\n      const testEventList = await this.testEventInterface.get();\n      //Build a report generator overlay.\n      const reportDownload = new _overlays_ReportDownload_js__WEBPACK_IMPORTED_MODULE_5__[\"ReportDownload\"](\n        this.serverInterface,\n        testEventList\n      );\n      //Display the overlay.\n      const userModal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_7__[\"Modal\"](\n        reportDownload,\n        \"Your browser doesn't support this feature! - Please change to a more modern one.\"\n      );\n      userModal.show();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async downloadIconClickHandler() {\n    try {\n      // Get blob for the database dump file\n      const blob = await this.serverInterface.sendGetRequest(\"download_data\");\n      // Create a URL link for the file and download it\n      const url = window.URL.createObjectURL(blob);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = 'ftt_dump.sql';\n      document.body.appendChild(link);\n      link.click();\n      // Remove the URL link\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  rosConnectIconClickHandler() {\n    //Build a map configuration overlay.\n    const rosConfig = new _overlays_RosConfig_js__WEBPACK_IMPORTED_MODULE_8__[\"RosConfig\"]();\n    //Display the overlay.\n    const userModal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_7__[\"Modal\"](\n      rosConfig,\n      \"Your browser doesn't support this feature! - Please change to a more modern one.\",\n      () => {\n        this.forceRosConnect = true;\n        this.rosConnect();\n      }\n    );\n    userModal.show();\n  }\n\n  selectForCompreBoxHandler() {\n    //Store or delete this shift id for compare\n    const shiftSelectValue = document.getElementById(\"shift-id\").value;\n    if (this.selectForCompreBox.checked) {\n      this.compareIds.push(shiftSelectValue);\n    } else {\n      this.compareIds = this.compareIds.filter(\n        (value) => value != shiftSelectValue\n      );\n    }\n    this.compareBtn.disabled = this.compareIds.length < 2;\n  }\n\n  compareLogsHandler() {\n    try {\n      //Build a shift compare overlay.\n      const shiftCompare = new _overlays_ShiftCompare_js__WEBPACK_IMPORTED_MODULE_6__[\"ShiftCompare\"](\n        this.serverInterface,\n        this.compareIds\n      );\n      //Display the overlay.\n      const userModal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_7__[\"Modal\"](\n        shiftCompare,\n        \"Your browser doesn't support this feature! - Please change to a more modern one.\",\n        () => {},\n        true\n      );\n      userModal.show();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  rosConnect() {\n    this.ros.connect(this.ros_server_adr);\n  }\n\n  rosErrorHandler() {\n    this.logSelection.updateLogging();\n    const errorMsg =\n      \"Error connecting to ROS. Make sure rosbridge_server is running.\";\n    console.log(errorMsg);\n    if (this.forceRosConnect) {\n      alert(errorMsg);\n      this.forceRosConnect = false;\n    }\n  }\n\n  rosConnectionHandler() {\n    this.logSelection.updateLogging();\n    this.rosConnectIcon.classList.remove(\"disconnected\");\n    this.rosConnectIcon.classList.add(\"connected\");\n    this.rosConnectIcon.textContent = \"sensors\";\n    console.log(\"Connection to ROS established.\");\n    // if(this.rosConnectIntervalId) {\n    //   clearInterval(this.rosConnectIntervalId);\n    //   this.rosConnectIntervalId = null;\n    // }\n  }\n\n  rosCloseHandler() {\n    this.logSelection.updateLogging();\n    this.rosConnectIcon.classList.remove(\"connected\");\n    this.rosConnectIcon.classList.add(\"disconnected\");\n    this.rosConnectIcon.textContent = \"sensors_off\";\n    console.log(\"Connection to ROS closed.\");\n    // if(!this.rosConnectIntervalId) {\n    //   this.rosConnectIntervalId = setInterval(\n    //     this.rosConnect.bind(this),\n    //     2000\n    //   );\n    // }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZnJhbWVzL01haW5GcmFtZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9mcmFtZXMvTWFpbkZyYW1lLmpzPzI0YTciXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG5pbXBvcnQgeyBTZWdtZW50RGV0YWlsIH0gZnJvbSBcIi4vU2VnbWVudERldGFpbC5qc1wiO1xuaW1wb3J0IHsgTG9nU2VsZWN0aW9uIH0gZnJvbSBcIi4vTG9nU2VsZWN0aW9uLmpzXCI7XG5pbXBvcnQge1xuICBQZXJzb25uZWwsXG4gIFBlcnNvbm5lbEludGVyZmFjZSxcbn0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9QZXJzb25uZWwuanNcIjtcbmltcG9ydCB7IFVzZXJTZWxlY3QgfSBmcm9tIFwiLi4vb3ZlcmxheXMvVXNlclNlbGVjdC5qc1wiO1xuaW1wb3J0IHsgVGVzdEV2ZW50SW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9UZXN0RXZlbnQuanNcIjtcbmltcG9ydCB7IFJlcG9ydERvd25sb2FkIH0gZnJvbSBcIi4uL292ZXJsYXlzL1JlcG9ydERvd25sb2FkLmpzXCI7XG5pbXBvcnQgeyBTaGlmdENvbXBhcmUgfSBmcm9tIFwiLi4vb3ZlcmxheXMvU2hpZnRDb21wYXJlLmpzXCI7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gXCIuLi91dGlsaXR5L01vZGFsLmpzXCI7XG5pbXBvcnQgeyBSb3NDb25maWcgfSBmcm9tIFwiLi4vb3ZlcmxheXMvUm9zQ29uZmlnLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNYWluRnJhbWUge1xuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UpIHtcbiAgICAvL1NldCBhcmd1bWVudHMgYXMgcHJvcGVydGllcy5cbiAgICB0aGlzLnNlcnZlckludGVyZmFjZSA9IHNlcnZlckludGVyZmFjZTtcbiAgICAvL1JlYWNoIHRvIERPTSBlbGVtZW50cy5cbiAgICB0aGlzLnVzZXJJY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLWljb25cIik7XG4gICAgdGhpcy51c2VyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1uYW1lXCIpO1xuICAgIHRoaXMucmVwb3J0SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LWljb25cIik7XG4gICAgdGhpcy5kb3dubG9hZEljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvd25sb2FkLWljb25cIik7XG4gICAgdGhpcy5yb3NDb25uZWN0SWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicm9zLXN0YXR1cy1saWdodFwiKTtcbiAgICB0aGlzLnNlbGVjdEZvckNvbXByZUJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VsZWN0LWZvci1jb21wYXJlXCIpO1xuICAgIHRoaXMuY29tcGFyZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGFyZS1idG5cIik7XG4gICAgLy9Jbml0aWFsaXplIHZhcmlhYmxlcy5cbiAgICB0aGlzLmN1cnJlbnRVc2VyID0gbmV3IFBlcnNvbm5lbCgpO1xuICAgIHRoaXMucGVyc29ubmVsSW50ZXJmYWNlID0gbmV3IFBlcnNvbm5lbEludGVyZmFjZSh0aGlzLnNlcnZlckludGVyZmFjZSk7XG4gICAgdGhpcy50ZXN0RXZlbnRJbnRlcmZhY2UgPSBuZXcgVGVzdEV2ZW50SW50ZXJmYWNlKHRoaXMuc2VydmVySW50ZXJmYWNlKTtcbiAgICB0aGlzLm9wZW5Mb2dzU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnJvcyA9IG5ldyBST1NMSUIuUm9zKCk7XG4gICAgdGhpcy5yb3NDb25uZWN0SW50ZXJ2YWxJZCA9IG51bGw7XG4gICAgdGhpcy5mb3JjZVJvc0Nvbm5lY3QgPSBmYWxzZTtcbiAgICB0aGlzLnJvc19zZXJ2ZXJfYWRyID0gYHdzOi8vJHtsb2NhdGlvbi5ob3N0bmFtZX06OTA5MGA7XG4gICAgdGhpcy5jb21wYXJlSWRzID0gW107XG4gICAgLy9DaGVjayBzdG9yZWQgY29uZmlndXJhdGlvbi5cbiAgICBsZXQgcm9zRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmdHRSb3NEYXRhXCIpKTtcbiAgICBpZiAocm9zRGF0YSkge1xuICAgICAgLy9VcGRhdGUgdmFyaWFibGUuXG4gICAgICB0aGlzLnJvc19zZXJ2ZXJfYWRyID0gcm9zRGF0YS51cmw7XG4gICAgfVxuICAgIC8vQ29udHJ1Y3QgcGFnZSBzZWN0aW9ucy5cbiAgICB0aGlzLnNlZ21lbnREZXRhaWwgPSBuZXcgU2VnbWVudERldGFpbChzZXJ2ZXJJbnRlcmZhY2UsIHRoaXMuY3VycmVudFVzZXIpO1xuICAgIHRoaXMubG9nU2VsZWN0aW9uID0gbmV3IExvZ1NlbGVjdGlvbihcbiAgICAgIHNlcnZlckludGVyZmFjZSxcbiAgICAgIHRoaXMucm9zLFxuICAgICAgdGhpcy5jdXJyZW50VXNlcixcbiAgICAgIHRoaXMubG9nU2VsZWN0aW9uRG9uZUNhbGxiYWNrLmJpbmQodGhpcylcbiAgICApO1xuICAgIC8vQWRkIGV2ZW50IGxpc3RlbmVycy5cbiAgICB0aGlzLnVzZXJJY29uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLnVzZXJJY29uQ2xpY2tIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRoaXMucmVwb3J0SWNvbi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5yZXBvcnRJY29uQ2xpY2tIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRoaXMuZG93bmxvYWRJY29uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLmRvd25sb2FkSWNvbkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLnJvc0Nvbm5lY3RJY29uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLnJvc0Nvbm5lY3RJY29uQ2xpY2tIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRoaXMuc2VsZWN0Rm9yQ29tcHJlQm94LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNoYW5nZVwiLFxuICAgICAgdGhpcy5zZWxlY3RGb3JDb21wcmVCb3hIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRoaXMuY29tcGFyZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jb21wYXJlTG9nc0hhbmRsZXIoKTtcbiAgICB9KTtcbiAgICB0aGlzLnJvcy5vbihcImVycm9yXCIsIHRoaXMucm9zRXJyb3JIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMucm9zLm9uKFwiY29ubmVjdGlvblwiLCB0aGlzLnJvc0Nvbm5lY3Rpb25IYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMucm9zLm9uKFwiY2xvc2VcIiwgdGhpcy5yb3NDbG9zZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgLy9UcnkgdG8gY29ubmVjdCB0byBST1MuXG4gICAgdGhpcy5yb3NDb25uZWN0KCk7XG4gIH1cblxuICBhc3luYyBsb2dTZWxlY3Rpb25Eb25lQ2FsbGJhY2soKSB7XG4gICAgLy9EaXNwbGF5IHNlZ21lbnQgYW5kIG1hcCBzZWN0aW9ucy5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlZ21lbnQtZGV0YWlsXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtdmlld2VyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgLy9HZXQgbmV3IHNlZ21lbnQgZGF0YSBmcm9tIERCLlxuICAgIGNvbnN0IHNlZ21lbnRMaXN0ID0gYXdhaXQgdGhpcy5zZWdtZW50RGV0YWlsLnNlZ21lbnRJbnRlcmZhY2UuZ2V0KFxuICAgICAgdGhpcy5zZWdtZW50RGV0YWlsLmxlZ1NlbGVjdEhvb2sudmFsdWVcbiAgICApO1xuICAgIC8vSWYgYW55IHNlZ21lbnQgaGFzIEdQUyBwb3NlcywgYWN0aXZhdGUgdGhlIEdQUyBtYXBcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIHNlZ21lbnRMaXN0KSB7XG4gICAgICBpZiAoZW50cnkubG5nICYmIGVudHJ5LmxhdCAmJiAhdGhpcy5zZWdtZW50RGV0YWlsLmdwc01hcEJveC5jaGVja2VkKSB7XG4gICAgICAgIHRoaXMuc2VnbWVudERldGFpbC5ncHNNYXBCb3guY2hlY2tlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2VnbWVudERldGFpbC5tYXBJbnRlcmZhY2UubWFwRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICB0aGlzLnNlZ21lbnREZXRhaWwubWFwSW50ZXJmYWNlLmxlYWZsZXRNYXAuaW52YWxpZGF0ZVNpemUodHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICAvL0lmIGFueSBzZWdtZW50IGhhcyBsb2NhbCBwb3NlcywgYWN0aXZhdGUgdGhlIGxvY2FsIG1hcFxuICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc2VnbWVudExpc3QpIHtcbiAgICAgIGlmIChcbiAgICAgICAgZW50cnkubG9jYWxfeCAmJlxuICAgICAgICBlbnRyeS5sb2NhbF95ICYmXG4gICAgICAgICF0aGlzLnNlZ21lbnREZXRhaWwubG9jYWxNYXBCb3guY2hlY2tlZFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc2VnbWVudERldGFpbC5sb2NhbE1hcEJveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWdtZW50RGV0YWlsLmxvY2FsTWFwSW50ZXJmYWNlLm1hcEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIC8vVXBkYXRlIHNlZ21lbnRzIHRhYmxlLlxuICAgIHRoaXMuc2VnbWVudERldGFpbC51cGRhdGVTZWdtZW50cyhzZWdtZW50TGlzdCk7XG4gICAgLy9DaGVjayBpZiB0aGlzIHNoaWZ0IGlkIGlzIHNlbGVjdGVkIGZvciBjb21wYXJlIGFuZCB1cGRhdGUgc2xpZGVyIGFjY29kaW5nbHkuXG4gICAgY29uc3Qgc2hpZnRTZWxlY3RWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hpZnQtaWRcIikudmFsdWU7XG4gICAgaWYgKHRoaXMuY29tcGFyZUlkcy5pbmNsdWRlcyhzaGlmdFNlbGVjdFZhbHVlKSkge1xuICAgICAgdGhpcy5zZWxlY3RGb3JDb21wcmVCb3guY2hlY2tlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2VsZWN0Rm9yQ29tcHJlQm94LmNoZWNrZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB1c2VySWNvbkNsaWNrSGFuZGxlcigpIHtcbiAgICB0cnkge1xuICAgICAgLy9HZXQgdGhlIGxhdGVzdCBwZXJzb25uZWwgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICBjb25zdCBwZXJzb25uZWxMaXN0ID0gYXdhaXQgdGhpcy5wZXJzb25uZWxJbnRlcmZhY2UuZ2V0KCk7XG4gICAgICAvL0J1aWxkIGEgdXNlciBzZWxlY3Rpb24gb3ZlcmxheS5cbiAgICAgIGNvbnN0IHVzZXJTZWxlY3QgPSBuZXcgVXNlclNlbGVjdCh0aGlzLmN1cnJlbnRVc2VyLCBwZXJzb25uZWxMaXN0KTtcbiAgICAgIC8vRGlzcGxheSB0aGUgb3ZlcmxheS5cbiAgICAgIGNvbnN0IHVzZXJNb2RhbCA9IG5ldyBNb2RhbChcbiAgICAgICAgdXNlclNlbGVjdCxcbiAgICAgICAgXCJZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoaXMgZmVhdHVyZSEgLSBQbGVhc2UgY2hhbmdlIHRvIGEgbW9yZSBtb2Rlcm4gb25lLlwiLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuY3VycmVudFVzZXIubmFtZSB8fCBcIlNlbGVjdCBVc2VyXCI7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB1c2VyTW9kYWwuc2hvdygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXBvcnRJY29uQ2xpY2tIYW5kbGVyKCkge1xuICAgIHRyeSB7XG4gICAgICAvL0dldCB0aGUgbGF0ZXN0IHRlc3QgZXZlbnQgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICBjb25zdCB0ZXN0RXZlbnRMaXN0ID0gYXdhaXQgdGhpcy50ZXN0RXZlbnRJbnRlcmZhY2UuZ2V0KCk7XG4gICAgICAvL0J1aWxkIGEgcmVwb3J0IGdlbmVyYXRvciBvdmVybGF5LlxuICAgICAgY29uc3QgcmVwb3J0RG93bmxvYWQgPSBuZXcgUmVwb3J0RG93bmxvYWQoXG4gICAgICAgIHRoaXMuc2VydmVySW50ZXJmYWNlLFxuICAgICAgICB0ZXN0RXZlbnRMaXN0XG4gICAgICApO1xuICAgICAgLy9EaXNwbGF5IHRoZSBvdmVybGF5LlxuICAgICAgY29uc3QgdXNlck1vZGFsID0gbmV3IE1vZGFsKFxuICAgICAgICByZXBvcnREb3dubG9hZCxcbiAgICAgICAgXCJZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoaXMgZmVhdHVyZSEgLSBQbGVhc2UgY2hhbmdlIHRvIGEgbW9yZSBtb2Rlcm4gb25lLlwiXG4gICAgICApO1xuICAgICAgdXNlck1vZGFsLnNob3coKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZG93bmxvYWRJY29uQ2xpY2tIYW5kbGVyKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgYmxvYiBmb3IgdGhlIGRhdGFiYXNlIGR1bXAgZmlsZVxuICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMuc2VydmVySW50ZXJmYWNlLnNlbmRHZXRSZXF1ZXN0KFwiZG93bmxvYWRfZGF0YVwiKTtcbiAgICAgIC8vIENyZWF0ZSBhIFVSTCBsaW5rIGZvciB0aGUgZmlsZSBhbmQgZG93bmxvYWQgaXRcbiAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSAnZnR0X2R1bXAuc3FsJztcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAvLyBSZW1vdmUgdGhlIFVSTCBsaW5rXG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xuICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcm9zQ29ubmVjdEljb25DbGlja0hhbmRsZXIoKSB7XG4gICAgLy9CdWlsZCBhIG1hcCBjb25maWd1cmF0aW9uIG92ZXJsYXkuXG4gICAgY29uc3Qgcm9zQ29uZmlnID0gbmV3IFJvc0NvbmZpZygpO1xuICAgIC8vRGlzcGxheSB0aGUgb3ZlcmxheS5cbiAgICBjb25zdCB1c2VyTW9kYWwgPSBuZXcgTW9kYWwoXG4gICAgICByb3NDb25maWcsXG4gICAgICBcIllvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhpcyBmZWF0dXJlISAtIFBsZWFzZSBjaGFuZ2UgdG8gYSBtb3JlIG1vZGVybiBvbmUuXCIsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHRoaXMuZm9yY2VSb3NDb25uZWN0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yb3NDb25uZWN0KCk7XG4gICAgICB9XG4gICAgKTtcbiAgICB1c2VyTW9kYWwuc2hvdygpO1xuICB9XG5cbiAgc2VsZWN0Rm9yQ29tcHJlQm94SGFuZGxlcigpIHtcbiAgICAvL1N0b3JlIG9yIGRlbGV0ZSB0aGlzIHNoaWZ0IGlkIGZvciBjb21wYXJlXG4gICAgY29uc3Qgc2hpZnRTZWxlY3RWYWx1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hpZnQtaWRcIikudmFsdWU7XG4gICAgaWYgKHRoaXMuc2VsZWN0Rm9yQ29tcHJlQm94LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMuY29tcGFyZUlkcy5wdXNoKHNoaWZ0U2VsZWN0VmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbXBhcmVJZHMgPSB0aGlzLmNvbXBhcmVJZHMuZmlsdGVyKFxuICAgICAgICAodmFsdWUpID0+IHZhbHVlICE9IHNoaWZ0U2VsZWN0VmFsdWVcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuY29tcGFyZUJ0bi5kaXNhYmxlZCA9IHRoaXMuY29tcGFyZUlkcy5sZW5ndGggPCAyO1xuICB9XG5cbiAgY29tcGFyZUxvZ3NIYW5kbGVyKCkge1xuICAgIHRyeSB7XG4gICAgICAvL0J1aWxkIGEgc2hpZnQgY29tcGFyZSBvdmVybGF5LlxuICAgICAgY29uc3Qgc2hpZnRDb21wYXJlID0gbmV3IFNoaWZ0Q29tcGFyZShcbiAgICAgICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UsXG4gICAgICAgIHRoaXMuY29tcGFyZUlkc1xuICAgICAgKTtcbiAgICAgIC8vRGlzcGxheSB0aGUgb3ZlcmxheS5cbiAgICAgIGNvbnN0IHVzZXJNb2RhbCA9IG5ldyBNb2RhbChcbiAgICAgICAgc2hpZnRDb21wYXJlLFxuICAgICAgICBcIllvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhpcyBmZWF0dXJlISAtIFBsZWFzZSBjaGFuZ2UgdG8gYSBtb3JlIG1vZGVybiBvbmUuXCIsXG4gICAgICAgICgpID0+IHt9LFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgICAgdXNlck1vZGFsLnNob3coKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcm9zQ29ubmVjdCgpIHtcbiAgICB0aGlzLnJvcy5jb25uZWN0KHRoaXMucm9zX3NlcnZlcl9hZHIpO1xuICB9XG5cbiAgcm9zRXJyb3JIYW5kbGVyKCkge1xuICAgIHRoaXMubG9nU2VsZWN0aW9uLnVwZGF0ZUxvZ2dpbmcoKTtcbiAgICBjb25zdCBlcnJvck1zZyA9XG4gICAgICBcIkVycm9yIGNvbm5lY3RpbmcgdG8gUk9TLiBNYWtlIHN1cmUgcm9zYnJpZGdlX3NlcnZlciBpcyBydW5uaW5nLlwiO1xuICAgIGNvbnNvbGUubG9nKGVycm9yTXNnKTtcbiAgICBpZiAodGhpcy5mb3JjZVJvc0Nvbm5lY3QpIHtcbiAgICAgIGFsZXJ0KGVycm9yTXNnKTtcbiAgICAgIHRoaXMuZm9yY2VSb3NDb25uZWN0ID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcm9zQ29ubmVjdGlvbkhhbmRsZXIoKSB7XG4gICAgdGhpcy5sb2dTZWxlY3Rpb24udXBkYXRlTG9nZ2luZygpO1xuICAgIHRoaXMucm9zQ29ubmVjdEljb24uY2xhc3NMaXN0LnJlbW92ZShcImRpc2Nvbm5lY3RlZFwiKTtcbiAgICB0aGlzLnJvc0Nvbm5lY3RJY29uLmNsYXNzTGlzdC5hZGQoXCJjb25uZWN0ZWRcIik7XG4gICAgdGhpcy5yb3NDb25uZWN0SWNvbi50ZXh0Q29udGVudCA9IFwic2Vuc29yc1wiO1xuICAgIGNvbnNvbGUubG9nKFwiQ29ubmVjdGlvbiB0byBST1MgZXN0YWJsaXNoZWQuXCIpO1xuICAgIC8vIGlmKHRoaXMucm9zQ29ubmVjdEludGVydmFsSWQpIHtcbiAgICAvLyAgIGNsZWFySW50ZXJ2YWwodGhpcy5yb3NDb25uZWN0SW50ZXJ2YWxJZCk7XG4gICAgLy8gICB0aGlzLnJvc0Nvbm5lY3RJbnRlcnZhbElkID0gbnVsbDtcbiAgICAvLyB9XG4gIH1cblxuICByb3NDbG9zZUhhbmRsZXIoKSB7XG4gICAgdGhpcy5sb2dTZWxlY3Rpb24udXBkYXRlTG9nZ2luZygpO1xuICAgIHRoaXMucm9zQ29ubmVjdEljb24uY2xhc3NMaXN0LnJlbW92ZShcImNvbm5lY3RlZFwiKTtcbiAgICB0aGlzLnJvc0Nvbm5lY3RJY29uLmNsYXNzTGlzdC5hZGQoXCJkaXNjb25uZWN0ZWRcIik7XG4gICAgdGhpcy5yb3NDb25uZWN0SWNvbi50ZXh0Q29udGVudCA9IFwic2Vuc29yc19vZmZcIjtcbiAgICBjb25zb2xlLmxvZyhcIkNvbm5lY3Rpb24gdG8gUk9TIGNsb3NlZC5cIik7XG4gICAgLy8gaWYoIXRoaXMucm9zQ29ubmVjdEludGVydmFsSWQpIHtcbiAgICAvLyAgIHRoaXMucm9zQ29ubmVjdEludGVydmFsSWQgPSBzZXRJbnRlcnZhbChcbiAgICAvLyAgICAgdGhpcy5yb3NDb25uZWN0LmJpbmQodGhpcyksXG4gICAgLy8gICAgIDIwMDBcbiAgICAvLyAgICk7XG4gICAgLy8gfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/frames/MainFrame.js\n");

/***/ }),

/***/ "./src/frames/SegmentDetail.js":
/*!*************************************!*\
  !*** ./src/frames/SegmentDetail.js ***!
  \*************************************/
/*! exports provided: SegmentDetail */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SegmentDetail\", function() { return SegmentDetail; });\n/* harmony import */ var _utility_LeafletMap_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/LeafletMap.js */ \"./src/utility/LeafletMap.js\");\n/* harmony import */ var _utility_LocalMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility/LocalMap.js */ \"./src/utility/LocalMap.js\");\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/* harmony import */ var _utility_Modal_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility/Modal.js */ \"./src/utility/Modal.js\");\n/* harmony import */ var _database_interface_Segment_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../database_interface/Segment.js */ \"./src/database_interface/Segment.js\");\n/* harmony import */ var _database_interface_ItoReason_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../database_interface/ItoReason.js */ \"./src/database_interface/ItoReason.js\");\n/* harmony import */ var _database_interface_Note_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../database_interface/Note.js */ \"./src/database_interface/Note.js\");\n/* harmony import */ var _database_interface_Image_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../database_interface/Image.js */ \"./src/database_interface/Image.js\");\n/* harmony import */ var _overlays_SegmentEdit_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../overlays/SegmentEdit.js */ \"./src/overlays/SegmentEdit.js\");\n/* harmony import */ var _overlays_MapConfig_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../overlays/MapConfig.js */ \"./src/overlays/MapConfig.js\");\n/* harmony import */ var _overlays_AutoRefreshConfig_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../overlays/AutoRefreshConfig.js */ \"./src/overlays/AutoRefreshConfig.js\");\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n//Global variables for fixed and common database parameter values.\nconst SEGMENT_TYPE_ITO = 1;\nconst ITO_REASON_UNEXPECTED = 12;\nconst ITO_REASON_PLANNER = 3;\nconst ITO_REASON_SAFETY = 1;\nconst ITO_REASON_TRANSIT = 9;\n// const ITO_REASON_UNASSIGNED = 11;\n\nclass SegmentDetail {\n  //Container class for the segment info and map display sections of the web page.\n  constructor(serverInterface, currentUser) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.currentUser = currentUser;\n    //Reach to DOM elements.\n    this.legSelectHook = document.getElementById(\"leg-id\");\n    this.unexpectedBtn = document.getElementById(\"unexpected-btn\");\n    this.plannerBtn = document.getElementById(\"planner-btn\");\n    this.safetyBtn = document.getElementById(\"safety-btn\");\n    this.transitBtn = document.getElementById(\"transit-btn\");\n    this.showItoOnlyBox = document.getElementById(\"show-ito-only\");\n    this.autoRefreshBox = document.getElementById(\"auto-refresh\");\n    this.autoRefreshCfg = document.getElementById(\"auto-refresh-config-icon\");\n    this.segmentTable = document.getElementById(\"segment-table-body\");\n    this.segmentNewBtn = document.getElementById(\"new-segment-btn\");\n    this.segmentEndBtn = document.getElementById(\"end-segment-btn\");\n    this.segmentEditBtn = document.getElementById(\"edit-segment-btn\");\n    this.refreshBtn = document.getElementById(\"refresh-btn\");\n    this.gpsMapConfig = document.getElementById(\"gps-map-config-icon\");\n    this.gpsMapBox = document.getElementById(\"gps-map-box\");\n    this.localMapBox = document.getElementById(\"local-map-box\");\n    //Initialize variables.\n    this.mapInterface = new _utility_LeafletMap_js__WEBPACK_IMPORTED_MODULE_0__[\"LeafletMap\"](serverInterface, \"gps-map\", \"map-viewer\");\n    this.localMapInterface = new _utility_LocalMap_js__WEBPACK_IMPORTED_MODULE_1__[\"LocalMap\"](serverInterface);\n    this.segmentInterface = new _database_interface_Segment_js__WEBPACK_IMPORTED_MODULE_4__[\"SegmentInterface\"](serverInterface);\n    this.itoReasonInterface = new _database_interface_ItoReason_js__WEBPACK_IMPORTED_MODULE_5__[\"ItoReasonInterface\"](serverInterface);\n    this.noteInterface = new _database_interface_Note_js__WEBPACK_IMPORTED_MODULE_6__[\"NoteInterface\"](serverInterface);\n    this.imageInterface = new _database_interface_Image_js__WEBPACK_IMPORTED_MODULE_7__[\"ImageInterface\"](serverInterface);\n    this.segmentList = [];\n    this.itoReasonList = null;\n    this.autoRefreshIntervalId = null;\n    this.selectedRow = null;\n    this.selectedRowId = null;\n    this.selectedRowParentId = null;\n    this.showAutoSegments = true;\n    this.autoRefreshTimer = 2000;\n    //Check stored configuration.\n    let autoRefreshData = JSON.parse(\n      localStorage.getItem(\"fttAutoRefreshData\")\n    );\n    if (autoRefreshData) {\n      //Update variable.\n      this.autoRefreshTimer = autoRefreshData.timer;\n    } else {\n      //Store default.\n      autoRefreshData = { timer: this.autoRefreshTimer };\n      localStorage.setItem(\n        \"fttAutoRefreshData\",\n        JSON.stringify(autoRefreshData)\n      );\n    }\n    //Add event listeners.\n    this.segmentTable.addEventListener(\n      \"click\",\n      this.segmentTableClickHandler.bind(this)\n    );\n    this.segmentTable.addEventListener(\"dblclick\", (event) => {\n      if (event.target.closest(\"tr\") != this.selectedRow) {\n        this.segmentTableClickHandler(event);\n      }\n      this.editSegmentHandler();\n    });\n    this.unexpectedBtn.addEventListener(\n      \"click\",\n      this.quickReasonEditBtnHandler.bind(this, ITO_REASON_UNEXPECTED)\n    );\n    this.plannerBtn.addEventListener(\n      \"click\",\n      this.quickReasonEditBtnHandler.bind(this, ITO_REASON_PLANNER)\n    );\n    this.safetyBtn.addEventListener(\n      \"click\",\n      this.quickReasonEditBtnHandler.bind(this, ITO_REASON_SAFETY)\n    );\n    this.transitBtn.addEventListener(\n      \"click\",\n      this.quickReasonEditBtnHandler.bind(this, ITO_REASON_TRANSIT)\n    );\n    this.segmentNewBtn.addEventListener(\n      \"click\",\n      this.newSegmentHandler.bind(this)\n    );\n    this.segmentEndBtn.addEventListener(\n      \"click\",\n      this.endSegmentHandler.bind(this)\n    );\n    this.segmentEditBtn.addEventListener(\n      \"click\",\n      this.editSegmentHandler.bind(this)\n    );\n    this.refreshBtn.addEventListener(\"click\", () => {\n      this.updateSegments();\n    });\n    this.showItoOnlyBox.addEventListener(\n      \"change\",\n      this.showItoOnlyBoxHandler.bind(this)\n    );\n    this.autoRefreshBox.addEventListener(\n      \"change\",\n      this.autoRefreshBoxHandler.bind(this)\n    );\n    this.autoRefreshCfg.addEventListener(\n      \"click\",\n      this.autoRefreshConfigHandler.bind(this)\n    );\n    this.gpsMapConfig.addEventListener(\n      \"click\",\n      this.gpsMapConfigHandler.bind(this)\n    );\n    this.gpsMapBox.addEventListener(\n      \"click\",\n      this.toggleGpsMapHandler.bind(this)\n    );\n    this.localMapBox.addEventListener(\n      \"click\",\n      this.toggleLocalMapHandler.bind(this)\n    );\n  }\n\n  async updateSegments(newSegmentList = null) {\n    //Update segment data table and map display.\n    try {\n      if (newSegmentList) {\n        //Update segmentList with new values.\n        this.segmentList = newSegmentList;\n      } else {\n        //Get segment data from DB.\n        this.segmentList = await this.segmentInterface.get(\n          this.legSelectHook.value\n        );\n      }\n      //Remove old data from table.\n      const tableRows = Array.from(this.segmentTable.querySelectorAll(\"tr\"));\n      for (const row of tableRows.reverse()) {\n        const match = this.segmentList.find(\n          (entry) => entry.id == row.firstChild.textContent\n        );\n        if (!match) {\n          //If the row was selected, delete selection data.\n          if (this.selectedRowId == row.firstChild.textContent) {\n            this.selectedRow = null;\n            this.selectedRowId = null;\n            this.selectedRowParentId = null;\n            this.mapInterface.removeActiveMarker();\n            this.mapInterface.removeActivePoses();\n            this.localMapInterface.removeActiveMarker();\n            this.localMapInterface.removeActivePoses();\n          }\n          //Delete row.\n          row.remove();\n        }\n      }\n      const mapLayers = this.mapInterface.mapPointsLayers;\n      const localMapLayers = this.localMapInterface.mapPointsLayers;\n      //If GPS map is active:\n      if (this.gpsMapBox.checked) {\n        //Remove old data from map.\n        for (let idx = mapLayers.length - 1; idx >= 0; idx--) {\n          const match = this.segmentList.find(\n            (entry) => entry.id == mapLayers[idx].segmentId\n          );\n          if (!match) {\n            this.mapInterface.leafletMap.removeLayer(\n              mapLayers[idx].mapPosesPtr\n            );\n            mapLayers.splice(idx, 1);\n          }\n        }\n        //Reset display if map is empty.\n        if (mapLayers.length == 0) {\n          const firstLocEntry = this.segmentList.find(\n            (entry) => entry.lat && entry.lng\n          );\n          if (firstLocEntry) {\n            console.log(\n              \"Setting map display in \" +\n                firstLocEntry.lat +\n                \", \" +\n                firstLocEntry.lng\n            );\n            this.mapInterface.leafletMap.setView(\n              [firstLocEntry.lat, firstLocEntry.lng],\n              17\n            );\n            this.mapInterface.removeLocalMap();\n          }\n        }\n      }\n      //If local map is active:\n      if (this.localMapBox.checked) {\n        //Remove old data from map.\n        for (let idx = localMapLayers.length - 1; idx >= 0; idx--) {\n          const match = this.segmentList.find(\n            (entry) => entry.id == localMapLayers[idx].segmentId\n          );\n          if (!match) {\n            this.localMapInterface.removePoses(localMapLayers[idx].segmentId);\n          }\n        }\n        //Reset display if map is empty.\n        if (localMapLayers.length == 0) {\n          this.localMapInterface.resetViewer();\n        }\n        // Update local map:\n        const shiftSelectValue = document.getElementById(\"shift-id\").value;\n        if (shiftSelectValue) {\n          const mapImage = await this.localMapInterface.getAndDrawMap(\n            shiftSelectValue\n          );\n          //Also draw the local map over the GPS map (if active and gps poses available).\n          if (this.gpsMapBox.checked && mapImage) {\n            //Filter master segments that have both local and gps position.\n            let fSegs = this.segmentList.filter(\n              (entry) =>\n                entry.lat &&\n                entry.lng &&\n                entry.local_x &&\n                entry.local_y &&\n                entry.parentId === null\n            );\n            if (fSegs.length >= 2) {\n              fSegs.reverse();\n              await this.mapInterface.addLocalMap(mapImage, fSegs);\n            }\n          }\n        } else {\n          alert(\"No shift selected!\");\n        }\n      }\n      //Record if maps were empty.\n      const local_reset = localMapLayers.length === 0;\n      const gps_reset = mapLayers.length === 0;\n      //Record if segmentTable was empty.\n      const table_reset = this.segmentTable.children.length === 0;\n      //Add or edit data from table and map:\n      for (const entry of this.segmentList.reverse()) {\n        //Find if the entry was in the table before the update.\n        //For ito master segments, find if the child is in the table.\n        let targetId = entry.id;\n        if (entry.segmentType == \"ITO\" && !entry.parentId) {\n          const matchedChild = this.segmentList.find(\n            (segment) => segment.parentId === entry.id\n          );\n          if (matchedChild) {\n            targetId = matchedChild.id;\n          }\n        }\n        const matchedRow = tableRows.find(\n          (row) => row.firstChild.textContent == targetId\n        );\n        //Update table rows (only auto and ito-children):\n        if (\n          entry.segmentType == \"AUTO\" ||\n          (entry.segmentType == \"ITO\" && entry.parentId)\n        ) {\n          const entryState = entry.endTime == null ? \"OPEN\" : \"CLOSED\";\n          const entryReason = entry.itoReason || \"\";\n          if (matchedRow) {\n            //Update row info with new data.\n            if (matchedRow.children[2].textContent != entryReason) {\n              console.log(\"Updating row \" + entry.id + \" reason\");\n              matchedRow.children[2].textContent = entryReason;\n            }\n            if (matchedRow.children[3].textContent != entryState) {\n              console.log(\"Updating row \" + entry.id + \" state\");\n              matchedRow.children[3].textContent = entryState;\n            }\n          } else {\n            //Create new table row.\n            console.log(\"Creating row \" + entry.id);\n            _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_2__[\"DOMGeneric\"].addRow(this.segmentTable, [\n              entry.id,\n              entry.segmentType,\n              entryReason,\n              entryState,\n            ]);\n            //Set visibility if the row is AUTO\n            if (entry.segmentType === \"AUTO\") {\n              if (!this.showAutoSegments) {\n                this.segmentTable.firstChild.style.display = \"none\";\n              }\n            }\n            //Activate maps if this is the first row:\n            if (table_reset) {\n              //If the segment has GPS poses, activate the GPS map\n              if (entry.lng && entry.lat && !this.gpsMapBox.checked) {\n                this.gpsMapBox.checked = true;\n                this.mapInterface.mapElement.style.display = \"block\";\n                this.mapInterface.leafletMap.invalidateSize(true);\n              }\n              //If any segment has local poses, activate the local map\n              if (entry.local_x && entry.local_y && !this.localMapBox.checked) {\n                this.localMapBox.checked = true;\n                this.localMapInterface.mapElement.style.display = \"block\";\n              }\n            }\n          }\n        }\n        //If GPS map is active:\n        if (this.gpsMapBox.checked) {\n          //Update map poses:\n          if (!entry.parentId) {\n            const matchedMapLayer = mapLayers.find(\n              (layer) => layer.segmentId == entry.id\n            );\n            //If the map was reset, the segment is new in the table or if it's open:\n            if (\n              gps_reset ||\n              (!matchedMapLayer && !matchedRow) ||\n              entry.endTime == null\n            ) {\n              //Create new or update points layer.\n              await this.mapInterface.getAndDrawMapPoses(entry.id);\n              if (\n                (entry.segmentType == \"AUTO\" &&\n                  entry.id == this.selectedRowId) ||\n                (entry.segmentType == \"ITO\" &&\n                  entry.id == this.selectedRowParentId)\n              ) {\n                this.mapInterface.addActivePoses(entry.id);\n              }\n            }\n          }\n        }\n        //If local map is active:\n        if (this.localMapBox.checked) {\n          //Update map poses:\n          if (!entry.parentId) {\n            const matchedMapLayer = localMapLayers.find(\n              (layer) => layer.segmentId == entry.id\n            );\n            //If the map was reset, the segment is new in the table or if it's open:\n            if (\n              local_reset ||\n              (!matchedMapLayer && !matchedRow) ||\n              entry.endTime == null\n            ) {\n              //Create new or update points layer.\n              await this.localMapInterface.getAndDrawMapPoses(entry.id);\n              if (\n                (entry.segmentType == \"AUTO\" &&\n                  entry.id == this.selectedRowId) ||\n                (entry.segmentType == \"ITO\" &&\n                  entry.id == this.selectedRowParentId)\n              ) {\n                this.localMapInterface.addActivePoses(entry.id);\n              }\n            }\n          }\n        }\n      }\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  showItoOnlyBoxHandler() {\n    //Hide auto segments if the box is checked.\n    if (this.showItoOnlyBox.checked) {\n      this.showAutoSegments = false;\n    } else {\n      this.showAutoSegments = true;\n    }\n    const tableRows = Array.from(this.segmentTable.querySelectorAll(\"tr\"));\n    for (const row of tableRows) {\n      if (row.children[1].textContent === \"AUTO\") {\n        if (this.showAutoSegments) {\n          row.style.removeProperty(\"display\");\n        } else {\n          row.style.display = \"none\";\n        }\n      }\n    }\n  }\n\n  autoRefreshBoxHandler() {\n    //Call updateSegments in regular intervals if the box is checked.\n    if (this.autoRefreshBox.checked) {\n      if (this.legSelectHook.value) {\n        this.autoRefreshIntervalId = setInterval(() => {\n          this.updateSegments();\n        }, this.autoRefreshTimer);\n      } else {\n        this.autoRefreshBox.checked = false;\n        alert(\"No leg selected!\");\n      }\n    } else {\n      clearInterval(this.autoRefreshIntervalId);\n    }\n  }\n\n  autoRefreshConfigHandler() {\n    //Build a map configuration overlay.\n    const autoRefreshConfig = new _overlays_AutoRefreshConfig_js__WEBPACK_IMPORTED_MODULE_10__[\"AutoRefreshConfig\"]();\n    //Display the overlay.\n    const userModal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_3__[\"Modal\"](\n      autoRefreshConfig,\n      \"Your browser doesn't support this feature! - Please change to a more modern one.\",\n      () => {\n        const autoRefreshData = JSON.parse(\n          localStorage.getItem(\"fttAutoRefreshData\")\n        );\n        if (autoRefreshData) {\n          this.autoRefreshTimer = autoRefreshData.timer;\n          clearInterval(this.autoRefreshIntervalId);\n          this.autoRefreshBoxHandler();\n        } else {\n          alert(\"No autoRefresh configuration data in local storage.\");\n        }\n      }\n    );\n    userModal.show();\n  }\n\n  segmentTableClickHandler(event) {\n    //Find the closest row to the click event.\n    const closestRow = event.target.closest(\"tr\");\n    if (this.selectedRow) {\n      //Remove any previous selection data\n      this.selectedRow.classList.remove(\"active-row\");\n      this.mapInterface.removeActiveMarker();\n      this.mapInterface.removeActivePoses();\n      this.localMapInterface.removeActiveMarker();\n      this.localMapInterface.removeActivePoses();\n      if (this.selectedRow == closestRow) {\n        //Reset selection variables for a selected row being deselected.\n        this.selectedRow = null;\n        this.selectedRowId = null;\n        this.selectedRowParentId = null;\n        return;\n      }\n    }\n    //Add selection data to reference the clicked row.\n    this.selectedRow = closestRow;\n    this.selectedRowId = closestRow.firstChild.textContent;\n    this.selectedRow.classList.add(\"active-row\");\n    //Find associated segment from the list.\n    const selectedEntry = this.segmentList.find(\n      (entry) => entry.id == this.selectedRowId\n    );\n    //Mark start location of the selected segment/parent segment.\n    this.selectedRowParentId = selectedEntry.parentId;\n    if (selectedEntry.lat && selectedEntry.lng) {\n      this.mapInterface.addActiveMarker(selectedEntry.lat, selectedEntry.lng);\n    } else if (this.selectedRowParentId) {\n      const selectedEntryParent = this.segmentList.find(\n        (entry) => entry.id == this.selectedRowParentId\n      );\n      if (selectedEntryParent.lat && selectedEntryParent.lng) {\n        this.mapInterface.addActiveMarker(\n          selectedEntryParent.lat,\n          selectedEntryParent.lng\n        );\n      }\n    }\n    //Mark local start location of the selected segment/parent segment.\n    if (selectedEntry.local_x && selectedEntry.local_y) {\n      this.localMapInterface.addActiveMarker(\n        selectedEntry.local_x,\n        selectedEntry.local_y\n      );\n    } else if (this.selectedRowParentId) {\n      const selectedEntryParent = this.segmentList.find(\n        (entry) => entry.id == this.selectedRowParentId\n      );\n      if (selectedEntryParent.local_x && selectedEntryParent.local_y) {\n        this.localMapInterface.addActiveMarker(\n          selectedEntryParent.local_x,\n          selectedEntryParent.local_y\n        );\n      }\n    }\n    //Highlight map poses of the selected parent segment.\n    this.mapInterface.addActivePoses(\n      this.selectedRowParentId || this.selectedRowId\n    );\n    //Highlight local map poses of the selected parent segment.\n    this.localMapInterface.addActivePoses(\n      this.selectedRowParentId || this.selectedRowId\n    );\n  }\n\n  async quickReasonEditBtnHandler(itoReasonId) {\n    //Check that a segment is selected.\n    if (!this.selectedRowId) {\n      alert(\"No segment selected for edition!\");\n      return;\n    }\n    const selectedEntry = this.segmentList.find(\n      (entry) => entry.id == this.selectedRowId\n    );\n    if (selectedEntry.segmentType == \"AUTO\") {\n      alert(\"Cannot assign ITO reason to AUTO segment!\");\n      return;\n    }\n    try {\n      //Send put request to edit the ito reason.\n      await this.segmentInterface.put(this.selectedRowId, \"edit\", itoReasonId);\n      //Update table.\n      this.updateSegments();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async newSegmentHandler() {\n    //Fetch ito reason data from server if needed.\n    try {\n      if (!this.itoReasonList || this.itoReasonList.length == 0) {\n        this.itoReasonList = await this.itoReasonInterface.get();\n        //If there are no ito reasons, alert the user.\n        if (this.itoReasonList.length == 0) {\n          alert(\n            \"ITO reasons list empty. Your database was not properly initialized. Please fix this before continuing.\"\n          );\n          return;\n        }\n      }\n    } catch (error) {\n      alert(error.message);\n      return;\n    }\n    //Select the unassigned ito reason.\n    const matchedItoReason = this.itoReasonList.find(\n      (entry) => entry.shortDescription == \"Unassigned\"\n    );\n    //Check there is a match and keep the id of the unassigned ito reason.\n    let unassignedItoReasonId;\n    if (matchedItoReason) {\n      unassignedItoReasonId = matchedItoReason.id;\n    } else {\n      alert(\n        \"Unable to find the 'Unassigned' ITO reason. Your database was not properly initialized. Please fix this before continuing.\"\n      );\n      return;\n    }\n    try {\n      //Send post request to create a new ITO segment with unassigned reason.\n      await this.segmentInterface.post(\n        this.legSelectHook.value,\n        unassignedItoReasonId,\n        SEGMENT_TYPE_ITO,\n        null,\n        null,\n        null,\n        null\n      );\n      //Update table.\n      this.updateSegments();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async endSegmentHandler() {\n    //Check that a segment is selected.\n    if (!this.selectedRowId) {\n      alert(\"No segment selected to end!\");\n      return;\n    }\n    try {\n      //Send put request to close the segment.\n      await this.segmentInterface.put(this.selectedRowId, \"close\");\n      //Update table.\n      this.updateSegments();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async editSegmentHandler() {\n    //Check that a segment is selected.\n    if (!this.selectedRowId) {\n      alert(\"Please select a segment to edit.\");\n      return;\n    }\n    try {\n      //Fetch ito reason data from server if needed.\n      if (!this.itoReasonList || this.itoReasonList.length == 0) {\n        this.itoReasonList = await this.itoReasonInterface.get();\n      }\n      //Find the selected segment entry.\n      const selectedSegment = this.segmentList.find(\n        (segment) => segment.id == this.selectedRowId\n      );\n      //Build the segment editing overlay.\n      const segmentEdit = new _overlays_SegmentEdit_js__WEBPACK_IMPORTED_MODULE_8__[\"SegmentEdit\"](\n        selectedSegment,\n        this.segmentInterface,\n        this.noteInterface,\n        this.imageInterface,\n        this.itoReasonList,\n        this.currentUser\n      );\n      //Display the overlay.\n      const segmentModal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_3__[\"Modal\"](\n        segmentEdit,\n        \"Your browser does't support this feature! - Please change to a more modern one.\",\n        () => {\n          this.updateSegments();\n        }\n      );\n      segmentModal.show();\n    } catch (error) {\n      alert(error.messaje);\n    }\n  }\n\n  gpsMapConfigHandler() {\n    //Build a map configuration overlay.\n    const mapConfig = new _overlays_MapConfig_js__WEBPACK_IMPORTED_MODULE_9__[\"MapConfig\"]();\n    //Display the overlay.\n    const userModal = new _utility_Modal_js__WEBPACK_IMPORTED_MODULE_3__[\"Modal\"](\n      mapConfig,\n      \"Your browser doesn't support this feature! - Please change to a more modern one.\",\n      () => {\n        this.mapInterface.changeTileLayer();\n      }\n    );\n    userModal.show();\n  }\n\n  toggleGpsMapHandler(event) {\n    if (event.target.checked) {\n      this.mapInterface.mapElement.style.display = \"block\";\n      this.mapInterface.leafletMap.invalidateSize(true);\n      this.updateSegments();\n    } else {\n      //Hide map container.\n      this.mapInterface.mapElement.style.display = \"none\";\n      //Delete map poses.\n      const mapLayers = this.mapInterface.mapPointsLayers;\n      for (let idx = mapLayers.length - 1; idx >= 0; idx--) {\n        this.mapInterface.leafletMap.removeLayer(mapLayers[idx].mapPosesPtr);\n        mapLayers.splice(idx, 1);\n      }\n      //Remove local map from GPS map.\n      this.mapInterface.removeLocalMap();\n      this.mapInterface.removeLayerControl();\n    }\n  }\n\n  toggleLocalMapHandler(event) {\n    if (event.target.checked) {\n      this.localMapInterface.mapElement.style.display = \"block\";\n      this.updateSegments();\n    } else {\n      //Hide local map container.\n      this.localMapInterface.mapElement.style.display = \"none\";\n      //Delete local map poses.\n      const localMapLayers = this.localMapInterface.mapPointsLayers;\n      for (let idx = localMapLayers.length - 1; idx >= 0; idx--) {\n        this.localMapInterface.removePoses(localMapLayers[idx].segmentId);\n        //Remove local map from GPS map.\n        this.mapInterface.removeLocalMap();\n        this.mapInterface.removeLayerControl();\n      }\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZnJhbWVzL1NlZ21lbnREZXRhaWwuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZnJhbWVzL1NlZ21lbnREZXRhaWwuanM/OTQwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuaW1wb3J0IHsgTGVhZmxldE1hcCB9IGZyb20gXCIuLi91dGlsaXR5L0xlYWZsZXRNYXAuanNcIjtcbmltcG9ydCB7IExvY2FsTWFwIH0gZnJvbSBcIi4uL3V0aWxpdHkvTG9jYWxNYXAuanNcIjtcbmltcG9ydCB7IERPTUdlbmVyaWMgfSBmcm9tIFwiLi4vdXRpbGl0eS9ET01HZW5lcmljLmpzXCI7XG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gXCIuLi91dGlsaXR5L01vZGFsLmpzXCI7XG5pbXBvcnQgeyBTZWdtZW50SW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9TZWdtZW50LmpzXCI7XG5pbXBvcnQgeyBJdG9SZWFzb25JbnRlcmZhY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2VfaW50ZXJmYWNlL0l0b1JlYXNvbi5qc1wiO1xuaW1wb3J0IHsgTm90ZUludGVyZmFjZSB9IGZyb20gXCIuLi9kYXRhYmFzZV9pbnRlcmZhY2UvTm90ZS5qc1wiO1xuaW1wb3J0IHsgSW1hZ2VJbnRlcmZhY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2VfaW50ZXJmYWNlL0ltYWdlLmpzXCI7XG5pbXBvcnQgeyBTZWdtZW50RWRpdCB9IGZyb20gXCIuLi9vdmVybGF5cy9TZWdtZW50RWRpdC5qc1wiO1xuaW1wb3J0IHsgTWFwQ29uZmlnIH0gZnJvbSBcIi4uL292ZXJsYXlzL01hcENvbmZpZy5qc1wiO1xuaW1wb3J0IHsgQXV0b1JlZnJlc2hDb25maWcgfSBmcm9tIFwiLi4vb3ZlcmxheXMvQXV0b1JlZnJlc2hDb25maWcuanNcIjtcblxuLy9HbG9iYWwgdmFyaWFibGVzIGZvciBmaXhlZCBhbmQgY29tbW9uIGRhdGFiYXNlIHBhcmFtZXRlciB2YWx1ZXMuXG5jb25zdCBTRUdNRU5UX1RZUEVfSVRPID0gMTtcbmNvbnN0IElUT19SRUFTT05fVU5FWFBFQ1RFRCA9IDEyO1xuY29uc3QgSVRPX1JFQVNPTl9QTEFOTkVSID0gMztcbmNvbnN0IElUT19SRUFTT05fU0FGRVRZID0gMTtcbmNvbnN0IElUT19SRUFTT05fVFJBTlNJVCA9IDk7XG4vLyBjb25zdCBJVE9fUkVBU09OX1VOQVNTSUdORUQgPSAxMTtcblxuZXhwb3J0IGNsYXNzIFNlZ21lbnREZXRhaWwge1xuICAvL0NvbnRhaW5lciBjbGFzcyBmb3IgdGhlIHNlZ21lbnQgaW5mbyBhbmQgbWFwIGRpc3BsYXkgc2VjdGlvbnMgb2YgdGhlIHdlYiBwYWdlLlxuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UsIGN1cnJlbnRVc2VyKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBzZXJ2ZXJJbnRlcmZhY2U7XG4gICAgdGhpcy5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuICAgIC8vUmVhY2ggdG8gRE9NIGVsZW1lbnRzLlxuICAgIHRoaXMubGVnU2VsZWN0SG9vayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVnLWlkXCIpO1xuICAgIHRoaXMudW5leHBlY3RlZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidW5leHBlY3RlZC1idG5cIik7XG4gICAgdGhpcy5wbGFubmVyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGFubmVyLWJ0blwiKTtcbiAgICB0aGlzLnNhZmV0eUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2FmZXR5LWJ0blwiKTtcbiAgICB0aGlzLnRyYW5zaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYW5zaXQtYnRuXCIpO1xuICAgIHRoaXMuc2hvd0l0b09ubHlCb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3ctaXRvLW9ubHlcIik7XG4gICAgdGhpcy5hdXRvUmVmcmVzaEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXV0by1yZWZyZXNoXCIpO1xuICAgIHRoaXMuYXV0b1JlZnJlc2hDZmcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1dG8tcmVmcmVzaC1jb25maWctaWNvblwiKTtcbiAgICB0aGlzLnNlZ21lbnRUYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VnbWVudC10YWJsZS1ib2R5XCIpO1xuICAgIHRoaXMuc2VnbWVudE5ld0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXNlZ21lbnQtYnRuXCIpO1xuICAgIHRoaXMuc2VnbWVudEVuZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW5kLXNlZ21lbnQtYnRuXCIpO1xuICAgIHRoaXMuc2VnbWVudEVkaXRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtc2VnbWVudC1idG5cIik7XG4gICAgdGhpcy5yZWZyZXNoQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZWZyZXNoLWJ0blwiKTtcbiAgICB0aGlzLmdwc01hcENvbmZpZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3BzLW1hcC1jb25maWctaWNvblwiKTtcbiAgICB0aGlzLmdwc01hcEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ3BzLW1hcC1ib3hcIik7XG4gICAgdGhpcy5sb2NhbE1hcEJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYWwtbWFwLWJveFwiKTtcbiAgICAvL0luaXRpYWxpemUgdmFyaWFibGVzLlxuICAgIHRoaXMubWFwSW50ZXJmYWNlID0gbmV3IExlYWZsZXRNYXAoc2VydmVySW50ZXJmYWNlLCBcImdwcy1tYXBcIiwgXCJtYXAtdmlld2VyXCIpO1xuICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UgPSBuZXcgTG9jYWxNYXAoc2VydmVySW50ZXJmYWNlKTtcbiAgICB0aGlzLnNlZ21lbnRJbnRlcmZhY2UgPSBuZXcgU2VnbWVudEludGVyZmFjZShzZXJ2ZXJJbnRlcmZhY2UpO1xuICAgIHRoaXMuaXRvUmVhc29uSW50ZXJmYWNlID0gbmV3IEl0b1JlYXNvbkludGVyZmFjZShzZXJ2ZXJJbnRlcmZhY2UpO1xuICAgIHRoaXMubm90ZUludGVyZmFjZSA9IG5ldyBOb3RlSW50ZXJmYWNlKHNlcnZlckludGVyZmFjZSk7XG4gICAgdGhpcy5pbWFnZUludGVyZmFjZSA9IG5ldyBJbWFnZUludGVyZmFjZShzZXJ2ZXJJbnRlcmZhY2UpO1xuICAgIHRoaXMuc2VnbWVudExpc3QgPSBbXTtcbiAgICB0aGlzLml0b1JlYXNvbkxpc3QgPSBudWxsO1xuICAgIHRoaXMuYXV0b1JlZnJlc2hJbnRlcnZhbElkID0gbnVsbDtcbiAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcbiAgICB0aGlzLnNlbGVjdGVkUm93SWQgPSBudWxsO1xuICAgIHRoaXMuc2VsZWN0ZWRSb3dQYXJlbnRJZCA9IG51bGw7XG4gICAgdGhpcy5zaG93QXV0b1NlZ21lbnRzID0gdHJ1ZTtcbiAgICB0aGlzLmF1dG9SZWZyZXNoVGltZXIgPSAyMDAwO1xuICAgIC8vQ2hlY2sgc3RvcmVkIGNvbmZpZ3VyYXRpb24uXG4gICAgbGV0IGF1dG9SZWZyZXNoRGF0YSA9IEpTT04ucGFyc2UoXG4gICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZ0dEF1dG9SZWZyZXNoRGF0YVwiKVxuICAgICk7XG4gICAgaWYgKGF1dG9SZWZyZXNoRGF0YSkge1xuICAgICAgLy9VcGRhdGUgdmFyaWFibGUuXG4gICAgICB0aGlzLmF1dG9SZWZyZXNoVGltZXIgPSBhdXRvUmVmcmVzaERhdGEudGltZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vU3RvcmUgZGVmYXVsdC5cbiAgICAgIGF1dG9SZWZyZXNoRGF0YSA9IHsgdGltZXI6IHRoaXMuYXV0b1JlZnJlc2hUaW1lciB9O1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgIFwiZnR0QXV0b1JlZnJlc2hEYXRhXCIsXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KGF1dG9SZWZyZXNoRGF0YSlcbiAgICAgICk7XG4gICAgfVxuICAgIC8vQWRkIGV2ZW50IGxpc3RlbmVycy5cbiAgICB0aGlzLnNlZ21lbnRUYWJsZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5zZWdtZW50VGFibGVDbGlja0hhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgdGhpcy5zZWdtZW50VGFibGUuYWRkRXZlbnRMaXN0ZW5lcihcImRibGNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbG9zZXN0KFwidHJcIikgIT0gdGhpcy5zZWxlY3RlZFJvdykge1xuICAgICAgICB0aGlzLnNlZ21lbnRUYWJsZUNsaWNrSGFuZGxlcihldmVudCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVkaXRTZWdtZW50SGFuZGxlcigpO1xuICAgIH0pO1xuICAgIHRoaXMudW5leHBlY3RlZEJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5xdWlja1JlYXNvbkVkaXRCdG5IYW5kbGVyLmJpbmQodGhpcywgSVRPX1JFQVNPTl9VTkVYUEVDVEVEKVxuICAgICk7XG4gICAgdGhpcy5wbGFubmVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLnF1aWNrUmVhc29uRWRpdEJ0bkhhbmRsZXIuYmluZCh0aGlzLCBJVE9fUkVBU09OX1BMQU5ORVIpXG4gICAgKTtcbiAgICB0aGlzLnNhZmV0eUJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5xdWlja1JlYXNvbkVkaXRCdG5IYW5kbGVyLmJpbmQodGhpcywgSVRPX1JFQVNPTl9TQUZFVFkpXG4gICAgKTtcbiAgICB0aGlzLnRyYW5zaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIHRoaXMucXVpY2tSZWFzb25FZGl0QnRuSGFuZGxlci5iaW5kKHRoaXMsIElUT19SRUFTT05fVFJBTlNJVClcbiAgICApO1xuICAgIHRoaXMuc2VnbWVudE5ld0J0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5uZXdTZWdtZW50SGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLnNlZ21lbnRFbmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIHRoaXMuZW5kU2VnbWVudEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgdGhpcy5zZWdtZW50RWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5lZGl0U2VnbWVudEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgdGhpcy5yZWZyZXNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVNlZ21lbnRzKCk7XG4gICAgfSk7XG4gICAgdGhpcy5zaG93SXRvT25seUJveC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjaGFuZ2VcIixcbiAgICAgIHRoaXMuc2hvd0l0b09ubHlCb3hIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRoaXMuYXV0b1JlZnJlc2hCb3guYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2hhbmdlXCIsXG4gICAgICB0aGlzLmF1dG9SZWZyZXNoQm94SGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLmF1dG9SZWZyZXNoQ2ZnLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLmF1dG9SZWZyZXNoQ29uZmlnSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLmdwc01hcENvbmZpZy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5ncHNNYXBDb25maWdIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRoaXMuZ3BzTWFwQm94LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLnRvZ2dsZUdwc01hcEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgdGhpcy5sb2NhbE1hcEJveC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy50b2dnbGVMb2NhbE1hcEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZWdtZW50cyhuZXdTZWdtZW50TGlzdCA9IG51bGwpIHtcbiAgICAvL1VwZGF0ZSBzZWdtZW50IGRhdGEgdGFibGUgYW5kIG1hcCBkaXNwbGF5LlxuICAgIHRyeSB7XG4gICAgICBpZiAobmV3U2VnbWVudExpc3QpIHtcbiAgICAgICAgLy9VcGRhdGUgc2VnbWVudExpc3Qgd2l0aCBuZXcgdmFsdWVzLlxuICAgICAgICB0aGlzLnNlZ21lbnRMaXN0ID0gbmV3U2VnbWVudExpc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL0dldCBzZWdtZW50IGRhdGEgZnJvbSBEQi5cbiAgICAgICAgdGhpcy5zZWdtZW50TGlzdCA9IGF3YWl0IHRoaXMuc2VnbWVudEludGVyZmFjZS5nZXQoXG4gICAgICAgICAgdGhpcy5sZWdTZWxlY3RIb29rLnZhbHVlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvL1JlbW92ZSBvbGQgZGF0YSBmcm9tIHRhYmxlLlxuICAgICAgY29uc3QgdGFibGVSb3dzID0gQXJyYXkuZnJvbSh0aGlzLnNlZ21lbnRUYWJsZS5xdWVyeVNlbGVjdG9yQWxsKFwidHJcIikpO1xuICAgICAgZm9yIChjb25zdCByb3cgb2YgdGFibGVSb3dzLnJldmVyc2UoKSkge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuc2VnbWVudExpc3QuZmluZChcbiAgICAgICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IHJvdy5maXJzdENoaWxkLnRleHRDb250ZW50XG4gICAgICAgICk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAvL0lmIHRoZSByb3cgd2FzIHNlbGVjdGVkLCBkZWxldGUgc2VsZWN0aW9uIGRhdGEuXG4gICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRSb3dJZCA9PSByb3cuZmlyc3RDaGlsZC50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvdyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93SWQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1BhcmVudElkID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMubWFwSW50ZXJmYWNlLnJlbW92ZUFjdGl2ZU1hcmtlcigpO1xuICAgICAgICAgICAgdGhpcy5tYXBJbnRlcmZhY2UucmVtb3ZlQWN0aXZlUG9zZXMoKTtcbiAgICAgICAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UucmVtb3ZlQWN0aXZlTWFya2VyKCk7XG4gICAgICAgICAgICB0aGlzLmxvY2FsTWFwSW50ZXJmYWNlLnJlbW92ZUFjdGl2ZVBvc2VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vRGVsZXRlIHJvdy5cbiAgICAgICAgICByb3cucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG1hcExheWVycyA9IHRoaXMubWFwSW50ZXJmYWNlLm1hcFBvaW50c0xheWVycztcbiAgICAgIGNvbnN0IGxvY2FsTWFwTGF5ZXJzID0gdGhpcy5sb2NhbE1hcEludGVyZmFjZS5tYXBQb2ludHNMYXllcnM7XG4gICAgICAvL0lmIEdQUyBtYXAgaXMgYWN0aXZlOlxuICAgICAgaWYgKHRoaXMuZ3BzTWFwQm94LmNoZWNrZWQpIHtcbiAgICAgICAgLy9SZW1vdmUgb2xkIGRhdGEgZnJvbSBtYXAuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IG1hcExheWVycy5sZW5ndGggLSAxOyBpZHggPj0gMDsgaWR4LS0pIHtcbiAgICAgICAgICBjb25zdCBtYXRjaCA9IHRoaXMuc2VnbWVudExpc3QuZmluZChcbiAgICAgICAgICAgIChlbnRyeSkgPT4gZW50cnkuaWQgPT0gbWFwTGF5ZXJzW2lkeF0uc2VnbWVudElkXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5sZWFmbGV0TWFwLnJlbW92ZUxheWVyKFxuICAgICAgICAgICAgICBtYXBMYXllcnNbaWR4XS5tYXBQb3Nlc1B0clxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG1hcExheWVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy9SZXNldCBkaXNwbGF5IGlmIG1hcCBpcyBlbXB0eS5cbiAgICAgICAgaWYgKG1hcExheWVycy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIGNvbnN0IGZpcnN0TG9jRW50cnkgPSB0aGlzLnNlZ21lbnRMaXN0LmZpbmQoXG4gICAgICAgICAgICAoZW50cnkpID0+IGVudHJ5LmxhdCAmJiBlbnRyeS5sbmdcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChmaXJzdExvY0VudHJ5KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgXCJTZXR0aW5nIG1hcCBkaXNwbGF5IGluIFwiICtcbiAgICAgICAgICAgICAgICBmaXJzdExvY0VudHJ5LmxhdCArXG4gICAgICAgICAgICAgICAgXCIsIFwiICtcbiAgICAgICAgICAgICAgICBmaXJzdExvY0VudHJ5LmxuZ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMubWFwSW50ZXJmYWNlLmxlYWZsZXRNYXAuc2V0VmlldyhcbiAgICAgICAgICAgICAgW2ZpcnN0TG9jRW50cnkubGF0LCBmaXJzdExvY0VudHJ5LmxuZ10sXG4gICAgICAgICAgICAgIDE3XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5tYXBJbnRlcmZhY2UucmVtb3ZlTG9jYWxNYXAoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vSWYgbG9jYWwgbWFwIGlzIGFjdGl2ZTpcbiAgICAgIGlmICh0aGlzLmxvY2FsTWFwQm94LmNoZWNrZWQpIHtcbiAgICAgICAgLy9SZW1vdmUgb2xkIGRhdGEgZnJvbSBtYXAuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IGxvY2FsTWFwTGF5ZXJzLmxlbmd0aCAtIDE7IGlkeCA+PSAwOyBpZHgtLSkge1xuICAgICAgICAgIGNvbnN0IG1hdGNoID0gdGhpcy5zZWdtZW50TGlzdC5maW5kKFxuICAgICAgICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSBsb2NhbE1hcExheWVyc1tpZHhdLnNlZ21lbnRJZFxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgdGhpcy5sb2NhbE1hcEludGVyZmFjZS5yZW1vdmVQb3Nlcyhsb2NhbE1hcExheWVyc1tpZHhdLnNlZ21lbnRJZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vUmVzZXQgZGlzcGxheSBpZiBtYXAgaXMgZW1wdHkuXG4gICAgICAgIGlmIChsb2NhbE1hcExheWVycy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UucmVzZXRWaWV3ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBVcGRhdGUgbG9jYWwgbWFwOlxuICAgICAgICBjb25zdCBzaGlmdFNlbGVjdFZhbHVlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGlmdC1pZFwiKS52YWx1ZTtcbiAgICAgICAgaWYgKHNoaWZ0U2VsZWN0VmFsdWUpIHtcbiAgICAgICAgICBjb25zdCBtYXBJbWFnZSA9IGF3YWl0IHRoaXMubG9jYWxNYXBJbnRlcmZhY2UuZ2V0QW5kRHJhd01hcChcbiAgICAgICAgICAgIHNoaWZ0U2VsZWN0VmFsdWVcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vQWxzbyBkcmF3IHRoZSBsb2NhbCBtYXAgb3ZlciB0aGUgR1BTIG1hcCAoaWYgYWN0aXZlIGFuZCBncHMgcG9zZXMgYXZhaWxhYmxlKS5cbiAgICAgICAgICBpZiAodGhpcy5ncHNNYXBCb3guY2hlY2tlZCAmJiBtYXBJbWFnZSkge1xuICAgICAgICAgICAgLy9GaWx0ZXIgbWFzdGVyIHNlZ21lbnRzIHRoYXQgaGF2ZSBib3RoIGxvY2FsIGFuZCBncHMgcG9zaXRpb24uXG4gICAgICAgICAgICBsZXQgZlNlZ3MgPSB0aGlzLnNlZ21lbnRMaXN0LmZpbHRlcihcbiAgICAgICAgICAgICAgKGVudHJ5KSA9PlxuICAgICAgICAgICAgICAgIGVudHJ5LmxhdCAmJlxuICAgICAgICAgICAgICAgIGVudHJ5LmxuZyAmJlxuICAgICAgICAgICAgICAgIGVudHJ5LmxvY2FsX3ggJiZcbiAgICAgICAgICAgICAgICBlbnRyeS5sb2NhbF95ICYmXG4gICAgICAgICAgICAgICAgZW50cnkucGFyZW50SWQgPT09IG51bGxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoZlNlZ3MubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgICAgZlNlZ3MucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1hcEludGVyZmFjZS5hZGRMb2NhbE1hcChtYXBJbWFnZSwgZlNlZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGVydChcIk5vIHNoaWZ0IHNlbGVjdGVkIVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy9SZWNvcmQgaWYgbWFwcyB3ZXJlIGVtcHR5LlxuICAgICAgY29uc3QgbG9jYWxfcmVzZXQgPSBsb2NhbE1hcExheWVycy5sZW5ndGggPT09IDA7XG4gICAgICBjb25zdCBncHNfcmVzZXQgPSBtYXBMYXllcnMubGVuZ3RoID09PSAwO1xuICAgICAgLy9SZWNvcmQgaWYgc2VnbWVudFRhYmxlIHdhcyBlbXB0eS5cbiAgICAgIGNvbnN0IHRhYmxlX3Jlc2V0ID0gdGhpcy5zZWdtZW50VGFibGUuY2hpbGRyZW4ubGVuZ3RoID09PSAwO1xuICAgICAgLy9BZGQgb3IgZWRpdCBkYXRhIGZyb20gdGFibGUgYW5kIG1hcDpcbiAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgdGhpcy5zZWdtZW50TGlzdC5yZXZlcnNlKCkpIHtcbiAgICAgICAgLy9GaW5kIGlmIHRoZSBlbnRyeSB3YXMgaW4gdGhlIHRhYmxlIGJlZm9yZSB0aGUgdXBkYXRlLlxuICAgICAgICAvL0ZvciBpdG8gbWFzdGVyIHNlZ21lbnRzLCBmaW5kIGlmIHRoZSBjaGlsZCBpcyBpbiB0aGUgdGFibGUuXG4gICAgICAgIGxldCB0YXJnZXRJZCA9IGVudHJ5LmlkO1xuICAgICAgICBpZiAoZW50cnkuc2VnbWVudFR5cGUgPT0gXCJJVE9cIiAmJiAhZW50cnkucGFyZW50SWQpIHtcbiAgICAgICAgICBjb25zdCBtYXRjaGVkQ2hpbGQgPSB0aGlzLnNlZ21lbnRMaXN0LmZpbmQoXG4gICAgICAgICAgICAoc2VnbWVudCkgPT4gc2VnbWVudC5wYXJlbnRJZCA9PT0gZW50cnkuaWRcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChtYXRjaGVkQ2hpbGQpIHtcbiAgICAgICAgICAgIHRhcmdldElkID0gbWF0Y2hlZENoaWxkLmlkO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYXRjaGVkUm93ID0gdGFibGVSb3dzLmZpbmQoXG4gICAgICAgICAgKHJvdykgPT4gcm93LmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgPT0gdGFyZ2V0SWRcbiAgICAgICAgKTtcbiAgICAgICAgLy9VcGRhdGUgdGFibGUgcm93cyAob25seSBhdXRvIGFuZCBpdG8tY2hpbGRyZW4pOlxuICAgICAgICBpZiAoXG4gICAgICAgICAgZW50cnkuc2VnbWVudFR5cGUgPT0gXCJBVVRPXCIgfHxcbiAgICAgICAgICAoZW50cnkuc2VnbWVudFR5cGUgPT0gXCJJVE9cIiAmJiBlbnRyeS5wYXJlbnRJZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgZW50cnlTdGF0ZSA9IGVudHJ5LmVuZFRpbWUgPT0gbnVsbCA/IFwiT1BFTlwiIDogXCJDTE9TRURcIjtcbiAgICAgICAgICBjb25zdCBlbnRyeVJlYXNvbiA9IGVudHJ5Lml0b1JlYXNvbiB8fCBcIlwiO1xuICAgICAgICAgIGlmIChtYXRjaGVkUm93KSB7XG4gICAgICAgICAgICAvL1VwZGF0ZSByb3cgaW5mbyB3aXRoIG5ldyBkYXRhLlxuICAgICAgICAgICAgaWYgKG1hdGNoZWRSb3cuY2hpbGRyZW5bMl0udGV4dENvbnRlbnQgIT0gZW50cnlSZWFzb24pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJVcGRhdGluZyByb3cgXCIgKyBlbnRyeS5pZCArIFwiIHJlYXNvblwiKTtcbiAgICAgICAgICAgICAgbWF0Y2hlZFJvdy5jaGlsZHJlblsyXS50ZXh0Q29udGVudCA9IGVudHJ5UmVhc29uO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1hdGNoZWRSb3cuY2hpbGRyZW5bM10udGV4dENvbnRlbnQgIT0gZW50cnlTdGF0ZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVwZGF0aW5nIHJvdyBcIiArIGVudHJ5LmlkICsgXCIgc3RhdGVcIik7XG4gICAgICAgICAgICAgIG1hdGNoZWRSb3cuY2hpbGRyZW5bM10udGV4dENvbnRlbnQgPSBlbnRyeVN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvL0NyZWF0ZSBuZXcgdGFibGUgcm93LlxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJDcmVhdGluZyByb3cgXCIgKyBlbnRyeS5pZCk7XG4gICAgICAgICAgICBET01HZW5lcmljLmFkZFJvdyh0aGlzLnNlZ21lbnRUYWJsZSwgW1xuICAgICAgICAgICAgICBlbnRyeS5pZCxcbiAgICAgICAgICAgICAgZW50cnkuc2VnbWVudFR5cGUsXG4gICAgICAgICAgICAgIGVudHJ5UmVhc29uLFxuICAgICAgICAgICAgICBlbnRyeVN0YXRlLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAvL1NldCB2aXNpYmlsaXR5IGlmIHRoZSByb3cgaXMgQVVUT1xuICAgICAgICAgICAgaWYgKGVudHJ5LnNlZ21lbnRUeXBlID09PSBcIkFVVE9cIikge1xuICAgICAgICAgICAgICBpZiAoIXRoaXMuc2hvd0F1dG9TZWdtZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VnbWVudFRhYmxlLmZpcnN0Q2hpbGQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL0FjdGl2YXRlIG1hcHMgaWYgdGhpcyBpcyB0aGUgZmlyc3Qgcm93OlxuICAgICAgICAgICAgaWYgKHRhYmxlX3Jlc2V0KSB7XG4gICAgICAgICAgICAgIC8vSWYgdGhlIHNlZ21lbnQgaGFzIEdQUyBwb3NlcywgYWN0aXZhdGUgdGhlIEdQUyBtYXBcbiAgICAgICAgICAgICAgaWYgKGVudHJ5LmxuZyAmJiBlbnRyeS5sYXQgJiYgIXRoaXMuZ3BzTWFwQm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdwc01hcEJveC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5tYXBFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBJbnRlcmZhY2UubGVhZmxldE1hcC5pbnZhbGlkYXRlU2l6ZSh0cnVlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvL0lmIGFueSBzZWdtZW50IGhhcyBsb2NhbCBwb3NlcywgYWN0aXZhdGUgdGhlIGxvY2FsIG1hcFxuICAgICAgICAgICAgICBpZiAoZW50cnkubG9jYWxfeCAmJiBlbnRyeS5sb2NhbF95ICYmICF0aGlzLmxvY2FsTWFwQm94LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvY2FsTWFwQm94LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UubWFwRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vSWYgR1BTIG1hcCBpcyBhY3RpdmU6XG4gICAgICAgIGlmICh0aGlzLmdwc01hcEJveC5jaGVja2VkKSB7XG4gICAgICAgICAgLy9VcGRhdGUgbWFwIHBvc2VzOlxuICAgICAgICAgIGlmICghZW50cnkucGFyZW50SWQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZWRNYXBMYXllciA9IG1hcExheWVycy5maW5kKFxuICAgICAgICAgICAgICAobGF5ZXIpID0+IGxheWVyLnNlZ21lbnRJZCA9PSBlbnRyeS5pZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vSWYgdGhlIG1hcCB3YXMgcmVzZXQsIHRoZSBzZWdtZW50IGlzIG5ldyBpbiB0aGUgdGFibGUgb3IgaWYgaXQncyBvcGVuOlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBncHNfcmVzZXQgfHxcbiAgICAgICAgICAgICAgKCFtYXRjaGVkTWFwTGF5ZXIgJiYgIW1hdGNoZWRSb3cpIHx8XG4gICAgICAgICAgICAgIGVudHJ5LmVuZFRpbWUgPT0gbnVsbFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIC8vQ3JlYXRlIG5ldyBvciB1cGRhdGUgcG9pbnRzIGxheWVyLlxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLm1hcEludGVyZmFjZS5nZXRBbmREcmF3TWFwUG9zZXMoZW50cnkuaWQpO1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKGVudHJ5LnNlZ21lbnRUeXBlID09IFwiQVVUT1wiICYmXG4gICAgICAgICAgICAgICAgICBlbnRyeS5pZCA9PSB0aGlzLnNlbGVjdGVkUm93SWQpIHx8XG4gICAgICAgICAgICAgICAgKGVudHJ5LnNlZ21lbnRUeXBlID09IFwiSVRPXCIgJiZcbiAgICAgICAgICAgICAgICAgIGVudHJ5LmlkID09IHRoaXMuc2VsZWN0ZWRSb3dQYXJlbnRJZClcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tYXBJbnRlcmZhY2UuYWRkQWN0aXZlUG9zZXMoZW50cnkuaWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vSWYgbG9jYWwgbWFwIGlzIGFjdGl2ZTpcbiAgICAgICAgaWYgKHRoaXMubG9jYWxNYXBCb3guY2hlY2tlZCkge1xuICAgICAgICAgIC8vVXBkYXRlIG1hcCBwb3NlczpcbiAgICAgICAgICBpZiAoIWVudHJ5LnBhcmVudElkKSB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaGVkTWFwTGF5ZXIgPSBsb2NhbE1hcExheWVycy5maW5kKFxuICAgICAgICAgICAgICAobGF5ZXIpID0+IGxheWVyLnNlZ21lbnRJZCA9PSBlbnRyeS5pZFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vSWYgdGhlIG1hcCB3YXMgcmVzZXQsIHRoZSBzZWdtZW50IGlzIG5ldyBpbiB0aGUgdGFibGUgb3IgaWYgaXQncyBvcGVuOlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBsb2NhbF9yZXNldCB8fFxuICAgICAgICAgICAgICAoIW1hdGNoZWRNYXBMYXllciAmJiAhbWF0Y2hlZFJvdykgfHxcbiAgICAgICAgICAgICAgZW50cnkuZW5kVGltZSA9PSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgLy9DcmVhdGUgbmV3IG9yIHVwZGF0ZSBwb2ludHMgbGF5ZXIuXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMubG9jYWxNYXBJbnRlcmZhY2UuZ2V0QW5kRHJhd01hcFBvc2VzKGVudHJ5LmlkKTtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChlbnRyeS5zZWdtZW50VHlwZSA9PSBcIkFVVE9cIiAmJlxuICAgICAgICAgICAgICAgICAgZW50cnkuaWQgPT0gdGhpcy5zZWxlY3RlZFJvd0lkKSB8fFxuICAgICAgICAgICAgICAgIChlbnRyeS5zZWdtZW50VHlwZSA9PSBcIklUT1wiICYmXG4gICAgICAgICAgICAgICAgICBlbnRyeS5pZCA9PSB0aGlzLnNlbGVjdGVkUm93UGFyZW50SWQpXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UuYWRkQWN0aXZlUG9zZXMoZW50cnkuaWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHNob3dJdG9Pbmx5Qm94SGFuZGxlcigpIHtcbiAgICAvL0hpZGUgYXV0byBzZWdtZW50cyBpZiB0aGUgYm94IGlzIGNoZWNrZWQuXG4gICAgaWYgKHRoaXMuc2hvd0l0b09ubHlCb3guY2hlY2tlZCkge1xuICAgICAgdGhpcy5zaG93QXV0b1NlZ21lbnRzID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2hvd0F1dG9TZWdtZW50cyA9IHRydWU7XG4gICAgfVxuICAgIGNvbnN0IHRhYmxlUm93cyA9IEFycmF5LmZyb20odGhpcy5zZWdtZW50VGFibGUucXVlcnlTZWxlY3RvckFsbChcInRyXCIpKTtcbiAgICBmb3IgKGNvbnN0IHJvdyBvZiB0YWJsZVJvd3MpIHtcbiAgICAgIGlmIChyb3cuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQgPT09IFwiQVVUT1wiKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3dBdXRvU2VnbWVudHMpIHtcbiAgICAgICAgICByb3cuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhdXRvUmVmcmVzaEJveEhhbmRsZXIoKSB7XG4gICAgLy9DYWxsIHVwZGF0ZVNlZ21lbnRzIGluIHJlZ3VsYXIgaW50ZXJ2YWxzIGlmIHRoZSBib3ggaXMgY2hlY2tlZC5cbiAgICBpZiAodGhpcy5hdXRvUmVmcmVzaEJveC5jaGVja2VkKSB7XG4gICAgICBpZiAodGhpcy5sZWdTZWxlY3RIb29rLnZhbHVlKSB7XG4gICAgICAgIHRoaXMuYXV0b1JlZnJlc2hJbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgIHRoaXMudXBkYXRlU2VnbWVudHMoKTtcbiAgICAgICAgfSwgdGhpcy5hdXRvUmVmcmVzaFRpbWVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXV0b1JlZnJlc2hCb3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICBhbGVydChcIk5vIGxlZyBzZWxlY3RlZCFcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvUmVmcmVzaEludGVydmFsSWQpO1xuICAgIH1cbiAgfVxuXG4gIGF1dG9SZWZyZXNoQ29uZmlnSGFuZGxlcigpIHtcbiAgICAvL0J1aWxkIGEgbWFwIGNvbmZpZ3VyYXRpb24gb3ZlcmxheS5cbiAgICBjb25zdCBhdXRvUmVmcmVzaENvbmZpZyA9IG5ldyBBdXRvUmVmcmVzaENvbmZpZygpO1xuICAgIC8vRGlzcGxheSB0aGUgb3ZlcmxheS5cbiAgICBjb25zdCB1c2VyTW9kYWwgPSBuZXcgTW9kYWwoXG4gICAgICBhdXRvUmVmcmVzaENvbmZpZyxcbiAgICAgIFwiWW91ciBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCB0aGlzIGZlYXR1cmUhIC0gUGxlYXNlIGNoYW5nZSB0byBhIG1vcmUgbW9kZXJuIG9uZS5cIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgYXV0b1JlZnJlc2hEYXRhID0gSlNPTi5wYXJzZShcbiAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZ0dEF1dG9SZWZyZXNoRGF0YVwiKVxuICAgICAgICApO1xuICAgICAgICBpZiAoYXV0b1JlZnJlc2hEYXRhKSB7XG4gICAgICAgICAgdGhpcy5hdXRvUmVmcmVzaFRpbWVyID0gYXV0b1JlZnJlc2hEYXRhLnRpbWVyO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5hdXRvUmVmcmVzaEludGVydmFsSWQpO1xuICAgICAgICAgIHRoaXMuYXV0b1JlZnJlc2hCb3hIYW5kbGVyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxlcnQoXCJObyBhdXRvUmVmcmVzaCBjb25maWd1cmF0aW9uIGRhdGEgaW4gbG9jYWwgc3RvcmFnZS5cIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICAgIHVzZXJNb2RhbC5zaG93KCk7XG4gIH1cblxuICBzZWdtZW50VGFibGVDbGlja0hhbmRsZXIoZXZlbnQpIHtcbiAgICAvL0ZpbmQgdGhlIGNsb3Nlc3Qgcm93IHRvIHRoZSBjbGljayBldmVudC5cbiAgICBjb25zdCBjbG9zZXN0Um93ID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJ0clwiKTtcbiAgICBpZiAodGhpcy5zZWxlY3RlZFJvdykge1xuICAgICAgLy9SZW1vdmUgYW55IHByZXZpb3VzIHNlbGVjdGlvbiBkYXRhXG4gICAgICB0aGlzLnNlbGVjdGVkUm93LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmUtcm93XCIpO1xuICAgICAgdGhpcy5tYXBJbnRlcmZhY2UucmVtb3ZlQWN0aXZlTWFya2VyKCk7XG4gICAgICB0aGlzLm1hcEludGVyZmFjZS5yZW1vdmVBY3RpdmVQb3NlcygpO1xuICAgICAgdGhpcy5sb2NhbE1hcEludGVyZmFjZS5yZW1vdmVBY3RpdmVNYXJrZXIoKTtcbiAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UucmVtb3ZlQWN0aXZlUG9zZXMoKTtcbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkUm93ID09IGNsb3Nlc3RSb3cpIHtcbiAgICAgICAgLy9SZXNldCBzZWxlY3Rpb24gdmFyaWFibGVzIGZvciBhIHNlbGVjdGVkIHJvdyBiZWluZyBkZXNlbGVjdGVkLlxuICAgICAgICB0aGlzLnNlbGVjdGVkUm93ID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0lkID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd1BhcmVudElkID0gbnVsbDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvL0FkZCBzZWxlY3Rpb24gZGF0YSB0byByZWZlcmVuY2UgdGhlIGNsaWNrZWQgcm93LlxuICAgIHRoaXMuc2VsZWN0ZWRSb3cgPSBjbG9zZXN0Um93O1xuICAgIHRoaXMuc2VsZWN0ZWRSb3dJZCA9IGNsb3Nlc3RSb3cuZmlyc3RDaGlsZC50ZXh0Q29udGVudDtcbiAgICB0aGlzLnNlbGVjdGVkUm93LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmUtcm93XCIpO1xuICAgIC8vRmluZCBhc3NvY2lhdGVkIHNlZ21lbnQgZnJvbSB0aGUgbGlzdC5cbiAgICBjb25zdCBzZWxlY3RlZEVudHJ5ID0gdGhpcy5zZWdtZW50TGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSB0aGlzLnNlbGVjdGVkUm93SWRcbiAgICApO1xuICAgIC8vTWFyayBzdGFydCBsb2NhdGlvbiBvZiB0aGUgc2VsZWN0ZWQgc2VnbWVudC9wYXJlbnQgc2VnbWVudC5cbiAgICB0aGlzLnNlbGVjdGVkUm93UGFyZW50SWQgPSBzZWxlY3RlZEVudHJ5LnBhcmVudElkO1xuICAgIGlmIChzZWxlY3RlZEVudHJ5LmxhdCAmJiBzZWxlY3RlZEVudHJ5LmxuZykge1xuICAgICAgdGhpcy5tYXBJbnRlcmZhY2UuYWRkQWN0aXZlTWFya2VyKHNlbGVjdGVkRW50cnkubGF0LCBzZWxlY3RlZEVudHJ5LmxuZyk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkUm93UGFyZW50SWQpIHtcbiAgICAgIGNvbnN0IHNlbGVjdGVkRW50cnlQYXJlbnQgPSB0aGlzLnNlZ21lbnRMaXN0LmZpbmQoXG4gICAgICAgIChlbnRyeSkgPT4gZW50cnkuaWQgPT0gdGhpcy5zZWxlY3RlZFJvd1BhcmVudElkXG4gICAgICApO1xuICAgICAgaWYgKHNlbGVjdGVkRW50cnlQYXJlbnQubGF0ICYmIHNlbGVjdGVkRW50cnlQYXJlbnQubG5nKSB7XG4gICAgICAgIHRoaXMubWFwSW50ZXJmYWNlLmFkZEFjdGl2ZU1hcmtlcihcbiAgICAgICAgICBzZWxlY3RlZEVudHJ5UGFyZW50LmxhdCxcbiAgICAgICAgICBzZWxlY3RlZEVudHJ5UGFyZW50LmxuZ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICAvL01hcmsgbG9jYWwgc3RhcnQgbG9jYXRpb24gb2YgdGhlIHNlbGVjdGVkIHNlZ21lbnQvcGFyZW50IHNlZ21lbnQuXG4gICAgaWYgKHNlbGVjdGVkRW50cnkubG9jYWxfeCAmJiBzZWxlY3RlZEVudHJ5LmxvY2FsX3kpIHtcbiAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UuYWRkQWN0aXZlTWFya2VyKFxuICAgICAgICBzZWxlY3RlZEVudHJ5LmxvY2FsX3gsXG4gICAgICAgIHNlbGVjdGVkRW50cnkubG9jYWxfeVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRSb3dQYXJlbnRJZCkge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRFbnRyeVBhcmVudCA9IHRoaXMuc2VnbWVudExpc3QuZmluZChcbiAgICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSB0aGlzLnNlbGVjdGVkUm93UGFyZW50SWRcbiAgICAgICk7XG4gICAgICBpZiAoc2VsZWN0ZWRFbnRyeVBhcmVudC5sb2NhbF94ICYmIHNlbGVjdGVkRW50cnlQYXJlbnQubG9jYWxfeSkge1xuICAgICAgICB0aGlzLmxvY2FsTWFwSW50ZXJmYWNlLmFkZEFjdGl2ZU1hcmtlcihcbiAgICAgICAgICBzZWxlY3RlZEVudHJ5UGFyZW50LmxvY2FsX3gsXG4gICAgICAgICAgc2VsZWN0ZWRFbnRyeVBhcmVudC5sb2NhbF95XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vSGlnaGxpZ2h0IG1hcCBwb3NlcyBvZiB0aGUgc2VsZWN0ZWQgcGFyZW50IHNlZ21lbnQuXG4gICAgdGhpcy5tYXBJbnRlcmZhY2UuYWRkQWN0aXZlUG9zZXMoXG4gICAgICB0aGlzLnNlbGVjdGVkUm93UGFyZW50SWQgfHwgdGhpcy5zZWxlY3RlZFJvd0lkXG4gICAgKTtcbiAgICAvL0hpZ2hsaWdodCBsb2NhbCBtYXAgcG9zZXMgb2YgdGhlIHNlbGVjdGVkIHBhcmVudCBzZWdtZW50LlxuICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UuYWRkQWN0aXZlUG9zZXMoXG4gICAgICB0aGlzLnNlbGVjdGVkUm93UGFyZW50SWQgfHwgdGhpcy5zZWxlY3RlZFJvd0lkXG4gICAgKTtcbiAgfVxuXG4gIGFzeW5jIHF1aWNrUmVhc29uRWRpdEJ0bkhhbmRsZXIoaXRvUmVhc29uSWQpIHtcbiAgICAvL0NoZWNrIHRoYXQgYSBzZWdtZW50IGlzIHNlbGVjdGVkLlxuICAgIGlmICghdGhpcy5zZWxlY3RlZFJvd0lkKSB7XG4gICAgICBhbGVydChcIk5vIHNlZ21lbnQgc2VsZWN0ZWQgZm9yIGVkaXRpb24hXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzZWxlY3RlZEVudHJ5ID0gdGhpcy5zZWdtZW50TGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSB0aGlzLnNlbGVjdGVkUm93SWRcbiAgICApO1xuICAgIGlmIChzZWxlY3RlZEVudHJ5LnNlZ21lbnRUeXBlID09IFwiQVVUT1wiKSB7XG4gICAgICBhbGVydChcIkNhbm5vdCBhc3NpZ24gSVRPIHJlYXNvbiB0byBBVVRPIHNlZ21lbnQhXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgLy9TZW5kIHB1dCByZXF1ZXN0IHRvIGVkaXQgdGhlIGl0byByZWFzb24uXG4gICAgICBhd2FpdCB0aGlzLnNlZ21lbnRJbnRlcmZhY2UucHV0KHRoaXMuc2VsZWN0ZWRSb3dJZCwgXCJlZGl0XCIsIGl0b1JlYXNvbklkKTtcbiAgICAgIC8vVXBkYXRlIHRhYmxlLlxuICAgICAgdGhpcy51cGRhdGVTZWdtZW50cygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBuZXdTZWdtZW50SGFuZGxlcigpIHtcbiAgICAvL0ZldGNoIGl0byByZWFzb24gZGF0YSBmcm9tIHNlcnZlciBpZiBuZWVkZWQuXG4gICAgdHJ5IHtcbiAgICAgIGlmICghdGhpcy5pdG9SZWFzb25MaXN0IHx8IHRoaXMuaXRvUmVhc29uTGlzdC5sZW5ndGggPT0gMCkge1xuICAgICAgICB0aGlzLml0b1JlYXNvbkxpc3QgPSBhd2FpdCB0aGlzLml0b1JlYXNvbkludGVyZmFjZS5nZXQoKTtcbiAgICAgICAgLy9JZiB0aGVyZSBhcmUgbm8gaXRvIHJlYXNvbnMsIGFsZXJ0IHRoZSB1c2VyLlxuICAgICAgICBpZiAodGhpcy5pdG9SZWFzb25MaXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgYWxlcnQoXG4gICAgICAgICAgICBcIklUTyByZWFzb25zIGxpc3QgZW1wdHkuIFlvdXIgZGF0YWJhc2Ugd2FzIG5vdCBwcm9wZXJseSBpbml0aWFsaXplZC4gUGxlYXNlIGZpeCB0aGlzIGJlZm9yZSBjb250aW51aW5nLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vU2VsZWN0IHRoZSB1bmFzc2lnbmVkIGl0byByZWFzb24uXG4gICAgY29uc3QgbWF0Y2hlZEl0b1JlYXNvbiA9IHRoaXMuaXRvUmVhc29uTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5zaG9ydERlc2NyaXB0aW9uID09IFwiVW5hc3NpZ25lZFwiXG4gICAgKTtcbiAgICAvL0NoZWNrIHRoZXJlIGlzIGEgbWF0Y2ggYW5kIGtlZXAgdGhlIGlkIG9mIHRoZSB1bmFzc2lnbmVkIGl0byByZWFzb24uXG4gICAgbGV0IHVuYXNzaWduZWRJdG9SZWFzb25JZDtcbiAgICBpZiAobWF0Y2hlZEl0b1JlYXNvbikge1xuICAgICAgdW5hc3NpZ25lZEl0b1JlYXNvbklkID0gbWF0Y2hlZEl0b1JlYXNvbi5pZDtcbiAgICB9IGVsc2Uge1xuICAgICAgYWxlcnQoXG4gICAgICAgIFwiVW5hYmxlIHRvIGZpbmQgdGhlICdVbmFzc2lnbmVkJyBJVE8gcmVhc29uLiBZb3VyIGRhdGFiYXNlIHdhcyBub3QgcHJvcGVybHkgaW5pdGlhbGl6ZWQuIFBsZWFzZSBmaXggdGhpcyBiZWZvcmUgY29udGludWluZy5cIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIC8vU2VuZCBwb3N0IHJlcXVlc3QgdG8gY3JlYXRlIGEgbmV3IElUTyBzZWdtZW50IHdpdGggdW5hc3NpZ25lZCByZWFzb24uXG4gICAgICBhd2FpdCB0aGlzLnNlZ21lbnRJbnRlcmZhY2UucG9zdChcbiAgICAgICAgdGhpcy5sZWdTZWxlY3RIb29rLnZhbHVlLFxuICAgICAgICB1bmFzc2lnbmVkSXRvUmVhc29uSWQsXG4gICAgICAgIFNFR01FTlRfVFlQRV9JVE8sXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGwsXG4gICAgICAgIG51bGxcbiAgICAgICk7XG4gICAgICAvL1VwZGF0ZSB0YWJsZS5cbiAgICAgIHRoaXMudXBkYXRlU2VnbWVudHMoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZW5kU2VnbWVudEhhbmRsZXIoKSB7XG4gICAgLy9DaGVjayB0aGF0IGEgc2VnbWVudCBpcyBzZWxlY3RlZC5cbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3dJZCkge1xuICAgICAgYWxlcnQoXCJObyBzZWdtZW50IHNlbGVjdGVkIHRvIGVuZCFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAvL1NlbmQgcHV0IHJlcXVlc3QgdG8gY2xvc2UgdGhlIHNlZ21lbnQuXG4gICAgICBhd2FpdCB0aGlzLnNlZ21lbnRJbnRlcmZhY2UucHV0KHRoaXMuc2VsZWN0ZWRSb3dJZCwgXCJjbG9zZVwiKTtcbiAgICAgIC8vVXBkYXRlIHRhYmxlLlxuICAgICAgdGhpcy51cGRhdGVTZWdtZW50cygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBlZGl0U2VnbWVudEhhbmRsZXIoKSB7XG4gICAgLy9DaGVjayB0aGF0IGEgc2VnbWVudCBpcyBzZWxlY3RlZC5cbiAgICBpZiAoIXRoaXMuc2VsZWN0ZWRSb3dJZCkge1xuICAgICAgYWxlcnQoXCJQbGVhc2Ugc2VsZWN0IGEgc2VnbWVudCB0byBlZGl0LlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIC8vRmV0Y2ggaXRvIHJlYXNvbiBkYXRhIGZyb20gc2VydmVyIGlmIG5lZWRlZC5cbiAgICAgIGlmICghdGhpcy5pdG9SZWFzb25MaXN0IHx8IHRoaXMuaXRvUmVhc29uTGlzdC5sZW5ndGggPT0gMCkge1xuICAgICAgICB0aGlzLml0b1JlYXNvbkxpc3QgPSBhd2FpdCB0aGlzLml0b1JlYXNvbkludGVyZmFjZS5nZXQoKTtcbiAgICAgIH1cbiAgICAgIC8vRmluZCB0aGUgc2VsZWN0ZWQgc2VnbWVudCBlbnRyeS5cbiAgICAgIGNvbnN0IHNlbGVjdGVkU2VnbWVudCA9IHRoaXMuc2VnbWVudExpc3QuZmluZChcbiAgICAgICAgKHNlZ21lbnQpID0+IHNlZ21lbnQuaWQgPT0gdGhpcy5zZWxlY3RlZFJvd0lkXG4gICAgICApO1xuICAgICAgLy9CdWlsZCB0aGUgc2VnbWVudCBlZGl0aW5nIG92ZXJsYXkuXG4gICAgICBjb25zdCBzZWdtZW50RWRpdCA9IG5ldyBTZWdtZW50RWRpdChcbiAgICAgICAgc2VsZWN0ZWRTZWdtZW50LFxuICAgICAgICB0aGlzLnNlZ21lbnRJbnRlcmZhY2UsXG4gICAgICAgIHRoaXMubm90ZUludGVyZmFjZSxcbiAgICAgICAgdGhpcy5pbWFnZUludGVyZmFjZSxcbiAgICAgICAgdGhpcy5pdG9SZWFzb25MaXN0LFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyXG4gICAgICApO1xuICAgICAgLy9EaXNwbGF5IHRoZSBvdmVybGF5LlxuICAgICAgY29uc3Qgc2VnbWVudE1vZGFsID0gbmV3IE1vZGFsKFxuICAgICAgICBzZWdtZW50RWRpdCxcbiAgICAgICAgXCJZb3VyIGJyb3dzZXIgZG9lcyd0IHN1cHBvcnQgdGhpcyBmZWF0dXJlISAtIFBsZWFzZSBjaGFuZ2UgdG8gYSBtb3JlIG1vZGVybiBvbmUuXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVNlZ21lbnRzKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBzZWdtZW50TW9kYWwuc2hvdygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWplKTtcbiAgICB9XG4gIH1cblxuICBncHNNYXBDb25maWdIYW5kbGVyKCkge1xuICAgIC8vQnVpbGQgYSBtYXAgY29uZmlndXJhdGlvbiBvdmVybGF5LlxuICAgIGNvbnN0IG1hcENvbmZpZyA9IG5ldyBNYXBDb25maWcoKTtcbiAgICAvL0Rpc3BsYXkgdGhlIG92ZXJsYXkuXG4gICAgY29uc3QgdXNlck1vZGFsID0gbmV3IE1vZGFsKFxuICAgICAgbWFwQ29uZmlnLFxuICAgICAgXCJZb3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IHRoaXMgZmVhdHVyZSEgLSBQbGVhc2UgY2hhbmdlIHRvIGEgbW9yZSBtb2Rlcm4gb25lLlwiLFxuICAgICAgKCkgPT4ge1xuICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5jaGFuZ2VUaWxlTGF5ZXIoKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHVzZXJNb2RhbC5zaG93KCk7XG4gIH1cblxuICB0b2dnbGVHcHNNYXBIYW5kbGVyKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICB0aGlzLm1hcEludGVyZmFjZS5tYXBFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB0aGlzLm1hcEludGVyZmFjZS5sZWFmbGV0TWFwLmludmFsaWRhdGVTaXplKHRydWUpO1xuICAgICAgdGhpcy51cGRhdGVTZWdtZW50cygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvL0hpZGUgbWFwIGNvbnRhaW5lci5cbiAgICAgIHRoaXMubWFwSW50ZXJmYWNlLm1hcEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgLy9EZWxldGUgbWFwIHBvc2VzLlxuICAgICAgY29uc3QgbWFwTGF5ZXJzID0gdGhpcy5tYXBJbnRlcmZhY2UubWFwUG9pbnRzTGF5ZXJzO1xuICAgICAgZm9yIChsZXQgaWR4ID0gbWFwTGF5ZXJzLmxlbmd0aCAtIDE7IGlkeCA+PSAwOyBpZHgtLSkge1xuICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5sZWFmbGV0TWFwLnJlbW92ZUxheWVyKG1hcExheWVyc1tpZHhdLm1hcFBvc2VzUHRyKTtcbiAgICAgICAgbWFwTGF5ZXJzLnNwbGljZShpZHgsIDEpO1xuICAgICAgfVxuICAgICAgLy9SZW1vdmUgbG9jYWwgbWFwIGZyb20gR1BTIG1hcC5cbiAgICAgIHRoaXMubWFwSW50ZXJmYWNlLnJlbW92ZUxvY2FsTWFwKCk7XG4gICAgICB0aGlzLm1hcEludGVyZmFjZS5yZW1vdmVMYXllckNvbnRyb2woKTtcbiAgICB9XG4gIH1cblxuICB0b2dnbGVMb2NhbE1hcEhhbmRsZXIoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UubWFwRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgdGhpcy51cGRhdGVTZWdtZW50cygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvL0hpZGUgbG9jYWwgbWFwIGNvbnRhaW5lci5cbiAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UubWFwRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAvL0RlbGV0ZSBsb2NhbCBtYXAgcG9zZXMuXG4gICAgICBjb25zdCBsb2NhbE1hcExheWVycyA9IHRoaXMubG9jYWxNYXBJbnRlcmZhY2UubWFwUG9pbnRzTGF5ZXJzO1xuICAgICAgZm9yIChsZXQgaWR4ID0gbG9jYWxNYXBMYXllcnMubGVuZ3RoIC0gMTsgaWR4ID49IDA7IGlkeC0tKSB7XG4gICAgICAgIHRoaXMubG9jYWxNYXBJbnRlcmZhY2UucmVtb3ZlUG9zZXMobG9jYWxNYXBMYXllcnNbaWR4XS5zZWdtZW50SWQpO1xuICAgICAgICAvL1JlbW92ZSBsb2NhbCBtYXAgZnJvbSBHUFMgbWFwLlxuICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5yZW1vdmVMb2NhbE1hcCgpO1xuICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5yZW1vdmVMYXllckNvbnRyb2woKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/frames/SegmentDetail.js\n");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _utility_ServerInterface_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utility/ServerInterface.js */ \"./src/utility/ServerInterface.js\");\n/* harmony import */ var _frames_MainFrame_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./frames/MainFrame.js */ \"./src/frames/MainFrame.js\");\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n\nclass App {\n  static init() {\n    this.serverInterface = new _utility_ServerInterface_js__WEBPACK_IMPORTED_MODULE_0__[\"ServerInterface\"]();\n    this.mainFrame = new _frames_MainFrame_js__WEBPACK_IMPORTED_MODULE_1__[\"MainFrame\"](this.serverInterface);\n  }\n}\n\nApp.init();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuaW1wb3J0IHsgU2VydmVySW50ZXJmYWNlIH0gZnJvbSBcIi4vdXRpbGl0eS9TZXJ2ZXJJbnRlcmZhY2UuanNcIjtcbmltcG9ydCB7IE1haW5GcmFtZSB9IGZyb20gXCIuL2ZyYW1lcy9NYWluRnJhbWUuanNcIjtcblxuY2xhc3MgQXBwIHtcbiAgc3RhdGljIGluaXQoKSB7XG4gICAgdGhpcy5zZXJ2ZXJJbnRlcmZhY2UgPSBuZXcgU2VydmVySW50ZXJmYWNlKCk7XG4gICAgdGhpcy5tYWluRnJhbWUgPSBuZXcgTWFpbkZyYW1lKHRoaXMuc2VydmVySW50ZXJmYWNlKTtcbiAgfVxufVxuXG5BcHAuaW5pdCgpO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ }),

/***/ "./src/overlays/AutoRefreshConfig.js":
/*!*******************************************!*\
  !*** ./src/overlays/AutoRefreshConfig.js ***!
  \*******************************************/
/*! exports provided: AutoRefreshConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AutoRefreshConfig\", function() { return AutoRefreshConfig; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2022 - Fraunhofer FKIE\n */\n\n//Structure and logic of the autoRefresh config UI.\nclass AutoRefreshConfig {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor() {\n    //Import and build autoRefresh config node.\n    const templateEl = document.getElementById(\"auto-refresh-config-template\");\n    this.element = document.importNode(templateEl.content, true);\n    //Get html hooks.\n    const autoRefreshTimer = this.element.getElementById(\"auto-refresh-timer\");\n    //Fill input fields with current data.\n    const autoRefreshData = JSON.parse(\n      localStorage.getItem(\"fttAutoRefreshData\")\n    );\n    if (autoRefreshData) {\n      autoRefreshTimer.value = autoRefreshData.timer;\n    } else {\n      alert(\"No autoRefresh configuration data in local storage.\");\n    }\n    //Set change event listeners.\n    autoRefreshTimer.addEventListener(\n      \"input\",\n      this.dataChangedHandler.bind(this)\n    );\n    //Register update button handler.\n    this.element\n      .querySelector(\"form button:first-of-type\")\n      .addEventListener(\"click\", this.updateDataBtnHandler.bind(this));\n    //Register reset button handler.\n    this.element\n      .querySelector(\"form button:last-of-type\")\n      .addEventListener(\"click\", this.resetDataBtnHandler.bind(this));\n  }\n\n  dataChangedHandler() {\n    //Activate update button.\n    this.element.querySelector(\"form button\").disabled = false;\n  }\n\n  async updateDataBtnHandler(event) {\n    event.preventDefault();\n    //Get data to update.\n    let autoRefreshData = {};\n    autoRefreshData.timer = parseInt(\n      document.getElementById(\"auto-refresh-timer\").value\n    );\n    //Store data.\n    localStorage.setItem(\"fttAutoRefreshData\", JSON.stringify(autoRefreshData));\n    //Disable update button.\n    this.element.querySelector(\"form button\").disabled = true;\n  }\n\n  async resetDataBtnHandler(event) {\n    event.preventDefault();\n    //Create default data object.\n    const autoRefreshData = {\n      timer: 2000,\n    };\n    //Fill input fields with current data\n    document.getElementById(\"auto-refresh-timer\").value = autoRefreshData.timer;\n    //Store data.\n    localStorage.setItem(\"fttAutoRefreshData\", JSON.stringify(autoRefreshData));\n    //Disable update button.\n    this.element.querySelector(\"form button\").disabled = true;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvQXV0b1JlZnJlc2hDb25maWcuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcmxheXMvQXV0b1JlZnJlc2hDb25maWcuanM/OGUyNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIyIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9TdHJ1Y3R1cmUgYW5kIGxvZ2ljIG9mIHRoZSBhdXRvUmVmcmVzaCBjb25maWcgVUkuXG5leHBvcnQgY2xhc3MgQXV0b1JlZnJlc2hDb25maWcge1xuICAvL1RoaXMgY2xhc3MgaXMgYmFzZWQgb24gYSB0ZW1wbGF0ZSB0aGF0IGl0IGxhdGVyIGdvaW5nIHRvIGJlIGFkZGVkIHRvIGFub3RoZXIgRE9NIE5vZGUuXG4gIC8vVGhlcmVmb3JlLCBubyBET00gcmVmZXJlbmNlcyBhcmUga2VwdCBhcyBwcm9wZXJ0aWVzLlxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvL0ltcG9ydCBhbmQgYnVpbGQgYXV0b1JlZnJlc2ggY29uZmlnIG5vZGUuXG4gICAgY29uc3QgdGVtcGxhdGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYXV0by1yZWZyZXNoLWNvbmZpZy10ZW1wbGF0ZVwiKTtcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRlbXBsYXRlRWwuY29udGVudCwgdHJ1ZSk7XG4gICAgLy9HZXQgaHRtbCBob29rcy5cbiAgICBjb25zdCBhdXRvUmVmcmVzaFRpbWVyID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwiYXV0by1yZWZyZXNoLXRpbWVyXCIpO1xuICAgIC8vRmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBjdXJyZW50IGRhdGEuXG4gICAgY29uc3QgYXV0b1JlZnJlc2hEYXRhID0gSlNPTi5wYXJzZShcbiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZnR0QXV0b1JlZnJlc2hEYXRhXCIpXG4gICAgKTtcbiAgICBpZiAoYXV0b1JlZnJlc2hEYXRhKSB7XG4gICAgICBhdXRvUmVmcmVzaFRpbWVyLnZhbHVlID0gYXV0b1JlZnJlc2hEYXRhLnRpbWVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbGVydChcIk5vIGF1dG9SZWZyZXNoIGNvbmZpZ3VyYXRpb24gZGF0YSBpbiBsb2NhbCBzdG9yYWdlLlwiKTtcbiAgICB9XG4gICAgLy9TZXQgY2hhbmdlIGV2ZW50IGxpc3RlbmVycy5cbiAgICBhdXRvUmVmcmVzaFRpbWVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLmRhdGFDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICAvL1JlZ2lzdGVyIHVwZGF0ZSBidXR0b24gaGFuZGxlci5cbiAgICB0aGlzLmVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b246Zmlyc3Qtb2YtdHlwZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnVwZGF0ZURhdGFCdG5IYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIC8vUmVnaXN0ZXIgcmVzZXQgYnV0dG9uIGhhbmRsZXIuXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uOmxhc3Qtb2YtdHlwZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnJlc2V0RGF0YUJ0bkhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH1cblxuICBkYXRhQ2hhbmdlZEhhbmRsZXIoKSB7XG4gICAgLy9BY3RpdmF0ZSB1cGRhdGUgYnV0dG9uLlxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIikuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZURhdGFCdG5IYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvL0dldCBkYXRhIHRvIHVwZGF0ZS5cbiAgICBsZXQgYXV0b1JlZnJlc2hEYXRhID0ge307XG4gICAgYXV0b1JlZnJlc2hEYXRhLnRpbWVyID0gcGFyc2VJbnQoXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1dG8tcmVmcmVzaC10aW1lclwiKS52YWx1ZVxuICAgICk7XG4gICAgLy9TdG9yZSBkYXRhLlxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZnR0QXV0b1JlZnJlc2hEYXRhXCIsIEpTT04uc3RyaW5naWZ5KGF1dG9SZWZyZXNoRGF0YSkpO1xuICAgIC8vRGlzYWJsZSB1cGRhdGUgYnV0dG9uLlxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIikuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgYXN5bmMgcmVzZXREYXRhQnRuSGFuZGxlcihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgLy9DcmVhdGUgZGVmYXVsdCBkYXRhIG9iamVjdC5cbiAgICBjb25zdCBhdXRvUmVmcmVzaERhdGEgPSB7XG4gICAgICB0aW1lcjogMjAwMCxcbiAgICB9O1xuICAgIC8vRmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBjdXJyZW50IGRhdGFcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1dG8tcmVmcmVzaC10aW1lclwiKS52YWx1ZSA9IGF1dG9SZWZyZXNoRGF0YS50aW1lcjtcbiAgICAvL1N0b3JlIGRhdGEuXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJmdHRBdXRvUmVmcmVzaERhdGFcIiwgSlNPTi5zdHJpbmdpZnkoYXV0b1JlZnJlc2hEYXRhKSk7XG4gICAgLy9EaXNhYmxlIHVwZGF0ZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/overlays/AutoRefreshConfig.js\n");

/***/ }),

/***/ "./src/overlays/LegEdit.js":
/*!*********************************!*\
  !*** ./src/overlays/LegEdit.js ***!
  \*********************************/
/*! exports provided: LegEdit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LegEdit\", function() { return LegEdit; });\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/* eslint-disable no-control-regex */\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n//Structure and logic of the leg edition UI.\nclass LegEdit {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor(leg, legInterface, weatherList, poseSourceList) {\n    //Set arguments as properties.\n    this.leg = leg;\n    this.legInterface = legInterface;\n    this.weatherList = weatherList;\n    this.poseSourceList = poseSourceList;\n    //Import and build leg edition node.\n    const templateEl = document.getElementById(\"edit-leg-template\");\n    this.element = document.importNode(templateEl.content, true);\n\n    //=============================== HEADER ===============================\n    //Set title, start and end time.\n    this.element.querySelector(\"header h2 span:last-of-type\").textContent =\n      leg.id;\n    this.element.querySelector(\n      \"header p:first-of-type span:last-of-type\"\n    ).textContent = new Date(leg.startTime * 1000).toISOString();\n    if (leg.endTime) {\n      this.element.querySelector(\n        \"header p:last-of-type span:last-of-type\"\n      ).textContent = new Date(leg.endTime * 1000).toISOString();\n    }\n\n    //============================ DATA SECTION ============================\n    //Reach to leg info data elements.\n    const weatherSelect = this.element.getElementById(\"weather\");\n    const defaultPoseSourceSelect = this.element.getElementById(\n      \"default-pose-source\"\n    );\n    const noteText = this.element.getElementById(\"leg-note\");\n    //Populate selects.\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      weatherSelect,\n      weatherList.map((entry) => entry.shortDescription)\n    );\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      defaultPoseSourceSelect,\n      poseSourceList.map((entry) => entry.shortDescription)\n    );\n    //Focus matching option on the selects with the properties in the leg object.\n    const matchedWeather = weatherList.find(\n      (entry) => entry.id == leg.weatherId\n    );\n    if (matchedWeather) {\n      weatherSelect.value = matchedWeather.shortDescription;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(weatherSelect);\n    }\n    const matchedPoseSource = poseSourceList.find(\n      (entry) => entry.id == leg.defaultPoseSourceId\n    );\n    if (matchedPoseSource) {\n      defaultPoseSourceSelect.value = matchedPoseSource.shortDescription;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(defaultPoseSourceSelect);\n    }\n    //Fill input fields with leg data.\n    noteText.value = leg.note;\n    //Set change event listeners.\n    weatherSelect.addEventListener(\n      \"change\",\n      this.legDataChangedHandler.bind(this)\n    );\n    defaultPoseSourceSelect.addEventListener(\n      \"change\",\n      this.legDataChangedHandler.bind(this)\n    );\n    noteText.addEventListener(\"input\", this.legDataChangedHandler.bind(this));\n    //Register update button handler.\n    this.element\n      .querySelector(\"form button\")\n      .addEventListener(\"click\", this.updateDataBtnHandler.bind(this));\n  }\n\n  legDataChangedHandler() {\n    //Activate update button.\n    this.element.querySelector(\"form button\").disabled = false;\n  }\n\n  async updateDataBtnHandler(event) {\n    event.preventDefault();\n    //Get data to update.\n    const weatherId = this.weatherList.find(\n      (entry) =>\n        entry.shortDescription == document.getElementById(\"weather\").value\n    ).id;\n    const defaultPoseSourceId = this.poseSourceList.find(\n      (entry) =>\n        entry.shortDescription ==\n        document.getElementById(\"default-pose-source\").value\n    ).id;\n    const note = document.getElementById(\"leg-note\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    //Send put request.\n    try {\n      await this.legInterface.put(\n        this.leg.id,\n        \"edit\",\n        weatherId,\n        defaultPoseSourceId,\n        note\n      );\n      this.element.querySelector(\"form button\").disabled = true;\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvTGVnRWRpdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9vdmVybGF5cy9MZWdFZGl0LmpzP2MwNDMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tY29udHJvbC1yZWdleCAqL1xuLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbmltcG9ydCB7IERPTUdlbmVyaWMgfSBmcm9tIFwiLi4vdXRpbGl0eS9ET01HZW5lcmljLmpzXCI7XG5cbi8vU3RydWN0dXJlIGFuZCBsb2dpYyBvZiB0aGUgbGVnIGVkaXRpb24gVUkuXG5leHBvcnQgY2xhc3MgTGVnRWRpdCB7XG4gIC8vVGhpcyBjbGFzcyBpcyBiYXNlZCBvbiBhIHRlbXBsYXRlIHRoYXQgaXQgbGF0ZXIgZ29pbmcgdG8gYmUgYWRkZWQgdG8gYW5vdGhlciBET00gTm9kZS5cbiAgLy9UaGVyZWZvcmUsIG5vIERPTSByZWZlcmVuY2VzIGFyZSBrZXB0IGFzIHByb3BlcnRpZXMuXG4gIGNvbnN0cnVjdG9yKGxlZywgbGVnSW50ZXJmYWNlLCB3ZWF0aGVyTGlzdCwgcG9zZVNvdXJjZUxpc3QpIHtcbiAgICAvL1NldCBhcmd1bWVudHMgYXMgcHJvcGVydGllcy5cbiAgICB0aGlzLmxlZyA9IGxlZztcbiAgICB0aGlzLmxlZ0ludGVyZmFjZSA9IGxlZ0ludGVyZmFjZTtcbiAgICB0aGlzLndlYXRoZXJMaXN0ID0gd2VhdGhlckxpc3Q7XG4gICAgdGhpcy5wb3NlU291cmNlTGlzdCA9IHBvc2VTb3VyY2VMaXN0O1xuICAgIC8vSW1wb3J0IGFuZCBidWlsZCBsZWcgZWRpdGlvbiBub2RlLlxuICAgIGNvbnN0IHRlbXBsYXRlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtbGVnLXRlbXBsYXRlXCIpO1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGVFbC5jb250ZW50LCB0cnVlKTtcblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBIRUFERVIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vU2V0IHRpdGxlLCBzdGFydCBhbmQgZW5kIHRpbWUuXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkZXIgaDIgc3BhbjpsYXN0LW9mLXR5cGVcIikudGV4dENvbnRlbnQgPVxuICAgICAgbGVnLmlkO1xuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCJoZWFkZXIgcDpmaXJzdC1vZi10eXBlIHNwYW46bGFzdC1vZi10eXBlXCJcbiAgICApLnRleHRDb250ZW50ID0gbmV3IERhdGUobGVnLnN0YXJ0VGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgaWYgKGxlZy5lbmRUaW1lKSB7XG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgXCJoZWFkZXIgcDpsYXN0LW9mLXR5cGUgc3BhbjpsYXN0LW9mLXR5cGVcIlxuICAgICAgKS50ZXh0Q29udGVudCA9IG5ldyBEYXRlKGxlZy5lbmRUaW1lICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT0gREFUQSBTRUNUSU9OID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvL1JlYWNoIHRvIGxlZyBpbmZvIGRhdGEgZWxlbWVudHMuXG4gICAgY29uc3Qgd2VhdGhlclNlbGVjdCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcIndlYXRoZXJcIik7XG4gICAgY29uc3QgZGVmYXVsdFBvc2VTb3VyY2VTZWxlY3QgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcImRlZmF1bHQtcG9zZS1zb3VyY2VcIlxuICAgICk7XG4gICAgY29uc3Qgbm90ZVRleHQgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsZWctbm90ZVwiKTtcbiAgICAvL1BvcHVsYXRlIHNlbGVjdHMuXG4gICAgRE9NR2VuZXJpYy5wb3B1bGF0ZVNlbGVjdChcbiAgICAgIHdlYXRoZXJTZWxlY3QsXG4gICAgICB3ZWF0aGVyTGlzdC5tYXAoKGVudHJ5KSA9PiBlbnRyeS5zaG9ydERlc2NyaXB0aW9uKVxuICAgICk7XG4gICAgRE9NR2VuZXJpYy5wb3B1bGF0ZVNlbGVjdChcbiAgICAgIGRlZmF1bHRQb3NlU291cmNlU2VsZWN0LFxuICAgICAgcG9zZVNvdXJjZUxpc3QubWFwKChlbnRyeSkgPT4gZW50cnkuc2hvcnREZXNjcmlwdGlvbilcbiAgICApO1xuICAgIC8vRm9jdXMgbWF0Y2hpbmcgb3B0aW9uIG9uIHRoZSBzZWxlY3RzIHdpdGggdGhlIHByb3BlcnRpZXMgaW4gdGhlIGxlZyBvYmplY3QuXG4gICAgY29uc3QgbWF0Y2hlZFdlYXRoZXIgPSB3ZWF0aGVyTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSBsZWcud2VhdGhlcklkXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlZFdlYXRoZXIpIHtcbiAgICAgIHdlYXRoZXJTZWxlY3QudmFsdWUgPSBtYXRjaGVkV2VhdGhlci5zaG9ydERlc2NyaXB0aW9uO1xuICAgICAgRE9NR2VuZXJpYy5yZW1vdmVGaXJzdEVtcHR5T3B0aW9uKHdlYXRoZXJTZWxlY3QpO1xuICAgIH1cbiAgICBjb25zdCBtYXRjaGVkUG9zZVNvdXJjZSA9IHBvc2VTb3VyY2VMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IGxlZy5kZWZhdWx0UG9zZVNvdXJjZUlkXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlZFBvc2VTb3VyY2UpIHtcbiAgICAgIGRlZmF1bHRQb3NlU291cmNlU2VsZWN0LnZhbHVlID0gbWF0Y2hlZFBvc2VTb3VyY2Uuc2hvcnREZXNjcmlwdGlvbjtcbiAgICAgIERPTUdlbmVyaWMucmVtb3ZlRmlyc3RFbXB0eU9wdGlvbihkZWZhdWx0UG9zZVNvdXJjZVNlbGVjdCk7XG4gICAgfVxuICAgIC8vRmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBsZWcgZGF0YS5cbiAgICBub3RlVGV4dC52YWx1ZSA9IGxlZy5ub3RlO1xuICAgIC8vU2V0IGNoYW5nZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgd2VhdGhlclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjaGFuZ2VcIixcbiAgICAgIHRoaXMubGVnRGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIGRlZmF1bHRQb3NlU291cmNlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNoYW5nZVwiLFxuICAgICAgdGhpcy5sZWdEYXRhQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgbm90ZVRleHQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMubGVnRGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIC8vUmVnaXN0ZXIgdXBkYXRlIGJ1dHRvbiBoYW5kbGVyLlxuICAgIHRoaXMuZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnVwZGF0ZURhdGFCdG5IYW5kbGVyLmJpbmQodGhpcykpO1xuICB9XG5cbiAgbGVnRGF0YUNoYW5nZWRIYW5kbGVyKCkge1xuICAgIC8vQWN0aXZhdGUgdXBkYXRlIGJ1dHRvbi5cbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uXCIpLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBhc3luYyB1cGRhdGVEYXRhQnRuSGFuZGxlcihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgLy9HZXQgZGF0YSB0byB1cGRhdGUuXG4gICAgY29uc3Qgd2VhdGhlcklkID0gdGhpcy53ZWF0aGVyTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PlxuICAgICAgICBlbnRyeS5zaG9ydERlc2NyaXB0aW9uID09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwid2VhdGhlclwiKS52YWx1ZVxuICAgICkuaWQ7XG4gICAgY29uc3QgZGVmYXVsdFBvc2VTb3VyY2VJZCA9IHRoaXMucG9zZVNvdXJjZUxpc3QuZmluZChcbiAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgZW50cnkuc2hvcnREZXNjcmlwdGlvbiA9PVxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlZmF1bHQtcG9zZS1zb3VyY2VcIikudmFsdWVcbiAgICApLmlkO1xuICAgIGNvbnN0IG5vdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxlZy1ub3RlXCIpLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpO1xuICAgIC8vU2VuZCBwdXQgcmVxdWVzdC5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5sZWdJbnRlcmZhY2UucHV0KFxuICAgICAgICB0aGlzLmxlZy5pZCxcbiAgICAgICAgXCJlZGl0XCIsXG4gICAgICAgIHdlYXRoZXJJZCxcbiAgICAgICAgZGVmYXVsdFBvc2VTb3VyY2VJZCxcbiAgICAgICAgbm90ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIikuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/overlays/LegEdit.js\n");

/***/ }),

/***/ "./src/overlays/MapConfig.js":
/*!***********************************!*\
  !*** ./src/overlays/MapConfig.js ***!
  \***********************************/
/*! exports provided: MapConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"MapConfig\", function() { return MapConfig; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2022 - Fraunhofer FKIE\n */\n\n//Structure and logic of the map config UI.\nclass MapConfig {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor() {\n    //Import and build map config node.\n    const templateEl = document.getElementById(\"map-config-template\");\n    this.element = document.importNode(templateEl.content, true);\n    //Get html hooks.\n    const mapUrl = this.element.getElementById(\"map-url\");\n    const mapMinZoom = this.element.getElementById(\"map-min-zoom\");\n    const mapMaxZoom = this.element.getElementById(\"map-max-zoom\");\n    //Fill input fields with current data.\n    const mapData = JSON.parse(localStorage.getItem(\"fttTileServerData\"));\n    if (mapData) {\n      mapUrl.value = mapData.url;\n      mapMinZoom.value = mapData.minZoom;\n      mapMaxZoom.value = mapData.maxZoom;\n    } else {\n      alert(\"No map configuration data in local storage.\");\n    }\n    //Set change event listeners.\n    mapUrl.addEventListener(\"input\", this.dataChangedHandler.bind(this));\n    mapMinZoom.addEventListener(\"input\", this.dataChangedHandler.bind(this));\n    mapMaxZoom.addEventListener(\"input\", this.dataChangedHandler.bind(this));\n    //Register update button handler.\n    this.element\n      .querySelector(\"form button:first-of-type\")\n      .addEventListener(\"click\", this.updateDataBtnHandler.bind(this));\n    //Register reset button handler.\n    this.element\n      .querySelector(\"form button:last-of-type\")\n      .addEventListener(\"click\", this.resetDataBtnHandler.bind(this));\n  }\n\n  dataChangedHandler() {\n    //Activate update button.\n    this.element.querySelector(\"form button\").disabled = false;\n  }\n\n  async updateDataBtnHandler(event) {\n    event.preventDefault();\n    //Get data to update.\n    let mapData = {};\n    mapData.url = document.getElementById(\"map-url\").value;\n    mapData.minZoom = document.getElementById(\"map-min-zoom\").value;\n    mapData.maxZoom = document.getElementById(\"map-max-zoom\").value;\n    //Store data.\n    localStorage.setItem(\"fttTileServerData\", JSON.stringify(mapData));\n    //Disable update button.\n    this.element.querySelector(\"form button\").disabled = true;\n  }\n\n  async resetDataBtnHandler(event) {\n    event.preventDefault();\n    //Create default data object.\n    const mapData = {\n      url: \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n      minZoom: 0,\n      maxZoom: 19,\n    };\n    //Fill input fields with current data\n    document.getElementById(\"map-url\").value = mapData.url;\n    document.getElementById(\"map-min-zoom\").value = mapData.minZoom;\n    document.getElementById(\"map-max-zoom\").value = mapData.maxZoom;\n    //Store data.\n    localStorage.setItem(\"fttTileServerData\", JSON.stringify(mapData));\n    //Disable update button.\n    this.element.querySelector(\"form button\").disabled = true;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvTWFwQ29uZmlnLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL292ZXJsYXlzL01hcENvbmZpZy5qcz83MDMyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjIgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG4vL1N0cnVjdHVyZSBhbmQgbG9naWMgb2YgdGhlIG1hcCBjb25maWcgVUkuXG5leHBvcnQgY2xhc3MgTWFwQ29uZmlnIHtcbiAgLy9UaGlzIGNsYXNzIGlzIGJhc2VkIG9uIGEgdGVtcGxhdGUgdGhhdCBpdCBsYXRlciBnb2luZyB0byBiZSBhZGRlZCB0byBhbm90aGVyIERPTSBOb2RlLlxuICAvL1RoZXJlZm9yZSwgbm8gRE9NIHJlZmVyZW5jZXMgYXJlIGtlcHQgYXMgcHJvcGVydGllcy5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy9JbXBvcnQgYW5kIGJ1aWxkIG1hcCBjb25maWcgbm9kZS5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtY29uZmlnLXRlbXBsYXRlXCIpO1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGVFbC5jb250ZW50LCB0cnVlKTtcbiAgICAvL0dldCBodG1sIGhvb2tzLlxuICAgIGNvbnN0IG1hcFVybCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC11cmxcIik7XG4gICAgY29uc3QgbWFwTWluWm9vbSA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC1taW4tem9vbVwiKTtcbiAgICBjb25zdCBtYXBNYXhab29tID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLW1heC16b29tXCIpO1xuICAgIC8vRmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBjdXJyZW50IGRhdGEuXG4gICAgY29uc3QgbWFwRGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmdHRUaWxlU2VydmVyRGF0YVwiKSk7XG4gICAgaWYgKG1hcERhdGEpIHtcbiAgICAgIG1hcFVybC52YWx1ZSA9IG1hcERhdGEudXJsO1xuICAgICAgbWFwTWluWm9vbS52YWx1ZSA9IG1hcERhdGEubWluWm9vbTtcbiAgICAgIG1hcE1heFpvb20udmFsdWUgPSBtYXBEYXRhLm1heFpvb207XG4gICAgfSBlbHNlIHtcbiAgICAgIGFsZXJ0KFwiTm8gbWFwIGNvbmZpZ3VyYXRpb24gZGF0YSBpbiBsb2NhbCBzdG9yYWdlLlwiKTtcbiAgICB9XG4gICAgLy9TZXQgY2hhbmdlIGV2ZW50IGxpc3RlbmVycy5cbiAgICBtYXBVcmwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuZGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIG1hcE1pblpvb20uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuZGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIG1hcE1heFpvb20uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuZGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIC8vUmVnaXN0ZXIgdXBkYXRlIGJ1dHRvbiBoYW5kbGVyLlxuICAgIHRoaXMuZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvbjpmaXJzdC1vZi10eXBlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMudXBkYXRlRGF0YUJ0bkhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgLy9SZWdpc3RlciByZXNldCBidXR0b24gaGFuZGxlci5cbiAgICB0aGlzLmVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b246bGFzdC1vZi10eXBlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucmVzZXREYXRhQnRuSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGRhdGFDaGFuZ2VkSGFuZGxlcigpIHtcbiAgICAvL0FjdGl2YXRlIHVwZGF0ZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRGF0YUJ0bkhhbmRsZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vR2V0IGRhdGEgdG8gdXBkYXRlLlxuICAgIGxldCBtYXBEYXRhID0ge307XG4gICAgbWFwRGF0YS51cmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1hcC11cmxcIikudmFsdWU7XG4gICAgbWFwRGF0YS5taW5ab29tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtbWluLXpvb21cIikudmFsdWU7XG4gICAgbWFwRGF0YS5tYXhab29tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXAtbWF4LXpvb21cIikudmFsdWU7XG4gICAgLy9TdG9yZSBkYXRhLlxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZnR0VGlsZVNlcnZlckRhdGFcIiwgSlNPTi5zdHJpbmdpZnkobWFwRGF0YSkpO1xuICAgIC8vRGlzYWJsZSB1cGRhdGUgYnV0dG9uLlxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIikuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgYXN5bmMgcmVzZXREYXRhQnRuSGFuZGxlcihldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgLy9DcmVhdGUgZGVmYXVsdCBkYXRhIG9iamVjdC5cbiAgICBjb25zdCBtYXBEYXRhID0ge1xuICAgICAgdXJsOiBcImh0dHBzOi8vYS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZ1wiLFxuICAgICAgbWluWm9vbTogMCxcbiAgICAgIG1heFpvb206IDE5LFxuICAgIH07XG4gICAgLy9GaWxsIGlucHV0IGZpZWxkcyB3aXRoIGN1cnJlbnQgZGF0YVxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLXVybFwiKS52YWx1ZSA9IG1hcERhdGEudXJsO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLW1pbi16b29tXCIpLnZhbHVlID0gbWFwRGF0YS5taW5ab29tO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFwLW1heC16b29tXCIpLnZhbHVlID0gbWFwRGF0YS5tYXhab29tO1xuICAgIC8vU3RvcmUgZGF0YS5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImZ0dFRpbGVTZXJ2ZXJEYXRhXCIsIEpTT04uc3RyaW5naWZ5KG1hcERhdGEpKTtcbiAgICAvL0Rpc2FibGUgdXBkYXRlIGJ1dHRvbi5cbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uXCIpLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/overlays/MapConfig.js\n");

/***/ }),

/***/ "./src/overlays/ReportDownload.js":
/*!****************************************!*\
  !*** ./src/overlays/ReportDownload.js ***!
  \****************************************/
/*! exports provided: ReportDownload */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ReportDownload\", function() { return ReportDownload; });\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/* eslint-disable no-control-regex */\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n//Structure and logic of the report download UI.\nclass ReportDownload {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor(serverInterface, testEventList) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    //Import and build leg edition node.\n    const templateEl = document.getElementById(\"report-download-template\");\n    this.element = document.importNode(templateEl.content, true);\n\n    //============================ DATA SECTION ============================\n    //Get html hooks.\n    const testEventSelect = this.element.getElementById(\"report-test-event-id\");\n    const form = this.element.querySelector(\"form\");\n    //Populate select.\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      testEventSelect,\n      testEventList\n        .filter((entry) => !!entry.endTime)\n        .map(\n          (entry) =>\n            entry.id +\n            \": \" +\n            new Date(entry.startTime * 1000).toISOString().split(\"T\")[0] +\n            \"-\" +\n            (entry.location || \"(no location)\")\n        )\n        .reverse()\n    );\n    //Register generate report button handler.\n    form\n      .querySelector(\"button\")\n      .addEventListener(\"click\", this.generateReportBtnHandler.bind(this));\n    //Register change handler for every select.\n    form.querySelectorAll(\"select\").forEach((select) => {\n      select.addEventListener(\"change\", this.formChangedHandler.bind(this));\n    });\n    //Register input handler for the complete form.\n    form.addEventListener(\"input\", this.formChangedHandler.bind(this));\n    //Register input handler for textareas to highlight when empty.\n    form.querySelectorAll(\"textarea\").forEach((textarea) => {\n      textarea.addEventListener(\"input\", this.checkTextareas.bind(this));\n    });\n    //Run the textarea check\n    this.checkTextareas();\n  }\n\n  checkTextareas() {\n    this.element.querySelectorAll(\"form textarea\").forEach((textarea) => {\n      if (textarea.value.match(/[^\\x00-\\x7F]/g)) {\n        textarea.classList.add(\"error\");\n      } else {\n        textarea.classList.remove(\"error\");\n      }\n    });\n  }\n\n  formChangedHandler() {\n    // Disable the get report button upon changes.\n    this.element.querySelector(\"form button:last-of-type\").disabled = true;\n    // Get the hook to the generate button\n    const generateBtn = this.element.querySelector(\"form button:first-of-type\");\n    // Check if all fields have values and update generate button status\n    if (\n      document.getElementById(\"report-tile-server\").value &&\n      document\n        .getElementById(\"report-zoom-level\")\n        .value.replace(/[^0-9]/g, \"\") &&\n      document\n        .getElementById(\"report-name\")\n        .value.replace(/[^\\x00-\\x7F]/g, \"\") &&\n      document\n        .getElementById(\"report-version\")\n        .value.replace(/[^\\x00-\\x7F]/g, \"\") &&\n      document.getElementById(\"report-test-event-id\").value &&\n      document\n        .getElementById(\"report-min-duration\")\n        .value.replace(/[^0-9.]/g, \"\") &&\n      document.getElementById(\"report-use-local-poses\").value &&\n      document\n        .getElementById(\"report-recipient-name\")\n        .value.replace(/[^\\x00-\\x7F]/g, \"\") &&\n      document\n        .getElementById(\"report-recipient-address\")\n        .value.replace(/[^\\x00-\\x7F]/g, \"\") &&\n      document\n        .getElementById(\"report-creator-name\")\n        .value.replace(/[^\\x00-\\x7F]/g, \"\") &&\n      document\n        .getElementById(\"report-creator-address\")\n        .value.replace(/[^\\x00-\\x7F]/g, \"\")\n    ) {\n      generateBtn.disabled = false;\n    } else {\n      generateBtn.disabled = true;\n    }\n  }\n\n  async generateReportBtnHandler(event) {\n    event.preventDefault();\n    // Get data to update.\n    const tileServer = document.getElementById(\"report-tile-server\").value;\n    const zoomLevel = document\n      .getElementById(\"report-zoom-level\")\n      .value.replace(/[^0-9]/g, \"\");\n    const name = document\n      .getElementById(\"report-name\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const version = document\n      .getElementById(\"report-version\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const testEventId = document\n      .getElementById(\"report-test-event-id\")\n      .value.split(\":\")[0];\n    const minDuration = document\n      .getElementById(\"report-min-duration\")\n      .value.replace(/[^0-9.]/g, \"\");\n    const useLocal = document.getElementById(\"report-use-local-poses\").value;\n    const recipientName = document\n      .getElementById(\"report-recipient-name\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const recipientAddress = document\n      .getElementById(\"report-recipient-address\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const creatorName = document\n      .getElementById(\"report-creator-name\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const creatorAddress = document\n      .getElementById(\"report-creator-address\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    // Add a loading animation.\n    const generateBtnLoadIcon = this.element.querySelector(\"form button:first-of-type i\");\n    generateBtnLoadIcon.style.display = \"block\";\n    // Send post request.\n    try {\n      const data = {\n        tile_server: tileServer,\n        zoom_level: zoomLevel,\n        report_name: name,\n        report_version: version,\n        test_event_id: testEventId,\n        min_duration: minDuration,\n        use_local_poses: useLocal,\n        recipient_name: recipientName,\n        recipient_address: recipientAddress,\n        creator_name: creatorName,\n        creator_address: creatorAddress,\n      };\n      await this.serverInterface.sendPostRequest(\"generate_report\", data);\n      this.element.querySelector(\"form button:last-of-type\").disabled = false;\n    } catch (error) {\n      alert(error.message);\n    }\n    // Remove the loading animation.\n    generateBtnLoadIcon.style.display = \"none\";\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvUmVwb3J0RG93bmxvYWQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcmxheXMvUmVwb3J0RG93bmxvYWQuanM/NDNmZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb250cm9sLXJlZ2V4ICovXG4vKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuaW1wb3J0IHsgRE9NR2VuZXJpYyB9IGZyb20gXCIuLi91dGlsaXR5L0RPTUdlbmVyaWMuanNcIjtcblxuLy9TdHJ1Y3R1cmUgYW5kIGxvZ2ljIG9mIHRoZSByZXBvcnQgZG93bmxvYWQgVUkuXG5leHBvcnQgY2xhc3MgUmVwb3J0RG93bmxvYWQge1xuICAvL1RoaXMgY2xhc3MgaXMgYmFzZWQgb24gYSB0ZW1wbGF0ZSB0aGF0IGl0IGxhdGVyIGdvaW5nIHRvIGJlIGFkZGVkIHRvIGFub3RoZXIgRE9NIE5vZGUuXG4gIC8vVGhlcmVmb3JlLCBubyBET00gcmVmZXJlbmNlcyBhcmUga2VwdCBhcyBwcm9wZXJ0aWVzLlxuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UsIHRlc3RFdmVudExpc3QpIHtcbiAgICAvL1NldCBhcmd1bWVudHMgYXMgcHJvcGVydGllcy5cbiAgICB0aGlzLnNlcnZlckludGVyZmFjZSA9IHNlcnZlckludGVyZmFjZTtcbiAgICAvL0ltcG9ydCBhbmQgYnVpbGQgbGVnIGVkaXRpb24gbm9kZS5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtZG93bmxvYWQtdGVtcGxhdGVcIik7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZUVsLmNvbnRlbnQsIHRydWUpO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09IERBVEEgU0VDVElPTiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy9HZXQgaHRtbCBob29rcy5cbiAgICBjb25zdCB0ZXN0RXZlbnRTZWxlY3QgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtdGVzdC1ldmVudC1pZFwiKTtcbiAgICBjb25zdCBmb3JtID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuICAgIC8vUG9wdWxhdGUgc2VsZWN0LlxuICAgIERPTUdlbmVyaWMucG9wdWxhdGVTZWxlY3QoXG4gICAgICB0ZXN0RXZlbnRTZWxlY3QsXG4gICAgICB0ZXN0RXZlbnRMaXN0XG4gICAgICAgIC5maWx0ZXIoKGVudHJ5KSA9PiAhIWVudHJ5LmVuZFRpbWUpXG4gICAgICAgIC5tYXAoXG4gICAgICAgICAgKGVudHJ5KSA9PlxuICAgICAgICAgICAgZW50cnkuaWQgK1xuICAgICAgICAgICAgXCI6IFwiICtcbiAgICAgICAgICAgIG5ldyBEYXRlKGVudHJ5LnN0YXJ0VGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdICtcbiAgICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgIChlbnRyeS5sb2NhdGlvbiB8fCBcIihubyBsb2NhdGlvbilcIilcbiAgICAgICAgKVxuICAgICAgICAucmV2ZXJzZSgpXG4gICAgKTtcbiAgICAvL1JlZ2lzdGVyIGdlbmVyYXRlIHJlcG9ydCBidXR0b24gaGFuZGxlci5cbiAgICBmb3JtXG4gICAgICAucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmdlbmVyYXRlUmVwb3J0QnRuSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAvL1JlZ2lzdGVyIGNoYW5nZSBoYW5kbGVyIGZvciBldmVyeSBzZWxlY3QuXG4gICAgZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwic2VsZWN0XCIpLmZvckVhY2goKHNlbGVjdCkgPT4ge1xuICAgICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5mb3JtQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgfSk7XG4gICAgLy9SZWdpc3RlciBpbnB1dCBoYW5kbGVyIGZvciB0aGUgY29tcGxldGUgZm9ybS5cbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0aGlzLmZvcm1DaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICAvL1JlZ2lzdGVyIGlucHV0IGhhbmRsZXIgZm9yIHRleHRhcmVhcyB0byBoaWdobGlnaHQgd2hlbiBlbXB0eS5cbiAgICBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZXh0YXJlYVwiKS5mb3JFYWNoKCh0ZXh0YXJlYSkgPT4ge1xuICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuY2hlY2tUZXh0YXJlYXMuYmluZCh0aGlzKSk7XG4gICAgfSk7XG4gICAgLy9SdW4gdGhlIHRleHRhcmVhIGNoZWNrXG4gICAgdGhpcy5jaGVja1RleHRhcmVhcygpO1xuICB9XG5cbiAgY2hlY2tUZXh0YXJlYXMoKSB7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJmb3JtIHRleHRhcmVhXCIpLmZvckVhY2goKHRleHRhcmVhKSA9PiB7XG4gICAgICBpZiAodGV4dGFyZWEudmFsdWUubWF0Y2goL1teXFx4MDAtXFx4N0ZdL2cpKSB7XG4gICAgICAgIHRleHRhcmVhLmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRleHRhcmVhLmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZvcm1DaGFuZ2VkSGFuZGxlcigpIHtcbiAgICAvLyBEaXNhYmxlIHRoZSBnZXQgcmVwb3J0IGJ1dHRvbiB1cG9uIGNoYW5nZXMuXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvbjpsYXN0LW9mLXR5cGVcIikuZGlzYWJsZWQgPSB0cnVlO1xuICAgIC8vIEdldCB0aGUgaG9vayB0byB0aGUgZ2VuZXJhdGUgYnV0dG9uXG4gICAgY29uc3QgZ2VuZXJhdGVCdG4gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uOmZpcnN0LW9mLXR5cGVcIik7XG4gICAgLy8gQ2hlY2sgaWYgYWxsIGZpZWxkcyBoYXZlIHZhbHVlcyBhbmQgdXBkYXRlIGdlbmVyYXRlIGJ1dHRvbiBzdGF0dXNcbiAgICBpZiAoXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlcG9ydC10aWxlLXNlcnZlclwiKS52YWx1ZSAmJlxuICAgICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LXpvb20tbGV2ZWxcIilcbiAgICAgICAgLnZhbHVlLnJlcGxhY2UoL1teMC05XS9nLCBcIlwiKSAmJlxuICAgICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LW5hbWVcIilcbiAgICAgICAgLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpICYmXG4gICAgICBkb2N1bWVudFxuICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtdmVyc2lvblwiKVxuICAgICAgICAudmFsdWUucmVwbGFjZSgvW15cXHgwMC1cXHg3Rl0vZywgXCJcIikgJiZcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LXRlc3QtZXZlbnQtaWRcIikudmFsdWUgJiZcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5nZXRFbGVtZW50QnlJZChcInJlcG9ydC1taW4tZHVyYXRpb25cIilcbiAgICAgICAgLnZhbHVlLnJlcGxhY2UoL1teMC05Ll0vZywgXCJcIikgJiZcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LXVzZS1sb2NhbC1wb3Nlc1wiKS52YWx1ZSAmJlxuICAgICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LXJlY2lwaWVudC1uYW1lXCIpXG4gICAgICAgIC52YWx1ZS5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKSAmJlxuICAgICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LXJlY2lwaWVudC1hZGRyZXNzXCIpXG4gICAgICAgIC52YWx1ZS5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKSAmJlxuICAgICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LWNyZWF0b3ItbmFtZVwiKVxuICAgICAgICAudmFsdWUucmVwbGFjZSgvW15cXHgwMC1cXHg3Rl0vZywgXCJcIikgJiZcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5nZXRFbGVtZW50QnlJZChcInJlcG9ydC1jcmVhdG9yLWFkZHJlc3NcIilcbiAgICAgICAgLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpXG4gICAgKSB7XG4gICAgICBnZW5lcmF0ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5lcmF0ZUJ0bi5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2VuZXJhdGVSZXBvcnRCdG5IYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyBHZXQgZGF0YSB0byB1cGRhdGUuXG4gICAgY29uc3QgdGlsZVNlcnZlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LXRpbGUtc2VydmVyXCIpLnZhbHVlO1xuICAgIGNvbnN0IHpvb21MZXZlbCA9IGRvY3VtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtem9vbS1sZXZlbFwiKVxuICAgICAgLnZhbHVlLnJlcGxhY2UoL1teMC05XS9nLCBcIlwiKTtcbiAgICBjb25zdCBuYW1lID0gZG9jdW1lbnRcbiAgICAgIC5nZXRFbGVtZW50QnlJZChcInJlcG9ydC1uYW1lXCIpXG4gICAgICAudmFsdWUucmVwbGFjZSgvW15cXHgwMC1cXHg3Rl0vZywgXCJcIik7XG4gICAgY29uc3QgdmVyc2lvbiA9IGRvY3VtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtdmVyc2lvblwiKVxuICAgICAgLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpO1xuICAgIGNvbnN0IHRlc3RFdmVudElkID0gZG9jdW1lbnRcbiAgICAgIC5nZXRFbGVtZW50QnlJZChcInJlcG9ydC10ZXN0LWV2ZW50LWlkXCIpXG4gICAgICAudmFsdWUuc3BsaXQoXCI6XCIpWzBdO1xuICAgIGNvbnN0IG1pbkR1cmF0aW9uID0gZG9jdW1lbnRcbiAgICAgIC5nZXRFbGVtZW50QnlJZChcInJlcG9ydC1taW4tZHVyYXRpb25cIilcbiAgICAgIC52YWx1ZS5yZXBsYWNlKC9bXjAtOS5dL2csIFwiXCIpO1xuICAgIGNvbnN0IHVzZUxvY2FsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtdXNlLWxvY2FsLXBvc2VzXCIpLnZhbHVlO1xuICAgIGNvbnN0IHJlY2lwaWVudE5hbWUgPSBkb2N1bWVudFxuICAgICAgLmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LXJlY2lwaWVudC1uYW1lXCIpXG4gICAgICAudmFsdWUucmVwbGFjZSgvW15cXHgwMC1cXHg3Rl0vZywgXCJcIik7XG4gICAgY29uc3QgcmVjaXBpZW50QWRkcmVzcyA9IGRvY3VtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtcmVjaXBpZW50LWFkZHJlc3NcIilcbiAgICAgIC52YWx1ZS5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKTtcbiAgICBjb25zdCBjcmVhdG9yTmFtZSA9IGRvY3VtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJyZXBvcnQtY3JlYXRvci1uYW1lXCIpXG4gICAgICAudmFsdWUucmVwbGFjZSgvW15cXHgwMC1cXHg3Rl0vZywgXCJcIik7XG4gICAgY29uc3QgY3JlYXRvckFkZHJlc3MgPSBkb2N1bWVudFxuICAgICAgLmdldEVsZW1lbnRCeUlkKFwicmVwb3J0LWNyZWF0b3ItYWRkcmVzc1wiKVxuICAgICAgLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpO1xuICAgIC8vIEFkZCBhIGxvYWRpbmcgYW5pbWF0aW9uLlxuICAgIGNvbnN0IGdlbmVyYXRlQnRuTG9hZEljb24gPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uOmZpcnN0LW9mLXR5cGUgaVwiKTtcbiAgICBnZW5lcmF0ZUJ0bkxvYWRJY29uLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgLy8gU2VuZCBwb3N0IHJlcXVlc3QuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgIHRpbGVfc2VydmVyOiB0aWxlU2VydmVyLFxuICAgICAgICB6b29tX2xldmVsOiB6b29tTGV2ZWwsXG4gICAgICAgIHJlcG9ydF9uYW1lOiBuYW1lLFxuICAgICAgICByZXBvcnRfdmVyc2lvbjogdmVyc2lvbixcbiAgICAgICAgdGVzdF9ldmVudF9pZDogdGVzdEV2ZW50SWQsXG4gICAgICAgIG1pbl9kdXJhdGlvbjogbWluRHVyYXRpb24sXG4gICAgICAgIHVzZV9sb2NhbF9wb3NlczogdXNlTG9jYWwsXG4gICAgICAgIHJlY2lwaWVudF9uYW1lOiByZWNpcGllbnROYW1lLFxuICAgICAgICByZWNpcGllbnRfYWRkcmVzczogcmVjaXBpZW50QWRkcmVzcyxcbiAgICAgICAgY3JlYXRvcl9uYW1lOiBjcmVhdG9yTmFtZSxcbiAgICAgICAgY3JlYXRvcl9hZGRyZXNzOiBjcmVhdG9yQWRkcmVzcyxcbiAgICAgIH07XG4gICAgICBhd2FpdCB0aGlzLnNlcnZlckludGVyZmFjZS5zZW5kUG9zdFJlcXVlc3QoXCJnZW5lcmF0ZV9yZXBvcnRcIiwgZGF0YSk7XG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uOmxhc3Qtb2YtdHlwZVwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBsb2FkaW5nIGFuaW1hdGlvbi5cbiAgICBnZW5lcmF0ZUJ0bkxvYWRJY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/overlays/ReportDownload.js\n");

/***/ }),

/***/ "./src/overlays/RosConfig.js":
/*!***********************************!*\
  !*** ./src/overlays/RosConfig.js ***!
  \***********************************/
/*! exports provided: RosConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RosConfig\", function() { return RosConfig; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2022 - Fraunhofer FKIE\n */\n\n//Structure and logic of the ros config UI.\nclass RosConfig {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor() {\n    //Import and build ros config node.\n    const templateEl = document.getElementById(\"ros-config-template\");\n    this.element = document.importNode(templateEl.content, true);\n    //Get html hooks.\n    const rosUrl = this.element.getElementById(\"ros-url\");\n    //Fill input fields with current data.\n    const rosData = JSON.parse(localStorage.getItem(\"fttRosData\"));\n    if (rosData) {\n      rosUrl.value = rosData.url;\n    } else {\n      //No config found. Use default\n      rosUrl.value = `ws://${location.hostname}:9090`;\n    }\n    //Set change event listeners.\n    rosUrl.addEventListener(\"input\", this.dataChangedHandler.bind(this));\n    //Register update button handler.\n    this.element\n      .querySelector(\"form button:first-of-type\")\n      .addEventListener(\"click\", this.updateDataBtnHandler.bind(this));\n    //Register reset button handler.\n    this.element\n      .querySelector(\"form button:last-of-type\")\n      .addEventListener(\"click\", this.resetDataBtnHandler.bind(this));\n  }\n\n  dataChangedHandler() {\n    //Activate update button.\n    this.element.querySelector(\"form button\").disabled = false;\n  }\n\n  async updateDataBtnHandler(event) {\n    event.preventDefault();\n    //Get data to update.\n    let rosData = {};\n    rosData.url = document.getElementById(\"ros-url\").value;\n    //Store data.\n    localStorage.setItem(\"fttRosData\", JSON.stringify(rosData));\n    //Disable update button.\n    this.element.querySelector(\"form button\").disabled = true;\n  }\n\n  async resetDataBtnHandler(event) {\n    event.preventDefault();\n    //Fill input fields with default data\n    document.getElementById(\"ros-url\").value = `ws://${location.hostname}:9090`;\n    //Remove data from storage.\n    localStorage.removeItem(\"fttRosData\");\n    //Disable update button.\n    this.element.querySelector(\"form button\").disabled = true;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvUm9zQ29uZmlnLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL292ZXJsYXlzL1Jvc0NvbmZpZy5qcz8zMzZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjIgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG4vL1N0cnVjdHVyZSBhbmQgbG9naWMgb2YgdGhlIHJvcyBjb25maWcgVUkuXG5leHBvcnQgY2xhc3MgUm9zQ29uZmlnIHtcbiAgLy9UaGlzIGNsYXNzIGlzIGJhc2VkIG9uIGEgdGVtcGxhdGUgdGhhdCBpdCBsYXRlciBnb2luZyB0byBiZSBhZGRlZCB0byBhbm90aGVyIERPTSBOb2RlLlxuICAvL1RoZXJlZm9yZSwgbm8gRE9NIHJlZmVyZW5jZXMgYXJlIGtlcHQgYXMgcHJvcGVydGllcy5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy9JbXBvcnQgYW5kIGJ1aWxkIHJvcyBjb25maWcgbm9kZS5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb3MtY29uZmlnLXRlbXBsYXRlXCIpO1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGVFbC5jb250ZW50LCB0cnVlKTtcbiAgICAvL0dldCBodG1sIGhvb2tzLlxuICAgIGNvbnN0IHJvc1VybCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcInJvcy11cmxcIik7XG4gICAgLy9GaWxsIGlucHV0IGZpZWxkcyB3aXRoIGN1cnJlbnQgZGF0YS5cbiAgICBjb25zdCByb3NEYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZ0dFJvc0RhdGFcIikpO1xuICAgIGlmIChyb3NEYXRhKSB7XG4gICAgICByb3NVcmwudmFsdWUgPSByb3NEYXRhLnVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9ObyBjb25maWcgZm91bmQuIFVzZSBkZWZhdWx0XG4gICAgICByb3NVcmwudmFsdWUgPSBgd3M6Ly8ke2xvY2F0aW9uLmhvc3RuYW1lfTo5MDkwYDtcbiAgICB9XG4gICAgLy9TZXQgY2hhbmdlIGV2ZW50IGxpc3RlbmVycy5cbiAgICByb3NVcmwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRoaXMuZGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIC8vUmVnaXN0ZXIgdXBkYXRlIGJ1dHRvbiBoYW5kbGVyLlxuICAgIHRoaXMuZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvbjpmaXJzdC1vZi10eXBlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMudXBkYXRlRGF0YUJ0bkhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgLy9SZWdpc3RlciByZXNldCBidXR0b24gaGFuZGxlci5cbiAgICB0aGlzLmVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b246bGFzdC1vZi10eXBlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucmVzZXREYXRhQnRuSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGRhdGFDaGFuZ2VkSGFuZGxlcigpIHtcbiAgICAvL0FjdGl2YXRlIHVwZGF0ZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRGF0YUJ0bkhhbmRsZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vR2V0IGRhdGEgdG8gdXBkYXRlLlxuICAgIGxldCByb3NEYXRhID0ge307XG4gICAgcm9zRGF0YS51cmwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJvcy11cmxcIikudmFsdWU7XG4gICAgLy9TdG9yZSBkYXRhLlxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZnR0Um9zRGF0YVwiLCBKU09OLnN0cmluZ2lmeShyb3NEYXRhKSk7XG4gICAgLy9EaXNhYmxlIHVwZGF0ZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBhc3luYyByZXNldERhdGFCdG5IYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvL0ZpbGwgaW5wdXQgZmllbGRzIHdpdGggZGVmYXVsdCBkYXRhXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb3MtdXJsXCIpLnZhbHVlID0gYHdzOi8vJHtsb2NhdGlvbi5ob3N0bmFtZX06OTA5MGA7XG4gICAgLy9SZW1vdmUgZGF0YSBmcm9tIHN0b3JhZ2UuXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJmdHRSb3NEYXRhXCIpO1xuICAgIC8vRGlzYWJsZSB1cGRhdGUgYnV0dG9uLlxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIikuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/overlays/RosConfig.js\n");

/***/ }),

/***/ "./src/overlays/SegmentEdit.js":
/*!*************************************!*\
  !*** ./src/overlays/SegmentEdit.js ***!
  \*************************************/
/*! exports provided: SegmentEdit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SegmentEdit\", function() { return SegmentEdit; });\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/* eslint-disable no-control-regex */\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n//Structure and logic of the segment edition UI.\nclass SegmentEdit {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor(\n    segment,\n    segmentInterface,\n    noteInterface,\n    imageInterface,\n    itoReasonList,\n    currentUser\n  ) {\n    //Set arguments as properties.\n    this.segment = segment;\n    this.segmentInterface = segmentInterface;\n    this.noteInterface = noteInterface;\n    this.imageInterface = imageInterface;\n    this.itoReasonList = itoReasonList;\n    this.currentUser = currentUser;\n    //Import and build segment edition node.\n    const templateEl = document.getElementById(\"edit-segment-template\");\n    this.element = document.importNode(templateEl.content, true);\n\n    //=============================== HEADER ===============================\n    //Set title, start and end time.\n    this.element.querySelector(\"header h2 span:last-of-type\").textContent =\n      segment.id;\n    this.element.querySelector(\n      \"header p:first-of-type span:last-of-type\"\n    ).textContent = new Date(segment.startTime * 1000).toISOString();\n    if (segment.endTime) {\n      this.element.querySelector(\n        \"header p:last-of-type span:last-of-type\"\n      ).textContent = new Date(segment.endTime * 1000).toISOString();\n    }\n\n    //======================== SEGMENT DATA SECTION ========================\n    //Reach to segment info data elements.\n    const itoReasonsSelect = this.element.getElementById(\"ito-reason\");\n    const obstacleInput = this.element.getElementById(\"obstacle\");\n    const lightingInput = this.element.getElementById(\"lighting\");\n    const slopeInput = this.element.getElementById(\"slope\");\n    //Populate ito reason select.\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      itoReasonsSelect,\n      itoReasonList.map((entry) => entry.shortDescription)\n    );\n    //Focus matching option in the select with the current segment ito reason.\n    const matchedItoReason = itoReasonList.find(\n      (entry) => entry.id == segment.itoReasonId\n    );\n    if (matchedItoReason) {\n      itoReasonsSelect.value = matchedItoReason.shortDescription;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(itoReasonsSelect);\n    }\n    //Fill input fields with segment data.\n    obstacleInput.value = segment.obstacle;\n    lightingInput.value = segment.lighting;\n    slopeInput.value = segment.slope;\n    //Block obstacle context input fields for non ITO segments.\n    if (segment.segmentType != \"ITO\") {\n      itoReasonsSelect.disabled = true;\n      obstacleInput.disabled = true;\n      lightingInput.disabled = true;\n      slopeInput.disabled = true;\n    }\n    //Set change event listeners.\n    itoReasonsSelect.addEventListener(\n      \"change\",\n      this.segmentDataChangedHandler.bind(this)\n    );\n    obstacleInput.addEventListener(\n      \"input\",\n      this.segmentDataChangedHandler.bind(this)\n    );\n    lightingInput.addEventListener(\n      \"input\",\n      this.segmentDataChangedHandler.bind(this)\n    );\n    slopeInput.addEventListener(\n      \"input\",\n      this.segmentDataChangedHandler.bind(this)\n    );\n    //Register update button handler.\n    this.element\n      .querySelector(\"form button\")\n      .addEventListener(\"click\", this.updateDataBtnHandler.bind(this));\n\n    //=========================== NOTES SECTION ============================\n    //Initialize variables.\n    this.noteList = null;\n    this.selectedNoteIdx = 0;\n    //Assign listener to changes in notes.\n    this.element\n      .getElementById(\"note-text\")\n      .addEventListener(\"keydown\", this.noteTextChangeHandler.bind(this));\n    //Assign listener to save button.\n    this.element\n      .getElementById(\"save-note-btn\")\n      .addEventListener(\"click\", this.saveNoteButtonHandler.bind(this));\n    //Assign listener to remove button.\n    this.element\n      .getElementById(\"remove-note-btn\")\n      .addEventListener(\"click\", this.removeNoteButtonHandler.bind(this));\n\n    //=========================== IMAGES SECTION ===========================\n    //Reach to image elements.\n    const imagesContainer = this.element.querySelector(\".current-images\");\n    //Initialize variables to hold images.\n    this.imageList = null;\n    this.newImage = null;\n    this.newImageName = null;\n    //Assign listeners to current images and upload image tabs.\n    this.element\n      .getElementById(\"current-images-tab\")\n      .addEventListener(\"click\", this.currentImagesTabClickHandler.bind(this));\n    this.element\n      .getElementById(\"upload-image-tab\")\n      .addEventListener(\"click\", this.uploadImageTabClickHandler.bind(this));\n    //Assign listener to the current images div.\n    imagesContainer.addEventListener(\n      \"focusin\",\n      this.imageFocusHandler.bind(this)\n    );\n    imagesContainer.addEventListener(\n      \"focusout\",\n      this.imageDefocusHandler.bind(this)\n    );\n    imagesContainer.addEventListener(\n      \"dblclick\",\n      this.imageDoubleClickHandler.bind(this)\n    );\n    //Assign listener to the upload image input field.\n    this.element\n      .getElementById(\"new-image\")\n      .addEventListener(\"change\", this.newImageInputHandler.bind(this));\n    //Assign listener to the submit image button.\n    this.element\n      .getElementById(\"submit-image-btn\")\n      .addEventListener(\"click\", this.submitImageBtnHandler.bind(this));\n\n    //================================ INIT ================================\n    //Call init function to execute async behavior.\n    this.init();\n  }\n\n  async init() {\n    //Get and render notes.\n    await this.renderNotes();\n    //Get and render images.\n    await this.renderImages();\n  }\n\n  segmentDataChangedHandler(event) {\n    //Prevent selection for AUTO segments.\n    if (this.segment.segmentType == \"AUTO\") {\n      event.target.value = \"\";\n      alert(\"Obstacle context data available only for ITO segments!\");\n      return;\n    }\n    //Check validity for all text inputs.\n    const invalid =\n      this.element.querySelector(\"#obstacle\").validity.patternMismatch ||\n      this.element.querySelector(\"#lighting\").validity.patternMismatch ||\n      this.element.querySelector(\"#slope\").validity.patternMismatch;\n    if (invalid) {\n      //Disable update button.\n      this.element.querySelector(\"form button\").disabled = true;\n      //Show info text.\n      this.element.querySelector(\".info-text\").style.display = \"inline\";\n    } else {\n      //Enable update button.\n      this.element.querySelector(\"form button\").disabled = false;\n      //Hide info text.\n      this.element.querySelector(\".info-text\").style.display = \"\";\n    }\n  }\n\n  async updateDataBtnHandler(event) {\n    event.preventDefault();\n    //Get parameters to update.\n    const itoReasonId = this.itoReasonList.find(\n      (entry) =>\n        entry.shortDescription == document.getElementById(\"ito-reason\").value\n    ).id;\n    const obstacle = document\n      .getElementById(\"obstacle\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const lighting = document\n      .getElementById(\"lighting\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const slope = document\n      .getElementById(\"slope\")\n      .value.replace(/[^\\x00-\\x7F]/g, \"\");\n    try {\n      //Send update request to server.\n      await this.segmentInterface.put(\n        this.segment.id,\n        \"edit\",\n        itoReasonId,\n        obstacle,\n        lighting,\n        slope\n      );\n      //Disable update button.\n      this.element.querySelector(\"form button\").disabled = true;\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async renderNotes() {\n    try {\n      //Get data from server.\n      this.noteList = await this.noteInterface.get(this.segment.id);\n      //Clear any previously created tabs.\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].clearChildren(this.element.querySelector(\".btn-tabs\"));\n      //Create a new tab for each note.\n      this.noteList.forEach((entry) => {\n        this.createNewNoteTab(\n          new Date(entry.secs * 1000).toString().substring(4, 10)\n        );\n      });\n      //Create tab for a potential new note.\n      this.createNewNoteTab(\"New Note\", \"\");\n      //Display the selected note (the first one by default).\n      this.element\n        .querySelector(\".btn-tabs\")\n        .children[this.selectedNoteIdx].click();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  createNewNoteTab(tabName) {\n    //Remove the new-note class from all existing tabs.\n    const tabs = this.element.querySelector(\".btn-tabs\");\n    Array.from(tabs.children).forEach((tab) => {\n      tab.classList.remove(\"new-note\");\n    });\n    //Create a new tab, assign it a name, and the new-note class\n    const newTab = document.createElement(\"button\");\n    newTab.textContent = tabName;\n    newTab.classList.add(\"new-note\");\n    //Attach the new tab to the html page\n    tabs.appendChild(newTab);\n    //Add event listener for the click on the tab\n    newTab.addEventListener(\"click\", this.noteTabClickHandler.bind(this));\n  }\n\n  noteTabClickHandler(event) {\n    //Remove the selected-tab class and any changes from all tabs.\n    const tabs = Array.from(this.element.querySelector(\".btn-tabs\").children);\n    tabs.forEach((tab) => {\n      tab.classList.remove(\"selected-tab\");\n      if (tab.textContent.slice(-1) == \"*\") {\n        tab.textContent = tab.textContent.slice(0, -1);\n      }\n      //Disable save button.\n      this.element.querySelector(\"#save-note-btn\").disabled = true;\n    });\n    //Add selected class to clicked tab.\n    event.target.classList.add(\"selected-tab\");\n    //Find and store index of selected tab.\n    this.selectedNoteIdx = tabs.indexOf(event.target);\n    //Get text area hook.\n    const textArea = this.element.querySelector(\"#note-text\");\n    if (this.selectedNoteIdx < this.noteList.length) {\n      //For existing notes:\n      //Write note in text area.\n      textArea.value = this.noteList[this.selectedNoteIdx].note;\n      //Enable the remove button.\n      this.element.querySelector(\"#remove-note-btn\").disabled = false;\n    } else {\n      //Clear text area.\n      textArea.value = \"\";\n      //Disable remove button for a new note.\n      this.element.querySelector(\"#remove-note-btn\").disabled = true;\n    }\n  }\n\n  noteTextChangeHandler() {\n    //If not already included, add * to tab name to reflect unsaved changes.\n    let selectedTab = this.element.querySelector(\".selected-tab\");\n    if (selectedTab.textContent.slice(-1) != \"*\") {\n      selectedTab.textContent += \"*\";\n    }\n    //Enable save button.\n    document.getElementById(\"save-note-btn\").disabled = false;\n  }\n\n  async saveNoteButtonHandler(event) {\n    event.preventDefault();\n    //Check if the current user is set.\n    if (!this.currentUser.id) {\n      alert(\"Please select a user to add or modify a note!\");\n      return;\n    }\n    //Reach to the text content.\n    const noteText = document.getElementById(\"note-text\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    try {\n      //Check if the note is being modified or created.\n      if (this.selectedNoteIdx < this.noteList.length) {\n        //Modified: update note.\n        await this.noteInterface.put(\n          this.noteList[this.selectedNoteIdx].id,\n          this.currentUser.id,\n          noteText\n        );\n      } else {\n        //Created: post note.\n        await this.noteInterface.post(\n          this.segment.id,\n          this.currentUser.id,\n          noteText\n        );\n      }\n      //Disable save button\n      event.target.disabled = true;\n      //Update UI.\n      await this.renderNotes();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async removeNoteButtonHandler() {\n    try {\n      //Delete selected note.\n      await this.noteInterface.delete(this.noteList[this.selectedNoteIdx].id);\n      //Update UI.\n      await this.renderNotes();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async renderImages() {\n    //Get images from server.\n    try {\n      this.imageList = await this.imageInterface.get(\n        this.segment.parentId || this.segment.id\n      );\n      //Select the container area and clear it.\n      const imagesContainer = this.element.querySelector(\".current-images\");\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].clearChildren(imagesContainer);\n      this.imageList.forEach((image) => {\n        //Create a focusable div for each image.\n        const imgDiv = document.createElement(\"div\");\n        imgDiv.tabIndex = 0;\n        //Append the image to the div.\n        _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].addImage(imgDiv, image.imageData, image.imageFilename);\n        //Append the div to the image area.\n        imagesContainer.appendChild(imgDiv);\n      });\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  async currentImagesTabClickHandler(event) {\n    //Return if the tab is already selected.\n    if (event.target.classList.contains(\"selected-tab\")) {\n      return;\n    }\n    //Swap the selected tab.\n    event.target.nextElementSibling.classList.remove(\"selected-tab\");\n    event.target.classList.add(\"selected-tab\");\n    //Swap display of div content.\n    this.element.querySelector(\".upload-image\").style.display = \"none\";\n    this.element.querySelector(\".current-images\").style.display = \"\";\n    //get and render images\n    this.renderImages();\n  }\n\n  uploadImageTabClickHandler(event) {\n    //Return if the tab is already selected.\n    if (event.target.classList.contains(\"selected-tab\")) {\n      return;\n    }\n    //Check if the current user is set.\n    if (!this.currentUser.id) {\n      alert(\"Please select a user to add an image!\");\n      return;\n    }\n    //Swap the selected tab.\n    event.target.previousElementSibling.classList.remove(\"selected-tab\");\n    event.target.classList.add(\"selected-tab\");\n    //Swap display of div content.\n    this.element.querySelector(\".current-images\").style.display = \"none\";\n    this.element.querySelector(\".upload-image\").style.display = \"block\";\n  }\n\n  async removeImageBtnClickHandler(event) {\n    //Find the selected image index.\n    const selectedImageIdx = Array.from(\n      this.element.querySelector(\".current-images\").children\n    ).indexOf(event.target.closest(\"div\"));\n    //Send the delete request.\n    try {\n      await this.imageInterface.delete(this.imageList[selectedImageIdx].id);\n      //Update images display.\n      this.renderImages();\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n\n  imageFocusHandler(event) {\n    //Create a remove bubble.\n    const removeImgBubble = _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].createMaterialIconsContainer(\n      \"span\",\n      \"remove-icon-container\",\n      [\"remove_circle_outline\"]\n    );\n    //Add an event listener to it.\n    removeImgBubble.addEventListener(\n      \"click\",\n      this.removeImageBtnClickHandler.bind(this)\n    );\n    //Append it to the image div container (event target).\n    event.target.appendChild(removeImgBubble);\n  }\n\n  imageDefocusHandler(event) {\n    //Delete the remove bubble (last child) from the image div container (event target).\n    event.target.lastElementChild.remove();\n  }\n\n  imageDoubleClickHandler(event) {\n    //Check if double click was on an image.\n    if (event.target.tagName.toLowerCase() === \"img\") {\n      //Open new tab with the image.\n      const newTabWindow = open(\"\");\n      newTabWindow.document.write(event.target.outerHTML);\n      newTabWindow.document.head.appendChild(\n        document.head.querySelector(\"meta\")\n      );\n      newTabWindow.document.head.appendChild(document.createElement(\"title\"));\n      newTabWindow.document.head.querySelector(\"title\").textContent =\n        event.target.alt;\n    }\n  }\n\n  newImageInputHandler(event) {\n    //Get image data\n    const imageData = event.target.files[0];\n    this.newImageName = imageData.name.replace(/[.][^.]+$/, \"\");\n    if (imageData) {\n      //Parse data as base64 with a FileReader instance.\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(imageData);\n      //Assign the parsed data to the newImage class property.\n      fileReader.addEventListener(\"load\", (e) => {\n        this.newImage = e.target.result;\n        this.newImage = this.newImage.substring(this.newImage.indexOf(\",\") + 1);\n      });\n      document.getElementById(\"submit-image-btn\").disabled = false;\n    }\n  }\n\n  async submitImageBtnHandler(event) {\n    event.preventDefault();\n    //If a new image is available, send it to the server.\n    if (this.newImage) {\n      try {\n        await this.imageInterface.post(\n          this.segment.parentId || this.segment.id,\n          this.newImageName,\n          this.newImage,\n          `Image uploaded by ${this.currentUser.name}`\n        );\n        //Reset the newImage property and disable the button.\n        this.newImage = null;\n        event.target.disabled = true;\n        //Change to the current images tab.\n        document.getElementById(\"current-images-tab\").click();\n      } catch (error) {\n        alert(error.message);\n      }\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvU2VnbWVudEVkaXQuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcmxheXMvU2VnbWVudEVkaXQuanM/OTBlNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb250cm9sLXJlZ2V4ICovXG4vKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuaW1wb3J0IHsgRE9NR2VuZXJpYyB9IGZyb20gXCIuLi91dGlsaXR5L0RPTUdlbmVyaWMuanNcIjtcblxuLy9TdHJ1Y3R1cmUgYW5kIGxvZ2ljIG9mIHRoZSBzZWdtZW50IGVkaXRpb24gVUkuXG5leHBvcnQgY2xhc3MgU2VnbWVudEVkaXQge1xuICAvL1RoaXMgY2xhc3MgaXMgYmFzZWQgb24gYSB0ZW1wbGF0ZSB0aGF0IGl0IGxhdGVyIGdvaW5nIHRvIGJlIGFkZGVkIHRvIGFub3RoZXIgRE9NIE5vZGUuXG4gIC8vVGhlcmVmb3JlLCBubyBET00gcmVmZXJlbmNlcyBhcmUga2VwdCBhcyBwcm9wZXJ0aWVzLlxuICBjb25zdHJ1Y3RvcihcbiAgICBzZWdtZW50LFxuICAgIHNlZ21lbnRJbnRlcmZhY2UsXG4gICAgbm90ZUludGVyZmFjZSxcbiAgICBpbWFnZUludGVyZmFjZSxcbiAgICBpdG9SZWFzb25MaXN0LFxuICAgIGN1cnJlbnRVc2VyXG4gICkge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMuc2VnbWVudCA9IHNlZ21lbnQ7XG4gICAgdGhpcy5zZWdtZW50SW50ZXJmYWNlID0gc2VnbWVudEludGVyZmFjZTtcbiAgICB0aGlzLm5vdGVJbnRlcmZhY2UgPSBub3RlSW50ZXJmYWNlO1xuICAgIHRoaXMuaW1hZ2VJbnRlcmZhY2UgPSBpbWFnZUludGVyZmFjZTtcbiAgICB0aGlzLml0b1JlYXNvbkxpc3QgPSBpdG9SZWFzb25MaXN0O1xuICAgIHRoaXMuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcbiAgICAvL0ltcG9ydCBhbmQgYnVpbGQgc2VnbWVudCBlZGl0aW9uIG5vZGUuXG4gICAgY29uc3QgdGVtcGxhdGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1zZWdtZW50LXRlbXBsYXRlXCIpO1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGVFbC5jb250ZW50LCB0cnVlKTtcblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBIRUFERVIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vU2V0IHRpdGxlLCBzdGFydCBhbmQgZW5kIHRpbWUuXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkZXIgaDIgc3BhbjpsYXN0LW9mLXR5cGVcIikudGV4dENvbnRlbnQgPVxuICAgICAgc2VnbWVudC5pZDtcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiaGVhZGVyIHA6Zmlyc3Qtb2YtdHlwZSBzcGFuOmxhc3Qtb2YtdHlwZVwiXG4gICAgKS50ZXh0Q29udGVudCA9IG5ldyBEYXRlKHNlZ21lbnQuc3RhcnRUaW1lICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICBpZiAoc2VnbWVudC5lbmRUaW1lKSB7XG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgXCJoZWFkZXIgcDpsYXN0LW9mLXR5cGUgc3BhbjpsYXN0LW9mLXR5cGVcIlxuICAgICAgKS50ZXh0Q29udGVudCA9IG5ldyBEYXRlKHNlZ21lbnQuZW5kVGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT0gU0VHTUVOVCBEQVRBIFNFQ1RJT04gPT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy9SZWFjaCB0byBzZWdtZW50IGluZm8gZGF0YSBlbGVtZW50cy5cbiAgICBjb25zdCBpdG9SZWFzb25zU2VsZWN0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwiaXRvLXJlYXNvblwiKTtcbiAgICBjb25zdCBvYnN0YWNsZUlucHV0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwib2JzdGFjbGVcIik7XG4gICAgY29uc3QgbGlnaHRpbmdJbnB1dCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcImxpZ2h0aW5nXCIpO1xuICAgIGNvbnN0IHNsb3BlSW5wdXQgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbG9wZVwiKTtcbiAgICAvL1BvcHVsYXRlIGl0byByZWFzb24gc2VsZWN0LlxuICAgIERPTUdlbmVyaWMucG9wdWxhdGVTZWxlY3QoXG4gICAgICBpdG9SZWFzb25zU2VsZWN0LFxuICAgICAgaXRvUmVhc29uTGlzdC5tYXAoKGVudHJ5KSA9PiBlbnRyeS5zaG9ydERlc2NyaXB0aW9uKVxuICAgICk7XG4gICAgLy9Gb2N1cyBtYXRjaGluZyBvcHRpb24gaW4gdGhlIHNlbGVjdCB3aXRoIHRoZSBjdXJyZW50IHNlZ21lbnQgaXRvIHJlYXNvbi5cbiAgICBjb25zdCBtYXRjaGVkSXRvUmVhc29uID0gaXRvUmVhc29uTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSBzZWdtZW50Lml0b1JlYXNvbklkXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlZEl0b1JlYXNvbikge1xuICAgICAgaXRvUmVhc29uc1NlbGVjdC52YWx1ZSA9IG1hdGNoZWRJdG9SZWFzb24uc2hvcnREZXNjcmlwdGlvbjtcbiAgICAgIERPTUdlbmVyaWMucmVtb3ZlRmlyc3RFbXB0eU9wdGlvbihpdG9SZWFzb25zU2VsZWN0KTtcbiAgICB9XG4gICAgLy9GaWxsIGlucHV0IGZpZWxkcyB3aXRoIHNlZ21lbnQgZGF0YS5cbiAgICBvYnN0YWNsZUlucHV0LnZhbHVlID0gc2VnbWVudC5vYnN0YWNsZTtcbiAgICBsaWdodGluZ0lucHV0LnZhbHVlID0gc2VnbWVudC5saWdodGluZztcbiAgICBzbG9wZUlucHV0LnZhbHVlID0gc2VnbWVudC5zbG9wZTtcbiAgICAvL0Jsb2NrIG9ic3RhY2xlIGNvbnRleHQgaW5wdXQgZmllbGRzIGZvciBub24gSVRPIHNlZ21lbnRzLlxuICAgIGlmIChzZWdtZW50LnNlZ21lbnRUeXBlICE9IFwiSVRPXCIpIHtcbiAgICAgIGl0b1JlYXNvbnNTZWxlY3QuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgb2JzdGFjbGVJbnB1dC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICBsaWdodGluZ0lucHV0LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHNsb3BlSW5wdXQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgICAvL1NldCBjaGFuZ2UgZXZlbnQgbGlzdGVuZXJzLlxuICAgIGl0b1JlYXNvbnNTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2hhbmdlXCIsXG4gICAgICB0aGlzLnNlZ21lbnREYXRhQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgb2JzdGFjbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJpbnB1dFwiLFxuICAgICAgdGhpcy5zZWdtZW50RGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIGxpZ2h0aW5nSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiaW5wdXRcIixcbiAgICAgIHRoaXMuc2VnbWVudERhdGFDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICBzbG9wZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLnNlZ21lbnREYXRhQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgLy9SZWdpc3RlciB1cGRhdGUgYnV0dG9uIGhhbmRsZXIuXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMudXBkYXRlRGF0YUJ0bkhhbmRsZXIuYmluZCh0aGlzKSk7XG5cbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PSBOT1RFUyBTRUNUSU9OID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvL0luaXRpYWxpemUgdmFyaWFibGVzLlxuICAgIHRoaXMubm90ZUxpc3QgPSBudWxsO1xuICAgIHRoaXMuc2VsZWN0ZWROb3RlSWR4ID0gMDtcbiAgICAvL0Fzc2lnbiBsaXN0ZW5lciB0byBjaGFuZ2VzIGluIG5vdGVzLlxuICAgIHRoaXMuZWxlbWVudFxuICAgICAgLmdldEVsZW1lbnRCeUlkKFwibm90ZS10ZXh0XCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5ub3RlVGV4dENoYW5nZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgLy9Bc3NpZ24gbGlzdGVuZXIgdG8gc2F2ZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJzYXZlLW5vdGUtYnRuXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc2F2ZU5vdGVCdXR0b25IYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIC8vQXNzaWduIGxpc3RlbmVyIHRvIHJlbW92ZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJyZW1vdmUtbm90ZS1idG5cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5yZW1vdmVOb3RlQnV0dG9uSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09IElNQUdFUyBTRUNUSU9OID09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vUmVhY2ggdG8gaW1hZ2UgZWxlbWVudHMuXG4gICAgY29uc3QgaW1hZ2VzQ29udGFpbmVyID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VycmVudC1pbWFnZXNcIik7XG4gICAgLy9Jbml0aWFsaXplIHZhcmlhYmxlcyB0byBob2xkIGltYWdlcy5cbiAgICB0aGlzLmltYWdlTGlzdCA9IG51bGw7XG4gICAgdGhpcy5uZXdJbWFnZSA9IG51bGw7XG4gICAgdGhpcy5uZXdJbWFnZU5hbWUgPSBudWxsO1xuICAgIC8vQXNzaWduIGxpc3RlbmVycyB0byBjdXJyZW50IGltYWdlcyBhbmQgdXBsb2FkIGltYWdlIHRhYnMuXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJjdXJyZW50LWltYWdlcy10YWJcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jdXJyZW50SW1hZ2VzVGFiQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuZWxlbWVudFxuICAgICAgLmdldEVsZW1lbnRCeUlkKFwidXBsb2FkLWltYWdlLXRhYlwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnVwbG9hZEltYWdlVGFiQ2xpY2tIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIC8vQXNzaWduIGxpc3RlbmVyIHRvIHRoZSBjdXJyZW50IGltYWdlcyBkaXYuXG4gICAgaW1hZ2VzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImZvY3VzaW5cIixcbiAgICAgIHRoaXMuaW1hZ2VGb2N1c0hhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgaW1hZ2VzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImZvY3Vzb3V0XCIsXG4gICAgICB0aGlzLmltYWdlRGVmb2N1c0hhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgaW1hZ2VzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImRibGNsaWNrXCIsXG4gICAgICB0aGlzLmltYWdlRG91YmxlQ2xpY2tIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIC8vQXNzaWduIGxpc3RlbmVyIHRvIHRoZSB1cGxvYWQgaW1hZ2UgaW5wdXQgZmllbGQuXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJuZXctaW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMubmV3SW1hZ2VJbnB1dEhhbmRsZXIuYmluZCh0aGlzKSk7XG4gICAgLy9Bc3NpZ24gbGlzdGVuZXIgdG8gdGhlIHN1Ym1pdCBpbWFnZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtaW1hZ2UtYnRuXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuc3VibWl0SW1hZ2VCdG5IYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSBJTklUID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy9DYWxsIGluaXQgZnVuY3Rpb24gdG8gZXhlY3V0ZSBhc3luYyBiZWhhdmlvci5cbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIGFzeW5jIGluaXQoKSB7XG4gICAgLy9HZXQgYW5kIHJlbmRlciBub3Rlcy5cbiAgICBhd2FpdCB0aGlzLnJlbmRlck5vdGVzKCk7XG4gICAgLy9HZXQgYW5kIHJlbmRlciBpbWFnZXMuXG4gICAgYXdhaXQgdGhpcy5yZW5kZXJJbWFnZXMoKTtcbiAgfVxuXG4gIHNlZ21lbnREYXRhQ2hhbmdlZEhhbmRsZXIoZXZlbnQpIHtcbiAgICAvL1ByZXZlbnQgc2VsZWN0aW9uIGZvciBBVVRPIHNlZ21lbnRzLlxuICAgIGlmICh0aGlzLnNlZ21lbnQuc2VnbWVudFR5cGUgPT0gXCJBVVRPXCIpIHtcbiAgICAgIGV2ZW50LnRhcmdldC52YWx1ZSA9IFwiXCI7XG4gICAgICBhbGVydChcIk9ic3RhY2xlIGNvbnRleHQgZGF0YSBhdmFpbGFibGUgb25seSBmb3IgSVRPIHNlZ21lbnRzIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9DaGVjayB2YWxpZGl0eSBmb3IgYWxsIHRleHQgaW5wdXRzLlxuICAgIGNvbnN0IGludmFsaWQgPVxuICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjb2JzdGFjbGVcIikudmFsaWRpdHkucGF0dGVybk1pc21hdGNoIHx8XG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNsaWdodGluZ1wiKS52YWxpZGl0eS5wYXR0ZXJuTWlzbWF0Y2ggfHxcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3Nsb3BlXCIpLnZhbGlkaXR5LnBhdHRlcm5NaXNtYXRjaDtcbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgLy9EaXNhYmxlIHVwZGF0ZSBidXR0b24uXG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uXCIpLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIC8vU2hvdyBpbmZvIHRleHQuXG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbmZvLXRleHRcIikuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vRW5hYmxlIHVwZGF0ZSBidXR0b24uXG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uXCIpLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAvL0hpZGUgaW5mbyB0ZXh0LlxuICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW5mby10ZXh0XCIpLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZURhdGFCdG5IYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvL0dldCBwYXJhbWV0ZXJzIHRvIHVwZGF0ZS5cbiAgICBjb25zdCBpdG9SZWFzb25JZCA9IHRoaXMuaXRvUmVhc29uTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PlxuICAgICAgICBlbnRyeS5zaG9ydERlc2NyaXB0aW9uID09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaXRvLXJlYXNvblwiKS52YWx1ZVxuICAgICkuaWQ7XG4gICAgY29uc3Qgb2JzdGFjbGUgPSBkb2N1bWVudFxuICAgICAgLmdldEVsZW1lbnRCeUlkKFwib2JzdGFjbGVcIilcbiAgICAgIC52YWx1ZS5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKTtcbiAgICBjb25zdCBsaWdodGluZyA9IGRvY3VtZW50XG4gICAgICAuZ2V0RWxlbWVudEJ5SWQoXCJsaWdodGluZ1wiKVxuICAgICAgLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpO1xuICAgIGNvbnN0IHNsb3BlID0gZG9jdW1lbnRcbiAgICAgIC5nZXRFbGVtZW50QnlJZChcInNsb3BlXCIpXG4gICAgICAudmFsdWUucmVwbGFjZSgvW15cXHgwMC1cXHg3Rl0vZywgXCJcIik7XG4gICAgdHJ5IHtcbiAgICAgIC8vU2VuZCB1cGRhdGUgcmVxdWVzdCB0byBzZXJ2ZXIuXG4gICAgICBhd2FpdCB0aGlzLnNlZ21lbnRJbnRlcmZhY2UucHV0KFxuICAgICAgICB0aGlzLnNlZ21lbnQuaWQsXG4gICAgICAgIFwiZWRpdFwiLFxuICAgICAgICBpdG9SZWFzb25JZCxcbiAgICAgICAgb2JzdGFjbGUsXG4gICAgICAgIGxpZ2h0aW5nLFxuICAgICAgICBzbG9wZVxuICAgICAgKTtcbiAgICAgIC8vRGlzYWJsZSB1cGRhdGUgYnV0dG9uLlxuICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKS5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbmRlck5vdGVzKCkge1xuICAgIHRyeSB7XG4gICAgICAvL0dldCBkYXRhIGZyb20gc2VydmVyLlxuICAgICAgdGhpcy5ub3RlTGlzdCA9IGF3YWl0IHRoaXMubm90ZUludGVyZmFjZS5nZXQodGhpcy5zZWdtZW50LmlkKTtcbiAgICAgIC8vQ2xlYXIgYW55IHByZXZpb3VzbHkgY3JlYXRlZCB0YWJzLlxuICAgICAgRE9NR2VuZXJpYy5jbGVhckNoaWxkcmVuKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bi10YWJzXCIpKTtcbiAgICAgIC8vQ3JlYXRlIGEgbmV3IHRhYiBmb3IgZWFjaCBub3RlLlxuICAgICAgdGhpcy5ub3RlTGlzdC5mb3JFYWNoKChlbnRyeSkgPT4ge1xuICAgICAgICB0aGlzLmNyZWF0ZU5ld05vdGVUYWIoXG4gICAgICAgICAgbmV3IERhdGUoZW50cnkuc2VjcyAqIDEwMDApLnRvU3RyaW5nKCkuc3Vic3RyaW5nKDQsIDEwKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgICAvL0NyZWF0ZSB0YWIgZm9yIGEgcG90ZW50aWFsIG5ldyBub3RlLlxuICAgICAgdGhpcy5jcmVhdGVOZXdOb3RlVGFiKFwiTmV3IE5vdGVcIiwgXCJcIik7XG4gICAgICAvL0Rpc3BsYXkgdGhlIHNlbGVjdGVkIG5vdGUgKHRoZSBmaXJzdCBvbmUgYnkgZGVmYXVsdCkuXG4gICAgICB0aGlzLmVsZW1lbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXRhYnNcIilcbiAgICAgICAgLmNoaWxkcmVuW3RoaXMuc2VsZWN0ZWROb3RlSWR4XS5jbGljaygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBjcmVhdGVOZXdOb3RlVGFiKHRhYk5hbWUpIHtcbiAgICAvL1JlbW92ZSB0aGUgbmV3LW5vdGUgY2xhc3MgZnJvbSBhbGwgZXhpc3RpbmcgdGFicy5cbiAgICBjb25zdCB0YWJzID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuLXRhYnNcIik7XG4gICAgQXJyYXkuZnJvbSh0YWJzLmNoaWxkcmVuKS5mb3JFYWNoKCh0YWIpID0+IHtcbiAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKFwibmV3LW5vdGVcIik7XG4gICAgfSk7XG4gICAgLy9DcmVhdGUgYSBuZXcgdGFiLCBhc3NpZ24gaXQgYSBuYW1lLCBhbmQgdGhlIG5ldy1ub3RlIGNsYXNzXG4gICAgY29uc3QgbmV3VGFiID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBuZXdUYWIudGV4dENvbnRlbnQgPSB0YWJOYW1lO1xuICAgIG5ld1RhYi5jbGFzc0xpc3QuYWRkKFwibmV3LW5vdGVcIik7XG4gICAgLy9BdHRhY2ggdGhlIG5ldyB0YWIgdG8gdGhlIGh0bWwgcGFnZVxuICAgIHRhYnMuYXBwZW5kQ2hpbGQobmV3VGFiKTtcbiAgICAvL0FkZCBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGNsaWNrIG9uIHRoZSB0YWJcbiAgICBuZXdUYWIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMubm90ZVRhYkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIG5vdGVUYWJDbGlja0hhbmRsZXIoZXZlbnQpIHtcbiAgICAvL1JlbW92ZSB0aGUgc2VsZWN0ZWQtdGFiIGNsYXNzIGFuZCBhbnkgY2hhbmdlcyBmcm9tIGFsbCB0YWJzLlxuICAgIGNvbnN0IHRhYnMgPSBBcnJheS5mcm9tKHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bi10YWJzXCIpLmNoaWxkcmVuKTtcbiAgICB0YWJzLmZvckVhY2goKHRhYikgPT4ge1xuICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoXCJzZWxlY3RlZC10YWJcIik7XG4gICAgICBpZiAodGFiLnRleHRDb250ZW50LnNsaWNlKC0xKSA9PSBcIipcIikge1xuICAgICAgICB0YWIudGV4dENvbnRlbnQgPSB0YWIudGV4dENvbnRlbnQuc2xpY2UoMCwgLTEpO1xuICAgICAgfVxuICAgICAgLy9EaXNhYmxlIHNhdmUgYnV0dG9uLlxuICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2F2ZS1ub3RlLWJ0blwiKS5kaXNhYmxlZCA9IHRydWU7XG4gICAgfSk7XG4gICAgLy9BZGQgc2VsZWN0ZWQgY2xhc3MgdG8gY2xpY2tlZCB0YWIuXG4gICAgZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZC10YWJcIik7XG4gICAgLy9GaW5kIGFuZCBzdG9yZSBpbmRleCBvZiBzZWxlY3RlZCB0YWIuXG4gICAgdGhpcy5zZWxlY3RlZE5vdGVJZHggPSB0YWJzLmluZGV4T2YoZXZlbnQudGFyZ2V0KTtcbiAgICAvL0dldCB0ZXh0IGFyZWEgaG9vay5cbiAgICBjb25zdCB0ZXh0QXJlYSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI25vdGUtdGV4dFwiKTtcbiAgICBpZiAodGhpcy5zZWxlY3RlZE5vdGVJZHggPCB0aGlzLm5vdGVMaXN0Lmxlbmd0aCkge1xuICAgICAgLy9Gb3IgZXhpc3Rpbmcgbm90ZXM6XG4gICAgICAvL1dyaXRlIG5vdGUgaW4gdGV4dCBhcmVhLlxuICAgICAgdGV4dEFyZWEudmFsdWUgPSB0aGlzLm5vdGVMaXN0W3RoaXMuc2VsZWN0ZWROb3RlSWR4XS5ub3RlO1xuICAgICAgLy9FbmFibGUgdGhlIHJlbW92ZSBidXR0b24uXG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNyZW1vdmUtbm90ZS1idG5cIikuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9DbGVhciB0ZXh0IGFyZWEuXG4gICAgICB0ZXh0QXJlYS52YWx1ZSA9IFwiXCI7XG4gICAgICAvL0Rpc2FibGUgcmVtb3ZlIGJ1dHRvbiBmb3IgYSBuZXcgbm90ZS5cbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3JlbW92ZS1ub3RlLWJ0blwiKS5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgbm90ZVRleHRDaGFuZ2VIYW5kbGVyKCkge1xuICAgIC8vSWYgbm90IGFscmVhZHkgaW5jbHVkZWQsIGFkZCAqIHRvIHRhYiBuYW1lIHRvIHJlZmxlY3QgdW5zYXZlZCBjaGFuZ2VzLlxuICAgIGxldCBzZWxlY3RlZFRhYiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkLXRhYlwiKTtcbiAgICBpZiAoc2VsZWN0ZWRUYWIudGV4dENvbnRlbnQuc2xpY2UoLTEpICE9IFwiKlwiKSB7XG4gICAgICBzZWxlY3RlZFRhYi50ZXh0Q29udGVudCArPSBcIipcIjtcbiAgICB9XG4gICAgLy9FbmFibGUgc2F2ZSBidXR0b24uXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYXZlLW5vdGUtYnRuXCIpLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICBhc3luYyBzYXZlTm90ZUJ1dHRvbkhhbmRsZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBpcyBzZXQuXG4gICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyLmlkKSB7XG4gICAgICBhbGVydChcIlBsZWFzZSBzZWxlY3QgYSB1c2VyIHRvIGFkZCBvciBtb2RpZnkgYSBub3RlIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9SZWFjaCB0byB0aGUgdGV4dCBjb250ZW50LlxuICAgIGNvbnN0IG5vdGVUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJub3RlLXRleHRcIikudmFsdWUucmVwbGFjZSgvW15cXHgwMC1cXHg3Rl0vZywgXCJcIik7XG4gICAgdHJ5IHtcbiAgICAgIC8vQ2hlY2sgaWYgdGhlIG5vdGUgaXMgYmVpbmcgbW9kaWZpZWQgb3IgY3JlYXRlZC5cbiAgICAgIGlmICh0aGlzLnNlbGVjdGVkTm90ZUlkeCA8IHRoaXMubm90ZUxpc3QubGVuZ3RoKSB7XG4gICAgICAgIC8vTW9kaWZpZWQ6IHVwZGF0ZSBub3RlLlxuICAgICAgICBhd2FpdCB0aGlzLm5vdGVJbnRlcmZhY2UucHV0KFxuICAgICAgICAgIHRoaXMubm90ZUxpc3RbdGhpcy5zZWxlY3RlZE5vdGVJZHhdLmlkLFxuICAgICAgICAgIHRoaXMuY3VycmVudFVzZXIuaWQsXG4gICAgICAgICAgbm90ZVRleHRcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vQ3JlYXRlZDogcG9zdCBub3RlLlxuICAgICAgICBhd2FpdCB0aGlzLm5vdGVJbnRlcmZhY2UucG9zdChcbiAgICAgICAgICB0aGlzLnNlZ21lbnQuaWQsXG4gICAgICAgICAgdGhpcy5jdXJyZW50VXNlci5pZCxcbiAgICAgICAgICBub3RlVGV4dFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgLy9EaXNhYmxlIHNhdmUgYnV0dG9uXG4gICAgICBldmVudC50YXJnZXQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgLy9VcGRhdGUgVUkuXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlck5vdGVzKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlbW92ZU5vdGVCdXR0b25IYW5kbGVyKCkge1xuICAgIHRyeSB7XG4gICAgICAvL0RlbGV0ZSBzZWxlY3RlZCBub3RlLlxuICAgICAgYXdhaXQgdGhpcy5ub3RlSW50ZXJmYWNlLmRlbGV0ZSh0aGlzLm5vdGVMaXN0W3RoaXMuc2VsZWN0ZWROb3RlSWR4XS5pZCk7XG4gICAgICAvL1VwZGF0ZSBVSS5cbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyTm90ZXMoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVuZGVySW1hZ2VzKCkge1xuICAgIC8vR2V0IGltYWdlcyBmcm9tIHNlcnZlci5cbiAgICB0cnkge1xuICAgICAgdGhpcy5pbWFnZUxpc3QgPSBhd2FpdCB0aGlzLmltYWdlSW50ZXJmYWNlLmdldChcbiAgICAgICAgdGhpcy5zZWdtZW50LnBhcmVudElkIHx8IHRoaXMuc2VnbWVudC5pZFxuICAgICAgKTtcbiAgICAgIC8vU2VsZWN0IHRoZSBjb250YWluZXIgYXJlYSBhbmQgY2xlYXIgaXQuXG4gICAgICBjb25zdCBpbWFnZXNDb250YWluZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50LWltYWdlc1wiKTtcbiAgICAgIERPTUdlbmVyaWMuY2xlYXJDaGlsZHJlbihpbWFnZXNDb250YWluZXIpO1xuICAgICAgdGhpcy5pbWFnZUxpc3QuZm9yRWFjaCgoaW1hZ2UpID0+IHtcbiAgICAgICAgLy9DcmVhdGUgYSBmb2N1c2FibGUgZGl2IGZvciBlYWNoIGltYWdlLlxuICAgICAgICBjb25zdCBpbWdEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBpbWdEaXYudGFiSW5kZXggPSAwO1xuICAgICAgICAvL0FwcGVuZCB0aGUgaW1hZ2UgdG8gdGhlIGRpdi5cbiAgICAgICAgRE9NR2VuZXJpYy5hZGRJbWFnZShpbWdEaXYsIGltYWdlLmltYWdlRGF0YSwgaW1hZ2UuaW1hZ2VGaWxlbmFtZSk7XG4gICAgICAgIC8vQXBwZW5kIHRoZSBkaXYgdG8gdGhlIGltYWdlIGFyZWEuXG4gICAgICAgIGltYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChpbWdEaXYpO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGFsZXJ0KGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGN1cnJlbnRJbWFnZXNUYWJDbGlja0hhbmRsZXIoZXZlbnQpIHtcbiAgICAvL1JldHVybiBpZiB0aGUgdGFiIGlzIGFscmVhZHkgc2VsZWN0ZWQuXG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJzZWxlY3RlZC10YWJcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9Td2FwIHRoZSBzZWxlY3RlZCB0YWIuXG4gICAgZXZlbnQudGFyZ2V0Lm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKFwic2VsZWN0ZWQtdGFiXCIpO1xuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWQtdGFiXCIpO1xuICAgIC8vU3dhcCBkaXNwbGF5IG9mIGRpdiBjb250ZW50LlxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnVwbG9hZC1pbWFnZVwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VycmVudC1pbWFnZXNcIikuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgLy9nZXQgYW5kIHJlbmRlciBpbWFnZXNcbiAgICB0aGlzLnJlbmRlckltYWdlcygpO1xuICB9XG5cbiAgdXBsb2FkSW1hZ2VUYWJDbGlja0hhbmRsZXIoZXZlbnQpIHtcbiAgICAvL1JldHVybiBpZiB0aGUgdGFiIGlzIGFscmVhZHkgc2VsZWN0ZWQuXG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJzZWxlY3RlZC10YWJcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9DaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGlzIHNldC5cbiAgICBpZiAoIXRoaXMuY3VycmVudFVzZXIuaWQpIHtcbiAgICAgIGFsZXJ0KFwiUGxlYXNlIHNlbGVjdCBhIHVzZXIgdG8gYWRkIGFuIGltYWdlIVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9Td2FwIHRoZSBzZWxlY3RlZCB0YWIuXG4gICAgZXZlbnQudGFyZ2V0LnByZXZpb3VzRWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LnJlbW92ZShcInNlbGVjdGVkLXRhYlwiKTtcbiAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmFkZChcInNlbGVjdGVkLXRhYlwiKTtcbiAgICAvL1N3YXAgZGlzcGxheSBvZiBkaXYgY29udGVudC5cbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50LWltYWdlc1wiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXBsb2FkLWltYWdlXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIH1cblxuICBhc3luYyByZW1vdmVJbWFnZUJ0bkNsaWNrSGFuZGxlcihldmVudCkge1xuICAgIC8vRmluZCB0aGUgc2VsZWN0ZWQgaW1hZ2UgaW5kZXguXG4gICAgY29uc3Qgc2VsZWN0ZWRJbWFnZUlkeCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50LWltYWdlc1wiKS5jaGlsZHJlblxuICAgICkuaW5kZXhPZihldmVudC50YXJnZXQuY2xvc2VzdChcImRpdlwiKSk7XG4gICAgLy9TZW5kIHRoZSBkZWxldGUgcmVxdWVzdC5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5pbWFnZUludGVyZmFjZS5kZWxldGUodGhpcy5pbWFnZUxpc3Rbc2VsZWN0ZWRJbWFnZUlkeF0uaWQpO1xuICAgICAgLy9VcGRhdGUgaW1hZ2VzIGRpc3BsYXkuXG4gICAgICB0aGlzLnJlbmRlckltYWdlcygpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBpbWFnZUZvY3VzSGFuZGxlcihldmVudCkge1xuICAgIC8vQ3JlYXRlIGEgcmVtb3ZlIGJ1YmJsZS5cbiAgICBjb25zdCByZW1vdmVJbWdCdWJibGUgPSBET01HZW5lcmljLmNyZWF0ZU1hdGVyaWFsSWNvbnNDb250YWluZXIoXG4gICAgICBcInNwYW5cIixcbiAgICAgIFwicmVtb3ZlLWljb24tY29udGFpbmVyXCIsXG4gICAgICBbXCJyZW1vdmVfY2lyY2xlX291dGxpbmVcIl1cbiAgICApO1xuICAgIC8vQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGl0LlxuICAgIHJlbW92ZUltZ0J1YmJsZS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjbGlja1wiLFxuICAgICAgdGhpcy5yZW1vdmVJbWFnZUJ0bkNsaWNrSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICAvL0FwcGVuZCBpdCB0byB0aGUgaW1hZ2UgZGl2IGNvbnRhaW5lciAoZXZlbnQgdGFyZ2V0KS5cbiAgICBldmVudC50YXJnZXQuYXBwZW5kQ2hpbGQocmVtb3ZlSW1nQnViYmxlKTtcbiAgfVxuXG4gIGltYWdlRGVmb2N1c0hhbmRsZXIoZXZlbnQpIHtcbiAgICAvL0RlbGV0ZSB0aGUgcmVtb3ZlIGJ1YmJsZSAobGFzdCBjaGlsZCkgZnJvbSB0aGUgaW1hZ2UgZGl2IGNvbnRhaW5lciAoZXZlbnQgdGFyZ2V0KS5cbiAgICBldmVudC50YXJnZXQubGFzdEVsZW1lbnRDaGlsZC5yZW1vdmUoKTtcbiAgfVxuXG4gIGltYWdlRG91YmxlQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgLy9DaGVjayBpZiBkb3VibGUgY2xpY2sgd2FzIG9uIGFuIGltYWdlLlxuICAgIGlmIChldmVudC50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImltZ1wiKSB7XG4gICAgICAvL09wZW4gbmV3IHRhYiB3aXRoIHRoZSBpbWFnZS5cbiAgICAgIGNvbnN0IG5ld1RhYldpbmRvdyA9IG9wZW4oXCJcIik7XG4gICAgICBuZXdUYWJXaW5kb3cuZG9jdW1lbnQud3JpdGUoZXZlbnQudGFyZ2V0Lm91dGVySFRNTCk7XG4gICAgICBuZXdUYWJXaW5kb3cuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChcbiAgICAgICAgZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKFwibWV0YVwiKVxuICAgICAgKTtcbiAgICAgIG5ld1RhYldpbmRvdy5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aXRsZVwiKSk7XG4gICAgICBuZXdUYWJXaW5kb3cuZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKFwidGl0bGVcIikudGV4dENvbnRlbnQgPVxuICAgICAgICBldmVudC50YXJnZXQuYWx0O1xuICAgIH1cbiAgfVxuXG4gIG5ld0ltYWdlSW5wdXRIYW5kbGVyKGV2ZW50KSB7XG4gICAgLy9HZXQgaW1hZ2UgZGF0YVxuICAgIGNvbnN0IGltYWdlRGF0YSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTtcbiAgICB0aGlzLm5ld0ltYWdlTmFtZSA9IGltYWdlRGF0YS5uYW1lLnJlcGxhY2UoL1suXVteLl0rJC8sIFwiXCIpO1xuICAgIGlmIChpbWFnZURhdGEpIHtcbiAgICAgIC8vUGFyc2UgZGF0YSBhcyBiYXNlNjQgd2l0aCBhIEZpbGVSZWFkZXIgaW5zdGFuY2UuXG4gICAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChpbWFnZURhdGEpO1xuICAgICAgLy9Bc3NpZ24gdGhlIHBhcnNlZCBkYXRhIHRvIHRoZSBuZXdJbWFnZSBjbGFzcyBwcm9wZXJ0eS5cbiAgICAgIGZpbGVSZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGUpID0+IHtcbiAgICAgICAgdGhpcy5uZXdJbWFnZSA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgdGhpcy5uZXdJbWFnZSA9IHRoaXMubmV3SW1hZ2Uuc3Vic3RyaW5nKHRoaXMubmV3SW1hZ2UuaW5kZXhPZihcIixcIikgKyAxKTtcbiAgICAgIH0pO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtaW1hZ2UtYnRuXCIpLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc3VibWl0SW1hZ2VCdG5IYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvL0lmIGEgbmV3IGltYWdlIGlzIGF2YWlsYWJsZSwgc2VuZCBpdCB0byB0aGUgc2VydmVyLlxuICAgIGlmICh0aGlzLm5ld0ltYWdlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCB0aGlzLmltYWdlSW50ZXJmYWNlLnBvc3QoXG4gICAgICAgICAgdGhpcy5zZWdtZW50LnBhcmVudElkIHx8IHRoaXMuc2VnbWVudC5pZCxcbiAgICAgICAgICB0aGlzLm5ld0ltYWdlTmFtZSxcbiAgICAgICAgICB0aGlzLm5ld0ltYWdlLFxuICAgICAgICAgIGBJbWFnZSB1cGxvYWRlZCBieSAke3RoaXMuY3VycmVudFVzZXIubmFtZX1gXG4gICAgICAgICk7XG4gICAgICAgIC8vUmVzZXQgdGhlIG5ld0ltYWdlIHByb3BlcnR5IGFuZCBkaXNhYmxlIHRoZSBidXR0b24uXG4gICAgICAgIHRoaXMubmV3SW1hZ2UgPSBudWxsO1xuICAgICAgICBldmVudC50YXJnZXQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAvL0NoYW5nZSB0byB0aGUgY3VycmVudCBpbWFnZXMgdGFiLlxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImN1cnJlbnQtaW1hZ2VzLXRhYlwiKS5jbGljaygpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/overlays/SegmentEdit.js\n");

/***/ }),

/***/ "./src/overlays/ShiftCompare.js":
/*!**************************************!*\
  !*** ./src/overlays/ShiftCompare.js ***!
  \**************************************/
/*! exports provided: ShiftCompare */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShiftCompare\", function() { return ShiftCompare; });\n/* harmony import */ var _database_interface_Segment_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../database_interface/Segment.js */ \"./src/database_interface/Segment.js\");\n/* harmony import */ var _database_interface_Leg_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../database_interface/Leg.js */ \"./src/database_interface/Leg.js\");\n/* harmony import */ var _utility_LeafletMap_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utility/LeafletMap.js */ \"./src/utility/LeafletMap.js\");\n/* harmony import */ var _utility_TrajectoryDistance_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utility/TrajectoryDistance.js */ \"./src/utility/TrajectoryDistance.js\");\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2023 - Fraunhofer FKIE\n */\n\n\n\n\n\n\nconst markerColorList = [\n  \"Navy\",\n  \"Crimson\",\n  \"Green\",\n  \"Violet\",\n  \"Orange\",\n  \"Gold\",\n];\n\n//Structure and logic of the map config UI.\nclass ShiftCompare {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor(serverInterface, compareIds) {\n    //Set arguments as properties.\n    this.serverInterface = serverInterface;\n    this.compareIds = compareIds;\n    //Import and build map config node.\n    const templateEl = document.getElementById(\"compare-template\");\n    this.element = document.importNode(templateEl.content, true);\n    //Initialize variables.\n    this.legInterface = new _database_interface_Leg_js__WEBPACK_IMPORTED_MODULE_1__[\"LegInterface\"](serverInterface);\n    this.segmentInterface = new _database_interface_Segment_js__WEBPACK_IMPORTED_MODULE_0__[\"SegmentInterface\"](serverInterface);\n    this.mapInterface = null;\n    this.compareShifts();\n  }\n\n  async compareShifts() {\n    let markerColorIdx = 0;\n    const trajectories = [];\n    //Iterate through shifts.\n    for (const shiftId of this.compareIds) {\n      //Select the marker color.\n      const markerColor = markerColorList[markerColorIdx++];\n      //Create an empty array to hold the lng-lat coordinates.\n      const trajectory = [];\n      //Get legs of each shift.\n      const legList = await this.legInterface.get(shiftId);\n      const legIds = legList.map((entry) => entry.id);\n      for (const legId of legIds) {\n        //Get segments of each leg.\n        const segmentList = await this.segmentInterface.get(legId);\n        for (const entry of segmentList.reverse()) {\n          if (!entry.parentId) {\n            //Initialize leaflet map.\n            if (!this.mapInterface) {\n              this.mapInterface = new _utility_LeafletMap_js__WEBPACK_IMPORTED_MODULE_2__[\"LeafletMap\"](\n                this.serverInterface,\n                \"compare-map\"\n              );\n              this.mapInterface.mapElement.style.display = \"block\";\n              const firstLocEntry = segmentList.find(\n                (entry) => entry.lat && entry.lng\n              );\n              this.mapInterface.leafletMap.setView(\n                [firstLocEntry.lat, firstLocEntry.lng],\n                17\n              );\n            }\n            //Create a new points layer.\n            const geoJsonData = await this.mapInterface.getAndDrawMapPoses(\n              entry.id,\n              markerColor,\n              markerColor,\n              1.0\n            );\n            //Get the lng-lat coordinates (at most every 0.5 meter).\n            geoJsonData.features && geoJsonData.features.forEach((feature) => {\n              // const coords = feature.geometry.coordinates;\n              // for (const p of trajectory) {\n              //   if (distL2FromLngLat(p, coords) < 0.5) {\n              //     return;\n              //   }\n              // }\n              trajectory.push(feature.geometry.coordinates);\n            });\n          }\n        }\n      }\n      trajectories.push(trajectory);\n    }\n    //Get DTW distance between trajectories\n    const distancesDtw = Array.from({ length: trajectories.length }).map(() =>\n      Array.from({ length: trajectories.length }).fill(0)\n    );\n    for (let i = 0; i < trajectories.length - 1; i++) {\n      for (let j = i + 1; j < trajectories.length; j++) {\n        distancesDtw[i][j] = Object(_utility_TrajectoryDistance_js__WEBPACK_IMPORTED_MODULE_3__[\"distDtw\"])(\n          trajectories[i],\n          trajectories[j],\n          trajectories[0][0]\n        );\n        distancesDtw[j][i] = distancesDtw[i][j];\n      }\n    }\n    //Get ERP distance between trajectories\n    const distancesErp = Array.from({ length: trajectories.length }).map(() =>\n      Array.from({ length: trajectories.length }).fill(0)\n    );\n    for (let i = 0; i < trajectories.length - 1; i++) {\n      for (let j = i + 1; j < trajectories.length; j++) {\n        distancesErp[i][j] = Object(_utility_TrajectoryDistance_js__WEBPACK_IMPORTED_MODULE_3__[\"distErp\"])(\n          trajectories[i],\n          trajectories[j],\n          trajectories[0][0]\n        );\n        distancesErp[j][i] = distancesErp[i][j];\n      }\n    }\n    //Get Tracking distances between trajectories\n    const distancesMin = Array.from({ length: trajectories.length }).map(() =>\n      Array.from({ length: trajectories.length }).fill(0)\n    );\n    for (let i = 0; i < trajectories.length; i++) {\n      for (let j = 0; j < trajectories.length; j++) {\n        if (i == j) {\n          continue;\n        }\n        distancesMin[i][j] = Object(_utility_TrajectoryDistance_js__WEBPACK_IMPORTED_MODULE_3__[\"minimumDistance\"])(\n          trajectories[i],\n          trajectories[j]\n        );\n      }\n    }\n    //Show distances\n    const headerEl = document.querySelector(\".modal__title\");\n    let distCompEl;\n    if (trajectories.length < 3) {\n      distCompEl = this.createComparisonParagraph(0, 1, distancesMin[0][1], \"Minimum\");\n      headerEl.appendChild(distCompEl);\n      distCompEl = this.createComparisonParagraph(1, 0, distancesMin[1][0], \"Minimum\");\n      headerEl.appendChild(distCompEl);\n      distCompEl = this.createComparisonParagraph(0, 1, distancesDtw[0][1], \"DTW\");\n      headerEl.appendChild(distCompEl);\n      distCompEl = this.createComparisonParagraph(0, 1, distancesErp[0][1], \"ERP\");\n      headerEl.appendChild(distCompEl);\n    } else {\n      distCompEl = this.createComparisonTable(distancesMin, \"Min\");\n      headerEl.appendChild(distCompEl);\n      distCompEl = this.createComparisonTable(distancesDtw, \"DTW\");\n      headerEl.appendChild(distCompEl);\n      distCompEl = this.createComparisonTable(distancesErp, \"ERP\");\n      headerEl.appendChild(distCompEl);\n    }\n  }\n\n  createComparisonParagraph(sourceId, targetId, distance, type) {\n    const p = document.createElement(\"p\");\n    p.style.marginTop = \"0.5rem\";\n    p.innerHTML = `\n    <span style=\"font-weight:bold\">Shift ${this.compareIds[sourceId]} </span>\n    <span style=\"color:${markerColorList[sourceId]}\">(${markerColorList[sourceId]})</span>\n    to\n    <span style=\"font-weight:bold\">Shift ${this.compareIds[targetId]} </span>\n    <span style=\"color:${markerColorList[targetId]}\">(${markerColorList[targetId]})</span>\n    <span style=\"font-weight:bold\">${type} </span>\n    distance:\n    <span style=\"font-weight:bold\">${distance.toFixed(2)}m</span>\n    `;\n    return p;\n  }\n\n  createComparisonTable(distances, type) {\n    const table = document.createElement(\"table\");\n    table.style.marginTop = \"0.5rem\";\n    const tHead = document.createElement(\"thead\");\n    const tBody = document.createElement(\"tbody\");\n    //Header row\n    const tHeaderRow = document.createElement(\"tr\");\n    const tHeadTitle = document.createElement(\"th\");\n    tHeadTitle.textContent = `${type}`;\n    tHeaderRow.appendChild(tHeadTitle);\n    for (const [idx, shiftId] of this.compareIds.entries()) {\n      const tHeadData = document.createElement(\"th\");\n      tHeadData.textContent = `Shift ${shiftId} (${markerColorList[idx]})`;\n      tHeaderRow.appendChild(tHeadData);\n    }\n    tHead.appendChild(tHeaderRow);\n    table.appendChild(tHead);\n    //Distance value rows\n    this.compareIds.forEach((shiftId1, idx1) => {\n      const tRow = document.createElement(\"tr\");\n      const tDataLabel = document.createElement(\"th\");\n      tDataLabel.textContent = `Shift ${shiftId1}`;\n      tRow.appendChild(tDataLabel);\n      this.compareIds.forEach((shiftId2, idx2) => {\n        const tData = document.createElement(\"td\");\n        tData.textContent = distances[idx1][idx2].toFixed(2);\n        tRow.appendChild(tData);\n      });\n      tBody.appendChild(tRow);\n    });\n    table.appendChild(tBody);\n    return table;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvU2hpZnRDb21wYXJlLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL292ZXJsYXlzL1NoaWZ0Q29tcGFyZS5qcz8zMTBkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjMgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG5pbXBvcnQgeyBTZWdtZW50SW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9TZWdtZW50LmpzXCI7XG5pbXBvcnQgeyBMZWdJbnRlcmZhY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2VfaW50ZXJmYWNlL0xlZy5qc1wiO1xuaW1wb3J0IHsgTGVhZmxldE1hcCB9IGZyb20gXCIuLi91dGlsaXR5L0xlYWZsZXRNYXAuanNcIjtcbmltcG9ydCB7XG4gIC8vIGRpc3RMMkZyb21MbmdMYXQsXG4gIGRpc3RFcnAsXG4gIGRpc3REdHcsXG4gIG1pbmltdW1EaXN0YW5jZSxcbn0gZnJvbSBcIi4uL3V0aWxpdHkvVHJhamVjdG9yeURpc3RhbmNlLmpzXCI7XG5cbmNvbnN0IG1hcmtlckNvbG9yTGlzdCA9IFtcbiAgXCJOYXZ5XCIsXG4gIFwiQ3JpbXNvblwiLFxuICBcIkdyZWVuXCIsXG4gIFwiVmlvbGV0XCIsXG4gIFwiT3JhbmdlXCIsXG4gIFwiR29sZFwiLFxuXTtcblxuLy9TdHJ1Y3R1cmUgYW5kIGxvZ2ljIG9mIHRoZSBtYXAgY29uZmlnIFVJLlxuZXhwb3J0IGNsYXNzIFNoaWZ0Q29tcGFyZSB7XG4gIC8vVGhpcyBjbGFzcyBpcyBiYXNlZCBvbiBhIHRlbXBsYXRlIHRoYXQgaXQgbGF0ZXIgZ29pbmcgdG8gYmUgYWRkZWQgdG8gYW5vdGhlciBET00gTm9kZS5cbiAgLy9UaGVyZWZvcmUsIG5vIERPTSByZWZlcmVuY2VzIGFyZSBrZXB0IGFzIHByb3BlcnRpZXMuXG4gIGNvbnN0cnVjdG9yKHNlcnZlckludGVyZmFjZSwgY29tcGFyZUlkcykge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMuc2VydmVySW50ZXJmYWNlID0gc2VydmVySW50ZXJmYWNlO1xuICAgIHRoaXMuY29tcGFyZUlkcyA9IGNvbXBhcmVJZHM7XG4gICAgLy9JbXBvcnQgYW5kIGJ1aWxkIG1hcCBjb25maWcgbm9kZS5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wYXJlLXRlbXBsYXRlXCIpO1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmltcG9ydE5vZGUodGVtcGxhdGVFbC5jb250ZW50LCB0cnVlKTtcbiAgICAvL0luaXRpYWxpemUgdmFyaWFibGVzLlxuICAgIHRoaXMubGVnSW50ZXJmYWNlID0gbmV3IExlZ0ludGVyZmFjZShzZXJ2ZXJJbnRlcmZhY2UpO1xuICAgIHRoaXMuc2VnbWVudEludGVyZmFjZSA9IG5ldyBTZWdtZW50SW50ZXJmYWNlKHNlcnZlckludGVyZmFjZSk7XG4gICAgdGhpcy5tYXBJbnRlcmZhY2UgPSBudWxsO1xuICAgIHRoaXMuY29tcGFyZVNoaWZ0cygpO1xuICB9XG5cbiAgYXN5bmMgY29tcGFyZVNoaWZ0cygpIHtcbiAgICBsZXQgbWFya2VyQ29sb3JJZHggPSAwO1xuICAgIGNvbnN0IHRyYWplY3RvcmllcyA9IFtdO1xuICAgIC8vSXRlcmF0ZSB0aHJvdWdoIHNoaWZ0cy5cbiAgICBmb3IgKGNvbnN0IHNoaWZ0SWQgb2YgdGhpcy5jb21wYXJlSWRzKSB7XG4gICAgICAvL1NlbGVjdCB0aGUgbWFya2VyIGNvbG9yLlxuICAgICAgY29uc3QgbWFya2VyQ29sb3IgPSBtYXJrZXJDb2xvckxpc3RbbWFya2VyQ29sb3JJZHgrK107XG4gICAgICAvL0NyZWF0ZSBhbiBlbXB0eSBhcnJheSB0byBob2xkIHRoZSBsbmctbGF0IGNvb3JkaW5hdGVzLlxuICAgICAgY29uc3QgdHJhamVjdG9yeSA9IFtdO1xuICAgICAgLy9HZXQgbGVncyBvZiBlYWNoIHNoaWZ0LlxuICAgICAgY29uc3QgbGVnTGlzdCA9IGF3YWl0IHRoaXMubGVnSW50ZXJmYWNlLmdldChzaGlmdElkKTtcbiAgICAgIGNvbnN0IGxlZ0lkcyA9IGxlZ0xpc3QubWFwKChlbnRyeSkgPT4gZW50cnkuaWQpO1xuICAgICAgZm9yIChjb25zdCBsZWdJZCBvZiBsZWdJZHMpIHtcbiAgICAgICAgLy9HZXQgc2VnbWVudHMgb2YgZWFjaCBsZWcuXG4gICAgICAgIGNvbnN0IHNlZ21lbnRMaXN0ID0gYXdhaXQgdGhpcy5zZWdtZW50SW50ZXJmYWNlLmdldChsZWdJZCk7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2Ygc2VnbWVudExpc3QucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgaWYgKCFlbnRyeS5wYXJlbnRJZCkge1xuICAgICAgICAgICAgLy9Jbml0aWFsaXplIGxlYWZsZXQgbWFwLlxuICAgICAgICAgICAgaWYgKCF0aGlzLm1hcEludGVyZmFjZSkge1xuICAgICAgICAgICAgICB0aGlzLm1hcEludGVyZmFjZSA9IG5ldyBMZWFmbGV0TWFwKFxuICAgICAgICAgICAgICAgIHRoaXMuc2VydmVySW50ZXJmYWNlLFxuICAgICAgICAgICAgICAgIFwiY29tcGFyZS1tYXBcIlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5tYXBFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgIGNvbnN0IGZpcnN0TG9jRW50cnkgPSBzZWdtZW50TGlzdC5maW5kKFxuICAgICAgICAgICAgICAgIChlbnRyeSkgPT4gZW50cnkubGF0ICYmIGVudHJ5LmxuZ1xuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLm1hcEludGVyZmFjZS5sZWFmbGV0TWFwLnNldFZpZXcoXG4gICAgICAgICAgICAgICAgW2ZpcnN0TG9jRW50cnkubGF0LCBmaXJzdExvY0VudHJ5LmxuZ10sXG4gICAgICAgICAgICAgICAgMTdcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vQ3JlYXRlIGEgbmV3IHBvaW50cyBsYXllci5cbiAgICAgICAgICAgIGNvbnN0IGdlb0pzb25EYXRhID0gYXdhaXQgdGhpcy5tYXBJbnRlcmZhY2UuZ2V0QW5kRHJhd01hcFBvc2VzKFxuICAgICAgICAgICAgICBlbnRyeS5pZCxcbiAgICAgICAgICAgICAgbWFya2VyQ29sb3IsXG4gICAgICAgICAgICAgIG1hcmtlckNvbG9yLFxuICAgICAgICAgICAgICAxLjBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvL0dldCB0aGUgbG5nLWxhdCBjb29yZGluYXRlcyAoYXQgbW9zdCBldmVyeSAwLjUgbWV0ZXIpLlxuICAgICAgICAgICAgZ2VvSnNvbkRhdGEuZmVhdHVyZXMgJiYgZ2VvSnNvbkRhdGEuZmVhdHVyZXMuZm9yRWFjaCgoZmVhdHVyZSkgPT4ge1xuICAgICAgICAgICAgICAvLyBjb25zdCBjb29yZHMgPSBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzO1xuICAgICAgICAgICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgdHJhamVjdG9yeSkge1xuICAgICAgICAgICAgICAvLyAgIGlmIChkaXN0TDJGcm9tTG5nTGF0KHAsIGNvb3JkcykgPCAwLjUpIHtcbiAgICAgICAgICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgICAgICAgICAgLy8gICB9XG4gICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgdHJhamVjdG9yeS5wdXNoKGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0cmFqZWN0b3JpZXMucHVzaCh0cmFqZWN0b3J5KTtcbiAgICB9XG4gICAgLy9HZXQgRFRXIGRpc3RhbmNlIGJldHdlZW4gdHJhamVjdG9yaWVzXG4gICAgY29uc3QgZGlzdGFuY2VzRHR3ID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogdHJhamVjdG9yaWVzLmxlbmd0aCB9KS5tYXAoKCkgPT5cbiAgICAgIEFycmF5LmZyb20oeyBsZW5ndGg6IHRyYWplY3Rvcmllcy5sZW5ndGggfSkuZmlsbCgwKVxuICAgICk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmFqZWN0b3JpZXMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCB0cmFqZWN0b3JpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgZGlzdGFuY2VzRHR3W2ldW2pdID0gZGlzdER0dyhcbiAgICAgICAgICB0cmFqZWN0b3JpZXNbaV0sXG4gICAgICAgICAgdHJhamVjdG9yaWVzW2pdLFxuICAgICAgICAgIHRyYWplY3Rvcmllc1swXVswXVxuICAgICAgICApO1xuICAgICAgICBkaXN0YW5jZXNEdHdbal1baV0gPSBkaXN0YW5jZXNEdHdbaV1bal07XG4gICAgICB9XG4gICAgfVxuICAgIC8vR2V0IEVSUCBkaXN0YW5jZSBiZXR3ZWVuIHRyYWplY3Rvcmllc1xuICAgIGNvbnN0IGRpc3RhbmNlc0VycCA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRyYWplY3Rvcmllcy5sZW5ndGggfSkubWFwKCgpID0+XG4gICAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0cmFqZWN0b3JpZXMubGVuZ3RoIH0pLmZpbGwoMClcbiAgICApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJhamVjdG9yaWVzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgdHJhamVjdG9yaWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRpc3RhbmNlc0VycFtpXVtqXSA9IGRpc3RFcnAoXG4gICAgICAgICAgdHJhamVjdG9yaWVzW2ldLFxuICAgICAgICAgIHRyYWplY3Rvcmllc1tqXSxcbiAgICAgICAgICB0cmFqZWN0b3JpZXNbMF1bMF1cbiAgICAgICAgKTtcbiAgICAgICAgZGlzdGFuY2VzRXJwW2pdW2ldID0gZGlzdGFuY2VzRXJwW2ldW2pdO1xuICAgICAgfVxuICAgIH1cbiAgICAvL0dldCBUcmFja2luZyBkaXN0YW5jZXMgYmV0d2VlbiB0cmFqZWN0b3JpZXNcbiAgICBjb25zdCBkaXN0YW5jZXNNaW4gPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiB0cmFqZWN0b3JpZXMubGVuZ3RoIH0pLm1hcCgoKSA9PlxuICAgICAgQXJyYXkuZnJvbSh7IGxlbmd0aDogdHJhamVjdG9yaWVzLmxlbmd0aCB9KS5maWxsKDApXG4gICAgKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyYWplY3Rvcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0cmFqZWN0b3JpZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKGkgPT0gaikge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGRpc3RhbmNlc01pbltpXVtqXSA9IG1pbmltdW1EaXN0YW5jZShcbiAgICAgICAgICB0cmFqZWN0b3JpZXNbaV0sXG4gICAgICAgICAgdHJhamVjdG9yaWVzW2pdXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vU2hvdyBkaXN0YW5jZXNcbiAgICBjb25zdCBoZWFkZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlXCIpO1xuICAgIGxldCBkaXN0Q29tcEVsO1xuICAgIGlmICh0cmFqZWN0b3JpZXMubGVuZ3RoIDwgMykge1xuICAgICAgZGlzdENvbXBFbCA9IHRoaXMuY3JlYXRlQ29tcGFyaXNvblBhcmFncmFwaCgwLCAxLCBkaXN0YW5jZXNNaW5bMF1bMV0sIFwiTWluaW11bVwiKTtcbiAgICAgIGhlYWRlckVsLmFwcGVuZENoaWxkKGRpc3RDb21wRWwpO1xuICAgICAgZGlzdENvbXBFbCA9IHRoaXMuY3JlYXRlQ29tcGFyaXNvblBhcmFncmFwaCgxLCAwLCBkaXN0YW5jZXNNaW5bMV1bMF0sIFwiTWluaW11bVwiKTtcbiAgICAgIGhlYWRlckVsLmFwcGVuZENoaWxkKGRpc3RDb21wRWwpO1xuICAgICAgZGlzdENvbXBFbCA9IHRoaXMuY3JlYXRlQ29tcGFyaXNvblBhcmFncmFwaCgwLCAxLCBkaXN0YW5jZXNEdHdbMF1bMV0sIFwiRFRXXCIpO1xuICAgICAgaGVhZGVyRWwuYXBwZW5kQ2hpbGQoZGlzdENvbXBFbCk7XG4gICAgICBkaXN0Q29tcEVsID0gdGhpcy5jcmVhdGVDb21wYXJpc29uUGFyYWdyYXBoKDAsIDEsIGRpc3RhbmNlc0VycFswXVsxXSwgXCJFUlBcIik7XG4gICAgICBoZWFkZXJFbC5hcHBlbmRDaGlsZChkaXN0Q29tcEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzdENvbXBFbCA9IHRoaXMuY3JlYXRlQ29tcGFyaXNvblRhYmxlKGRpc3RhbmNlc01pbiwgXCJNaW5cIik7XG4gICAgICBoZWFkZXJFbC5hcHBlbmRDaGlsZChkaXN0Q29tcEVsKTtcbiAgICAgIGRpc3RDb21wRWwgPSB0aGlzLmNyZWF0ZUNvbXBhcmlzb25UYWJsZShkaXN0YW5jZXNEdHcsIFwiRFRXXCIpO1xuICAgICAgaGVhZGVyRWwuYXBwZW5kQ2hpbGQoZGlzdENvbXBFbCk7XG4gICAgICBkaXN0Q29tcEVsID0gdGhpcy5jcmVhdGVDb21wYXJpc29uVGFibGUoZGlzdGFuY2VzRXJwLCBcIkVSUFwiKTtcbiAgICAgIGhlYWRlckVsLmFwcGVuZENoaWxkKGRpc3RDb21wRWwpO1xuICAgIH1cbiAgfVxuXG4gIGNyZWF0ZUNvbXBhcmlzb25QYXJhZ3JhcGgoc291cmNlSWQsIHRhcmdldElkLCBkaXN0YW5jZSwgdHlwZSkge1xuICAgIGNvbnN0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBwLnN0eWxlLm1hcmdpblRvcCA9IFwiMC41cmVtXCI7XG4gICAgcC5pbm5lckhUTUwgPSBgXG4gICAgPHNwYW4gc3R5bGU9XCJmb250LXdlaWdodDpib2xkXCI+U2hpZnQgJHt0aGlzLmNvbXBhcmVJZHNbc291cmNlSWRdfSA8L3NwYW4+XG4gICAgPHNwYW4gc3R5bGU9XCJjb2xvcjoke21hcmtlckNvbG9yTGlzdFtzb3VyY2VJZF19XCI+KCR7bWFya2VyQ29sb3JMaXN0W3NvdXJjZUlkXX0pPC9zcGFuPlxuICAgIHRvXG4gICAgPHNwYW4gc3R5bGU9XCJmb250LXdlaWdodDpib2xkXCI+U2hpZnQgJHt0aGlzLmNvbXBhcmVJZHNbdGFyZ2V0SWRdfSA8L3NwYW4+XG4gICAgPHNwYW4gc3R5bGU9XCJjb2xvcjoke21hcmtlckNvbG9yTGlzdFt0YXJnZXRJZF19XCI+KCR7bWFya2VyQ29sb3JMaXN0W3RhcmdldElkXX0pPC9zcGFuPlxuICAgIDxzcGFuIHN0eWxlPVwiZm9udC13ZWlnaHQ6Ym9sZFwiPiR7dHlwZX0gPC9zcGFuPlxuICAgIGRpc3RhbmNlOlxuICAgIDxzcGFuIHN0eWxlPVwiZm9udC13ZWlnaHQ6Ym9sZFwiPiR7ZGlzdGFuY2UudG9GaXhlZCgyKX1tPC9zcGFuPlxuICAgIGA7XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICBjcmVhdGVDb21wYXJpc29uVGFibGUoZGlzdGFuY2VzLCB0eXBlKSB7XG4gICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIik7XG4gICAgdGFibGUuc3R5bGUubWFyZ2luVG9wID0gXCIwLjVyZW1cIjtcbiAgICBjb25zdCB0SGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiKTtcbiAgICBjb25zdCB0Qm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0Ym9keVwiKTtcbiAgICAvL0hlYWRlciByb3dcbiAgICBjb25zdCB0SGVhZGVyUm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuICAgIGNvbnN0IHRIZWFkVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gICAgdEhlYWRUaXRsZS50ZXh0Q29udGVudCA9IGAke3R5cGV9YDtcbiAgICB0SGVhZGVyUm93LmFwcGVuZENoaWxkKHRIZWFkVGl0bGUpO1xuICAgIGZvciAoY29uc3QgW2lkeCwgc2hpZnRJZF0gb2YgdGhpcy5jb21wYXJlSWRzLmVudHJpZXMoKSkge1xuICAgICAgY29uc3QgdEhlYWREYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgdEhlYWREYXRhLnRleHRDb250ZW50ID0gYFNoaWZ0ICR7c2hpZnRJZH0gKCR7bWFya2VyQ29sb3JMaXN0W2lkeF19KWA7XG4gICAgICB0SGVhZGVyUm93LmFwcGVuZENoaWxkKHRIZWFkRGF0YSk7XG4gICAgfVxuICAgIHRIZWFkLmFwcGVuZENoaWxkKHRIZWFkZXJSb3cpO1xuICAgIHRhYmxlLmFwcGVuZENoaWxkKHRIZWFkKTtcbiAgICAvL0Rpc3RhbmNlIHZhbHVlIHJvd3NcbiAgICB0aGlzLmNvbXBhcmVJZHMuZm9yRWFjaCgoc2hpZnRJZDEsIGlkeDEpID0+IHtcbiAgICAgIGNvbnN0IHRSb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XG4gICAgICBjb25zdCB0RGF0YUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xuICAgICAgdERhdGFMYWJlbC50ZXh0Q29udGVudCA9IGBTaGlmdCAke3NoaWZ0SWQxfWA7XG4gICAgICB0Um93LmFwcGVuZENoaWxkKHREYXRhTGFiZWwpO1xuICAgICAgdGhpcy5jb21wYXJlSWRzLmZvckVhY2goKHNoaWZ0SWQyLCBpZHgyKSA9PiB7XG4gICAgICAgIGNvbnN0IHREYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICB0RGF0YS50ZXh0Q29udGVudCA9IGRpc3RhbmNlc1tpZHgxXVtpZHgyXS50b0ZpeGVkKDIpO1xuICAgICAgICB0Um93LmFwcGVuZENoaWxkKHREYXRhKTtcbiAgICAgIH0pO1xuICAgICAgdEJvZHkuYXBwZW5kQ2hpbGQodFJvdyk7XG4gICAgfSk7XG4gICAgdGFibGUuYXBwZW5kQ2hpbGQodEJvZHkpO1xuICAgIHJldHVybiB0YWJsZTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/overlays/ShiftCompare.js\n");

/***/ }),

/***/ "./src/overlays/ShiftEdit.js":
/*!***********************************!*\
  !*** ./src/overlays/ShiftEdit.js ***!
  \***********************************/
/*! exports provided: ShiftEdit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ShiftEdit\", function() { return ShiftEdit; });\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/* eslint-disable no-control-regex */\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n//Structure and logic of the shift edition UI.\nclass ShiftEdit {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor(\n    shift,\n    shiftInterface,\n    performerList,\n    personnelList,\n    vehicleList\n  ) {\n    //Set arguments as properties.\n    this.shift = shift;\n    this.shiftInterface = shiftInterface;\n    this.performerList = performerList;\n    this.personnelList = personnelList;\n    this.vehicleList = vehicleList;\n    //Import and build shift edition node.\n    const templateEl = document.getElementById(\"edit-shift-template\");\n    this.element = document.importNode(templateEl.content, true);\n\n    //=============================== HEADER ===============================\n    //Set title, start and end time.\n    this.element.querySelector(\"header h2 span:last-of-type\").textContent =\n      shift.id;\n    this.element.querySelector(\n      \"header p:first-of-type span:last-of-type\"\n    ).textContent = new Date(shift.startTime * 1000).toISOString();\n    if (shift.endTime) {\n      this.element.querySelector(\n        \"header p:last-of-type span:last-of-type\"\n      ).textContent = new Date(shift.endTime * 1000).toISOString();\n    }\n\n    //============================ DATA SECTION ============================\n    //Reach to shift info data elements.\n    const performerSelect = this.element.getElementById(\"performer\");\n    const testDirectorSelect = this.element.getElementById(\"test-director\");\n    const testAdminSelect = this.element.getElementById(\"test-admin\");\n    const robotOperatorSelect = this.element.getElementById(\"robot-operator\");\n    const safetyOfficerSelect = this.element.getElementById(\"safety-officer\");\n    const testIntentInput = this.element.getElementById(\"test-intent\");\n    const workspaceInput = this.element.getElementById(\"workspace\");\n    const vehicleSelect = this.element.getElementById(\"vehicle\");\n    const noteText = this.element.getElementById(\"shift-note\");\n    //Populate selects.\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      performerSelect,\n      performerList.map((entry) => entry.institution)\n    );\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      testDirectorSelect,\n      personnelList.map((entry) => entry.name)\n    );\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      testAdminSelect,\n      personnelList.map((entry) => entry.name)\n    );\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      robotOperatorSelect,\n      personnelList.map((entry) => entry.name)\n    );\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      safetyOfficerSelect,\n      personnelList.map((entry) => entry.name)\n    );\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      vehicleSelect,\n      vehicleList.map((entry) => entry.shortDescription)\n    );\n    //Focus matching option on the selects with the properties in the shift object.\n    const matchedPerformer = performerList.find(\n      (entry) => entry.id == shift.performerId\n    );\n    if (matchedPerformer) {\n      performerSelect.value = matchedPerformer.institution;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(performerSelect);\n    }\n    const matchedTestDirector = personnelList.find(\n      (entry) => entry.id == shift.testDirectorId\n    );\n    if (matchedTestDirector) {\n      testDirectorSelect.value = matchedTestDirector.name;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(testDirectorSelect);\n    }\n    const matchedTestAdmin = personnelList.find(\n      (entry) => entry.id == shift.testAdministratorId\n    );\n    if (matchedTestAdmin) {\n      testAdminSelect.value = matchedTestAdmin.name;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(testAdminSelect);\n    }\n    const matchedRobotOperator = personnelList.find(\n      (entry) => entry.id == shift.robotOperatorId\n    );\n    if (matchedRobotOperator) {\n      robotOperatorSelect.value = matchedRobotOperator.name;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(robotOperatorSelect);\n    }\n    const matchedSafetyOfficer = personnelList.find(\n      (entry) => entry.id == shift.safetyOfficerId\n    );\n    if (matchedSafetyOfficer) {\n      safetyOfficerSelect.value = matchedSafetyOfficer.name;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(safetyOfficerSelect);\n    }\n    const matchedVehicle = vehicleList.find(\n      (entry) => entry.id == shift.vehicleId\n    );\n    if (matchedVehicle) {\n      vehicleSelect.value = matchedVehicle.shortDescription;\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(vehicleSelect);\n    }\n    //Fill input fields with shift data.\n    testIntentInput.value = shift.testIntent;\n    workspaceInput.value = shift.workspace;\n    noteText.value = shift.note;\n    //Set change event listeners.\n    performerSelect.addEventListener(\n      \"change\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    testDirectorSelect.addEventListener(\n      \"change\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    testAdminSelect.addEventListener(\n      \"change\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    robotOperatorSelect.addEventListener(\n      \"change\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    safetyOfficerSelect.addEventListener(\n      \"change\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    testIntentInput.addEventListener(\n      \"input\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    workspaceInput.addEventListener(\n      \"input\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    vehicleSelect.addEventListener(\n      \"change\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    noteText.addEventListener(\n      \"input\",\n      this.shiftDataChangedHandler.bind(this)\n    );\n    //Register update button handler.\n    this.element\n      .querySelector(\"form button\")\n      .addEventListener(\"click\", this.updateDataBtnHandler.bind(this));\n  }\n\n  shiftDataChangedHandler() {\n    //Activate update button.\n    this.element.querySelector(\"form button\").disabled = false;\n  }\n\n  async updateDataBtnHandler(event) {\n    event.preventDefault();\n    //Get data to update.\n    const testAdministratorId = this.personnelList.find(\n      (entry) => entry.name == document.getElementById(\"test-admin\").value\n    ).id;\n    const testDirectorId = this.personnelList.find(\n      (entry) => entry.name == document.getElementById(\"test-director\").value\n    ).id;\n    const safetyOfficerId = this.personnelList.find(\n      (entry) => entry.name == document.getElementById(\"safety-officer\").value\n    ).id;\n    const robotOperatorId = this.personnelList.find(\n      (entry) => entry.name == document.getElementById(\"robot-operator\").value\n    ).id;\n    const performer = this.performerList.find(\n      (entry) => entry.institution == document.getElementById(\"performer\").value\n    ).id;\n    const testIntent = document.getElementById(\"test-intent\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const workspace = document.getElementById(\"workspace\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const vehicleId = this.vehicleList.find(\n      (entry) =>\n        entry.shortDescription == document.getElementById(\"vehicle\").value\n    ).id;\n    const note = document.getElementById(\"shift-note\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    //Send put request.\n    try {\n      await this.shiftInterface.put(\n        this.shift.id,\n        \"edit\",\n        testAdministratorId,\n        testDirectorId,\n        safetyOfficerId,\n        robotOperatorId,\n        performer,\n        testIntent,\n        workspace,\n        vehicleId,\n        note\n      );\n      this.element.querySelector(\"form button\").disabled = true;\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvU2hpZnRFZGl0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL292ZXJsYXlzL1NoaWZ0RWRpdC5qcz80ZGFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIG5vLWNvbnRyb2wtcmVnZXggKi9cbi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG5pbXBvcnQgeyBET01HZW5lcmljIH0gZnJvbSBcIi4uL3V0aWxpdHkvRE9NR2VuZXJpYy5qc1wiO1xuXG4vL1N0cnVjdHVyZSBhbmQgbG9naWMgb2YgdGhlIHNoaWZ0IGVkaXRpb24gVUkuXG5leHBvcnQgY2xhc3MgU2hpZnRFZGl0IHtcbiAgLy9UaGlzIGNsYXNzIGlzIGJhc2VkIG9uIGEgdGVtcGxhdGUgdGhhdCBpdCBsYXRlciBnb2luZyB0byBiZSBhZGRlZCB0byBhbm90aGVyIERPTSBOb2RlLlxuICAvL1RoZXJlZm9yZSwgbm8gRE9NIHJlZmVyZW5jZXMgYXJlIGtlcHQgYXMgcHJvcGVydGllcy5cbiAgY29uc3RydWN0b3IoXG4gICAgc2hpZnQsXG4gICAgc2hpZnRJbnRlcmZhY2UsXG4gICAgcGVyZm9ybWVyTGlzdCxcbiAgICBwZXJzb25uZWxMaXN0LFxuICAgIHZlaGljbGVMaXN0XG4gICkge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMuc2hpZnQgPSBzaGlmdDtcbiAgICB0aGlzLnNoaWZ0SW50ZXJmYWNlID0gc2hpZnRJbnRlcmZhY2U7XG4gICAgdGhpcy5wZXJmb3JtZXJMaXN0ID0gcGVyZm9ybWVyTGlzdDtcbiAgICB0aGlzLnBlcnNvbm5lbExpc3QgPSBwZXJzb25uZWxMaXN0O1xuICAgIHRoaXMudmVoaWNsZUxpc3QgPSB2ZWhpY2xlTGlzdDtcbiAgICAvL0ltcG9ydCBhbmQgYnVpbGQgc2hpZnQgZWRpdGlvbiBub2RlLlxuICAgIGNvbnN0IHRlbXBsYXRlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtc2hpZnQtdGVtcGxhdGVcIik7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZUVsLmNvbnRlbnQsIHRydWUpO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEhFQURFUiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy9TZXQgdGl0bGUsIHN0YXJ0IGFuZCBlbmQgdGltZS5cbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImhlYWRlciBoMiBzcGFuOmxhc3Qtb2YtdHlwZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICBzaGlmdC5pZDtcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiaGVhZGVyIHA6Zmlyc3Qtb2YtdHlwZSBzcGFuOmxhc3Qtb2YtdHlwZVwiXG4gICAgKS50ZXh0Q29udGVudCA9IG5ldyBEYXRlKHNoaWZ0LnN0YXJ0VGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgaWYgKHNoaWZ0LmVuZFRpbWUpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBcImhlYWRlciBwOmxhc3Qtb2YtdHlwZSBzcGFuOmxhc3Qtb2YtdHlwZVwiXG4gICAgICApLnRleHRDb250ZW50ID0gbmV3IERhdGUoc2hpZnQuZW5kVGltZSAqIDEwMDApLnRvSVNPU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09IERBVEEgU0VDVElPTiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy9SZWFjaCB0byBzaGlmdCBpbmZvIGRhdGEgZWxlbWVudHMuXG4gICAgY29uc3QgcGVyZm9ybWVyU2VsZWN0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwicGVyZm9ybWVyXCIpO1xuICAgIGNvbnN0IHRlc3REaXJlY3RvclNlbGVjdCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcInRlc3QtZGlyZWN0b3JcIik7XG4gICAgY29uc3QgdGVzdEFkbWluU2VsZWN0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwidGVzdC1hZG1pblwiKTtcbiAgICBjb25zdCByb2JvdE9wZXJhdG9yU2VsZWN0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwicm9ib3Qtb3BlcmF0b3JcIik7XG4gICAgY29uc3Qgc2FmZXR5T2ZmaWNlclNlbGVjdCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcInNhZmV0eS1vZmZpY2VyXCIpO1xuICAgIGNvbnN0IHRlc3RJbnRlbnRJbnB1dCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcInRlc3QtaW50ZW50XCIpO1xuICAgIGNvbnN0IHdvcmtzcGFjZUlucHV0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwid29ya3NwYWNlXCIpO1xuICAgIGNvbnN0IHZlaGljbGVTZWxlY3QgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2ZWhpY2xlXCIpO1xuICAgIGNvbnN0IG5vdGVUZXh0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwic2hpZnQtbm90ZVwiKTtcbiAgICAvL1BvcHVsYXRlIHNlbGVjdHMuXG4gICAgRE9NR2VuZXJpYy5wb3B1bGF0ZVNlbGVjdChcbiAgICAgIHBlcmZvcm1lclNlbGVjdCxcbiAgICAgIHBlcmZvcm1lckxpc3QubWFwKChlbnRyeSkgPT4gZW50cnkuaW5zdGl0dXRpb24pXG4gICAgKTtcbiAgICBET01HZW5lcmljLnBvcHVsYXRlU2VsZWN0KFxuICAgICAgdGVzdERpcmVjdG9yU2VsZWN0LFxuICAgICAgcGVyc29ubmVsTGlzdC5tYXAoKGVudHJ5KSA9PiBlbnRyeS5uYW1lKVxuICAgICk7XG4gICAgRE9NR2VuZXJpYy5wb3B1bGF0ZVNlbGVjdChcbiAgICAgIHRlc3RBZG1pblNlbGVjdCxcbiAgICAgIHBlcnNvbm5lbExpc3QubWFwKChlbnRyeSkgPT4gZW50cnkubmFtZSlcbiAgICApO1xuICAgIERPTUdlbmVyaWMucG9wdWxhdGVTZWxlY3QoXG4gICAgICByb2JvdE9wZXJhdG9yU2VsZWN0LFxuICAgICAgcGVyc29ubmVsTGlzdC5tYXAoKGVudHJ5KSA9PiBlbnRyeS5uYW1lKVxuICAgICk7XG4gICAgRE9NR2VuZXJpYy5wb3B1bGF0ZVNlbGVjdChcbiAgICAgIHNhZmV0eU9mZmljZXJTZWxlY3QsXG4gICAgICBwZXJzb25uZWxMaXN0Lm1hcCgoZW50cnkpID0+IGVudHJ5Lm5hbWUpXG4gICAgKTtcbiAgICBET01HZW5lcmljLnBvcHVsYXRlU2VsZWN0KFxuICAgICAgdmVoaWNsZVNlbGVjdCxcbiAgICAgIHZlaGljbGVMaXN0Lm1hcCgoZW50cnkpID0+IGVudHJ5LnNob3J0RGVzY3JpcHRpb24pXG4gICAgKTtcbiAgICAvL0ZvY3VzIG1hdGNoaW5nIG9wdGlvbiBvbiB0aGUgc2VsZWN0cyB3aXRoIHRoZSBwcm9wZXJ0aWVzIGluIHRoZSBzaGlmdCBvYmplY3QuXG4gICAgY29uc3QgbWF0Y2hlZFBlcmZvcm1lciA9IHBlcmZvcm1lckxpc3QuZmluZChcbiAgICAgIChlbnRyeSkgPT4gZW50cnkuaWQgPT0gc2hpZnQucGVyZm9ybWVySWRcbiAgICApO1xuICAgIGlmIChtYXRjaGVkUGVyZm9ybWVyKSB7XG4gICAgICBwZXJmb3JtZXJTZWxlY3QudmFsdWUgPSBtYXRjaGVkUGVyZm9ybWVyLmluc3RpdHV0aW9uO1xuICAgICAgRE9NR2VuZXJpYy5yZW1vdmVGaXJzdEVtcHR5T3B0aW9uKHBlcmZvcm1lclNlbGVjdCk7XG4gICAgfVxuICAgIGNvbnN0IG1hdGNoZWRUZXN0RGlyZWN0b3IgPSBwZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IHNoaWZ0LnRlc3REaXJlY3RvcklkXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlZFRlc3REaXJlY3Rvcikge1xuICAgICAgdGVzdERpcmVjdG9yU2VsZWN0LnZhbHVlID0gbWF0Y2hlZFRlc3REaXJlY3Rvci5uYW1lO1xuICAgICAgRE9NR2VuZXJpYy5yZW1vdmVGaXJzdEVtcHR5T3B0aW9uKHRlc3REaXJlY3RvclNlbGVjdCk7XG4gICAgfVxuICAgIGNvbnN0IG1hdGNoZWRUZXN0QWRtaW4gPSBwZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IHNoaWZ0LnRlc3RBZG1pbmlzdHJhdG9ySWRcbiAgICApO1xuICAgIGlmIChtYXRjaGVkVGVzdEFkbWluKSB7XG4gICAgICB0ZXN0QWRtaW5TZWxlY3QudmFsdWUgPSBtYXRjaGVkVGVzdEFkbWluLm5hbWU7XG4gICAgICBET01HZW5lcmljLnJlbW92ZUZpcnN0RW1wdHlPcHRpb24odGVzdEFkbWluU2VsZWN0KTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hlZFJvYm90T3BlcmF0b3IgPSBwZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IHNoaWZ0LnJvYm90T3BlcmF0b3JJZFxuICAgICk7XG4gICAgaWYgKG1hdGNoZWRSb2JvdE9wZXJhdG9yKSB7XG4gICAgICByb2JvdE9wZXJhdG9yU2VsZWN0LnZhbHVlID0gbWF0Y2hlZFJvYm90T3BlcmF0b3IubmFtZTtcbiAgICAgIERPTUdlbmVyaWMucmVtb3ZlRmlyc3RFbXB0eU9wdGlvbihyb2JvdE9wZXJhdG9yU2VsZWN0KTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hlZFNhZmV0eU9mZmljZXIgPSBwZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IHNoaWZ0LnNhZmV0eU9mZmljZXJJZFxuICAgICk7XG4gICAgaWYgKG1hdGNoZWRTYWZldHlPZmZpY2VyKSB7XG4gICAgICBzYWZldHlPZmZpY2VyU2VsZWN0LnZhbHVlID0gbWF0Y2hlZFNhZmV0eU9mZmljZXIubmFtZTtcbiAgICAgIERPTUdlbmVyaWMucmVtb3ZlRmlyc3RFbXB0eU9wdGlvbihzYWZldHlPZmZpY2VyU2VsZWN0KTtcbiAgICB9XG4gICAgY29uc3QgbWF0Y2hlZFZlaGljbGUgPSB2ZWhpY2xlTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5pZCA9PSBzaGlmdC52ZWhpY2xlSWRcbiAgICApO1xuICAgIGlmIChtYXRjaGVkVmVoaWNsZSkge1xuICAgICAgdmVoaWNsZVNlbGVjdC52YWx1ZSA9IG1hdGNoZWRWZWhpY2xlLnNob3J0RGVzY3JpcHRpb247XG4gICAgICBET01HZW5lcmljLnJlbW92ZUZpcnN0RW1wdHlPcHRpb24odmVoaWNsZVNlbGVjdCk7XG4gICAgfVxuICAgIC8vRmlsbCBpbnB1dCBmaWVsZHMgd2l0aCBzaGlmdCBkYXRhLlxuICAgIHRlc3RJbnRlbnRJbnB1dC52YWx1ZSA9IHNoaWZ0LnRlc3RJbnRlbnQ7XG4gICAgd29ya3NwYWNlSW5wdXQudmFsdWUgPSBzaGlmdC53b3Jrc3BhY2U7XG4gICAgbm90ZVRleHQudmFsdWUgPSBzaGlmdC5ub3RlO1xuICAgIC8vU2V0IGNoYW5nZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgcGVyZm9ybWVyU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNoYW5nZVwiLFxuICAgICAgdGhpcy5zaGlmdERhdGFDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0ZXN0RGlyZWN0b3JTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2hhbmdlXCIsXG4gICAgICB0aGlzLnNoaWZ0RGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHRlc3RBZG1pblNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjaGFuZ2VcIixcbiAgICAgIHRoaXMuc2hpZnREYXRhQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgcm9ib3RPcGVyYXRvclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjaGFuZ2VcIixcbiAgICAgIHRoaXMuc2hpZnREYXRhQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgc2FmZXR5T2ZmaWNlclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjaGFuZ2VcIixcbiAgICAgIHRoaXMuc2hpZnREYXRhQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgdGVzdEludGVudElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLnNoaWZ0RGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHdvcmtzcGFjZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLnNoaWZ0RGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIHZlaGljbGVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2hhbmdlXCIsXG4gICAgICB0aGlzLnNoaWZ0RGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIG5vdGVUZXh0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLnNoaWZ0RGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIC8vUmVnaXN0ZXIgdXBkYXRlIGJ1dHRvbiBoYW5kbGVyLlxuICAgIHRoaXMuZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnVwZGF0ZURhdGFCdG5IYW5kbGVyLmJpbmQodGhpcykpO1xuICB9XG5cbiAgc2hpZnREYXRhQ2hhbmdlZEhhbmRsZXIoKSB7XG4gICAgLy9BY3RpdmF0ZSB1cGRhdGUgYnV0dG9uLlxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIikuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZURhdGFCdG5IYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvL0dldCBkYXRhIHRvIHVwZGF0ZS5cbiAgICBjb25zdCB0ZXN0QWRtaW5pc3RyYXRvcklkID0gdGhpcy5wZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5Lm5hbWUgPT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXN0LWFkbWluXCIpLnZhbHVlXG4gICAgKS5pZDtcbiAgICBjb25zdCB0ZXN0RGlyZWN0b3JJZCA9IHRoaXMucGVyc29ubmVsTGlzdC5maW5kKFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeS5uYW1lID09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVzdC1kaXJlY3RvclwiKS52YWx1ZVxuICAgICkuaWQ7XG4gICAgY29uc3Qgc2FmZXR5T2ZmaWNlcklkID0gdGhpcy5wZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5Lm5hbWUgPT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzYWZldHktb2ZmaWNlclwiKS52YWx1ZVxuICAgICkuaWQ7XG4gICAgY29uc3Qgcm9ib3RPcGVyYXRvcklkID0gdGhpcy5wZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5Lm5hbWUgPT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyb2JvdC1vcGVyYXRvclwiKS52YWx1ZVxuICAgICkuaWQ7XG4gICAgY29uc3QgcGVyZm9ybWVyID0gdGhpcy5wZXJmb3JtZXJMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+IGVudHJ5Lmluc3RpdHV0aW9uID09IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicGVyZm9ybWVyXCIpLnZhbHVlXG4gICAgKS5pZDtcbiAgICBjb25zdCB0ZXN0SW50ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXN0LWludGVudFwiKS52YWx1ZS5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKTtcbiAgICBjb25zdCB3b3Jrc3BhY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndvcmtzcGFjZVwiKS52YWx1ZS5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKTtcbiAgICBjb25zdCB2ZWhpY2xlSWQgPSB0aGlzLnZlaGljbGVMaXN0LmZpbmQoXG4gICAgICAoZW50cnkpID0+XG4gICAgICAgIGVudHJ5LnNob3J0RGVzY3JpcHRpb24gPT0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2ZWhpY2xlXCIpLnZhbHVlXG4gICAgKS5pZDtcbiAgICBjb25zdCBub3RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaGlmdC1ub3RlXCIpLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpO1xuICAgIC8vU2VuZCBwdXQgcmVxdWVzdC5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy5zaGlmdEludGVyZmFjZS5wdXQoXG4gICAgICAgIHRoaXMuc2hpZnQuaWQsXG4gICAgICAgIFwiZWRpdFwiLFxuICAgICAgICB0ZXN0QWRtaW5pc3RyYXRvcklkLFxuICAgICAgICB0ZXN0RGlyZWN0b3JJZCxcbiAgICAgICAgc2FmZXR5T2ZmaWNlcklkLFxuICAgICAgICByb2JvdE9wZXJhdG9ySWQsXG4gICAgICAgIHBlcmZvcm1lcixcbiAgICAgICAgdGVzdEludGVudCxcbiAgICAgICAgd29ya3NwYWNlLFxuICAgICAgICB2ZWhpY2xlSWQsXG4gICAgICAgIG5vdGVcbiAgICAgICk7XG4gICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm0gYnV0dG9uXCIpLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgYWxlcnQoZXJyb3IubWVzc2FnZSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/overlays/ShiftEdit.js\n");

/***/ }),

/***/ "./src/overlays/TestEventEdit.js":
/*!***************************************!*\
  !*** ./src/overlays/TestEventEdit.js ***!
  \***************************************/
/*! exports provided: TestEventEdit */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TestEventEdit\", function() { return TestEventEdit; });\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/* harmony import */ var _utility_TimeZone_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utility/TimeZone.js */ \"./src/utility/TimeZone.js\");\n/* eslint-disable no-control-regex */\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n\n//Structure and logic of the test event edition UI.\nclass TestEventEdit {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor(testEvent, testEventInterface) {\n    //Set arguments as properties.\n    this.testEvent = testEvent;\n    this.testEventInterface = testEventInterface;\n    //Import and build test event edition node.\n    const templateEl = document.getElementById(\"edit-test-event-template\");\n    this.element = document.importNode(templateEl.content, true);\n\n    //=============================== HEADER ===============================\n    //Set title, start and end time.\n    this.element.querySelector(\"header h2 span:last-of-type\").textContent =\n      testEvent.id;\n    this.element.querySelector(\n      \"header p:first-of-type span:last-of-type\"\n    ).textContent = new Date(testEvent.startTime * 1000).toISOString();\n    if (testEvent.endTime) {\n      this.element.querySelector(\n        \"header p:last-of-type span:last-of-type\"\n      ).textContent = new Date(testEvent.endTime * 1000).toISOString();\n    }\n\n    //============================ DATA SECTION ============================\n    //Reach to test event info data elements.\n    const locationInput = this.element.getElementById(\"location\");\n    const versionInput = this.element.getElementById(\"version\");\n    const timeZoneSelect = this.element.getElementById(\"time-zone\");\n    const noteText = this.element.getElementById(\"test-event-note\");\n    //Populate time zone select.\n    const timeZoneList = _utility_TimeZone_js__WEBPACK_IMPORTED_MODULE_1__[\"timeZoneUTC\"].map((timeZone) => timeZone.label);\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(timeZoneSelect, timeZoneList);\n    //Focus matching option in the select with the time zone in the test event object.\n    const matchedTimeZoneIdx = timeZoneList.findIndex(\n      (entry) => entry == testEvent.timeZone\n    );\n    if (matchedTimeZoneIdx > -1) {\n      timeZoneSelect.value = timeZoneList[matchedTimeZoneIdx];\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(timeZoneSelect);\n    }\n    //Fill input fields with test event data.\n    locationInput.value = testEvent.location;\n    versionInput.value = testEvent.version;\n    noteText.value = testEvent.note;\n    //Set change event listeners.\n    locationInput.addEventListener(\n      \"input\",\n      this.testEventDataChangedHandler.bind(this)\n    );\n    versionInput.addEventListener(\n      \"input\",\n      this.testEventDataChangedHandler.bind(this)\n    );\n    timeZoneSelect.addEventListener(\n      \"change\",\n      this.testEventDataChangedHandler.bind(this)\n    );\n    noteText.addEventListener(\n      \"input\",\n      this.testEventDataChangedHandler.bind(this)\n    );\n    //Register update button handler.\n    this.element\n      .querySelector(\"form button\")\n      .addEventListener(\"click\", this.updateDataBtnHandler.bind(this));\n  }\n\n  testEventDataChangedHandler() {\n    //Activate update button.\n    this.element.querySelector(\"form button\").disabled = false;\n  }\n\n  async updateDataBtnHandler(event) {\n    event.preventDefault();\n    //Get data to update.\n    const location = document.getElementById(\"location\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const version = document.getElementById(\"version\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    const timeZone = document.getElementById(\"time-zone\").value;\n    const note = document.getElementById(\"test-event-note\").value.replace(/[^\\x00-\\x7F]/g, \"\");\n    //Send put request.\n    try {\n      await this.testEventInterface.put(\n        this.testEvent.id,\n        \"edit\",\n        location,\n        version,\n        timeZone,\n        note\n      );\n      this.element.querySelector(\"form button\").disabled = true;\n    } catch (error) {\n      alert(error.message);\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvVGVzdEV2ZW50RWRpdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9vdmVybGF5cy9UZXN0RXZlbnRFZGl0LmpzPzA3OTgiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tY29udHJvbC1yZWdleCAqL1xuLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbmltcG9ydCB7IERPTUdlbmVyaWMgfSBmcm9tIFwiLi4vdXRpbGl0eS9ET01HZW5lcmljLmpzXCI7XG5pbXBvcnQgeyB0aW1lWm9uZVVUQyB9IGZyb20gXCIuLi91dGlsaXR5L1RpbWVab25lLmpzXCI7XG5cbi8vU3RydWN0dXJlIGFuZCBsb2dpYyBvZiB0aGUgdGVzdCBldmVudCBlZGl0aW9uIFVJLlxuZXhwb3J0IGNsYXNzIFRlc3RFdmVudEVkaXQge1xuICAvL1RoaXMgY2xhc3MgaXMgYmFzZWQgb24gYSB0ZW1wbGF0ZSB0aGF0IGl0IGxhdGVyIGdvaW5nIHRvIGJlIGFkZGVkIHRvIGFub3RoZXIgRE9NIE5vZGUuXG4gIC8vVGhlcmVmb3JlLCBubyBET00gcmVmZXJlbmNlcyBhcmUga2VwdCBhcyBwcm9wZXJ0aWVzLlxuICBjb25zdHJ1Y3Rvcih0ZXN0RXZlbnQsIHRlc3RFdmVudEludGVyZmFjZSkge1xuICAgIC8vU2V0IGFyZ3VtZW50cyBhcyBwcm9wZXJ0aWVzLlxuICAgIHRoaXMudGVzdEV2ZW50ID0gdGVzdEV2ZW50O1xuICAgIHRoaXMudGVzdEV2ZW50SW50ZXJmYWNlID0gdGVzdEV2ZW50SW50ZXJmYWNlO1xuICAgIC8vSW1wb3J0IGFuZCBidWlsZCB0ZXN0IGV2ZW50IGVkaXRpb24gbm9kZS5cbiAgICBjb25zdCB0ZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXRlc3QtZXZlbnQtdGVtcGxhdGVcIik7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZUVsLmNvbnRlbnQsIHRydWUpO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEhFQURFUiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy9TZXQgdGl0bGUsIHN0YXJ0IGFuZCBlbmQgdGltZS5cbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcImhlYWRlciBoMiBzcGFuOmxhc3Qtb2YtdHlwZVwiKS50ZXh0Q29udGVudCA9XG4gICAgICB0ZXN0RXZlbnQuaWQ7XG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcImhlYWRlciBwOmZpcnN0LW9mLXR5cGUgc3BhbjpsYXN0LW9mLXR5cGVcIlxuICAgICkudGV4dENvbnRlbnQgPSBuZXcgRGF0ZSh0ZXN0RXZlbnQuc3RhcnRUaW1lICogMTAwMCkudG9JU09TdHJpbmcoKTtcbiAgICBpZiAodGVzdEV2ZW50LmVuZFRpbWUpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBcImhlYWRlciBwOmxhc3Qtb2YtdHlwZSBzcGFuOmxhc3Qtb2YtdHlwZVwiXG4gICAgICApLnRleHRDb250ZW50ID0gbmV3IERhdGUodGVzdEV2ZW50LmVuZFRpbWUgKiAxMDAwKS50b0lTT1N0cmluZygpO1xuICAgIH1cblxuICAgIC8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PSBEQVRBIFNFQ1RJT04gPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8vUmVhY2ggdG8gdGVzdCBldmVudCBpbmZvIGRhdGEgZWxlbWVudHMuXG4gICAgY29uc3QgbG9jYXRpb25JbnB1dCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcImxvY2F0aW9uXCIpO1xuICAgIGNvbnN0IHZlcnNpb25JbnB1dCA9IHRoaXMuZWxlbWVudC5nZXRFbGVtZW50QnlJZChcInZlcnNpb25cIik7XG4gICAgY29uc3QgdGltZVpvbmVTZWxlY3QgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lLXpvbmVcIik7XG4gICAgY29uc3Qgbm90ZVRleHQgPSB0aGlzLmVsZW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0ZXN0LWV2ZW50LW5vdGVcIik7XG4gICAgLy9Qb3B1bGF0ZSB0aW1lIHpvbmUgc2VsZWN0LlxuICAgIGNvbnN0IHRpbWVab25lTGlzdCA9IHRpbWVab25lVVRDLm1hcCgodGltZVpvbmUpID0+IHRpbWVab25lLmxhYmVsKTtcbiAgICBET01HZW5lcmljLnBvcHVsYXRlU2VsZWN0KHRpbWVab25lU2VsZWN0LCB0aW1lWm9uZUxpc3QpO1xuICAgIC8vRm9jdXMgbWF0Y2hpbmcgb3B0aW9uIGluIHRoZSBzZWxlY3Qgd2l0aCB0aGUgdGltZSB6b25lIGluIHRoZSB0ZXN0IGV2ZW50IG9iamVjdC5cbiAgICBjb25zdCBtYXRjaGVkVGltZVpvbmVJZHggPSB0aW1lWm9uZUxpc3QuZmluZEluZGV4KFxuICAgICAgKGVudHJ5KSA9PiBlbnRyeSA9PSB0ZXN0RXZlbnQudGltZVpvbmVcbiAgICApO1xuICAgIGlmIChtYXRjaGVkVGltZVpvbmVJZHggPiAtMSkge1xuICAgICAgdGltZVpvbmVTZWxlY3QudmFsdWUgPSB0aW1lWm9uZUxpc3RbbWF0Y2hlZFRpbWVab25lSWR4XTtcbiAgICAgIERPTUdlbmVyaWMucmVtb3ZlRmlyc3RFbXB0eU9wdGlvbih0aW1lWm9uZVNlbGVjdCk7XG4gICAgfVxuICAgIC8vRmlsbCBpbnB1dCBmaWVsZHMgd2l0aCB0ZXN0IGV2ZW50IGRhdGEuXG4gICAgbG9jYXRpb25JbnB1dC52YWx1ZSA9IHRlc3RFdmVudC5sb2NhdGlvbjtcbiAgICB2ZXJzaW9uSW5wdXQudmFsdWUgPSB0ZXN0RXZlbnQudmVyc2lvbjtcbiAgICBub3RlVGV4dC52YWx1ZSA9IHRlc3RFdmVudC5ub3RlO1xuICAgIC8vU2V0IGNoYW5nZSBldmVudCBsaXN0ZW5lcnMuXG4gICAgbG9jYXRpb25JbnB1dC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJpbnB1dFwiLFxuICAgICAgdGhpcy50ZXN0RXZlbnREYXRhQ2hhbmdlZEhhbmRsZXIuYmluZCh0aGlzKVxuICAgICk7XG4gICAgdmVyc2lvbklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLnRlc3RFdmVudERhdGFDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICB0aW1lWm9uZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgXCJjaGFuZ2VcIixcbiAgICAgIHRoaXMudGVzdEV2ZW50RGF0YUNoYW5nZWRIYW5kbGVyLmJpbmQodGhpcylcbiAgICApO1xuICAgIG5vdGVUZXh0LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImlucHV0XCIsXG4gICAgICB0aGlzLnRlc3RFdmVudERhdGFDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpXG4gICAgKTtcbiAgICAvL1JlZ2lzdGVyIHVwZGF0ZSBidXR0b24gaGFuZGxlci5cbiAgICB0aGlzLmVsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy51cGRhdGVEYXRhQnRuSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHRlc3RFdmVudERhdGFDaGFuZ2VkSGFuZGxlcigpIHtcbiAgICAvL0FjdGl2YXRlIHVwZGF0ZSBidXR0b24uXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtIGJ1dHRvblwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlRGF0YUJ0bkhhbmRsZXIoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIC8vR2V0IGRhdGEgdG8gdXBkYXRlLlxuICAgIGNvbnN0IGxvY2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2NhdGlvblwiKS52YWx1ZS5yZXBsYWNlKC9bXlxceDAwLVxceDdGXS9nLCBcIlwiKTtcbiAgICBjb25zdCB2ZXJzaW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ2ZXJzaW9uXCIpLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpO1xuICAgIGNvbnN0IHRpbWVab25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lLXpvbmVcIikudmFsdWU7XG4gICAgY29uc3Qgbm90ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVzdC1ldmVudC1ub3RlXCIpLnZhbHVlLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiXCIpO1xuICAgIC8vU2VuZCBwdXQgcmVxdWVzdC5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgdGhpcy50ZXN0RXZlbnRJbnRlcmZhY2UucHV0KFxuICAgICAgICB0aGlzLnRlc3RFdmVudC5pZCxcbiAgICAgICAgXCJlZGl0XCIsXG4gICAgICAgIGxvY2F0aW9uLFxuICAgICAgICB2ZXJzaW9uLFxuICAgICAgICB0aW1lWm9uZSxcbiAgICAgICAgbm90ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiZm9ybSBidXR0b25cIikuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBhbGVydChlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/overlays/TestEventEdit.js\n");

/***/ }),

/***/ "./src/overlays/UserSelect.js":
/*!************************************!*\
  !*** ./src/overlays/UserSelect.js ***!
  \************************************/
/*! exports provided: UserSelect */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UserSelect\", function() { return UserSelect; });\n/* harmony import */ var _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utility/DOMGeneric.js */ \"./src/utility/DOMGeneric.js\");\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n\n\n//Structure and logic of the user select UI.\nclass UserSelect {\n  //This class is based on a template that it later going to be added to another DOM Node.\n  //Therefore, no DOM references are kept as properties.\n  constructor(currentUser, personnelList) {\n    //Set arguments as properties.\n    this.currentUser = currentUser;\n    this.personnelList = personnelList;\n    //Import and build user select node.\n    const templateEl = document.getElementById(\"select-user-template\");\n    this.element = document.importNode(templateEl.content, true);\n\n    //============================ DATA SECTION ============================\n    //Reach to user select.\n    const userSelect = this.element.getElementById(\"user\");\n    //Populate select.\n    _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].populateSelect(\n      userSelect,\n      personnelList.map(\n        (entry) => `${entry.id}.- ${entry.name} - ${entry.institution}`\n      )\n    );\n    //Focus matching option on the select with the current user.\n    const matchedUserIdx = personnelList.findIndex(\n      (entry) => entry.id == currentUser.id\n    );\n    if (matchedUserIdx > -1) {\n      _utility_DOMGeneric_js__WEBPACK_IMPORTED_MODULE_0__[\"DOMGeneric\"].removeFirstEmptyOption(userSelect);\n      userSelect.value = userSelect.children[matchedUserIdx].value;\n    }\n    //Set change event listeners.\n    userSelect.addEventListener(\"change\", this.userChangedHandler.bind(this));\n  }\n\n  userChangedHandler() {\n    //Get select value.\n    const selectedUser = document.getElementById(\"user\").value;\n    //Find the entry in the personnel list and assign their values to the current user object.\n    Object.assign(\n      this.currentUser,\n      this.personnelList.find(\n        (entry) =>\n          selectedUser === `${entry.id}.- ${entry.name} - ${entry.institution}`\n      )\n    );\n    document.getElementById(\"modal-close-btn\").click();\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvb3ZlcmxheXMvVXNlclNlbGVjdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9vdmVybGF5cy9Vc2VyU2VsZWN0LmpzPzRlN2YiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbmltcG9ydCB7IERPTUdlbmVyaWMgfSBmcm9tIFwiLi4vdXRpbGl0eS9ET01HZW5lcmljLmpzXCI7XG5cbi8vU3RydWN0dXJlIGFuZCBsb2dpYyBvZiB0aGUgdXNlciBzZWxlY3QgVUkuXG5leHBvcnQgY2xhc3MgVXNlclNlbGVjdCB7XG4gIC8vVGhpcyBjbGFzcyBpcyBiYXNlZCBvbiBhIHRlbXBsYXRlIHRoYXQgaXQgbGF0ZXIgZ29pbmcgdG8gYmUgYWRkZWQgdG8gYW5vdGhlciBET00gTm9kZS5cbiAgLy9UaGVyZWZvcmUsIG5vIERPTSByZWZlcmVuY2VzIGFyZSBrZXB0IGFzIHByb3BlcnRpZXMuXG4gIGNvbnN0cnVjdG9yKGN1cnJlbnRVc2VyLCBwZXJzb25uZWxMaXN0KSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuICAgIHRoaXMucGVyc29ubmVsTGlzdCA9IHBlcnNvbm5lbExpc3Q7XG4gICAgLy9JbXBvcnQgYW5kIGJ1aWxkIHVzZXIgc2VsZWN0IG5vZGUuXG4gICAgY29uc3QgdGVtcGxhdGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2VsZWN0LXVzZXItdGVtcGxhdGVcIik7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZUVsLmNvbnRlbnQsIHRydWUpO1xuXG4gICAgLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09IERBVEEgU0VDVElPTiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLy9SZWFjaCB0byB1c2VyIHNlbGVjdC5cbiAgICBjb25zdCB1c2VyU2VsZWN0ID0gdGhpcy5lbGVtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlclwiKTtcbiAgICAvL1BvcHVsYXRlIHNlbGVjdC5cbiAgICBET01HZW5lcmljLnBvcHVsYXRlU2VsZWN0KFxuICAgICAgdXNlclNlbGVjdCxcbiAgICAgIHBlcnNvbm5lbExpc3QubWFwKFxuICAgICAgICAoZW50cnkpID0+IGAke2VudHJ5LmlkfS4tICR7ZW50cnkubmFtZX0gLSAke2VudHJ5Lmluc3RpdHV0aW9ufWBcbiAgICAgIClcbiAgICApO1xuICAgIC8vRm9jdXMgbWF0Y2hpbmcgb3B0aW9uIG9uIHRoZSBzZWxlY3Qgd2l0aCB0aGUgY3VycmVudCB1c2VyLlxuICAgIGNvbnN0IG1hdGNoZWRVc2VySWR4ID0gcGVyc29ubmVsTGlzdC5maW5kSW5kZXgoXG4gICAgICAoZW50cnkpID0+IGVudHJ5LmlkID09IGN1cnJlbnRVc2VyLmlkXG4gICAgKTtcbiAgICBpZiAobWF0Y2hlZFVzZXJJZHggPiAtMSkge1xuICAgICAgRE9NR2VuZXJpYy5yZW1vdmVGaXJzdEVtcHR5T3B0aW9uKHVzZXJTZWxlY3QpO1xuICAgICAgdXNlclNlbGVjdC52YWx1ZSA9IHVzZXJTZWxlY3QuY2hpbGRyZW5bbWF0Y2hlZFVzZXJJZHhdLnZhbHVlO1xuICAgIH1cbiAgICAvL1NldCBjaGFuZ2UgZXZlbnQgbGlzdGVuZXJzLlxuICAgIHVzZXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLnVzZXJDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIHVzZXJDaGFuZ2VkSGFuZGxlcigpIHtcbiAgICAvL0dldCBzZWxlY3QgdmFsdWUuXG4gICAgY29uc3Qgc2VsZWN0ZWRVc2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyXCIpLnZhbHVlO1xuICAgIC8vRmluZCB0aGUgZW50cnkgaW4gdGhlIHBlcnNvbm5lbCBsaXN0IGFuZCBhc3NpZ24gdGhlaXIgdmFsdWVzIHRvIHRoZSBjdXJyZW50IHVzZXIgb2JqZWN0LlxuICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICB0aGlzLmN1cnJlbnRVc2VyLFxuICAgICAgdGhpcy5wZXJzb25uZWxMaXN0LmZpbmQoXG4gICAgICAgIChlbnRyeSkgPT5cbiAgICAgICAgICBzZWxlY3RlZFVzZXIgPT09IGAke2VudHJ5LmlkfS4tICR7ZW50cnkubmFtZX0gLSAke2VudHJ5Lmluc3RpdHV0aW9ufWBcbiAgICAgIClcbiAgICApO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibW9kYWwtY2xvc2UtYnRuXCIpLmNsaWNrKCk7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/overlays/UserSelect.js\n");

/***/ }),

/***/ "./src/utility/ConfirmationModal.js":
/*!******************************************!*\
  !*** ./src/utility/ConfirmationModal.js ***!
  \******************************************/
/*! exports provided: ConfirmationModal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ConfirmationModal\", function() { return ConfirmationModal; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Common class for displaying overlays.\nclass ConfirmationModal {\n  constructor(title, htmlMessage, fallbackText, confirmCallbackFunction) {\n    this.fallbackText = fallbackText;\n    this.visible = false;\n    //Import and build modal node.\n    const modalTemplateEl = document.getElementById(\n      \"confirmation-modal-template\"\n    );\n    const modalElements = document.importNode(modalTemplateEl.content, true);\n    //Write message to modal.\n    this.modalElement = modalElements.querySelector(\".modal\");\n    this.modalElement.querySelector(\".modal__title\").firstElementChild.innerHTML = title;\n    this.modalElement.querySelector(\"p\").innerHTML = htmlMessage;\n    //Select modal element and assign transitionend listener to close it\n    this.modalElement.addEventListener(\"transitionend\", this.close.bind(this));\n    //Select backdrop and assign click listener to close it.\n    this.backdropElement = modalElements.querySelector(\".backdrop\");\n    this.backdropElement.addEventListener(\"click\", this.hide.bind(this));\n    //Select confirm button and assign click listener to execute the callback (then hide the modal).\n    modalElements\n      .getElementById(\"modal-confirm-btn\")\n      .addEventListener(\"click\", () => {\n        confirmCallbackFunction();\n        this.hide();\n      });\n    //Select close button and assign click listener to close it.\n    modalElements\n      .getElementById(\"modal-cancel-btn\")\n      .addEventListener(\"click\", this.hide.bind(this));\n  }\n\n  show() {\n    //Check template support\n    if (\"content\" in document.createElement(\"template\")) {\n      //Render modal and backdrop\n      document.body.insertAdjacentElement(\"afterbegin\", this.modalElement);\n      document.body.insertAdjacentElement(\"afterbegin\", this.backdropElement);\n      //scroll page to align with the top of the modal\n      this.modalElement.scrollIntoView({ behavior: \"smooth\" });\n      //Record visibility status\n      this.visible = true;\n      //Add show class to make visible\n      this.modalElement.classList.add(\"show\");\n    } else {\n      //Alert fallback text\n      alert(this.fallbackText);\n    }\n  }\n\n  hide() {\n    //Record visibility status\n    this.visible = false;\n    //Remove show class to make it disappear\n    this.modalElement.classList.remove(\"show\");\n  }\n\n  close() {\n    //Workaround to prevent \"transitionend\" trigger when showing\n    if (this.visible) {\n      return;\n    }\n    if (this.modalElement) {\n      //Delete modal and backdrop\n      document.body.removeChild(this.modalElement);\n      document.body.removeChild(this.backdropElement);\n      this.modalElement = null;\n      this.backdropElement = null;\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9Db25maXJtYXRpb25Nb2RhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlsaXR5L0NvbmZpcm1hdGlvbk1vZGFsLmpzPzUyMDQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vQ29tbW9uIGNsYXNzIGZvciBkaXNwbGF5aW5nIG92ZXJsYXlzLlxuZXhwb3J0IGNsYXNzIENvbmZpcm1hdGlvbk1vZGFsIHtcbiAgY29uc3RydWN0b3IodGl0bGUsIGh0bWxNZXNzYWdlLCBmYWxsYmFja1RleHQsIGNvbmZpcm1DYWxsYmFja0Z1bmN0aW9uKSB7XG4gICAgdGhpcy5mYWxsYmFja1RleHQgPSBmYWxsYmFja1RleHQ7XG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XG4gICAgLy9JbXBvcnQgYW5kIGJ1aWxkIG1vZGFsIG5vZGUuXG4gICAgY29uc3QgbW9kYWxUZW1wbGF0ZUVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcImNvbmZpcm1hdGlvbi1tb2RhbC10ZW1wbGF0ZVwiXG4gICAgKTtcbiAgICBjb25zdCBtb2RhbEVsZW1lbnRzID0gZG9jdW1lbnQuaW1wb3J0Tm9kZShtb2RhbFRlbXBsYXRlRWwuY29udGVudCwgdHJ1ZSk7XG4gICAgLy9Xcml0ZSBtZXNzYWdlIHRvIG1vZGFsLlxuICAgIHRoaXMubW9kYWxFbGVtZW50ID0gbW9kYWxFbGVtZW50cy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xuICAgIHRoaXMubW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlXCIpLmZpcnN0RWxlbWVudENoaWxkLmlubmVySFRNTCA9IHRpdGxlO1xuICAgIHRoaXMubW9kYWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJwXCIpLmlubmVySFRNTCA9IGh0bWxNZXNzYWdlO1xuICAgIC8vU2VsZWN0IG1vZGFsIGVsZW1lbnQgYW5kIGFzc2lnbiB0cmFuc2l0aW9uZW5kIGxpc3RlbmVyIHRvIGNsb3NlIGl0XG4gICAgdGhpcy5tb2RhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRyYW5zaXRpb25lbmRcIiwgdGhpcy5jbG9zZS5iaW5kKHRoaXMpKTtcbiAgICAvL1NlbGVjdCBiYWNrZHJvcCBhbmQgYXNzaWduIGNsaWNrIGxpc3RlbmVyIHRvIGNsb3NlIGl0LlxuICAgIHRoaXMuYmFja2Ryb3BFbGVtZW50ID0gbW9kYWxFbGVtZW50cy5xdWVyeVNlbGVjdG9yKFwiLmJhY2tkcm9wXCIpO1xuICAgIHRoaXMuYmFja2Ryb3BFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhpZGUuYmluZCh0aGlzKSk7XG4gICAgLy9TZWxlY3QgY29uZmlybSBidXR0b24gYW5kIGFzc2lnbiBjbGljayBsaXN0ZW5lciB0byBleGVjdXRlIHRoZSBjYWxsYmFjayAodGhlbiBoaWRlIHRoZSBtb2RhbCkuXG4gICAgbW9kYWxFbGVtZW50c1xuICAgICAgLmdldEVsZW1lbnRCeUlkKFwibW9kYWwtY29uZmlybS1idG5cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25maXJtQ2FsbGJhY2tGdW5jdGlvbigpO1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgIH0pO1xuICAgIC8vU2VsZWN0IGNsb3NlIGJ1dHRvbiBhbmQgYXNzaWduIGNsaWNrIGxpc3RlbmVyIHRvIGNsb3NlIGl0LlxuICAgIG1vZGFsRWxlbWVudHNcbiAgICAgIC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLWNhbmNlbC1idG5cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oaWRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgc2hvdygpIHtcbiAgICAvL0NoZWNrIHRlbXBsYXRlIHN1cHBvcnRcbiAgICBpZiAoXCJjb250ZW50XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpKSB7XG4gICAgICAvL1JlbmRlciBtb2RhbCBhbmQgYmFja2Ryb3BcbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCB0aGlzLm1vZGFsRWxlbWVudCk7XG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgdGhpcy5iYWNrZHJvcEVsZW1lbnQpO1xuICAgICAgLy9zY3JvbGwgcGFnZSB0byBhbGlnbiB3aXRoIHRoZSB0b3Agb2YgdGhlIG1vZGFsXG4gICAgICB0aGlzLm1vZGFsRWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICAgICAgLy9SZWNvcmQgdmlzaWJpbGl0eSBzdGF0dXNcbiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XG4gICAgICAvL0FkZCBzaG93IGNsYXNzIHRvIG1ha2UgdmlzaWJsZVxuICAgICAgdGhpcy5tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vQWxlcnQgZmFsbGJhY2sgdGV4dFxuICAgICAgYWxlcnQodGhpcy5mYWxsYmFja1RleHQpO1xuICAgIH1cbiAgfVxuXG4gIGhpZGUoKSB7XG4gICAgLy9SZWNvcmQgdmlzaWJpbGl0eSBzdGF0dXNcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICAvL1JlbW92ZSBzaG93IGNsYXNzIHRvIG1ha2UgaXQgZGlzYXBwZWFyXG4gICAgdGhpcy5tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICAvL1dvcmthcm91bmQgdG8gcHJldmVudCBcInRyYW5zaXRpb25lbmRcIiB0cmlnZ2VyIHdoZW4gc2hvd2luZ1xuICAgIGlmICh0aGlzLnZpc2libGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kYWxFbGVtZW50KSB7XG4gICAgICAvL0RlbGV0ZSBtb2RhbCBhbmQgYmFja2Ryb3BcbiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5tb2RhbEVsZW1lbnQpO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmJhY2tkcm9wRWxlbWVudCk7XG4gICAgICB0aGlzLm1vZGFsRWxlbWVudCA9IG51bGw7XG4gICAgICB0aGlzLmJhY2tkcm9wRWxlbWVudCA9IG51bGw7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utility/ConfirmationModal.js\n");

/***/ }),

/***/ "./src/utility/DOMGeneric.js":
/*!***********************************!*\
  !*** ./src/utility/DOMGeneric.js ***!
  \***********************************/
/*! exports provided: DOMGeneric */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"DOMGeneric\", function() { return DOMGeneric; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//DOMGeneric class for wrapping common interactions with the DOM.\nclass DOMGeneric {\n  static clearChildren(elementRef) {\n    //Remove all html content from the referenced element.\n    elementRef.innerHTML = \"\";\n  }\n\n  static addOption(selectRef, value, elementClass = null) {\n    //Create and add an option to a select, with an optional html class.\n    let opt = document.createElement(\"option\");\n    opt.value = value;\n    opt.innerText = value;\n    if (elementClass) {\n      opt.classList.add(elementClass);\n    }\n    selectRef.appendChild(opt);\n  }\n\n  static removeFirstEmptyOption(selectRef) {\n    //If the first option of a select is empty, remove it.\n    if (selectRef.firstChild.value === \"\") {\n      selectRef.removeChild(selectRef.firstChild);\n    }\n  }\n\n  static populateSelect(selectRef, list, classList = null) {\n    //Add options from a list to a select, with optional classes.\n    //Also adds an empty option at the top.\n    DOMGeneric.clearChildren(selectRef);\n    DOMGeneric.addOption(selectRef, \"\");\n    for (let i = 0; i < list.length; i++) {\n      DOMGeneric.addOption(selectRef, list[i], classList && classList[i]);\n    }\n  }\n\n  static addRow(tableRef, dataList) {\n    //Add a row to a table body with the contents in the dataList array.\n    const newRow = tableRef.insertRow(0);\n    for (const value of dataList) {\n      const newCell = newRow.insertCell();\n      const newText = document.createTextNode(value);\n      newCell.appendChild(newText);\n    }\n  }\n\n  static populateTable(tableRef, dataMatrix) {\n    //Clears table body and and adds all the data from the dataMatrix matrix.\n    DOMGeneric.clearChildren(tableRef);\n    for (const dataList of dataMatrix.reverse()) {\n      DOMGeneric.addRow(tableRef, dataList);\n    }\n  }\n\n  static addImage(elementRef, src, alt, ...extraProperties) {\n    //Adds an image to the provided element.\n    //The extraProperties argument allows for the optional setting of properties to the image element,\n    //they must come in \"propertyName\", \"propertyValue\" pairs.\n    let img = document.createElement(\"img\");\n    img.src = src;\n    img.alt = alt;\n    if (extraProperties) {\n      if (extraProperties.length < 2 || extraProperties.length % 2 != 0) {\n        elementRef.appendChild(img);\n        return -1;\n      }\n      for (let i = 0; i < extraProperties.length; i = i + 2) {\n        img[extraProperties[i]] = extraProperties[i + 1];\n      }\n    }\n    elementRef.appendChild(img);\n  }\n\n  static createMaterialIcon(iconName) {\n    //Creates an icon element and assigns some properties and styling.\n    //The icons are actually inserted from the google material icons, that must be included in the html.\n    const icon = document.createElement(\"i\");\n    icon.className = \"material-icons\";\n    icon.textContent = iconName;\n    icon.style.alignSelf = \"center\";\n    if (iconName === \"clear\") {\n      icon.style.color = \"red\";\n    } else if (iconName === \"done\") {\n      icon.style.color = \"green\";\n    }\n    return icon;\n  }\n\n  static createMaterialIconsContainer(\n    containerTag,\n    containerClass,\n    iconNames,\n    clickCallbacks = null\n  ) {\n    //Creates a container (of the specified type) with as many icons as specified in the iconNames argument.\n    //If specified, also binds a callback function to a \"click\" event on the icon.\n    //Assigns an icon-container html class to the container.\n    //The icons are actually inserted from the google material icons, that must be included in the html.\n    const container = document.createElement(containerTag);\n    container.className = containerClass;\n    iconNames.forEach((iconName, index) => {\n      //Create icon.\n      const icon = DOMGeneric.createMaterialIcon(iconName);\n      //Add click callback.\n      if (clickCallbacks && typeof clickCallbacks[index] === \"function\") {\n        icon.addEventListener(\"click\", clickCallbacks[index]);\n      }\n      //Add icon to container.\n      container.appendChild(icon);\n    });\n    return container;\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9ET01HZW5lcmljLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdHkvRE9NR2VuZXJpYy5qcz9jYjhmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG4vL0RPTUdlbmVyaWMgY2xhc3MgZm9yIHdyYXBwaW5nIGNvbW1vbiBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgRE9NLlxuZXhwb3J0IGNsYXNzIERPTUdlbmVyaWMge1xuICBzdGF0aWMgY2xlYXJDaGlsZHJlbihlbGVtZW50UmVmKSB7XG4gICAgLy9SZW1vdmUgYWxsIGh0bWwgY29udGVudCBmcm9tIHRoZSByZWZlcmVuY2VkIGVsZW1lbnQuXG4gICAgZWxlbWVudFJlZi5pbm5lckhUTUwgPSBcIlwiO1xuICB9XG5cbiAgc3RhdGljIGFkZE9wdGlvbihzZWxlY3RSZWYsIHZhbHVlLCBlbGVtZW50Q2xhc3MgPSBudWxsKSB7XG4gICAgLy9DcmVhdGUgYW5kIGFkZCBhbiBvcHRpb24gdG8gYSBzZWxlY3QsIHdpdGggYW4gb3B0aW9uYWwgaHRtbCBjbGFzcy5cbiAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBvcHQudmFsdWUgPSB2YWx1ZTtcbiAgICBvcHQuaW5uZXJUZXh0ID0gdmFsdWU7XG4gICAgaWYgKGVsZW1lbnRDbGFzcykge1xuICAgICAgb3B0LmNsYXNzTGlzdC5hZGQoZWxlbWVudENsYXNzKTtcbiAgICB9XG4gICAgc2VsZWN0UmVmLmFwcGVuZENoaWxkKG9wdCk7XG4gIH1cblxuICBzdGF0aWMgcmVtb3ZlRmlyc3RFbXB0eU9wdGlvbihzZWxlY3RSZWYpIHtcbiAgICAvL0lmIHRoZSBmaXJzdCBvcHRpb24gb2YgYSBzZWxlY3QgaXMgZW1wdHksIHJlbW92ZSBpdC5cbiAgICBpZiAoc2VsZWN0UmVmLmZpcnN0Q2hpbGQudmFsdWUgPT09IFwiXCIpIHtcbiAgICAgIHNlbGVjdFJlZi5yZW1vdmVDaGlsZChzZWxlY3RSZWYuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHBvcHVsYXRlU2VsZWN0KHNlbGVjdFJlZiwgbGlzdCwgY2xhc3NMaXN0ID0gbnVsbCkge1xuICAgIC8vQWRkIG9wdGlvbnMgZnJvbSBhIGxpc3QgdG8gYSBzZWxlY3QsIHdpdGggb3B0aW9uYWwgY2xhc3Nlcy5cbiAgICAvL0Fsc28gYWRkcyBhbiBlbXB0eSBvcHRpb24gYXQgdGhlIHRvcC5cbiAgICBET01HZW5lcmljLmNsZWFyQ2hpbGRyZW4oc2VsZWN0UmVmKTtcbiAgICBET01HZW5lcmljLmFkZE9wdGlvbihzZWxlY3RSZWYsIFwiXCIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgRE9NR2VuZXJpYy5hZGRPcHRpb24oc2VsZWN0UmVmLCBsaXN0W2ldLCBjbGFzc0xpc3QgJiYgY2xhc3NMaXN0W2ldKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYWRkUm93KHRhYmxlUmVmLCBkYXRhTGlzdCkge1xuICAgIC8vQWRkIGEgcm93IHRvIGEgdGFibGUgYm9keSB3aXRoIHRoZSBjb250ZW50cyBpbiB0aGUgZGF0YUxpc3QgYXJyYXkuXG4gICAgY29uc3QgbmV3Um93ID0gdGFibGVSZWYuaW5zZXJ0Um93KDApO1xuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgZGF0YUxpc3QpIHtcbiAgICAgIGNvbnN0IG5ld0NlbGwgPSBuZXdSb3cuaW5zZXJ0Q2VsbCgpO1xuICAgICAgY29uc3QgbmV3VGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlKTtcbiAgICAgIG5ld0NlbGwuYXBwZW5kQ2hpbGQobmV3VGV4dCk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHBvcHVsYXRlVGFibGUodGFibGVSZWYsIGRhdGFNYXRyaXgpIHtcbiAgICAvL0NsZWFycyB0YWJsZSBib2R5IGFuZCBhbmQgYWRkcyBhbGwgdGhlIGRhdGEgZnJvbSB0aGUgZGF0YU1hdHJpeCBtYXRyaXguXG4gICAgRE9NR2VuZXJpYy5jbGVhckNoaWxkcmVuKHRhYmxlUmVmKTtcbiAgICBmb3IgKGNvbnN0IGRhdGFMaXN0IG9mIGRhdGFNYXRyaXgucmV2ZXJzZSgpKSB7XG4gICAgICBET01HZW5lcmljLmFkZFJvdyh0YWJsZVJlZiwgZGF0YUxpc3QpO1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhZGRJbWFnZShlbGVtZW50UmVmLCBzcmMsIGFsdCwgLi4uZXh0cmFQcm9wZXJ0aWVzKSB7XG4gICAgLy9BZGRzIGFuIGltYWdlIHRvIHRoZSBwcm92aWRlZCBlbGVtZW50LlxuICAgIC8vVGhlIGV4dHJhUHJvcGVydGllcyBhcmd1bWVudCBhbGxvd3MgZm9yIHRoZSBvcHRpb25hbCBzZXR0aW5nIG9mIHByb3BlcnRpZXMgdG8gdGhlIGltYWdlIGVsZW1lbnQsXG4gICAgLy90aGV5IG11c3QgY29tZSBpbiBcInByb3BlcnR5TmFtZVwiLCBcInByb3BlcnR5VmFsdWVcIiBwYWlycy5cbiAgICBsZXQgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBpbWcuc3JjID0gc3JjO1xuICAgIGltZy5hbHQgPSBhbHQ7XG4gICAgaWYgKGV4dHJhUHJvcGVydGllcykge1xuICAgICAgaWYgKGV4dHJhUHJvcGVydGllcy5sZW5ndGggPCAyIHx8IGV4dHJhUHJvcGVydGllcy5sZW5ndGggJSAyICE9IDApIHtcbiAgICAgICAgZWxlbWVudFJlZi5hcHBlbmRDaGlsZChpbWcpO1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4dHJhUHJvcGVydGllcy5sZW5ndGg7IGkgPSBpICsgMikge1xuICAgICAgICBpbWdbZXh0cmFQcm9wZXJ0aWVzW2ldXSA9IGV4dHJhUHJvcGVydGllc1tpICsgMV07XG4gICAgICB9XG4gICAgfVxuICAgIGVsZW1lbnRSZWYuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVNYXRlcmlhbEljb24oaWNvbk5hbWUpIHtcbiAgICAvL0NyZWF0ZXMgYW4gaWNvbiBlbGVtZW50IGFuZCBhc3NpZ25zIHNvbWUgcHJvcGVydGllcyBhbmQgc3R5bGluZy5cbiAgICAvL1RoZSBpY29ucyBhcmUgYWN0dWFsbHkgaW5zZXJ0ZWQgZnJvbSB0aGUgZ29vZ2xlIG1hdGVyaWFsIGljb25zLCB0aGF0IG11c3QgYmUgaW5jbHVkZWQgaW4gdGhlIGh0bWwuXG4gICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpXCIpO1xuICAgIGljb24uY2xhc3NOYW1lID0gXCJtYXRlcmlhbC1pY29uc1wiO1xuICAgIGljb24udGV4dENvbnRlbnQgPSBpY29uTmFtZTtcbiAgICBpY29uLnN0eWxlLmFsaWduU2VsZiA9IFwiY2VudGVyXCI7XG4gICAgaWYgKGljb25OYW1lID09PSBcImNsZWFyXCIpIHtcbiAgICAgIGljb24uc3R5bGUuY29sb3IgPSBcInJlZFwiO1xuICAgIH0gZWxzZSBpZiAoaWNvbk5hbWUgPT09IFwiZG9uZVwiKSB7XG4gICAgICBpY29uLnN0eWxlLmNvbG9yID0gXCJncmVlblwiO1xuICAgIH1cbiAgICByZXR1cm4gaWNvbjtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVNYXRlcmlhbEljb25zQ29udGFpbmVyKFxuICAgIGNvbnRhaW5lclRhZyxcbiAgICBjb250YWluZXJDbGFzcyxcbiAgICBpY29uTmFtZXMsXG4gICAgY2xpY2tDYWxsYmFja3MgPSBudWxsXG4gICkge1xuICAgIC8vQ3JlYXRlcyBhIGNvbnRhaW5lciAob2YgdGhlIHNwZWNpZmllZCB0eXBlKSB3aXRoIGFzIG1hbnkgaWNvbnMgYXMgc3BlY2lmaWVkIGluIHRoZSBpY29uTmFtZXMgYXJndW1lbnQuXG4gICAgLy9JZiBzcGVjaWZpZWQsIGFsc28gYmluZHMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBhIFwiY2xpY2tcIiBldmVudCBvbiB0aGUgaWNvbi5cbiAgICAvL0Fzc2lnbnMgYW4gaWNvbi1jb250YWluZXIgaHRtbCBjbGFzcyB0byB0aGUgY29udGFpbmVyLlxuICAgIC8vVGhlIGljb25zIGFyZSBhY3R1YWxseSBpbnNlcnRlZCBmcm9tIHRoZSBnb29nbGUgbWF0ZXJpYWwgaWNvbnMsIHRoYXQgbXVzdCBiZSBpbmNsdWRlZCBpbiB0aGUgaHRtbC5cbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGNvbnRhaW5lclRhZyk7XG4gICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IGNvbnRhaW5lckNsYXNzO1xuICAgIGljb25OYW1lcy5mb3JFYWNoKChpY29uTmFtZSwgaW5kZXgpID0+IHtcbiAgICAgIC8vQ3JlYXRlIGljb24uXG4gICAgICBjb25zdCBpY29uID0gRE9NR2VuZXJpYy5jcmVhdGVNYXRlcmlhbEljb24oaWNvbk5hbWUpO1xuICAgICAgLy9BZGQgY2xpY2sgY2FsbGJhY2suXG4gICAgICBpZiAoY2xpY2tDYWxsYmFja3MgJiYgdHlwZW9mIGNsaWNrQ2FsbGJhY2tzW2luZGV4XSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrQ2FsbGJhY2tzW2luZGV4XSk7XG4gICAgICB9XG4gICAgICAvL0FkZCBpY29uIHRvIGNvbnRhaW5lci5cbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utility/DOMGeneric.js\n");

/***/ }),

/***/ "./src/utility/LeafletMap.js":
/*!***********************************!*\
  !*** ./src/utility/LeafletMap.js ***!
  \***********************************/
/*! exports provided: LeafletMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LeafletMap\", function() { return LeafletMap; });\n/* harmony import */ var _database_interface_Pose_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../database_interface/Pose.js */ \"./src/database_interface/Pose.js\");\n/* harmony import */ var _database_interface_MapImage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../database_interface/MapImage.js */ \"./src/database_interface/MapImage.js\");\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n/* eslint-disable no-undef */\n\n// Leaflet JS Library:\n// https://github.com/Leaflet/Leaflet/blob/master/LICENSE\n\n//  OpenStreetMap contributors:\n// https://www.openstreetmap.org/copyright.\n// Base map and data from OpenStreetMap and OpenStreetMap Foundation.\n\n\n\n\n//LeafletMap class to wrap map related variables and functions.\nclass LeafletMap {\n  constructor(serverInterface, mapElementName, mapContainerName) {\n    //Set arguments as properties.\n    this.poseInterface = new _database_interface_Pose_js__WEBPACK_IMPORTED_MODULE_0__[\"PoseInterface\"](serverInterface);\n    this.mapImageInterface = new _database_interface_MapImage_js__WEBPACK_IMPORTED_MODULE_1__[\"MapImageInterface\"](serverInterface);\n    //Initialize variables and objects.\n    this.mapPointsLayers = [];\n    this.activeMarker = null;\n    this.activePoses = null;\n    this.leafletMap = L.map(mapElementName);\n    this.changeTileLayer();\n    this.localMapOverlay = null;\n    this.layerControl = null;\n    this.mapImage = null;\n    //Reach to DOM elements.\n    this.mapElementContainer = document.getElementById(mapContainerName);\n    this.mapElement = document.getElementById(mapElementName);\n  }\n\n  changeTileLayer() {\n    //Get the stored config data.\n    let mapData = JSON.parse(localStorage.getItem(\"fttTileServerData\"));\n    //Set default if not found.\n    if (!mapData) {\n      mapData = {\n        url: \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n        minZoom: 0,\n        maxZoom: 19,\n      };\n      //Store data.\n      localStorage.setItem(\"fttTileServerData\", JSON.stringify(mapData));\n    }\n    //Create the tile layer.\n    L.tileLayer(mapData.url, {\n      minZoom: mapData.minZoom,\n      maxZoom: mapData.maxZoom,\n    }).addTo(this.leafletMap);\n    //Set attribution if using OpenStreetMap\n    if (mapData.url.indexOf(\"openstreetmap\") > -1) {\n      this.leafletMap.attributionControl.addAttribution(\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      );\n    } else {\n      this.leafletMap.attributionControl.removeAttribution(\n        '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n      );\n    }\n  }\n\n  async addLocalMap(mapImage, fSegs) {\n    //If there was a local map with the same parameters, update the image and return\n    if (\n      this.localMapOverlay &&\n      this.mapImage.width === mapImage.width &&\n      this.mapImage.height === mapImage.height &&\n      this.mapImage.resolution === mapImage.resolution\n    ) {\n      this.localMapOverlay._rawImage.src = mapImage.imageData;\n      return;\n    }\n    //Check the filtered segment list (segments with both gps and local positions) has enough values\n    if (fSegs.length < 2) {\n      return;\n    }\n    //Assign mapImage data to html image.\n    const image = new Image();\n    image.src = mapImage.imageData;\n    //Estimate differences of lat and lng degrees in meters.\n    //https://en.wikipedia.org/wiki/Geographic_coordinate_system\n    const latMid = ((fSegs[1].lat + fSegs[0].lat) / 2) * (Math.PI / 180);\n    const mPerLat =\n      111132.92 -\n      559.82 * Math.cos(2 * latMid) +\n      1.175 * Math.cos(4 * latMid) -\n      0.0023 * Math.cos(6 * latMid);\n    const mPerLng =\n      111412.84 * Math.cos(latMid) -\n      93.5 * Math.cos(3 * latMid) +\n      0.118 * Math.cos(5 * latMid);\n    //Estimate image rotation with respect to cardinal orientation.\n    const rotation =\n      Math.atan2(\n        (fSegs[1].lat - fSegs[0].lat) * mPerLat,\n        (fSegs[1].lng - fSegs[0].lng) * mPerLng\n      ) -\n      Math.atan2(\n        fSegs[1].local_y - fSegs[0].local_y,\n        fSegs[1].local_x - fSegs[0].local_x\n      );\n    //Get the local coordinates of the top and bottom-left image corners\n    const bottomLeft = {\n      x: mapImage.originX,\n      y: mapImage.originY,\n    };\n    const topLeft = {\n      x: mapImage.originX,\n      y: mapImage.originY + mapImage.height * mapImage.resolution,\n    };\n    const topRight = {\n      x: mapImage.originX + mapImage.width * mapImage.resolution,\n      y: mapImage.originY + mapImage.height * mapImage.resolution,\n    };\n    //Get the rotated distance vectors (in cardinal orientation) between the corners and the first segment's position\n    const bottomLeftRotD = {\n      x:\n        (bottomLeft.x - fSegs[0].local_x) * Math.cos(rotation) -\n        (bottomLeft.y - fSegs[0].local_y) * Math.sin(rotation),\n      y:\n        (bottomLeft.x - fSegs[0].local_x) * Math.sin(rotation) +\n        (bottomLeft.y - fSegs[0].local_y) * Math.cos(rotation),\n    };\n    const topLeftRotD = {\n      x:\n        (topLeft.x - fSegs[0].local_x) * Math.cos(rotation) -\n        (topLeft.y - fSegs[0].local_y) * Math.sin(rotation),\n      y:\n        (topLeft.x - fSegs[0].local_x) * Math.sin(rotation) +\n        (topLeft.y - fSegs[0].local_y) * Math.cos(rotation),\n    };\n    const topRightRotD = {\n      x:\n        (topRight.x - fSegs[0].local_x) * Math.cos(rotation) -\n        (topRight.y - fSegs[0].local_y) * Math.sin(rotation),\n      y:\n        (topRight.x - fSegs[0].local_x) * Math.sin(rotation) +\n        (topRight.y - fSegs[0].local_y) * Math.cos(rotation),\n    };\n    //Get the rotated image corners in lat-lng.\n    const bottomLeftLatLng = L.latLng(\n      fSegs[0].lat + bottomLeftRotD.y / mPerLat,\n      fSegs[0].lng + bottomLeftRotD.x / mPerLng\n    );\n    const topLeftLatLng = L.latLng(\n      fSegs[0].lat + topLeftRotD.y / mPerLat,\n      fSegs[0].lng + topLeftRotD.x / mPerLng\n    );\n    const topRightLatLng = L.latLng(\n      fSegs[0].lat + topRightRotD.y / mPerLat,\n      fSegs[0].lng + topRightRotD.x / mPerLng\n    );\n    //If a different local map was already added, remember if was displayed and then delete it.\n    let displayMap = false;\n    if (this.localMapOverlay) {\n      displayMap = this.leafletMap.hasLayer(this.localMapOverlay);\n      this.removeLocalMap();\n    }\n    //Create the overlay for the rotated image.\n    this.localMapOverlay = L.imageOverlay.rotated(\n      image,\n      topLeftLatLng,\n      topRightLatLng,\n      bottomLeftLatLng,\n      {\n        opacity: 0.4,\n        interactive: true,\n      }\n    );\n    //If a previous map was displayed, add the overlay to the map.\n    if (displayMap) {\n      this.localMapOverlay.addTo(this.leafletMap);\n    }\n    //Create the layer control if there is none.\n    if (!this.layerControl) {\n      this.layerControl = L.control.layers().addTo(this.leafletMap);\n    }\n    //Add the overlay to the layer control\n    this.layerControl.addOverlay(this.localMapOverlay, \"Local Map\");\n    //Save the last mapImage\n    this.mapImage = mapImage;\n  }\n\n  removeLocalMap() {\n    if (this.localMapOverlay) {\n      this.leafletMap.removeLayer(this.localMapOverlay);\n      this.layerControl.removeLayer(this.localMapOverlay);\n      this.localMapOverlay = null;\n      this.mapImage = null;\n    }\n  }\n\n  removeLayerControl() {\n    if (this.layerControl) {\n      this.leafletMap.removeControl(this.layerControl);\n      this.layerControl = null;\n    }\n  }\n\n  removePoses(segmentId) {\n    //Find the map layer with the poses of the specified segment id.\n    const layerIndex = this.mapPointsLayers.findIndex(\n      (entry) => entry.segmentId == segmentId\n    );\n    if (layerIndex > -1) {\n      const layerPosesPtr = this.mapPointsLayers[layerIndex].mapPosesPtr;\n      //Remove the held variable if the found poses were active (selected).\n      if (layerPosesPtr == this.activePoses) {\n        this.activePoses = null;\n      }\n      //Remove the found poses from the map.\n      this.leafletMap.removeLayer(layerPosesPtr);\n      this.mapPointsLayers.splice(layerIndex, 1);\n    }\n  }\n\n  async getAndDrawMapPoses(segmentId, markerColorAuto, markerColorIto, markerAlpha) {\n    let geoJsonData = null;\n    try {\n      //Get geoJSON data from server.\n      geoJsonData = await this.poseInterface.get(segmentId);\n      //Remove any data from the specified segment that was already on the map.\n      this.removePoses(segmentId);\n      if (geoJsonData.features) {\n        //Show map and force tile fetch.\n        if (this.mapElementContainer) {\n          this.mapElementContainer.style.display = \"block\";\n        }\n        this.leafletMap.invalidateSize(true);\n        //Set poses map display options.\n        let markerOptions = {\n          radius: 2,\n          weight: 1,\n          opacity: 1 * markerAlpha,\n          fillOpacity: 0.8 * markerAlpha,\n        };\n        //Sort poses\n        geoJsonData.features.sort((a, b) => a.properties.id - b.properties.id);\n        //Add poses to map, while setting special options and pop-up with data from geoJSON data features.\n        const points = L.geoJSON(geoJsonData, {\n          pointToLayer: function (feature, latlng) {\n            if (feature.properties.type == \"AUTO\") {\n              markerOptions.color = markerColorAuto || \"green\";\n            } else {\n              markerOptions.color = markerColorIto || \"red\";\n            }\n            return L.circleMarker(latlng, markerOptions);\n          },\n          onEachFeature: function (feature, layer) {\n            if (feature.properties && feature.properties.segmentId) {\n              layer.bindPopup(\n                \"<span>Segment \" + feature.properties.segmentId + \"</span>\"\n              );\n            }\n          },\n        }).addTo(this.leafletMap);\n        //Save segment id and pointer to map layer in a list.\n        this.mapPointsLayers.push({\n          segmentId: segmentId,\n          mapPosesPtr: points,\n        });\n      } else {\n        console.log(\"No position data for segment \" + segmentId);\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n    return geoJsonData;\n  }\n\n  removeActiveMarker() {\n    //Remove location marker from map.\n    if (this.activeMarker) {\n      this.leafletMap.removeLayer(this.activeMarker);\n      this.activeMarker = null;\n    }\n  }\n\n  removeActivePoses() {\n    //Restore point coloring.\n    if (this.activePoses) {\n      this.activePoses.eachLayer((layer) => {\n        if (layer.feature.properties.type == \"AUTO\") {\n          layer.setStyle({ color: \"green\" });\n        } else {\n          layer.setStyle({ color: \"red\" });\n        }\n      });\n      this.activePoses = null;\n    }\n  }\n\n  addActiveMarker(lat, lng) {\n    //Add location marker to map.\n    this.activeMarker = L.marker([lat, lng]).addTo(this.leafletMap);\n    if (this.leafletMap.getZoom()) {\n      this.leafletMap.panTo([lat, lng]);\n    } else {\n      console.log(\"Cannot pan Leaflet map before loading it.\");\n    }\n  }\n\n  addActivePoses(segmentId) {\n    //Change point coloring to blue for poses of the associated segment.\n    const selectedPoses = this.mapPointsLayers.find(\n      (poses) => poses.segmentId == segmentId\n    );\n    if (selectedPoses) {\n      this.activePoses = selectedPoses.mapPosesPtr;\n      this.activePoses.setStyle({ color: \"blue\" });\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9MZWFmbGV0TWFwLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxpdHkvTGVhZmxldE1hcC5qcz85MGMzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBDYXJsb3MgVGFtcGllciBDb3RvcmFzIC0gY2FybG9zLnRhbXBpZXIuY290b3Jhc0Bma2llLmZyYXVuaG9mZXIuZGVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjEgLSBGcmF1bmhvZmVyIEZLSUVcbiAqL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuXG4vLyBMZWFmbGV0IEpTIExpYnJhcnk6XG4vLyBodHRwczovL2dpdGh1Yi5jb20vTGVhZmxldC9MZWFmbGV0L2Jsb2IvbWFzdGVyL0xJQ0VOU0VcblxuLy8gwqkgT3BlblN0cmVldE1hcCBjb250cmlidXRvcnM6XG4vLyBodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHQuXG4vLyBCYXNlIG1hcCBhbmQgZGF0YSBmcm9tIE9wZW5TdHJlZXRNYXAgYW5kIE9wZW5TdHJlZXRNYXAgRm91bmRhdGlvbi5cblxuaW1wb3J0IHsgUG9zZUludGVyZmFjZSB9IGZyb20gXCIuLi9kYXRhYmFzZV9pbnRlcmZhY2UvUG9zZS5qc1wiO1xuaW1wb3J0IHsgTWFwSW1hZ2VJbnRlcmZhY2UgfSBmcm9tIFwiLi4vZGF0YWJhc2VfaW50ZXJmYWNlL01hcEltYWdlLmpzXCI7XG5cbi8vTGVhZmxldE1hcCBjbGFzcyB0byB3cmFwIG1hcCByZWxhdGVkIHZhcmlhYmxlcyBhbmQgZnVuY3Rpb25zLlxuZXhwb3J0IGNsYXNzIExlYWZsZXRNYXAge1xuICBjb25zdHJ1Y3RvcihzZXJ2ZXJJbnRlcmZhY2UsIG1hcEVsZW1lbnROYW1lLCBtYXBDb250YWluZXJOYW1lKSB7XG4gICAgLy9TZXQgYXJndW1lbnRzIGFzIHByb3BlcnRpZXMuXG4gICAgdGhpcy5wb3NlSW50ZXJmYWNlID0gbmV3IFBvc2VJbnRlcmZhY2Uoc2VydmVySW50ZXJmYWNlKTtcbiAgICB0aGlzLm1hcEltYWdlSW50ZXJmYWNlID0gbmV3IE1hcEltYWdlSW50ZXJmYWNlKHNlcnZlckludGVyZmFjZSk7XG4gICAgLy9Jbml0aWFsaXplIHZhcmlhYmxlcyBhbmQgb2JqZWN0cy5cbiAgICB0aGlzLm1hcFBvaW50c0xheWVycyA9IFtdO1xuICAgIHRoaXMuYWN0aXZlTWFya2VyID0gbnVsbDtcbiAgICB0aGlzLmFjdGl2ZVBvc2VzID0gbnVsbDtcbiAgICB0aGlzLmxlYWZsZXRNYXAgPSBMLm1hcChtYXBFbGVtZW50TmFtZSk7XG4gICAgdGhpcy5jaGFuZ2VUaWxlTGF5ZXIoKTtcbiAgICB0aGlzLmxvY2FsTWFwT3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5sYXllckNvbnRyb2wgPSBudWxsO1xuICAgIHRoaXMubWFwSW1hZ2UgPSBudWxsO1xuICAgIC8vUmVhY2ggdG8gRE9NIGVsZW1lbnRzLlxuICAgIHRoaXMubWFwRWxlbWVudENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1hcENvbnRhaW5lck5hbWUpO1xuICAgIHRoaXMubWFwRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1hcEVsZW1lbnROYW1lKTtcbiAgfVxuXG4gIGNoYW5nZVRpbGVMYXllcigpIHtcbiAgICAvL0dldCB0aGUgc3RvcmVkIGNvbmZpZyBkYXRhLlxuICAgIGxldCBtYXBEYXRhID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZ0dFRpbGVTZXJ2ZXJEYXRhXCIpKTtcbiAgICAvL1NldCBkZWZhdWx0IGlmIG5vdCBmb3VuZC5cbiAgICBpZiAoIW1hcERhdGEpIHtcbiAgICAgIG1hcERhdGEgPSB7XG4gICAgICAgIHVybDogXCJodHRwczovL2EudGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmdcIixcbiAgICAgICAgbWluWm9vbTogMCxcbiAgICAgICAgbWF4Wm9vbTogMTksXG4gICAgICB9O1xuICAgICAgLy9TdG9yZSBkYXRhLlxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJmdHRUaWxlU2VydmVyRGF0YVwiLCBKU09OLnN0cmluZ2lmeShtYXBEYXRhKSk7XG4gICAgfVxuICAgIC8vQ3JlYXRlIHRoZSB0aWxlIGxheWVyLlxuICAgIEwudGlsZUxheWVyKG1hcERhdGEudXJsLCB7XG4gICAgICBtaW5ab29tOiBtYXBEYXRhLm1pblpvb20sXG4gICAgICBtYXhab29tOiBtYXBEYXRhLm1heFpvb20sXG4gICAgfSkuYWRkVG8odGhpcy5sZWFmbGV0TWFwKTtcbiAgICAvL1NldCBhdHRyaWJ1dGlvbiBpZiB1c2luZyBPcGVuU3RyZWV0TWFwXG4gICAgaWYgKG1hcERhdGEudXJsLmluZGV4T2YoXCJvcGVuc3RyZWV0bWFwXCIpID4gLTEpIHtcbiAgICAgIHRoaXMubGVhZmxldE1hcC5hdHRyaWJ1dGlvbkNvbnRyb2wuYWRkQXR0cmlidXRpb24oXG4gICAgICAgICcmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycydcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGVhZmxldE1hcC5hdHRyaWJ1dGlvbkNvbnRyb2wucmVtb3ZlQXR0cmlidXRpb24oXG4gICAgICAgICcmY29weTsgPGEgaHJlZj1cImh0dHBzOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiPk9wZW5TdHJlZXRNYXA8L2E+IGNvbnRyaWJ1dG9ycydcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYWRkTG9jYWxNYXAobWFwSW1hZ2UsIGZTZWdzKSB7XG4gICAgLy9JZiB0aGVyZSB3YXMgYSBsb2NhbCBtYXAgd2l0aCB0aGUgc2FtZSBwYXJhbWV0ZXJzLCB1cGRhdGUgdGhlIGltYWdlIGFuZCByZXR1cm5cbiAgICBpZiAoXG4gICAgICB0aGlzLmxvY2FsTWFwT3ZlcmxheSAmJlxuICAgICAgdGhpcy5tYXBJbWFnZS53aWR0aCA9PT0gbWFwSW1hZ2Uud2lkdGggJiZcbiAgICAgIHRoaXMubWFwSW1hZ2UuaGVpZ2h0ID09PSBtYXBJbWFnZS5oZWlnaHQgJiZcbiAgICAgIHRoaXMubWFwSW1hZ2UucmVzb2x1dGlvbiA9PT0gbWFwSW1hZ2UucmVzb2x1dGlvblxuICAgICkge1xuICAgICAgdGhpcy5sb2NhbE1hcE92ZXJsYXkuX3Jhd0ltYWdlLnNyYyA9IG1hcEltYWdlLmltYWdlRGF0YTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9DaGVjayB0aGUgZmlsdGVyZWQgc2VnbWVudCBsaXN0IChzZWdtZW50cyB3aXRoIGJvdGggZ3BzIGFuZCBsb2NhbCBwb3NpdGlvbnMpIGhhcyBlbm91Z2ggdmFsdWVzXG4gICAgaWYgKGZTZWdzLmxlbmd0aCA8IDIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9Bc3NpZ24gbWFwSW1hZ2UgZGF0YSB0byBodG1sIGltYWdlLlxuICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgaW1hZ2Uuc3JjID0gbWFwSW1hZ2UuaW1hZ2VEYXRhO1xuICAgIC8vRXN0aW1hdGUgZGlmZmVyZW5jZXMgb2YgbGF0IGFuZCBsbmcgZGVncmVlcyBpbiBtZXRlcnMuXG4gICAgLy9odHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HZW9ncmFwaGljX2Nvb3JkaW5hdGVfc3lzdGVtXG4gICAgY29uc3QgbGF0TWlkID0gKChmU2Vnc1sxXS5sYXQgKyBmU2Vnc1swXS5sYXQpIC8gMikgKiAoTWF0aC5QSSAvIDE4MCk7XG4gICAgY29uc3QgbVBlckxhdCA9XG4gICAgICAxMTExMzIuOTIgLVxuICAgICAgNTU5LjgyICogTWF0aC5jb3MoMiAqIGxhdE1pZCkgK1xuICAgICAgMS4xNzUgKiBNYXRoLmNvcyg0ICogbGF0TWlkKSAtXG4gICAgICAwLjAwMjMgKiBNYXRoLmNvcyg2ICogbGF0TWlkKTtcbiAgICBjb25zdCBtUGVyTG5nID1cbiAgICAgIDExMTQxMi44NCAqIE1hdGguY29zKGxhdE1pZCkgLVxuICAgICAgOTMuNSAqIE1hdGguY29zKDMgKiBsYXRNaWQpICtcbiAgICAgIDAuMTE4ICogTWF0aC5jb3MoNSAqIGxhdE1pZCk7XG4gICAgLy9Fc3RpbWF0ZSBpbWFnZSByb3RhdGlvbiB3aXRoIHJlc3BlY3QgdG8gY2FyZGluYWwgb3JpZW50YXRpb24uXG4gICAgY29uc3Qgcm90YXRpb24gPVxuICAgICAgTWF0aC5hdGFuMihcbiAgICAgICAgKGZTZWdzWzFdLmxhdCAtIGZTZWdzWzBdLmxhdCkgKiBtUGVyTGF0LFxuICAgICAgICAoZlNlZ3NbMV0ubG5nIC0gZlNlZ3NbMF0ubG5nKSAqIG1QZXJMbmdcbiAgICAgICkgLVxuICAgICAgTWF0aC5hdGFuMihcbiAgICAgICAgZlNlZ3NbMV0ubG9jYWxfeSAtIGZTZWdzWzBdLmxvY2FsX3ksXG4gICAgICAgIGZTZWdzWzFdLmxvY2FsX3ggLSBmU2Vnc1swXS5sb2NhbF94XG4gICAgICApO1xuICAgIC8vR2V0IHRoZSBsb2NhbCBjb29yZGluYXRlcyBvZiB0aGUgdG9wIGFuZCBib3R0b20tbGVmdCBpbWFnZSBjb3JuZXJzXG4gICAgY29uc3QgYm90dG9tTGVmdCA9IHtcbiAgICAgIHg6IG1hcEltYWdlLm9yaWdpblgsXG4gICAgICB5OiBtYXBJbWFnZS5vcmlnaW5ZLFxuICAgIH07XG4gICAgY29uc3QgdG9wTGVmdCA9IHtcbiAgICAgIHg6IG1hcEltYWdlLm9yaWdpblgsXG4gICAgICB5OiBtYXBJbWFnZS5vcmlnaW5ZICsgbWFwSW1hZ2UuaGVpZ2h0ICogbWFwSW1hZ2UucmVzb2x1dGlvbixcbiAgICB9O1xuICAgIGNvbnN0IHRvcFJpZ2h0ID0ge1xuICAgICAgeDogbWFwSW1hZ2Uub3JpZ2luWCArIG1hcEltYWdlLndpZHRoICogbWFwSW1hZ2UucmVzb2x1dGlvbixcbiAgICAgIHk6IG1hcEltYWdlLm9yaWdpblkgKyBtYXBJbWFnZS5oZWlnaHQgKiBtYXBJbWFnZS5yZXNvbHV0aW9uLFxuICAgIH07XG4gICAgLy9HZXQgdGhlIHJvdGF0ZWQgZGlzdGFuY2UgdmVjdG9ycyAoaW4gY2FyZGluYWwgb3JpZW50YXRpb24pIGJldHdlZW4gdGhlIGNvcm5lcnMgYW5kIHRoZSBmaXJzdCBzZWdtZW50J3MgcG9zaXRpb25cbiAgICBjb25zdCBib3R0b21MZWZ0Um90RCA9IHtcbiAgICAgIHg6XG4gICAgICAgIChib3R0b21MZWZ0LnggLSBmU2Vnc1swXS5sb2NhbF94KSAqIE1hdGguY29zKHJvdGF0aW9uKSAtXG4gICAgICAgIChib3R0b21MZWZ0LnkgLSBmU2Vnc1swXS5sb2NhbF95KSAqIE1hdGguc2luKHJvdGF0aW9uKSxcbiAgICAgIHk6XG4gICAgICAgIChib3R0b21MZWZ0LnggLSBmU2Vnc1swXS5sb2NhbF94KSAqIE1hdGguc2luKHJvdGF0aW9uKSArXG4gICAgICAgIChib3R0b21MZWZ0LnkgLSBmU2Vnc1swXS5sb2NhbF95KSAqIE1hdGguY29zKHJvdGF0aW9uKSxcbiAgICB9O1xuICAgIGNvbnN0IHRvcExlZnRSb3REID0ge1xuICAgICAgeDpcbiAgICAgICAgKHRvcExlZnQueCAtIGZTZWdzWzBdLmxvY2FsX3gpICogTWF0aC5jb3Mocm90YXRpb24pIC1cbiAgICAgICAgKHRvcExlZnQueSAtIGZTZWdzWzBdLmxvY2FsX3kpICogTWF0aC5zaW4ocm90YXRpb24pLFxuICAgICAgeTpcbiAgICAgICAgKHRvcExlZnQueCAtIGZTZWdzWzBdLmxvY2FsX3gpICogTWF0aC5zaW4ocm90YXRpb24pICtcbiAgICAgICAgKHRvcExlZnQueSAtIGZTZWdzWzBdLmxvY2FsX3kpICogTWF0aC5jb3Mocm90YXRpb24pLFxuICAgIH07XG4gICAgY29uc3QgdG9wUmlnaHRSb3REID0ge1xuICAgICAgeDpcbiAgICAgICAgKHRvcFJpZ2h0LnggLSBmU2Vnc1swXS5sb2NhbF94KSAqIE1hdGguY29zKHJvdGF0aW9uKSAtXG4gICAgICAgICh0b3BSaWdodC55IC0gZlNlZ3NbMF0ubG9jYWxfeSkgKiBNYXRoLnNpbihyb3RhdGlvbiksXG4gICAgICB5OlxuICAgICAgICAodG9wUmlnaHQueCAtIGZTZWdzWzBdLmxvY2FsX3gpICogTWF0aC5zaW4ocm90YXRpb24pICtcbiAgICAgICAgKHRvcFJpZ2h0LnkgLSBmU2Vnc1swXS5sb2NhbF95KSAqIE1hdGguY29zKHJvdGF0aW9uKSxcbiAgICB9O1xuICAgIC8vR2V0IHRoZSByb3RhdGVkIGltYWdlIGNvcm5lcnMgaW4gbGF0LWxuZy5cbiAgICBjb25zdCBib3R0b21MZWZ0TGF0TG5nID0gTC5sYXRMbmcoXG4gICAgICBmU2Vnc1swXS5sYXQgKyBib3R0b21MZWZ0Um90RC55IC8gbVBlckxhdCxcbiAgICAgIGZTZWdzWzBdLmxuZyArIGJvdHRvbUxlZnRSb3RELnggLyBtUGVyTG5nXG4gICAgKTtcbiAgICBjb25zdCB0b3BMZWZ0TGF0TG5nID0gTC5sYXRMbmcoXG4gICAgICBmU2Vnc1swXS5sYXQgKyB0b3BMZWZ0Um90RC55IC8gbVBlckxhdCxcbiAgICAgIGZTZWdzWzBdLmxuZyArIHRvcExlZnRSb3RELnggLyBtUGVyTG5nXG4gICAgKTtcbiAgICBjb25zdCB0b3BSaWdodExhdExuZyA9IEwubGF0TG5nKFxuICAgICAgZlNlZ3NbMF0ubGF0ICsgdG9wUmlnaHRSb3RELnkgLyBtUGVyTGF0LFxuICAgICAgZlNlZ3NbMF0ubG5nICsgdG9wUmlnaHRSb3RELnggLyBtUGVyTG5nXG4gICAgKTtcbiAgICAvL0lmIGEgZGlmZmVyZW50IGxvY2FsIG1hcCB3YXMgYWxyZWFkeSBhZGRlZCwgcmVtZW1iZXIgaWYgd2FzIGRpc3BsYXllZCBhbmQgdGhlbiBkZWxldGUgaXQuXG4gICAgbGV0IGRpc3BsYXlNYXAgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5sb2NhbE1hcE92ZXJsYXkpIHtcbiAgICAgIGRpc3BsYXlNYXAgPSB0aGlzLmxlYWZsZXRNYXAuaGFzTGF5ZXIodGhpcy5sb2NhbE1hcE92ZXJsYXkpO1xuICAgICAgdGhpcy5yZW1vdmVMb2NhbE1hcCgpO1xuICAgIH1cbiAgICAvL0NyZWF0ZSB0aGUgb3ZlcmxheSBmb3IgdGhlIHJvdGF0ZWQgaW1hZ2UuXG4gICAgdGhpcy5sb2NhbE1hcE92ZXJsYXkgPSBMLmltYWdlT3ZlcmxheS5yb3RhdGVkKFxuICAgICAgaW1hZ2UsXG4gICAgICB0b3BMZWZ0TGF0TG5nLFxuICAgICAgdG9wUmlnaHRMYXRMbmcsXG4gICAgICBib3R0b21MZWZ0TGF0TG5nLFxuICAgICAge1xuICAgICAgICBvcGFjaXR5OiAwLjQsXG4gICAgICAgIGludGVyYWN0aXZlOiB0cnVlLFxuICAgICAgfVxuICAgICk7XG4gICAgLy9JZiBhIHByZXZpb3VzIG1hcCB3YXMgZGlzcGxheWVkLCBhZGQgdGhlIG92ZXJsYXkgdG8gdGhlIG1hcC5cbiAgICBpZiAoZGlzcGxheU1hcCkge1xuICAgICAgdGhpcy5sb2NhbE1hcE92ZXJsYXkuYWRkVG8odGhpcy5sZWFmbGV0TWFwKTtcbiAgICB9XG4gICAgLy9DcmVhdGUgdGhlIGxheWVyIGNvbnRyb2wgaWYgdGhlcmUgaXMgbm9uZS5cbiAgICBpZiAoIXRoaXMubGF5ZXJDb250cm9sKSB7XG4gICAgICB0aGlzLmxheWVyQ29udHJvbCA9IEwuY29udHJvbC5sYXllcnMoKS5hZGRUbyh0aGlzLmxlYWZsZXRNYXApO1xuICAgIH1cbiAgICAvL0FkZCB0aGUgb3ZlcmxheSB0byB0aGUgbGF5ZXIgY29udHJvbFxuICAgIHRoaXMubGF5ZXJDb250cm9sLmFkZE92ZXJsYXkodGhpcy5sb2NhbE1hcE92ZXJsYXksIFwiTG9jYWwgTWFwXCIpO1xuICAgIC8vU2F2ZSB0aGUgbGFzdCBtYXBJbWFnZVxuICAgIHRoaXMubWFwSW1hZ2UgPSBtYXBJbWFnZTtcbiAgfVxuXG4gIHJlbW92ZUxvY2FsTWFwKCkge1xuICAgIGlmICh0aGlzLmxvY2FsTWFwT3ZlcmxheSkge1xuICAgICAgdGhpcy5sZWFmbGV0TWFwLnJlbW92ZUxheWVyKHRoaXMubG9jYWxNYXBPdmVybGF5KTtcbiAgICAgIHRoaXMubGF5ZXJDb250cm9sLnJlbW92ZUxheWVyKHRoaXMubG9jYWxNYXBPdmVybGF5KTtcbiAgICAgIHRoaXMubG9jYWxNYXBPdmVybGF5ID0gbnVsbDtcbiAgICAgIHRoaXMubWFwSW1hZ2UgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUxheWVyQ29udHJvbCgpIHtcbiAgICBpZiAodGhpcy5sYXllckNvbnRyb2wpIHtcbiAgICAgIHRoaXMubGVhZmxldE1hcC5yZW1vdmVDb250cm9sKHRoaXMubGF5ZXJDb250cm9sKTtcbiAgICAgIHRoaXMubGF5ZXJDb250cm9sID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZW1vdmVQb3NlcyhzZWdtZW50SWQpIHtcbiAgICAvL0ZpbmQgdGhlIG1hcCBsYXllciB3aXRoIHRoZSBwb3NlcyBvZiB0aGUgc3BlY2lmaWVkIHNlZ21lbnQgaWQuXG4gICAgY29uc3QgbGF5ZXJJbmRleCA9IHRoaXMubWFwUG9pbnRzTGF5ZXJzLmZpbmRJbmRleChcbiAgICAgIChlbnRyeSkgPT4gZW50cnkuc2VnbWVudElkID09IHNlZ21lbnRJZFxuICAgICk7XG4gICAgaWYgKGxheWVySW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgbGF5ZXJQb3Nlc1B0ciA9IHRoaXMubWFwUG9pbnRzTGF5ZXJzW2xheWVySW5kZXhdLm1hcFBvc2VzUHRyO1xuICAgICAgLy9SZW1vdmUgdGhlIGhlbGQgdmFyaWFibGUgaWYgdGhlIGZvdW5kIHBvc2VzIHdlcmUgYWN0aXZlIChzZWxlY3RlZCkuXG4gICAgICBpZiAobGF5ZXJQb3Nlc1B0ciA9PSB0aGlzLmFjdGl2ZVBvc2VzKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlUG9zZXMgPSBudWxsO1xuICAgICAgfVxuICAgICAgLy9SZW1vdmUgdGhlIGZvdW5kIHBvc2VzIGZyb20gdGhlIG1hcC5cbiAgICAgIHRoaXMubGVhZmxldE1hcC5yZW1vdmVMYXllcihsYXllclBvc2VzUHRyKTtcbiAgICAgIHRoaXMubWFwUG9pbnRzTGF5ZXJzLnNwbGljZShsYXllckluZGV4LCAxKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRBbmREcmF3TWFwUG9zZXMoc2VnbWVudElkLCBtYXJrZXJDb2xvckF1dG8sIG1hcmtlckNvbG9ySXRvLCBtYXJrZXJBbHBoYSkge1xuICAgIGxldCBnZW9Kc29uRGF0YSA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIC8vR2V0IGdlb0pTT04gZGF0YSBmcm9tIHNlcnZlci5cbiAgICAgIGdlb0pzb25EYXRhID0gYXdhaXQgdGhpcy5wb3NlSW50ZXJmYWNlLmdldChzZWdtZW50SWQpO1xuICAgICAgLy9SZW1vdmUgYW55IGRhdGEgZnJvbSB0aGUgc3BlY2lmaWVkIHNlZ21lbnQgdGhhdCB3YXMgYWxyZWFkeSBvbiB0aGUgbWFwLlxuICAgICAgdGhpcy5yZW1vdmVQb3NlcyhzZWdtZW50SWQpO1xuICAgICAgaWYgKGdlb0pzb25EYXRhLmZlYXR1cmVzKSB7XG4gICAgICAgIC8vU2hvdyBtYXAgYW5kIGZvcmNlIHRpbGUgZmV0Y2guXG4gICAgICAgIGlmICh0aGlzLm1hcEVsZW1lbnRDb250YWluZXIpIHtcbiAgICAgICAgICB0aGlzLm1hcEVsZW1lbnRDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxlYWZsZXRNYXAuaW52YWxpZGF0ZVNpemUodHJ1ZSk7XG4gICAgICAgIC8vU2V0IHBvc2VzIG1hcCBkaXNwbGF5IG9wdGlvbnMuXG4gICAgICAgIGxldCBtYXJrZXJPcHRpb25zID0ge1xuICAgICAgICAgIHJhZGl1czogMixcbiAgICAgICAgICB3ZWlnaHQ6IDEsXG4gICAgICAgICAgb3BhY2l0eTogMSAqIG1hcmtlckFscGhhLFxuICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLjggKiBtYXJrZXJBbHBoYSxcbiAgICAgICAgfTtcbiAgICAgICAgLy9Tb3J0IHBvc2VzXG4gICAgICAgIGdlb0pzb25EYXRhLmZlYXR1cmVzLnNvcnQoKGEsIGIpID0+IGEucHJvcGVydGllcy5pZCAtIGIucHJvcGVydGllcy5pZCk7XG4gICAgICAgIC8vQWRkIHBvc2VzIHRvIG1hcCwgd2hpbGUgc2V0dGluZyBzcGVjaWFsIG9wdGlvbnMgYW5kIHBvcC11cCB3aXRoIGRhdGEgZnJvbSBnZW9KU09OIGRhdGEgZmVhdHVyZXMuXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IEwuZ2VvSlNPTihnZW9Kc29uRGF0YSwge1xuICAgICAgICAgIHBvaW50VG9MYXllcjogZnVuY3Rpb24gKGZlYXR1cmUsIGxhdGxuZykge1xuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcy50eXBlID09IFwiQVVUT1wiKSB7XG4gICAgICAgICAgICAgIG1hcmtlck9wdGlvbnMuY29sb3IgPSBtYXJrZXJDb2xvckF1dG8gfHwgXCJncmVlblwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbWFya2VyT3B0aW9ucy5jb2xvciA9IG1hcmtlckNvbG9ySXRvIHx8IFwicmVkXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gTC5jaXJjbGVNYXJrZXIobGF0bG5nLCBtYXJrZXJPcHRpb25zKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG9uRWFjaEZlYXR1cmU6IGZ1bmN0aW9uIChmZWF0dXJlLCBsYXllcikge1xuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcyAmJiBmZWF0dXJlLnByb3BlcnRpZXMuc2VnbWVudElkKSB7XG4gICAgICAgICAgICAgIGxheWVyLmJpbmRQb3B1cChcbiAgICAgICAgICAgICAgICBcIjxzcGFuPlNlZ21lbnQgXCIgKyBmZWF0dXJlLnByb3BlcnRpZXMuc2VnbWVudElkICsgXCI8L3NwYW4+XCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9KS5hZGRUbyh0aGlzLmxlYWZsZXRNYXApO1xuICAgICAgICAvL1NhdmUgc2VnbWVudCBpZCBhbmQgcG9pbnRlciB0byBtYXAgbGF5ZXIgaW4gYSBsaXN0LlxuICAgICAgICB0aGlzLm1hcFBvaW50c0xheWVycy5wdXNoKHtcbiAgICAgICAgICBzZWdtZW50SWQ6IHNlZ21lbnRJZCxcbiAgICAgICAgICBtYXBQb3Nlc1B0cjogcG9pbnRzLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gcG9zaXRpb24gZGF0YSBmb3Igc2VnbWVudCBcIiArIHNlZ21lbnRJZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgICByZXR1cm4gZ2VvSnNvbkRhdGE7XG4gIH1cblxuICByZW1vdmVBY3RpdmVNYXJrZXIoKSB7XG4gICAgLy9SZW1vdmUgbG9jYXRpb24gbWFya2VyIGZyb20gbWFwLlxuICAgIGlmICh0aGlzLmFjdGl2ZU1hcmtlcikge1xuICAgICAgdGhpcy5sZWFmbGV0TWFwLnJlbW92ZUxheWVyKHRoaXMuYWN0aXZlTWFya2VyKTtcbiAgICAgIHRoaXMuYWN0aXZlTWFya2VyID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZW1vdmVBY3RpdmVQb3NlcygpIHtcbiAgICAvL1Jlc3RvcmUgcG9pbnQgY29sb3JpbmcuXG4gICAgaWYgKHRoaXMuYWN0aXZlUG9zZXMpIHtcbiAgICAgIHRoaXMuYWN0aXZlUG9zZXMuZWFjaExheWVyKChsYXllcikgPT4ge1xuICAgICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLnR5cGUgPT0gXCJBVVRPXCIpIHtcbiAgICAgICAgICBsYXllci5zZXRTdHlsZSh7IGNvbG9yOiBcImdyZWVuXCIgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGF5ZXIuc2V0U3R5bGUoeyBjb2xvcjogXCJyZWRcIiB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLmFjdGl2ZVBvc2VzID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhZGRBY3RpdmVNYXJrZXIobGF0LCBsbmcpIHtcbiAgICAvL0FkZCBsb2NhdGlvbiBtYXJrZXIgdG8gbWFwLlxuICAgIHRoaXMuYWN0aXZlTWFya2VyID0gTC5tYXJrZXIoW2xhdCwgbG5nXSkuYWRkVG8odGhpcy5sZWFmbGV0TWFwKTtcbiAgICBpZiAodGhpcy5sZWFmbGV0TWFwLmdldFpvb20oKSkge1xuICAgICAgdGhpcy5sZWFmbGV0TWFwLnBhblRvKFtsYXQsIGxuZ10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNhbm5vdCBwYW4gTGVhZmxldCBtYXAgYmVmb3JlIGxvYWRpbmcgaXQuXCIpO1xuICAgIH1cbiAgfVxuXG4gIGFkZEFjdGl2ZVBvc2VzKHNlZ21lbnRJZCkge1xuICAgIC8vQ2hhbmdlIHBvaW50IGNvbG9yaW5nIHRvIGJsdWUgZm9yIHBvc2VzIG9mIHRoZSBhc3NvY2lhdGVkIHNlZ21lbnQuXG4gICAgY29uc3Qgc2VsZWN0ZWRQb3NlcyA9IHRoaXMubWFwUG9pbnRzTGF5ZXJzLmZpbmQoXG4gICAgICAocG9zZXMpID0+IHBvc2VzLnNlZ21lbnRJZCA9PSBzZWdtZW50SWRcbiAgICApO1xuICAgIGlmIChzZWxlY3RlZFBvc2VzKSB7XG4gICAgICB0aGlzLmFjdGl2ZVBvc2VzID0gc2VsZWN0ZWRQb3Nlcy5tYXBQb3Nlc1B0cjtcbiAgICAgIHRoaXMuYWN0aXZlUG9zZXMuc2V0U3R5bGUoeyBjb2xvcjogXCJibHVlXCIgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utility/LeafletMap.js\n");

/***/ }),

/***/ "./src/utility/LocalMap.js":
/*!*********************************!*\
  !*** ./src/utility/LocalMap.js ***!
  \*********************************/
/*! exports provided: LocalMap */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LocalMap\", function() { return LocalMap; });\n/* harmony import */ var _database_interface_MapImage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../database_interface/MapImage.js */ \"./src/database_interface/MapImage.js\");\n/* harmony import */ var _database_interface_LocalPose_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../database_interface/LocalPose.js */ \"./src/database_interface/LocalPose.js\");\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n/* eslint-disable no-undef */\n\n\n\n\n//LocalMap class to wrap ROS local occupancy grid map related variables and functions.\nclass LocalMap {\n  constructor(serverInterface) {\n    //Create api interface.\n    this.mapImageInterface = new _database_interface_MapImage_js__WEBPACK_IMPORTED_MODULE_0__[\"MapImageInterface\"](serverInterface);\n    this.localPoseInterface = new _database_interface_LocalPose_js__WEBPACK_IMPORTED_MODULE_1__[\"LocalPoseInterface\"](serverInterface);\n    //Reach to DOM elements.\n    this.mapElement = document.getElementById(\"local-map\");\n    this.zoomInBtn = document.getElementById(\"local-map-zoom-in-btn\");\n    this.zoomOutBtn = document.getElementById(\"local-map-zoom-out-btn\");\n    //Initialize variables and objects.\n    this.mapPointsLayers = [];\n    this.activeMarker = null;\n    this.activePoses = null;\n    this.mapBitmap = null;\n    //Create the main viewer.\n    this.viewer = new ROS2D.Viewer({\n      divID: \"local-map\",\n      width: 560,\n      height: 560,\n    });\n    //Reserve first index of viewer scene for map.\n    this.viewer.scene.addChild(new createjs.Shape());\n    //Add zoom to the viewer.\n    this.zoomView = new ROS2D.ZoomView({\n      rootObject: this.viewer.scene,\n    });\n    //Add panning to the viewer.\n    this.panView = new ROS2D.PanView({\n      rootObject: this.viewer.scene,\n    });\n    //Enable touch events to the viewer.\n    createjs.Touch.enable(this.viewer.scene);\n    //Add event listeners for map moving.\n    this.mouseDown = false;\n    this.viewer.scene.addEventListener(\"stagemousedown\", (event) => {\n      this.panView.startPan(event.stageX, event.stageY);\n      this.mouseDown = true;\n    });\n    this.viewer.scene.addEventListener(\"stagemousemove\", (event) => {\n      if (this.mouseDown === true) {\n        this.panView.pan(event.stageX, event.stageY);\n      }\n    });\n    this.viewer.scene.addEventListener(\"stagemouseup\", () => {\n      if (this.mouseDown === true) {\n        this.mouseDown = false;\n      }\n    });\n    //Add event listeners for map zooming.\n    this.viewer.scene.canvas.addEventListener(\n      \"wheel\",\n      this.zoomMapHandler.bind(this, 0)\n    );\n    this.zoomInBtn.addEventListener(\n      \"click\",\n      this.zoomMapHandler.bind(this, 50)\n    );\n    this.zoomOutBtn.addEventListener(\n      \"click\",\n      this.zoomMapHandler.bind(this, -50)\n    );\n    //Add viewer resizing.\n    //Remove previous ticker function.\n    createjs.Ticker.addEventListener(\"tick\", this.viewer.scene);\n    //Add new ticker function.\n    createjs.Ticker.on(\"tick\", (event) => {\n      //Only update if map is visible.\n      if (this.mapElement.style.display == \"block\") {\n        //Get current dimensions.\n        const oldWidth = this.viewer.scene.canvas.width;\n        const oldHeight = this.viewer.scene.canvas.height;\n        //Get new dimensions.\n        const newWidth = parseInt(getComputedStyle(this.mapElement).width);\n        const newHeight = parseInt(getComputedStyle(this.mapElement).height);\n        //Update dimensions.\n        this.viewer.scene.canvas.width = newWidth;\n        this.viewer.scene.canvas.height = newHeight;\n        //Maintain viewer center\n        if (this.mapBitmap) {\n          this.viewer.shift(\n            (oldWidth - newWidth) / 2 / this.viewer.scene.scaleX,\n            (newHeight - oldHeight) / 2 / this.viewer.scene.scaleY\n          );\n        }\n        //Update graphics.\n        this.viewer.scene.update(event);\n      }\n    });\n  }\n\n  zoomMapHandler(deltaZoom, event) {\n    event.preventDefault();\n    event.stopPropagation();\n    let startZoomX;\n    let startZoomY;\n    if (event.type === \"wheel\") {\n      const boundingRect = event.target.getBoundingClientRect();\n      startZoomX = event.clientX - boundingRect.left;\n      startZoomY = event.clientY - boundingRect.top;\n      deltaZoom = -event.deltaY;\n    } else if (event.type === \"click\") {\n      startZoomX = this.viewer.scene.canvas.width / 2;\n      startZoomY = this.viewer.scene.canvas.height / 2;\n    } else {\n      console.log(\"zoomMapHandler triggered by unexpected event. Aborting.\");\n      return;\n    }\n    this.zoomView.startZoom(startZoomX, startZoomY);\n    const zoom = 1 + deltaZoom / this.viewer.scene.canvas.clientHeight;\n    this.zoomView.zoom(zoom);\n  }\n\n  resetViewer() {\n    //Delete al graphics from viewer.\n    this.viewer.scene.removeAllChildren();\n    //Reserve index for map.\n    this.viewer.scene.addChild(new createjs.Shape())\n    //Delete map.\n    if (this.mapBitmap) {\n      this.mapBitmap = null;\n    }\n    //Reset viewer defaults.\n    this.viewer.scene.x = 0;\n    this.viewer.scene.x_prev_shift = this.viewer.scene.x;\n    this.viewer.scene.y = this.viewer.height;\n    this.viewer.scene.y_prev_shift = this.viewer.scene.y;\n  }\n\n  async getAndDrawMap(shiftId) {\n    try {\n      //Get map data from database.\n      const mapImage = await this.mapImageInterface.get(shiftId);\n      //Record absence of previous map.\n      const firstMap = !this.mapBitmap;\n      //Store new map origin.\n      this.mapOrigin = { x: mapImage.originX, y: mapImage.originY };\n      //Create drawable element for map image.\n      this.mapBitmap = new createjs.Bitmap(mapImage.imageData);\n      //Set drawable origin and scale.\n      this.mapBitmap.x = mapImage.originX;\n      this.mapBitmap.y =\n        -mapImage.height * mapImage.resolution - mapImage.originY;\n      this.mapBitmap.scaleX = mapImage.resolution;\n      this.mapBitmap.scaleY = mapImage.resolution;\n      //Clear scene at map index.\n      this.viewer.scene.removeChildAt(0);\n      //Add map to viewer.\n      this.viewer.scene.addChildAt(this.mapBitmap, 0);\n      //Scale and shift viewer if this is the first map.\n      if (firstMap) {\n        this.viewer.scene.addChildAt(this.mapBitmap, 0);\n        //Adjust viewer visible area to display map.\n        const viewerRatio = this.viewer.width / this.viewer.height;\n        //Fit scale for largest map dimension.\n        if (mapImage.width > mapImage.height) {\n          this.viewer.scaleToDimensions(\n            mapImage.width * mapImage.resolution,\n            (mapImage.width * mapImage.resolution) / viewerRatio\n          );\n        } else {\n          this.viewer.scaleToDimensions(\n            mapImage.height * mapImage.resolution * viewerRatio,\n            mapImage.height * mapImage.resolution\n          );\n        }\n        //Shift view to center map.\n        this.viewer.shift(\n          mapImage.originX -\n            (this.viewer.scene.canvas.width - this.viewer.width) /\n              2 /\n              this.viewer.scene.scaleX,\n          mapImage.originY +\n            (this.viewer.scene.canvas.height - this.viewer.height) /\n              2 /\n              this.viewer.scene.scaleY\n        );\n      }\n      return mapImage;\n    } catch (error) {\n      //Log response.\n      console.log(error.message);\n      return null;\n    }\n  }\n\n  removePoses(segmentId) {\n    //Find the map layer with the poses of the specified segment id.\n    const layerIndex = this.mapPointsLayers.findIndex(\n      (entry) => entry.segmentId == segmentId\n    );\n    if (layerIndex > -1) {\n      const layerPosesPtr = this.mapPointsLayers[layerIndex].mapPosesPtr;\n      //Remove the held variable if the found poses were active (selected).\n      if (layerPosesPtr == this.activePoses) {\n        this.activePoses = null;\n      }\n      //Remove the found poses from the map.\n      this.viewer.scene.removeChild(layerPosesPtr.shape);\n      this.mapPointsLayers.splice(layerIndex, 1);\n    }\n  }\n\n  async getAndDrawMapPoses(segmentId) {\n    try {\n      //Get local poses from database.\n      const localPoseList = await this.localPoseInterface.get(segmentId);\n      //Remove any data from the specified segment that was already on the map.\n      this.removePoses(segmentId);\n      if (localPoseList.length > 0) {\n        //Create drawable element for local poses.\n        const traceShape = new createjs.Shape();\n        //Define color of the stroke.\n        let strokeColor;\n        if (localPoseList[0].type == \"AUTO\") {\n          strokeColor = \"green\";\n        } else {\n          strokeColor = \"red\";\n        }\n        //Set drawable style and initial position.\n        traceShape.graphics.setStrokeStyle(0.2);\n        const traceCommand =\n          traceShape.graphics.beginStroke(strokeColor).command;\n        traceShape.graphics.moveTo(localPoseList[0].x, -localPoseList[0].y);\n        //Add local poses to drawable.\n        localPoseList.forEach((localPose) => {\n          traceShape.graphics.lineTo(localPose.x, -localPose.y);\n        });\n        //Add drawable to viewer.\n        //If there is an active marker, redraw it on top of the drawable.\n        if (this.activeMarker) {\n          this.viewer.scene.removeChild(this.activeMarker);\n        }\n        this.viewer.scene.addChild(traceShape);\n        if (this.activeMarker) {\n          this.viewer.scene.addChild(this.activeMarker);\n        }\n        //Save segment id and pointer to map layer in a list.\n        this.mapPointsLayers.push({\n          segmentId: segmentId,\n          mapPosesPtr: {\n            shape: traceShape,\n            command: traceCommand,\n            type: localPoseList[0].type,\n          },\n        });\n      } else {\n        console.log(\"No local position data for segment \" + segmentId);\n      }\n    } catch (error) {\n      console.log(error.message);\n    }\n  }\n\n  removeActiveMarker() {\n    //Remove location marker from map.\n    if (this.activeMarker) {\n      this.viewer.scene.removeChild(this.activeMarker);\n      this.activeMarker = null;\n    }\n  }\n\n  removeActivePoses() {\n    //Restore point coloring.\n    //Unfortunately, it seems like the only way to do this for easeljs graphics is to re-draw the shape.\n    if (this.activePoses) {\n      this.activePoses.command.style =\n        this.activePoses.type == \"AUTO\" ? \"green\" : \"red\";\n      this.activePoses = null;\n    }\n  }\n\n  addActiveMarker(x, y) {\n    //Add location marker to map.\n    this.activeMarker = new createjs.Shape();\n    this.activeMarker.graphics.beginFill(\"blue\").drawCircle(x, -y, 0.5);\n    this.viewer.scene.addChild(this.activeMarker);\n  }\n\n  addActivePoses(segmentId) {\n    //Change point coloring to blue for poses of the associated segment.\n    const selectedPoses = this.mapPointsLayers.find(\n      (poses) => poses.segmentId == segmentId\n    );\n    if (selectedPoses) {\n      this.activePoses = selectedPoses.mapPosesPtr;\n      this.activePoses.command.style = \"blue\";\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9Mb2NhbE1hcC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlsaXR5L0xvY2FsTWFwLmpzP2M0OTUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG5cbmltcG9ydCB7IE1hcEltYWdlSW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9NYXBJbWFnZS5qc1wiO1xuaW1wb3J0IHsgTG9jYWxQb3NlSW50ZXJmYWNlIH0gZnJvbSBcIi4uL2RhdGFiYXNlX2ludGVyZmFjZS9Mb2NhbFBvc2UuanNcIjtcblxuLy9Mb2NhbE1hcCBjbGFzcyB0byB3cmFwIFJPUyBsb2NhbCBvY2N1cGFuY3kgZ3JpZCBtYXAgcmVsYXRlZCB2YXJpYWJsZXMgYW5kIGZ1bmN0aW9ucy5cbmV4cG9ydCBjbGFzcyBMb2NhbE1hcCB7XG4gIGNvbnN0cnVjdG9yKHNlcnZlckludGVyZmFjZSkge1xuICAgIC8vQ3JlYXRlIGFwaSBpbnRlcmZhY2UuXG4gICAgdGhpcy5tYXBJbWFnZUludGVyZmFjZSA9IG5ldyBNYXBJbWFnZUludGVyZmFjZShzZXJ2ZXJJbnRlcmZhY2UpO1xuICAgIHRoaXMubG9jYWxQb3NlSW50ZXJmYWNlID0gbmV3IExvY2FsUG9zZUludGVyZmFjZShzZXJ2ZXJJbnRlcmZhY2UpO1xuICAgIC8vUmVhY2ggdG8gRE9NIGVsZW1lbnRzLlxuICAgIHRoaXMubWFwRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYWwtbWFwXCIpO1xuICAgIHRoaXMuem9vbUluQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2NhbC1tYXAtem9vbS1pbi1idG5cIik7XG4gICAgdGhpcy56b29tT3V0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb2NhbC1tYXAtem9vbS1vdXQtYnRuXCIpO1xuICAgIC8vSW5pdGlhbGl6ZSB2YXJpYWJsZXMgYW5kIG9iamVjdHMuXG4gICAgdGhpcy5tYXBQb2ludHNMYXllcnMgPSBbXTtcbiAgICB0aGlzLmFjdGl2ZU1hcmtlciA9IG51bGw7XG4gICAgdGhpcy5hY3RpdmVQb3NlcyA9IG51bGw7XG4gICAgdGhpcy5tYXBCaXRtYXAgPSBudWxsO1xuICAgIC8vQ3JlYXRlIHRoZSBtYWluIHZpZXdlci5cbiAgICB0aGlzLnZpZXdlciA9IG5ldyBST1MyRC5WaWV3ZXIoe1xuICAgICAgZGl2SUQ6IFwibG9jYWwtbWFwXCIsXG4gICAgICB3aWR0aDogNTYwLFxuICAgICAgaGVpZ2h0OiA1NjAsXG4gICAgfSk7XG4gICAgLy9SZXNlcnZlIGZpcnN0IGluZGV4IG9mIHZpZXdlciBzY2VuZSBmb3IgbWFwLlxuICAgIHRoaXMudmlld2VyLnNjZW5lLmFkZENoaWxkKG5ldyBjcmVhdGVqcy5TaGFwZSgpKTtcbiAgICAvL0FkZCB6b29tIHRvIHRoZSB2aWV3ZXIuXG4gICAgdGhpcy56b29tVmlldyA9IG5ldyBST1MyRC5ab29tVmlldyh7XG4gICAgICByb290T2JqZWN0OiB0aGlzLnZpZXdlci5zY2VuZSxcbiAgICB9KTtcbiAgICAvL0FkZCBwYW5uaW5nIHRvIHRoZSB2aWV3ZXIuXG4gICAgdGhpcy5wYW5WaWV3ID0gbmV3IFJPUzJELlBhblZpZXcoe1xuICAgICAgcm9vdE9iamVjdDogdGhpcy52aWV3ZXIuc2NlbmUsXG4gICAgfSk7XG4gICAgLy9FbmFibGUgdG91Y2ggZXZlbnRzIHRvIHRoZSB2aWV3ZXIuXG4gICAgY3JlYXRlanMuVG91Y2guZW5hYmxlKHRoaXMudmlld2VyLnNjZW5lKTtcbiAgICAvL0FkZCBldmVudCBsaXN0ZW5lcnMgZm9yIG1hcCBtb3ZpbmcuXG4gICAgdGhpcy5tb3VzZURvd24gPSBmYWxzZTtcbiAgICB0aGlzLnZpZXdlci5zY2VuZS5hZGRFdmVudExpc3RlbmVyKFwic3RhZ2Vtb3VzZWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0aGlzLnBhblZpZXcuc3RhcnRQYW4oZXZlbnQuc3RhZ2VYLCBldmVudC5zdGFnZVkpO1xuICAgICAgdGhpcy5tb3VzZURvd24gPSB0cnVlO1xuICAgIH0pO1xuICAgIHRoaXMudmlld2VyLnNjZW5lLmFkZEV2ZW50TGlzdGVuZXIoXCJzdGFnZW1vdXNlbW92ZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vdXNlRG93biA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLnBhblZpZXcucGFuKGV2ZW50LnN0YWdlWCwgZXZlbnQuc3RhZ2VZKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLnZpZXdlci5zY2VuZS5hZGRFdmVudExpc3RlbmVyKFwic3RhZ2Vtb3VzZXVwXCIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vdXNlRG93biA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLm1vdXNlRG93biA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vQWRkIGV2ZW50IGxpc3RlbmVycyBmb3IgbWFwIHpvb21pbmcuXG4gICAgdGhpcy52aWV3ZXIuc2NlbmUuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcIndoZWVsXCIsXG4gICAgICB0aGlzLnpvb21NYXBIYW5kbGVyLmJpbmQodGhpcywgMClcbiAgICApO1xuICAgIHRoaXMuem9vbUluQnRuLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLnpvb21NYXBIYW5kbGVyLmJpbmQodGhpcywgNTApXG4gICAgKTtcbiAgICB0aGlzLnpvb21PdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIHRoaXMuem9vbU1hcEhhbmRsZXIuYmluZCh0aGlzLCAtNTApXG4gICAgKTtcbiAgICAvL0FkZCB2aWV3ZXIgcmVzaXppbmcuXG4gICAgLy9SZW1vdmUgcHJldmlvdXMgdGlja2VyIGZ1bmN0aW9uLlxuICAgIGNyZWF0ZWpzLlRpY2tlci5hZGRFdmVudExpc3RlbmVyKFwidGlja1wiLCB0aGlzLnZpZXdlci5zY2VuZSk7XG4gICAgLy9BZGQgbmV3IHRpY2tlciBmdW5jdGlvbi5cbiAgICBjcmVhdGVqcy5UaWNrZXIub24oXCJ0aWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgLy9Pbmx5IHVwZGF0ZSBpZiBtYXAgaXMgdmlzaWJsZS5cbiAgICAgIGlmICh0aGlzLm1hcEVsZW1lbnQuc3R5bGUuZGlzcGxheSA9PSBcImJsb2NrXCIpIHtcbiAgICAgICAgLy9HZXQgY3VycmVudCBkaW1lbnNpb25zLlxuICAgICAgICBjb25zdCBvbGRXaWR0aCA9IHRoaXMudmlld2VyLnNjZW5lLmNhbnZhcy53aWR0aDtcbiAgICAgICAgY29uc3Qgb2xkSGVpZ2h0ID0gdGhpcy52aWV3ZXIuc2NlbmUuY2FudmFzLmhlaWdodDtcbiAgICAgICAgLy9HZXQgbmV3IGRpbWVuc2lvbnMuXG4gICAgICAgIGNvbnN0IG5ld1dpZHRoID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1hcEVsZW1lbnQpLndpZHRoKTtcbiAgICAgICAgY29uc3QgbmV3SGVpZ2h0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLm1hcEVsZW1lbnQpLmhlaWdodCk7XG4gICAgICAgIC8vVXBkYXRlIGRpbWVuc2lvbnMuXG4gICAgICAgIHRoaXMudmlld2VyLnNjZW5lLmNhbnZhcy53aWR0aCA9IG5ld1dpZHRoO1xuICAgICAgICB0aGlzLnZpZXdlci5zY2VuZS5jYW52YXMuaGVpZ2h0ID0gbmV3SGVpZ2h0O1xuICAgICAgICAvL01haW50YWluIHZpZXdlciBjZW50ZXJcbiAgICAgICAgaWYgKHRoaXMubWFwQml0bWFwKSB7XG4gICAgICAgICAgdGhpcy52aWV3ZXIuc2hpZnQoXG4gICAgICAgICAgICAob2xkV2lkdGggLSBuZXdXaWR0aCkgLyAyIC8gdGhpcy52aWV3ZXIuc2NlbmUuc2NhbGVYLFxuICAgICAgICAgICAgKG5ld0hlaWdodCAtIG9sZEhlaWdodCkgLyAyIC8gdGhpcy52aWV3ZXIuc2NlbmUuc2NhbGVZXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICAvL1VwZGF0ZSBncmFwaGljcy5cbiAgICAgICAgdGhpcy52aWV3ZXIuc2NlbmUudXBkYXRlKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHpvb21NYXBIYW5kbGVyKGRlbHRhWm9vbSwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGxldCBzdGFydFpvb21YO1xuICAgIGxldCBzdGFydFpvb21ZO1xuICAgIGlmIChldmVudC50eXBlID09PSBcIndoZWVsXCIpIHtcbiAgICAgIGNvbnN0IGJvdW5kaW5nUmVjdCA9IGV2ZW50LnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHN0YXJ0Wm9vbVggPSBldmVudC5jbGllbnRYIC0gYm91bmRpbmdSZWN0LmxlZnQ7XG4gICAgICBzdGFydFpvb21ZID0gZXZlbnQuY2xpZW50WSAtIGJvdW5kaW5nUmVjdC50b3A7XG4gICAgICBkZWx0YVpvb20gPSAtZXZlbnQuZGVsdGFZO1xuICAgIH0gZWxzZSBpZiAoZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiKSB7XG4gICAgICBzdGFydFpvb21YID0gdGhpcy52aWV3ZXIuc2NlbmUuY2FudmFzLndpZHRoIC8gMjtcbiAgICAgIHN0YXJ0Wm9vbVkgPSB0aGlzLnZpZXdlci5zY2VuZS5jYW52YXMuaGVpZ2h0IC8gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJ6b29tTWFwSGFuZGxlciB0cmlnZ2VyZWQgYnkgdW5leHBlY3RlZCBldmVudC4gQWJvcnRpbmcuXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnpvb21WaWV3LnN0YXJ0Wm9vbShzdGFydFpvb21YLCBzdGFydFpvb21ZKTtcbiAgICBjb25zdCB6b29tID0gMSArIGRlbHRhWm9vbSAvIHRoaXMudmlld2VyLnNjZW5lLmNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgdGhpcy56b29tVmlldy56b29tKHpvb20pO1xuICB9XG5cbiAgcmVzZXRWaWV3ZXIoKSB7XG4gICAgLy9EZWxldGUgYWwgZ3JhcGhpY3MgZnJvbSB2aWV3ZXIuXG4gICAgdGhpcy52aWV3ZXIuc2NlbmUucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcbiAgICAvL1Jlc2VydmUgaW5kZXggZm9yIG1hcC5cbiAgICB0aGlzLnZpZXdlci5zY2VuZS5hZGRDaGlsZChuZXcgY3JlYXRlanMuU2hhcGUoKSlcbiAgICAvL0RlbGV0ZSBtYXAuXG4gICAgaWYgKHRoaXMubWFwQml0bWFwKSB7XG4gICAgICB0aGlzLm1hcEJpdG1hcCA9IG51bGw7XG4gICAgfVxuICAgIC8vUmVzZXQgdmlld2VyIGRlZmF1bHRzLlxuICAgIHRoaXMudmlld2VyLnNjZW5lLnggPSAwO1xuICAgIHRoaXMudmlld2VyLnNjZW5lLnhfcHJldl9zaGlmdCA9IHRoaXMudmlld2VyLnNjZW5lLng7XG4gICAgdGhpcy52aWV3ZXIuc2NlbmUueSA9IHRoaXMudmlld2VyLmhlaWdodDtcbiAgICB0aGlzLnZpZXdlci5zY2VuZS55X3ByZXZfc2hpZnQgPSB0aGlzLnZpZXdlci5zY2VuZS55O1xuICB9XG5cbiAgYXN5bmMgZ2V0QW5kRHJhd01hcChzaGlmdElkKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vR2V0IG1hcCBkYXRhIGZyb20gZGF0YWJhc2UuXG4gICAgICBjb25zdCBtYXBJbWFnZSA9IGF3YWl0IHRoaXMubWFwSW1hZ2VJbnRlcmZhY2UuZ2V0KHNoaWZ0SWQpO1xuICAgICAgLy9SZWNvcmQgYWJzZW5jZSBvZiBwcmV2aW91cyBtYXAuXG4gICAgICBjb25zdCBmaXJzdE1hcCA9ICF0aGlzLm1hcEJpdG1hcDtcbiAgICAgIC8vU3RvcmUgbmV3IG1hcCBvcmlnaW4uXG4gICAgICB0aGlzLm1hcE9yaWdpbiA9IHsgeDogbWFwSW1hZ2Uub3JpZ2luWCwgeTogbWFwSW1hZ2Uub3JpZ2luWSB9O1xuICAgICAgLy9DcmVhdGUgZHJhd2FibGUgZWxlbWVudCBmb3IgbWFwIGltYWdlLlxuICAgICAgdGhpcy5tYXBCaXRtYXAgPSBuZXcgY3JlYXRlanMuQml0bWFwKG1hcEltYWdlLmltYWdlRGF0YSk7XG4gICAgICAvL1NldCBkcmF3YWJsZSBvcmlnaW4gYW5kIHNjYWxlLlxuICAgICAgdGhpcy5tYXBCaXRtYXAueCA9IG1hcEltYWdlLm9yaWdpblg7XG4gICAgICB0aGlzLm1hcEJpdG1hcC55ID1cbiAgICAgICAgLW1hcEltYWdlLmhlaWdodCAqIG1hcEltYWdlLnJlc29sdXRpb24gLSBtYXBJbWFnZS5vcmlnaW5ZO1xuICAgICAgdGhpcy5tYXBCaXRtYXAuc2NhbGVYID0gbWFwSW1hZ2UucmVzb2x1dGlvbjtcbiAgICAgIHRoaXMubWFwQml0bWFwLnNjYWxlWSA9IG1hcEltYWdlLnJlc29sdXRpb247XG4gICAgICAvL0NsZWFyIHNjZW5lIGF0IG1hcCBpbmRleC5cbiAgICAgIHRoaXMudmlld2VyLnNjZW5lLnJlbW92ZUNoaWxkQXQoMCk7XG4gICAgICAvL0FkZCBtYXAgdG8gdmlld2VyLlxuICAgICAgdGhpcy52aWV3ZXIuc2NlbmUuYWRkQ2hpbGRBdCh0aGlzLm1hcEJpdG1hcCwgMCk7XG4gICAgICAvL1NjYWxlIGFuZCBzaGlmdCB2aWV3ZXIgaWYgdGhpcyBpcyB0aGUgZmlyc3QgbWFwLlxuICAgICAgaWYgKGZpcnN0TWFwKSB7XG4gICAgICAgIHRoaXMudmlld2VyLnNjZW5lLmFkZENoaWxkQXQodGhpcy5tYXBCaXRtYXAsIDApO1xuICAgICAgICAvL0FkanVzdCB2aWV3ZXIgdmlzaWJsZSBhcmVhIHRvIGRpc3BsYXkgbWFwLlxuICAgICAgICBjb25zdCB2aWV3ZXJSYXRpbyA9IHRoaXMudmlld2VyLndpZHRoIC8gdGhpcy52aWV3ZXIuaGVpZ2h0O1xuICAgICAgICAvL0ZpdCBzY2FsZSBmb3IgbGFyZ2VzdCBtYXAgZGltZW5zaW9uLlxuICAgICAgICBpZiAobWFwSW1hZ2Uud2lkdGggPiBtYXBJbWFnZS5oZWlnaHQpIHtcbiAgICAgICAgICB0aGlzLnZpZXdlci5zY2FsZVRvRGltZW5zaW9ucyhcbiAgICAgICAgICAgIG1hcEltYWdlLndpZHRoICogbWFwSW1hZ2UucmVzb2x1dGlvbixcbiAgICAgICAgICAgIChtYXBJbWFnZS53aWR0aCAqIG1hcEltYWdlLnJlc29sdXRpb24pIC8gdmlld2VyUmF0aW9cbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudmlld2VyLnNjYWxlVG9EaW1lbnNpb25zKFxuICAgICAgICAgICAgbWFwSW1hZ2UuaGVpZ2h0ICogbWFwSW1hZ2UucmVzb2x1dGlvbiAqIHZpZXdlclJhdGlvLFxuICAgICAgICAgICAgbWFwSW1hZ2UuaGVpZ2h0ICogbWFwSW1hZ2UucmVzb2x1dGlvblxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgLy9TaGlmdCB2aWV3IHRvIGNlbnRlciBtYXAuXG4gICAgICAgIHRoaXMudmlld2VyLnNoaWZ0KFxuICAgICAgICAgIG1hcEltYWdlLm9yaWdpblggLVxuICAgICAgICAgICAgKHRoaXMudmlld2VyLnNjZW5lLmNhbnZhcy53aWR0aCAtIHRoaXMudmlld2VyLndpZHRoKSAvXG4gICAgICAgICAgICAgIDIgL1xuICAgICAgICAgICAgICB0aGlzLnZpZXdlci5zY2VuZS5zY2FsZVgsXG4gICAgICAgICAgbWFwSW1hZ2Uub3JpZ2luWSArXG4gICAgICAgICAgICAodGhpcy52aWV3ZXIuc2NlbmUuY2FudmFzLmhlaWdodCAtIHRoaXMudmlld2VyLmhlaWdodCkgL1xuICAgICAgICAgICAgICAyIC9cbiAgICAgICAgICAgICAgdGhpcy52aWV3ZXIuc2NlbmUuc2NhbGVZXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFwSW1hZ2U7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vTG9nIHJlc3BvbnNlLlxuICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZW1vdmVQb3NlcyhzZWdtZW50SWQpIHtcbiAgICAvL0ZpbmQgdGhlIG1hcCBsYXllciB3aXRoIHRoZSBwb3NlcyBvZiB0aGUgc3BlY2lmaWVkIHNlZ21lbnQgaWQuXG4gICAgY29uc3QgbGF5ZXJJbmRleCA9IHRoaXMubWFwUG9pbnRzTGF5ZXJzLmZpbmRJbmRleChcbiAgICAgIChlbnRyeSkgPT4gZW50cnkuc2VnbWVudElkID09IHNlZ21lbnRJZFxuICAgICk7XG4gICAgaWYgKGxheWVySW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgbGF5ZXJQb3Nlc1B0ciA9IHRoaXMubWFwUG9pbnRzTGF5ZXJzW2xheWVySW5kZXhdLm1hcFBvc2VzUHRyO1xuICAgICAgLy9SZW1vdmUgdGhlIGhlbGQgdmFyaWFibGUgaWYgdGhlIGZvdW5kIHBvc2VzIHdlcmUgYWN0aXZlIChzZWxlY3RlZCkuXG4gICAgICBpZiAobGF5ZXJQb3Nlc1B0ciA9PSB0aGlzLmFjdGl2ZVBvc2VzKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlUG9zZXMgPSBudWxsO1xuICAgICAgfVxuICAgICAgLy9SZW1vdmUgdGhlIGZvdW5kIHBvc2VzIGZyb20gdGhlIG1hcC5cbiAgICAgIHRoaXMudmlld2VyLnNjZW5lLnJlbW92ZUNoaWxkKGxheWVyUG9zZXNQdHIuc2hhcGUpO1xuICAgICAgdGhpcy5tYXBQb2ludHNMYXllcnMuc3BsaWNlKGxheWVySW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldEFuZERyYXdNYXBQb3NlcyhzZWdtZW50SWQpIHtcbiAgICB0cnkge1xuICAgICAgLy9HZXQgbG9jYWwgcG9zZXMgZnJvbSBkYXRhYmFzZS5cbiAgICAgIGNvbnN0IGxvY2FsUG9zZUxpc3QgPSBhd2FpdCB0aGlzLmxvY2FsUG9zZUludGVyZmFjZS5nZXQoc2VnbWVudElkKTtcbiAgICAgIC8vUmVtb3ZlIGFueSBkYXRhIGZyb20gdGhlIHNwZWNpZmllZCBzZWdtZW50IHRoYXQgd2FzIGFscmVhZHkgb24gdGhlIG1hcC5cbiAgICAgIHRoaXMucmVtb3ZlUG9zZXMoc2VnbWVudElkKTtcbiAgICAgIGlmIChsb2NhbFBvc2VMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy9DcmVhdGUgZHJhd2FibGUgZWxlbWVudCBmb3IgbG9jYWwgcG9zZXMuXG4gICAgICAgIGNvbnN0IHRyYWNlU2hhcGUgPSBuZXcgY3JlYXRlanMuU2hhcGUoKTtcbiAgICAgICAgLy9EZWZpbmUgY29sb3Igb2YgdGhlIHN0cm9rZS5cbiAgICAgICAgbGV0IHN0cm9rZUNvbG9yO1xuICAgICAgICBpZiAobG9jYWxQb3NlTGlzdFswXS50eXBlID09IFwiQVVUT1wiKSB7XG4gICAgICAgICAgc3Ryb2tlQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3Ryb2tlQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICB9XG4gICAgICAgIC8vU2V0IGRyYXdhYmxlIHN0eWxlIGFuZCBpbml0aWFsIHBvc2l0aW9uLlxuICAgICAgICB0cmFjZVNoYXBlLmdyYXBoaWNzLnNldFN0cm9rZVN0eWxlKDAuMik7XG4gICAgICAgIGNvbnN0IHRyYWNlQ29tbWFuZCA9XG4gICAgICAgICAgdHJhY2VTaGFwZS5ncmFwaGljcy5iZWdpblN0cm9rZShzdHJva2VDb2xvcikuY29tbWFuZDtcbiAgICAgICAgdHJhY2VTaGFwZS5ncmFwaGljcy5tb3ZlVG8obG9jYWxQb3NlTGlzdFswXS54LCAtbG9jYWxQb3NlTGlzdFswXS55KTtcbiAgICAgICAgLy9BZGQgbG9jYWwgcG9zZXMgdG8gZHJhd2FibGUuXG4gICAgICAgIGxvY2FsUG9zZUxpc3QuZm9yRWFjaCgobG9jYWxQb3NlKSA9PiB7XG4gICAgICAgICAgdHJhY2VTaGFwZS5ncmFwaGljcy5saW5lVG8obG9jYWxQb3NlLngsIC1sb2NhbFBvc2UueSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL0FkZCBkcmF3YWJsZSB0byB2aWV3ZXIuXG4gICAgICAgIC8vSWYgdGhlcmUgaXMgYW4gYWN0aXZlIG1hcmtlciwgcmVkcmF3IGl0IG9uIHRvcCBvZiB0aGUgZHJhd2FibGUuXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZU1hcmtlcikge1xuICAgICAgICAgIHRoaXMudmlld2VyLnNjZW5lLnJlbW92ZUNoaWxkKHRoaXMuYWN0aXZlTWFya2VyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpZXdlci5zY2VuZS5hZGRDaGlsZCh0cmFjZVNoYXBlKTtcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlTWFya2VyKSB7XG4gICAgICAgICAgdGhpcy52aWV3ZXIuc2NlbmUuYWRkQ2hpbGQodGhpcy5hY3RpdmVNYXJrZXIpO1xuICAgICAgICB9XG4gICAgICAgIC8vU2F2ZSBzZWdtZW50IGlkIGFuZCBwb2ludGVyIHRvIG1hcCBsYXllciBpbiBhIGxpc3QuXG4gICAgICAgIHRoaXMubWFwUG9pbnRzTGF5ZXJzLnB1c2goe1xuICAgICAgICAgIHNlZ21lbnRJZDogc2VnbWVudElkLFxuICAgICAgICAgIG1hcFBvc2VzUHRyOiB7XG4gICAgICAgICAgICBzaGFwZTogdHJhY2VTaGFwZSxcbiAgICAgICAgICAgIGNvbW1hbmQ6IHRyYWNlQ29tbWFuZCxcbiAgICAgICAgICAgIHR5cGU6IGxvY2FsUG9zZUxpc3RbMF0udHlwZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gbG9jYWwgcG9zaXRpb24gZGF0YSBmb3Igc2VnbWVudCBcIiArIHNlZ21lbnRJZCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZUFjdGl2ZU1hcmtlcigpIHtcbiAgICAvL1JlbW92ZSBsb2NhdGlvbiBtYXJrZXIgZnJvbSBtYXAuXG4gICAgaWYgKHRoaXMuYWN0aXZlTWFya2VyKSB7XG4gICAgICB0aGlzLnZpZXdlci5zY2VuZS5yZW1vdmVDaGlsZCh0aGlzLmFjdGl2ZU1hcmtlcik7XG4gICAgICB0aGlzLmFjdGl2ZU1hcmtlciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlQWN0aXZlUG9zZXMoKSB7XG4gICAgLy9SZXN0b3JlIHBvaW50IGNvbG9yaW5nLlxuICAgIC8vVW5mb3J0dW5hdGVseSwgaXQgc2VlbXMgbGlrZSB0aGUgb25seSB3YXkgdG8gZG8gdGhpcyBmb3IgZWFzZWxqcyBncmFwaGljcyBpcyB0byByZS1kcmF3IHRoZSBzaGFwZS5cbiAgICBpZiAodGhpcy5hY3RpdmVQb3Nlcykge1xuICAgICAgdGhpcy5hY3RpdmVQb3Nlcy5jb21tYW5kLnN0eWxlID1cbiAgICAgICAgdGhpcy5hY3RpdmVQb3Nlcy50eXBlID09IFwiQVVUT1wiID8gXCJncmVlblwiIDogXCJyZWRcIjtcbiAgICAgIHRoaXMuYWN0aXZlUG9zZXMgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGFkZEFjdGl2ZU1hcmtlcih4LCB5KSB7XG4gICAgLy9BZGQgbG9jYXRpb24gbWFya2VyIHRvIG1hcC5cbiAgICB0aGlzLmFjdGl2ZU1hcmtlciA9IG5ldyBjcmVhdGVqcy5TaGFwZSgpO1xuICAgIHRoaXMuYWN0aXZlTWFya2VyLmdyYXBoaWNzLmJlZ2luRmlsbChcImJsdWVcIikuZHJhd0NpcmNsZSh4LCAteSwgMC41KTtcbiAgICB0aGlzLnZpZXdlci5zY2VuZS5hZGRDaGlsZCh0aGlzLmFjdGl2ZU1hcmtlcik7XG4gIH1cblxuICBhZGRBY3RpdmVQb3NlcyhzZWdtZW50SWQpIHtcbiAgICAvL0NoYW5nZSBwb2ludCBjb2xvcmluZyB0byBibHVlIGZvciBwb3NlcyBvZiB0aGUgYXNzb2NpYXRlZCBzZWdtZW50LlxuICAgIGNvbnN0IHNlbGVjdGVkUG9zZXMgPSB0aGlzLm1hcFBvaW50c0xheWVycy5maW5kKFxuICAgICAgKHBvc2VzKSA9PiBwb3Nlcy5zZWdtZW50SWQgPT0gc2VnbWVudElkXG4gICAgKTtcbiAgICBpZiAoc2VsZWN0ZWRQb3Nlcykge1xuICAgICAgdGhpcy5hY3RpdmVQb3NlcyA9IHNlbGVjdGVkUG9zZXMubWFwUG9zZXNQdHI7XG4gICAgICB0aGlzLmFjdGl2ZVBvc2VzLmNvbW1hbmQuc3R5bGUgPSBcImJsdWVcIjtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utility/LocalMap.js\n");

/***/ }),

/***/ "./src/utility/Modal.js":
/*!******************************!*\
  !*** ./src/utility/Modal.js ***!
  \******************************/
/*! exports provided: Modal */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Modal\", function() { return Modal; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Common class for displaying overlays.\nclass Modal {\n  constructor(\n    contentObject,\n    fallbackText,\n    closeCallbackFunction,\n    noMaxWidth = false\n  ) {\n    this.fallbackText = fallbackText;\n    this.closeCallbackFunction = closeCallbackFunction;\n    this.visible = false;\n    //Import and build modal node.\n    const modalTemplateEl = document.getElementById(\"modal-template\");\n    const modalElements = document.importNode(modalTemplateEl.content, true);\n    //Fill modal with the elements of contentObject.\n    this.modalElement = modalElements.querySelector(\".modal\");\n    if (noMaxWidth) {\n      this.modalElement.classList.add(\"no-max-width\");\n    }\n    this.modalElement.insertBefore(\n      contentObject.element,\n      this.modalElement.children[0]\n    );\n    //Reassign element property of contentObject, since insertBefore erases it.\n    //This is done to keep the content logic inside the content class\n    contentObject.element = this.modalElement;\n    //Select modal element and assign transitionend listener to close it\n    this.modalElement.addEventListener(\"transitionend\", this.close.bind(this));\n    //Select backdrop and assign click listener to trigger closing it.\n    this.backdropElement = modalElements.querySelector(\".backdrop\");\n    this.backdropElement.addEventListener(\"click\", this.hide.bind(this));\n    //Select close button and assign click listener to trigger closing it.\n    this.buttonElement = modalElements.getElementById(\"modal-close-btn\");\n    this.buttonElement.addEventListener(\"click\", this.hide.bind(this));\n  }\n\n  show() {\n    //Check template support\n    if (\"content\" in document.createElement(\"template\")) {\n      //Render modal and backdrop\n      document.body.insertAdjacentElement(\"afterbegin\", this.modalElement);\n      document.body.insertAdjacentElement(\"afterbegin\", this.backdropElement);\n      //scroll page to align with the top of the modal\n      this.modalElement.scrollIntoView({ behavior: \"smooth\" });\n      //Record visibility status\n      this.visible = true;\n      //Add show class to make visible\n      this.modalElement.classList.add(\"show\");\n    } else {\n      //Alert fallback text\n      alert(this.fallbackText);\n    }\n  }\n\n  hide() {\n    //Record visibility status\n    this.visible = false;\n    //Remove show class to make it disappear\n    this.modalElement.classList.remove(\"show\");\n  }\n\n  close() {\n    //Workaround to prevent \"transitionend\" trigger when showing\n    if (this.visible) {\n      return;\n    }\n    if (this.modalElement) {\n      //Delete modal and backdrop\n      document.body.removeChild(this.modalElement);\n      document.body.removeChild(this.backdropElement);\n      this.modalElement = null;\n      this.backdropElement = null;\n    }\n    if (this.closeCallbackFunction) {\n      this.closeCallbackFunction();\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9Nb2RhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlsaXR5L01vZGFsLmpzPzc2NWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAYXV0aG9yIENhcmxvcyBUYW1waWVyIENvdG9yYXMgLSBjYXJsb3MudGFtcGllci5jb3RvcmFzQGZraWUuZnJhdW5ob2Zlci5kZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAyMSAtIEZyYXVuaG9mZXIgRktJRVxuICovXG5cbi8vQ29tbW9uIGNsYXNzIGZvciBkaXNwbGF5aW5nIG92ZXJsYXlzLlxuZXhwb3J0IGNsYXNzIE1vZGFsIHtcbiAgY29uc3RydWN0b3IoXG4gICAgY29udGVudE9iamVjdCxcbiAgICBmYWxsYmFja1RleHQsXG4gICAgY2xvc2VDYWxsYmFja0Z1bmN0aW9uLFxuICAgIG5vTWF4V2lkdGggPSBmYWxzZVxuICApIHtcbiAgICB0aGlzLmZhbGxiYWNrVGV4dCA9IGZhbGxiYWNrVGV4dDtcbiAgICB0aGlzLmNsb3NlQ2FsbGJhY2tGdW5jdGlvbiA9IGNsb3NlQ2FsbGJhY2tGdW5jdGlvbjtcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcbiAgICAvL0ltcG9ydCBhbmQgYnVpbGQgbW9kYWwgbm9kZS5cbiAgICBjb25zdCBtb2RhbFRlbXBsYXRlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vZGFsLXRlbXBsYXRlXCIpO1xuICAgIGNvbnN0IG1vZGFsRWxlbWVudHMgPSBkb2N1bWVudC5pbXBvcnROb2RlKG1vZGFsVGVtcGxhdGVFbC5jb250ZW50LCB0cnVlKTtcbiAgICAvL0ZpbGwgbW9kYWwgd2l0aCB0aGUgZWxlbWVudHMgb2YgY29udGVudE9iamVjdC5cbiAgICB0aGlzLm1vZGFsRWxlbWVudCA9IG1vZGFsRWxlbWVudHMucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcbiAgICBpZiAobm9NYXhXaWR0aCkge1xuICAgICAgdGhpcy5tb2RhbEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm5vLW1heC13aWR0aFwiKTtcbiAgICB9XG4gICAgdGhpcy5tb2RhbEVsZW1lbnQuaW5zZXJ0QmVmb3JlKFxuICAgICAgY29udGVudE9iamVjdC5lbGVtZW50LFxuICAgICAgdGhpcy5tb2RhbEVsZW1lbnQuY2hpbGRyZW5bMF1cbiAgICApO1xuICAgIC8vUmVhc3NpZ24gZWxlbWVudCBwcm9wZXJ0eSBvZiBjb250ZW50T2JqZWN0LCBzaW5jZSBpbnNlcnRCZWZvcmUgZXJhc2VzIGl0LlxuICAgIC8vVGhpcyBpcyBkb25lIHRvIGtlZXAgdGhlIGNvbnRlbnQgbG9naWMgaW5zaWRlIHRoZSBjb250ZW50IGNsYXNzXG4gICAgY29udGVudE9iamVjdC5lbGVtZW50ID0gdGhpcy5tb2RhbEVsZW1lbnQ7XG4gICAgLy9TZWxlY3QgbW9kYWwgZWxlbWVudCBhbmQgYXNzaWduIHRyYW5zaXRpb25lbmQgbGlzdGVuZXIgdG8gY2xvc2UgaXRcbiAgICB0aGlzLm1vZGFsRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidHJhbnNpdGlvbmVuZFwiLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgIC8vU2VsZWN0IGJhY2tkcm9wIGFuZCBhc3NpZ24gY2xpY2sgbGlzdGVuZXIgdG8gdHJpZ2dlciBjbG9zaW5nIGl0LlxuICAgIHRoaXMuYmFja2Ryb3BFbGVtZW50ID0gbW9kYWxFbGVtZW50cy5xdWVyeVNlbGVjdG9yKFwiLmJhY2tkcm9wXCIpO1xuICAgIHRoaXMuYmFja2Ryb3BFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhpZGUuYmluZCh0aGlzKSk7XG4gICAgLy9TZWxlY3QgY2xvc2UgYnV0dG9uIGFuZCBhc3NpZ24gY2xpY2sgbGlzdGVuZXIgdG8gdHJpZ2dlciBjbG9zaW5nIGl0LlxuICAgIHRoaXMuYnV0dG9uRWxlbWVudCA9IG1vZGFsRWxlbWVudHMuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbC1jbG9zZS1idG5cIik7XG4gICAgdGhpcy5idXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhpZGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBzaG93KCkge1xuICAgIC8vQ2hlY2sgdGVtcGxhdGUgc3VwcG9ydFxuICAgIGlmIChcImNvbnRlbnRcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIikpIHtcbiAgICAgIC8vUmVuZGVyIG1vZGFsIGFuZCBiYWNrZHJvcFxuICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmJlZ2luXCIsIHRoaXMubW9kYWxFbGVtZW50KTtcbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYWZ0ZXJiZWdpblwiLCB0aGlzLmJhY2tkcm9wRWxlbWVudCk7XG4gICAgICAvL3Njcm9sbCBwYWdlIHRvIGFsaWduIHdpdGggdGhlIHRvcCBvZiB0aGUgbW9kYWxcbiAgICAgIHRoaXMubW9kYWxFbGVtZW50LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gICAgICAvL1JlY29yZCB2aXNpYmlsaXR5IHN0YXR1c1xuICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgIC8vQWRkIHNob3cgY2xhc3MgdG8gbWFrZSB2aXNpYmxlXG4gICAgICB0aGlzLm1vZGFsRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy9BbGVydCBmYWxsYmFjayB0ZXh0XG4gICAgICBhbGVydCh0aGlzLmZhbGxiYWNrVGV4dCk7XG4gICAgfVxuICB9XG5cbiAgaGlkZSgpIHtcbiAgICAvL1JlY29yZCB2aXNpYmlsaXR5IHN0YXR1c1xuICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xuICAgIC8vUmVtb3ZlIHNob3cgY2xhc3MgdG8gbWFrZSBpdCBkaXNhcHBlYXJcbiAgICB0aGlzLm1vZGFsRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vV29ya2Fyb3VuZCB0byBwcmV2ZW50IFwidHJhbnNpdGlvbmVuZFwiIHRyaWdnZXIgd2hlbiBzaG93aW5nXG4gICAgaWYgKHRoaXMudmlzaWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RhbEVsZW1lbnQpIHtcbiAgICAgIC8vRGVsZXRlIG1vZGFsIGFuZCBiYWNrZHJvcFxuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLm1vZGFsRWxlbWVudCk7XG4gICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuYmFja2Ryb3BFbGVtZW50KTtcbiAgICAgIHRoaXMubW9kYWxFbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuYmFja2Ryb3BFbGVtZW50ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuY2xvc2VDYWxsYmFja0Z1bmN0aW9uKSB7XG4gICAgICB0aGlzLmNsb3NlQ2FsbGJhY2tGdW5jdGlvbigpO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utility/Modal.js\n");

/***/ }),

/***/ "./src/utility/ServerInterface.js":
/*!****************************************!*\
  !*** ./src/utility/ServerInterface.js ***!
  \****************************************/
/*! exports provided: ServerInterface */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ServerInterface\", function() { return ServerInterface; });\n/**\n * @author Carlos Tampier Cotoras - carlos.tampier.cotoras@fkie.fraunhofer.de\n *\n * Copyright (c) 2021 - Fraunhofer FKIE\n */\n\n//Fetch wrapper for HTTP interfacing with FTT server API.\nclass ServerInterface {\n  constructor() {\n    this.server_adr = location.host;\n  }\n\n  async sendHttpRequest(method, url, data) {\n    const response = await fetch(url, {\n      method: method,\n      body: JSON.stringify(data),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    });\n    if (response.status >= 200 && response.status < 300) {\n      // Determine the response type based on Content-Type header\n      const contentType = response.headers.get(\"Content-Type\");\n      if (contentType.includes(\"application/json\")) {\n        // Handle JSON responses\n        return response.json();\n      } else {\n        // Handle file (blob) responses\n        return response.blob();\n      }\n    } else {\n      const response_data = await response.json();\n      console.log(response_data.message);\n      throw new Error(\n        \"Something went wrong! Server message: \" + response_data.message\n      );\n    }\n  }\n\n  async sendGetRequest(path, params) {\n    const responseData = await this.sendHttpRequest(\n      \"GET\",\n      `http://${this.server_adr}/${path}${params ? \"?\" + params : \"\"}`\n    );\n    if (responseData) {\n      return responseData;\n    } else {\n      throw new Error(\"Empty HTTP response!\");\n    }\n  }\n\n  async sendPostRequest(path, data) {\n    const responseData = await this.sendHttpRequest(\n      \"POST\",\n      `http://${this.server_adr}/${path}`,\n      data\n    );\n    if (responseData) {\n      console.log(responseData);\n      return responseData;\n    } else {\n      throw new Error(\"Invalid HTTP request\");\n    }\n  }\n\n  async sendPutRequest(path, data) {\n    const responseData = await this.sendHttpRequest(\n      \"PUT\",\n      `http://${this.server_adr}/${path}`,\n      data\n    );\n    if (responseData) {\n      console.log(responseData);\n    } else {\n      throw new Error(\"Invalid HTTP request\");\n    }\n  }\n\n  async sendDeleteRequest(path, params) {\n    const responseData = await this.sendHttpRequest(\n      \"DELETE\",\n      `http://${this.server_adr}/${path}${params ? \"?\" + params : \"\"}`\n    );\n    if (responseData) {\n      console.log(responseData);\n    } else {\n      throw new Error(\"Invalid HTTP request\");\n    }\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9TZXJ2ZXJJbnRlcmZhY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbGl0eS9TZXJ2ZXJJbnRlcmZhY2UuanM/ZjlhZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBhdXRob3IgQ2FybG9zIFRhbXBpZXIgQ290b3JhcyAtIGNhcmxvcy50YW1waWVyLmNvdG9yYXNAZmtpZS5mcmF1bmhvZmVyLmRlXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDIxIC0gRnJhdW5ob2ZlciBGS0lFXG4gKi9cblxuLy9GZXRjaCB3cmFwcGVyIGZvciBIVFRQIGludGVyZmFjaW5nIHdpdGggRlRUIHNlcnZlciBBUEkuXG5leHBvcnQgY2xhc3MgU2VydmVySW50ZXJmYWNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zZXJ2ZXJfYWRyID0gbG9jYXRpb24uaG9zdDtcbiAgfVxuXG4gIGFzeW5jIHNlbmRIdHRwUmVxdWVzdChtZXRob2QsIHVybCwgZGF0YSkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAvLyBEZXRlcm1pbmUgdGhlIHJlc3BvbnNlIHR5cGUgYmFzZWQgb24gQ29udGVudC1UeXBlIGhlYWRlclxuICAgICAgY29uc3QgY29udGVudFR5cGUgPSByZXNwb25zZS5oZWFkZXJzLmdldChcIkNvbnRlbnQtVHlwZVwiKTtcbiAgICAgIGlmIChjb250ZW50VHlwZS5pbmNsdWRlcyhcImFwcGxpY2F0aW9uL2pzb25cIikpIHtcbiAgICAgICAgLy8gSGFuZGxlIEpTT04gcmVzcG9uc2VzXG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgZmlsZSAoYmxvYikgcmVzcG9uc2VzXG4gICAgICAgIHJldHVybiByZXNwb25zZS5ibG9iKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlX2RhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zb2xlLmxvZyhyZXNwb25zZV9kYXRhLm1lc3NhZ2UpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlNvbWV0aGluZyB3ZW50IHdyb25nISBTZXJ2ZXIgbWVzc2FnZTogXCIgKyByZXNwb25zZV9kYXRhLm1lc3NhZ2VcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2VuZEdldFJlcXVlc3QocGF0aCwgcGFyYW1zKSB7XG4gICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgdGhpcy5zZW5kSHR0cFJlcXVlc3QoXG4gICAgICBcIkdFVFwiLFxuICAgICAgYGh0dHA6Ly8ke3RoaXMuc2VydmVyX2Fkcn0vJHtwYXRofSR7cGFyYW1zID8gXCI/XCIgKyBwYXJhbXMgOiBcIlwifWBcbiAgICApO1xuICAgIGlmIChyZXNwb25zZURhdGEpIHtcbiAgICAgIHJldHVybiByZXNwb25zZURhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkVtcHR5IEhUVFAgcmVzcG9uc2UhXCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbmRQb3N0UmVxdWVzdChwYXRoLCBkYXRhKSB7XG4gICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgdGhpcy5zZW5kSHR0cFJlcXVlc3QoXG4gICAgICBcIlBPU1RcIixcbiAgICAgIGBodHRwOi8vJHt0aGlzLnNlcnZlcl9hZHJ9LyR7cGF0aH1gLFxuICAgICAgZGF0YVxuICAgICk7XG4gICAgaWYgKHJlc3BvbnNlRGF0YSkge1xuICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VEYXRhKTtcbiAgICAgIHJldHVybiByZXNwb25zZURhdGE7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSFRUUCByZXF1ZXN0XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbmRQdXRSZXF1ZXN0KHBhdGgsIGRhdGEpIHtcbiAgICBjb25zdCByZXNwb25zZURhdGEgPSBhd2FpdCB0aGlzLnNlbmRIdHRwUmVxdWVzdChcbiAgICAgIFwiUFVUXCIsXG4gICAgICBgaHR0cDovLyR7dGhpcy5zZXJ2ZXJfYWRyfS8ke3BhdGh9YCxcbiAgICAgIGRhdGFcbiAgICApO1xuICAgIGlmIChyZXNwb25zZURhdGEpIHtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlRGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgSFRUUCByZXF1ZXN0XCIpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbmREZWxldGVSZXF1ZXN0KHBhdGgsIHBhcmFtcykge1xuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHRoaXMuc2VuZEh0dHBSZXF1ZXN0KFxuICAgICAgXCJERUxFVEVcIixcbiAgICAgIGBodHRwOi8vJHt0aGlzLnNlcnZlcl9hZHJ9LyR7cGF0aH0ke3BhcmFtcyA/IFwiP1wiICsgcGFyYW1zIDogXCJcIn1gXG4gICAgKTtcbiAgICBpZiAocmVzcG9uc2VEYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhyZXNwb25zZURhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEhUVFAgcmVxdWVzdFwiKTtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utility/ServerInterface.js\n");

/***/ }),

/***/ "./src/utility/TimeZone.js":
/*!*********************************!*\
  !*** ./src/utility/TimeZone.js ***!
  \*********************************/
/*! exports provided: timeZoneUTC, timeZoneStrings, timeZoneInts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timeZoneUTC\", function() { return timeZoneUTC; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timeZoneStrings\", function() { return timeZoneStrings; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"timeZoneInts\", function() { return timeZoneInts; });\n//Lists of world time zones in various formats.\nconst timeZoneUTC = [\n  {\"label\":\"(UTC-12:00)\",\"value\":\"-12\"},\n  {\"label\":\"(UTC-11:00)\",\"value\":\"-11\"},\n  {\"label\":\"(UTC-10:00)\",\"value\":\"-10\"},\n  {\"label\":\"(UTC-09:00)\",\"value\":\"-9\"},\n  {\"label\":\"(UTC-08:00)\",\"value\":\"-8\"},\n  {\"label\":\"(UTC-07:00)\",\"value\":\"-7\"},\n  {\"label\":\"(UTC-06:00)\",\"value\":\"-6\"},\n  {\"label\":\"(UTC-05:00)\",\"value\":\"-5\"},\n  {\"label\":\"(UTC-04:00)\",\"value\":\"-4\"},\n  {\"label\":\"(UTC-03:30)\",\"value\":\"-3.5\"},\n  {\"label\":\"(UTC-03:00)\",\"value\":\"-3\"},\n  {\"label\":\"(UTC-02:00)\",\"value\":\"-2\"},\n  {\"label\":\"(UTC-01:00)\",\"value\":\"-1\"},\n  {\"label\":\"(UTC+00:00)\",\"value\":\"0\"},\n  {\"label\":\"(UTC+01:00)\",\"value\":\"1\"},\n  {\"label\":\"(UTC+02:00)\",\"value\":\"2\"},\n  {\"label\":\"(UTC+03:00)\",\"value\":\"3\"},\n  {\"label\":\"(UTC+03:30)\",\"value\":\"3.5\"},\n  {\"label\":\"(UTC+04:00)\",\"value\":\"4\"},\n  {\"label\":\"(UTC+04:30)\",\"value\":\"4.5\"},\n  {\"label\":\"(UTC+05:00)\",\"value\":\"5\"},\n  {\"label\":\"(UTC+05:30)\",\"value\":\"5.5\"},\n  {\"label\":\"(UTC+05:45)\",\"value\":\"5.75\"},\n  {\"label\":\"(UTC+06:00)\",\"value\":\"6\"},\n  {\"label\":\"(UTC+06:30)\",\"value\":\"6.5\"},\n  {\"label\":\"(UTC+07:00)\",\"value\":\"7\"},\n  {\"label\":\"(UTC+08:00)\",\"value\":\"8\"},\n  {\"label\":\"(UTC+09:00)\",\"value\":\"9\"},\n  {\"label\":\"(UTC+09:30)\",\"value\":\"9.5\"},\n  {\"label\":\"(UTC+10:00)\",\"value\":\"10\"},\n  {\"label\":\"(UTC+11:00)\",\"value\":\"11\"},\n  {\"label\":\"(UTC+12:00)\",\"value\":\"12\"},\n  {\"label\":\"(UTC+13:00)\",\"value\":\"13\"}\n]\n\nconst timeZoneStrings = [\n  {\"label\":\"(GMT-12:00) International Date Line West\",\"value\":\"Etc/GMT+12\"},\n  {\"label\":\"(GMT-11:00) Midway Island, Samoa\",\"value\":\"Pacific/Midway\"},\n  {\"label\":\"(GMT-10:00) Hawaii\",\"value\":\"Pacific/Honolulu\"},\n  {\"label\":\"(GMT-09:00) Alaska\",\"value\":\"US/Alaska\"},\n  {\"label\":\"(GMT-08:00) Pacific Time (US & Canada)\",\"value\":\"America/Los_Angeles\"},\n  {\"label\":\"(GMT-08:00) Tijuana, Baja California\",\"value\":\"America/Tijuana\"},\n  {\"label\":\"(GMT-07:00) Arizona\",\"value\":\"US/Arizona\"},\n  {\"label\":\"(GMT-07:00) Chihuahua, La Paz, Mazatlan\",\"value\":\"America/Chihuahua\"},\n  {\"label\":\"(GMT-07:00) Mountain Time (US & Canada)\",\"value\":\"US/Mountain\"},\n  {\"label\":\"(GMT-06:00) Central America\",\"value\":\"America/Managua\"},\n  {\"label\":\"(GMT-06:00) Central Time (US & Canada)\",\"value\":\"US/Central\"},\n  {\"label\":\"(GMT-06:00) Guadalajara, Mexico City, Monterrey\",\"value\":\"America/Mexico_City\"},\n  {\"label\":\"(GMT-06:00) Saskatchewan\",\"value\":\"Canada/Saskatchewan\"},\n  {\"label\":\"(GMT-05:00) Bogota, Lima, Quito, Rio Branco\",\"value\":\"America/Bogota\"},\n  {\"label\":\"(GMT-05:00) Eastern Time (US & Canada)\",\"value\":\"US/Eastern\"},\n  {\"label\":\"(GMT-05:00) Indiana (East)\",\"value\":\"US/East-Indiana\"},\n  {\"label\":\"(GMT-04:00) Atlantic Time (Canada)\",\"value\":\"Canada/Atlantic\"},\n  {\"label\":\"(GMT-04:00) Caracas, La Paz\",\"value\":\"America/Caracas\"},\n  {\"label\":\"(GMT-04:00) Manaus\",\"value\":\"America/Manaus\"},\n  {\"label\":\"(GMT-04:00) Santiago\",\"value\":\"America/Santiago\"},\n  {\"label\":\"(GMT-03:30) Newfoundland\",\"value\":\"Canada/Newfoundland\"},\n  {\"label\":\"(GMT-03:00) Brasilia\",\"value\":\"America/Sao_Paulo\"},\n  {\"label\":\"(GMT-03:00) Buenos Aires, Georgetown\",\"value\":\"America/Argentina/Buenos_Aires\"},\n  {\"label\":\"(GMT-03:00) Greenland\",\"value\":\"America/Godthab\"},\n  {\"label\":\"(GMT-03:00) Montevideo\",\"value\":\"America/Montevideo\"},\n  {\"label\":\"(GMT-02:00) Mid-Atlantic\",\"value\":\"America/Noronha\"},\n  {\"label\":\"(GMT-01:00) Cape Verde Is.\",\"value\":\"Atlantic/Cape_Verde\"},\n  {\"label\":\"(GMT-01:00) Azores\",\"value\":\"Atlantic/Azores\"},\n  {\"label\":\"(GMT+00:00) Casablanca, Monrovia, Reykjavik\",\"value\":\"Africa/Casablanca\"},\n  {\"label\":\"(GMT+00:00) Greenwich Mean Time : Dublin, Edinburgh, Lisbon, London\",\"value\":\"Etc/Greenwich\"},\n  {\"label\":\"(GMT+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna\",\"value\":\"Europe/Amsterdam\"},\n  {\"label\":\"(GMT+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague\",\"value\":\"Europe/Belgrade\"},\n  {\"label\":\"(GMT+01:00) Brussels, Copenhagen, Madrid, Paris\",\"value\":\"Europe/Brussels\"},\n  {\"label\":\"(GMT+01:00) Sarajevo, Skopje, Warsaw, Zagreb\",\"value\":\"Europe/Sarajevo\"},\n  {\"label\":\"(GMT+01:00) West Central Africa\",\"value\":\"Africa/Lagos\"},\n  {\"label\":\"(GMT+02:00) Amman\",\"value\":\"Asia/Amman\"},\n  {\"label\":\"(GMT+02:00) Athens, Bucharest, Istanbul\",\"value\":\"Europe/Athens\"},\n  {\"label\":\"(GMT+02:00) Beirut\",\"value\":\"Asia/Beirut\"},\n  {\"label\":\"(GMT+02:00) Cairo\",\"value\":\"Africa/Cairo\"},\n  {\"label\":\"(GMT+02:00) Harare, Pretoria\",\"value\":\"Africa/Harare\"},\n  {\"label\":\"(GMT+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius\",\"value\":\"Europe/Helsinki\"},\n  {\"label\":\"(GMT+02:00) Jerusalem\",\"value\":\"Asia/Jerusalem\"},\n  {\"label\":\"(GMT+02:00) Minsk\",\"value\":\"Europe/Minsk\"},\n  {\"label\":\"(GMT+02:00) Windhoek\",\"value\":\"Africa/Windhoek\"},\n  {\"label\":\"(GMT+03:00) Kuwait, Riyadh, Baghdad\",\"value\":\"Asia/Kuwait\"},\n  {\"label\":\"(GMT+03:00) Moscow, St. Petersburg, Volgograd\",\"value\":\"Europe/Moscow\"},\n  {\"label\":\"(GMT+03:00) Nairobi\",\"value\":\"Africa/Nairobi\"},\n  {\"label\":\"(GMT+03:00) Tbilisi\",\"value\":\"Asia/Tbilisi\"},\n  {\"label\":\"(GMT+03:30) Tehran\",\"value\":\"Asia/Tehran\"},\n  {\"label\":\"(GMT+04:00) Abu Dhabi, Muscat\",\"value\":\"Asia/Muscat\"},\n  {\"label\":\"(GMT+04:00) Baku\",\"value\":\"Asia/Baku\"},\n  {\"label\":\"(GMT+04:00) Yerevan\",\"value\":\"Asia/Yerevan\"},\n  {\"label\":\"(GMT+04:30) Kabul\",\"value\":\"Asia/Kabul\"},\n  {\"label\":\"(GMT+05:00) Yekaterinburg\",\"value\":\"Asia/Yekaterinburg\"},\n  {\"label\":\"(GMT+05:00) Islamabad, Karachi, Tashkent\",\"value\":\"Asia/Karachi\"},\n  {\"label\":\"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi\",\"value\":\"Asia/Calcutta\"},\n  {\"label\":\"(GMT+05:30) Sri Jayawardenapura\",\"value\":\"Asia/Calcutta\"},\n  {\"label\":\"(GMT+05:45) Kathmandu\",\"value\":\"Asia/Katmandu\"},\n  {\"label\":\"(GMT+06:00) Almaty, Novosibirsk\",\"value\":\"Asia/Almaty\"},\n  {\"label\":\"(GMT+06:00) Astana, Dhaka\",\"value\":\"Asia/Dhaka\"},\n  {\"label\":\"(GMT+06:30) Yangon (Rangoon)\",\"value\":\"Asia/Rangoon\"},\n  {\"label\":\"(GMT+07:00) Bangkok, Hanoi, Jakarta\",\"value\":\"Asia/Bangkok\"},\n  {\"label\":\"(GMT+07:00) Krasnoyarsk\",\"value\":\"Asia/Krasnoyarsk\"},\n  {\"label\":\"(GMT+08:00) Beijing, Chongqing, Hong Kong, Urumqi\",\"value\":\"Asia/Hong_Kong\"},\n  {\"label\":\"(GMT+08:00) Kuala Lumpur, Singapore\",\"value\":\"Asia/Kuala_Lumpur\"},\n  {\"label\":\"(GMT+08:00) Irkutsk, Ulaan Bataar\",\"value\":\"Asia/Irkutsk\"},\n  {\"label\":\"(GMT+08:00) Perth\",\"value\":\"Australia/Perth\"},\n  {\"label\":\"(GMT+08:00) Taipei\",\"value\":\"Asia/Taipei\"},\n  {\"label\":\"(GMT+09:00) Osaka, Sapporo, Tokyo\",\"value\":\"Asia/Tokyo\"},\n  {\"label\":\"(GMT+09:00) Seoul\",\"value\":\"Asia/Seoul\"},\n  {\"label\":\"(GMT+09:00) Yakutsk\",\"value\":\"Asia/Yakutsk\"},\n  {\"label\":\"(GMT+09:30) Adelaide\",\"value\":\"Australia/Adelaide\"},\n  {\"label\":\"(GMT+09:30) Darwin\",\"value\":\"Australia/Darwin\"},\n  {\"label\":\"(GMT+10:00) Brisbane\",\"value\":\"Australia/Brisbane\"},\n  {\"label\":\"(GMT+10:00) Canberra, Melbourne, Sydney\",\"value\":\"Australia/Canberra\"},\n  {\"label\":\"(GMT+10:00) Hobart\",\"value\":\"Australia/Hobart\"},\n  {\"label\":\"(GMT+10:00) Guam, Port Moresby\",\"value\":\"Pacific/Guam\"},\n  {\"label\":\"(GMT+10:00) Vladivostok\",\"value\":\"Asia/Vladivostok\"},\n  {\"label\":\"(GMT+11:00) Magadan, Solomon Is., New Caledonia\",\"value\":\"Asia/Magadan\"},\n  {\"label\":\"(GMT+12:00) Auckland, Wellington\",\"value\":\"Pacific/Auckland\"},\n  {\"label\":\"(GMT+12:00) Fiji, Kamchatka, Marshall Is.\",\"value\":\"Pacific/Fiji\"},\n  {\"label\":\"(GMT+13:00) Nuku'alofa\",\"value\":\"Pacific/Tongatapu\"}\n]\n\nconst timeZoneInts = [\n  {\"label\":\"(GMT-12:00) International Date Line West\",\"value\":\"-12\"},\n  {\"label\":\"(GMT-11:00) Midway Island, Samoa\",\"value\":\"-11\"},\n  {\"label\":\"(GMT-10:00) Hawaii\",\"value\":\"-10\"},\n  {\"label\":\"(GMT-09:00) Alaska\",\"value\":\"-9\"},\n  {\"label\":\"(GMT-08:00) Pacific Time (US & Canada)\",\"value\":\"-8\"},\n  {\"label\":\"(GMT-08:00) Tijuana, Baja California\",\"value\":\"-8\"},\n  {\"label\":\"(GMT-07:00) Arizona\",\"value\":\"-7\"},\n  {\"label\":\"(GMT-07:00) Chihuahua, La Paz, Mazatlan\",\"value\":\"-7\"},\n  {\"label\":\"(GMT-07:00) Mountain Time (US & Canada)\",\"value\":\"-7\"},\n  {\"label\":\"(GMT-06:00) Central America\",\"value\":\"-6\"},\n  {\"label\":\"(GMT-06:00) Central Time (US & Canada)\",\"value\":\"-6\"},\n  {\"label\":\"(GMT-05:00) Bogota, Lima, Quito, Rio Branco\",\"value\":\"-5\"},\n  {\"label\":\"(GMT-05:00) Eastern Time (US & Canada)\",\"value\":\"-5\"},\n  {\"label\":\"(GMT-05:00) Indiana (East)\",\"value\":\"-5\"},\n  {\"label\":\"(GMT-04:00) Atlantic Time (Canada)\",\"value\":\"-4\"},\n  {\"label\":\"(GMT-04:00) Caracas, La Paz\",\"value\":\"-4\"},\n  {\"label\":\"(GMT-04:00) Manaus\",\"value\":\"-4\"},\n  {\"label\":\"(GMT-04:00) Santiago\",\"value\":\"-4\"},\n  {\"label\":\"(GMT-03:30) Newfoundland\",\"value\":\"-3.5\"},\n  {\"label\":\"(GMT-03:00) Brasilia\",\"value\":\"-3\"},\n  {\"label\":\"(GMT-03:00) Buenos Aires, Georgetown\",\"value\":\"-3\"},\n  {\"label\":\"(GMT-03:00) Greenland\",\"value\":\"-3\"},\n  {\"label\":\"(GMT-03:00) Montevideo\",\"value\":\"-3\"},\n  {\"label\":\"(GMT-02:00) Mid-Atlantic\",\"value\":\"-2\"},\n  {\"label\":\"(GMT-01:00) Cape Verde Is.\",\"value\":\"-1\"},\n  {\"label\":\"(GMT-01:00) Azores\",\"value\":\"-1\"},\n  {\"label\":\"(GMT+00:00) Casablanca, Monrovia, Reykjavik\",\"value\":\"0\"},\n  {\"label\":\"(GMT+00:00) Greenwich Mean Time : Dublin, Edinburgh, Lisbon, London\",\"value\":\"0\"},\n  {\"label\":\"(GMT+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna\",\"value\":\"1\"},\n  {\"label\":\"(GMT+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague\",\"value\":\"1\"},\n  {\"label\":\"(GMT+01:00) Brussels, Copenhagen, Madrid, Paris\",\"value\":\"1\"},\n  {\"label\":\"(GMT+01:00) Sarajevo, Skopje, Warsaw, Zagreb\",\"value\":\"1\"},\n  {\"label\":\"(GMT+01:00) West Central Africa\",\"value\":\"1\"},\n  {\"label\":\"(GMT+02:00) Amman\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Athens, Bucharest, Istanbul\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Beirut\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Cairo\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Harare, Pretoria\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Jerusalem\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Minsk\",\"value\":\"2\"},\n  {\"label\":\"(GMT+02:00) Windhoek\",\"value\":\"2\"},\n  {\"label\":\"(GMT+03:00) Kuwait, Riyadh, Baghdad\",\"value\":\"3\"},\n  {\"label\":\"(GMT+03:00) Moscow, St. Petersburg, Volgograd\",\"value\":\"3\"},\n  {\"label\":\"(GMT+03:00) Nairobi\",\"value\":\"3\"},\n  {\"label\":\"(GMT+03:00) Tbilisi\",\"value\":\"3\"},\n  {\"label\":\"(GMT+03:30) Tehran\",\"value\":\"3.5\"},\n  {\"label\":\"(GMT+04:00) Abu Dhabi, Muscat\",\"value\":\"4\"},\n  {\"label\":\"(GMT+04:00) Baku\",\"value\":\"4\"},\n  {\"label\":\"(GMT+04:00) Yerevan\",\"value\":\"4\"},\n  {\"label\":\"(GMT+04:30) Kabul\",\"value\":\"4.5\"},\n  {\"label\":\"(GMT+05:00) Yekaterinburg\",\"value\":\"5\"},\n  {\"label\":\"(GMT+05:00) Islamabad, Karachi, Tashkent\",\"value\":\"5\"},\n  {\"label\":\"(GMT+05:30) Sri Jayawardenapura\",\"value\":\"5.5\"},\n  {\"label\":\"(GMT+05:30) Chennai, Kolkata, Mumbai, New Delhi\",\"value\":\"5.5\"},\n  {\"label\":\"(GMT+05:45) Kathmandu\",\"value\":\"5.75\"},\n  {\"label\":\"(GMT+06:00) Almaty, Novosibirsk\",\"value\":\"6\"},{\"label\":\"(GMT+06:00) Astana, Dhaka\",\"value\":\"6\"},\n  {\"label\":\"(GMT+06:30) Yangon (Rangoon)\",\"value\":\"6.5\"},\n  {\"label\":\"(GMT+07:00) Bangkok, Hanoi, Jakarta\",\"value\":\"7\"},\n  {\"label\":\"(GMT+07:00) Krasnoyarsk\",\"value\":\"7\"},\n  {\"label\":\"(GMT+08:00) Beijing, Chongqing, Hong Kong, Urumqi\",\"value\":\"8\"},\n  {\"label\":\"(GMT+08:00) Kuala Lumpur, Singapore\",\"value\":\"8\"},\n  {\"label\":\"(GMT+08:00) Irkutsk, Ulaan Bataar\",\"value\":\"8\"},\n  {\"label\":\"(GMT+08:00) Perth\",\"value\":\"8\"},\n  {\"label\":\"(GMT+08:00) Taipei\",\"value\":\"8\"},\n  {\"label\":\"(GMT+09:00) Osaka, Sapporo, Tokyo\",\"value\":\"9\"},\n  {\"label\":\"(GMT+09:00) Seoul\",\"value\":\"9\"},\n  {\"label\":\"(GMT+09:00) Yakutsk\",\"value\":\"9\"},\n  {\"label\":\"(GMT+09:30) Adelaide\",\"value\":\"9.5\"},\n  {\"label\":\"(GMT+09:30) Darwin\",\"value\":\"9.5\"},\n  {\"label\":\"(GMT+10:00) Brisbane\",\"value\":\"10\"},\n  {\"label\":\"(GMT+10:00) Canberra, Melbourne, Sydney\",\"value\":\"10\"},\n  {\"label\":\"(GMT+10:00) Hobart\",\"value\":\"10\"},\n  {\"label\":\"(GMT+10:00) Guam, Port Moresby\",\"value\":\"10\"},\n  {\"label\":\"(GMT+10:00) Vladivostok\",\"value\":\"10\"},\n  {\"label\":\"(GMT+11:00) Magadan, Solomon Is., New Caledonia\",\"value\":\"11\"},\n  {\"label\":\"(GMT+12:00) Auckland, Wellington\",\"value\":\"12\"},\n  {\"label\":\"(GMT+12:00) Fiji, Kamchatka, Marshall Is.\",\"value\":\"12\"},\n  {\"label\":\"(GMT+13:00) Nuku'alofa\",\"value\":\"13\"}\n]//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9UaW1lWm9uZS5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy91dGlsaXR5L1RpbWVab25lLmpzP2I5MWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy9MaXN0cyBvZiB3b3JsZCB0aW1lIHpvbmVzIGluIHZhcmlvdXMgZm9ybWF0cy5cbmV4cG9ydCBjb25zdCB0aW1lWm9uZVVUQyA9IFtcbiAge1wibGFiZWxcIjpcIihVVEMtMTI6MDApXCIsXCJ2YWx1ZVwiOlwiLTEyXCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQy0xMTowMClcIixcInZhbHVlXCI6XCItMTFcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDLTEwOjAwKVwiLFwidmFsdWVcIjpcIi0xMFwifSxcbiAge1wibGFiZWxcIjpcIihVVEMtMDk6MDApXCIsXCJ2YWx1ZVwiOlwiLTlcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDLTA4OjAwKVwiLFwidmFsdWVcIjpcIi04XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQy0wNzowMClcIixcInZhbHVlXCI6XCItN1wifSxcbiAge1wibGFiZWxcIjpcIihVVEMtMDY6MDApXCIsXCJ2YWx1ZVwiOlwiLTZcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDLTA1OjAwKVwiLFwidmFsdWVcIjpcIi01XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQy0wNDowMClcIixcInZhbHVlXCI6XCItNFwifSxcbiAge1wibGFiZWxcIjpcIihVVEMtMDM6MzApXCIsXCJ2YWx1ZVwiOlwiLTMuNVwifSxcbiAge1wibGFiZWxcIjpcIihVVEMtMDM6MDApXCIsXCJ2YWx1ZVwiOlwiLTNcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDLTAyOjAwKVwiLFwidmFsdWVcIjpcIi0yXCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQy0wMTowMClcIixcInZhbHVlXCI6XCItMVwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDA6MDApXCIsXCJ2YWx1ZVwiOlwiMFwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDE6MDApXCIsXCJ2YWx1ZVwiOlwiMVwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDI6MDApXCIsXCJ2YWx1ZVwiOlwiMlwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDM6MDApXCIsXCJ2YWx1ZVwiOlwiM1wifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDM6MzApXCIsXCJ2YWx1ZVwiOlwiMy41XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQyswNDowMClcIixcInZhbHVlXCI6XCI0XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQyswNDozMClcIixcInZhbHVlXCI6XCI0LjVcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDKzA1OjAwKVwiLFwidmFsdWVcIjpcIjVcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDKzA1OjMwKVwiLFwidmFsdWVcIjpcIjUuNVwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDU6NDUpXCIsXCJ2YWx1ZVwiOlwiNS43NVwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDY6MDApXCIsXCJ2YWx1ZVwiOlwiNlwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMDY6MzApXCIsXCJ2YWx1ZVwiOlwiNi41XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQyswNzowMClcIixcInZhbHVlXCI6XCI3XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQyswODowMClcIixcInZhbHVlXCI6XCI4XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQyswOTowMClcIixcInZhbHVlXCI6XCI5XCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQyswOTozMClcIixcInZhbHVlXCI6XCI5LjVcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDKzEwOjAwKVwiLFwidmFsdWVcIjpcIjEwXCJ9LFxuICB7XCJsYWJlbFwiOlwiKFVUQysxMTowMClcIixcInZhbHVlXCI6XCIxMVwifSxcbiAge1wibGFiZWxcIjpcIihVVEMrMTI6MDApXCIsXCJ2YWx1ZVwiOlwiMTJcIn0sXG4gIHtcImxhYmVsXCI6XCIoVVRDKzEzOjAwKVwiLFwidmFsdWVcIjpcIjEzXCJ9XG5dXG5cbmV4cG9ydCBjb25zdCB0aW1lWm9uZVN0cmluZ3MgPSBbXG4gIHtcImxhYmVsXCI6XCIoR01ULTEyOjAwKSBJbnRlcm5hdGlvbmFsIERhdGUgTGluZSBXZXN0XCIsXCJ2YWx1ZVwiOlwiRXRjL0dNVCsxMlwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMTE6MDApIE1pZHdheSBJc2xhbmQsIFNhbW9hXCIsXCJ2YWx1ZVwiOlwiUGFjaWZpYy9NaWR3YXlcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTEwOjAwKSBIYXdhaWlcIixcInZhbHVlXCI6XCJQYWNpZmljL0hvbm9sdWx1XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wOTowMCkgQWxhc2thXCIsXCJ2YWx1ZVwiOlwiVVMvQWxhc2thXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wODowMCkgUGFjaWZpYyBUaW1lIChVUyAmIENhbmFkYSlcIixcInZhbHVlXCI6XCJBbWVyaWNhL0xvc19BbmdlbGVzXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wODowMCkgVGlqdWFuYSwgQmFqYSBDYWxpZm9ybmlhXCIsXCJ2YWx1ZVwiOlwiQW1lcmljYS9UaWp1YW5hXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNzowMCkgQXJpem9uYVwiLFwidmFsdWVcIjpcIlVTL0FyaXpvbmFcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTA3OjAwKSBDaGlodWFodWEsIExhIFBheiwgTWF6YXRsYW5cIixcInZhbHVlXCI6XCJBbWVyaWNhL0NoaWh1YWh1YVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDc6MDApIE1vdW50YWluIFRpbWUgKFVTICYgQ2FuYWRhKVwiLFwidmFsdWVcIjpcIlVTL01vdW50YWluXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNjowMCkgQ2VudHJhbCBBbWVyaWNhXCIsXCJ2YWx1ZVwiOlwiQW1lcmljYS9NYW5hZ3VhXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNjowMCkgQ2VudHJhbCBUaW1lIChVUyAmIENhbmFkYSlcIixcInZhbHVlXCI6XCJVUy9DZW50cmFsXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNjowMCkgR3VhZGFsYWphcmEsIE1leGljbyBDaXR5LCBNb250ZXJyZXlcIixcInZhbHVlXCI6XCJBbWVyaWNhL01leGljb19DaXR5XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNjowMCkgU2Fza2F0Y2hld2FuXCIsXCJ2YWx1ZVwiOlwiQ2FuYWRhL1Nhc2thdGNoZXdhblwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDU6MDApIEJvZ290YSwgTGltYSwgUXVpdG8sIFJpbyBCcmFuY29cIixcInZhbHVlXCI6XCJBbWVyaWNhL0JvZ290YVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDU6MDApIEVhc3Rlcm4gVGltZSAoVVMgJiBDYW5hZGEpXCIsXCJ2YWx1ZVwiOlwiVVMvRWFzdGVyblwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDU6MDApIEluZGlhbmEgKEVhc3QpXCIsXCJ2YWx1ZVwiOlwiVVMvRWFzdC1JbmRpYW5hXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNDowMCkgQXRsYW50aWMgVGltZSAoQ2FuYWRhKVwiLFwidmFsdWVcIjpcIkNhbmFkYS9BdGxhbnRpY1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDQ6MDApIENhcmFjYXMsIExhIFBhelwiLFwidmFsdWVcIjpcIkFtZXJpY2EvQ2FyYWNhc1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDQ6MDApIE1hbmF1c1wiLFwidmFsdWVcIjpcIkFtZXJpY2EvTWFuYXVzXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNDowMCkgU2FudGlhZ29cIixcInZhbHVlXCI6XCJBbWVyaWNhL1NhbnRpYWdvXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMzozMCkgTmV3Zm91bmRsYW5kXCIsXCJ2YWx1ZVwiOlwiQ2FuYWRhL05ld2ZvdW5kbGFuZFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDM6MDApIEJyYXNpbGlhXCIsXCJ2YWx1ZVwiOlwiQW1lcmljYS9TYW9fUGF1bG9cIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTAzOjAwKSBCdWVub3MgQWlyZXMsIEdlb3JnZXRvd25cIixcInZhbHVlXCI6XCJBbWVyaWNhL0FyZ2VudGluYS9CdWVub3NfQWlyZXNcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTAzOjAwKSBHcmVlbmxhbmRcIixcInZhbHVlXCI6XCJBbWVyaWNhL0dvZHRoYWJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTAzOjAwKSBNb250ZXZpZGVvXCIsXCJ2YWx1ZVwiOlwiQW1lcmljYS9Nb250ZXZpZGVvXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMjowMCkgTWlkLUF0bGFudGljXCIsXCJ2YWx1ZVwiOlwiQW1lcmljYS9Ob3JvbmhhXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMTowMCkgQ2FwZSBWZXJkZSBJcy5cIixcInZhbHVlXCI6XCJBdGxhbnRpYy9DYXBlX1ZlcmRlXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMTowMCkgQXpvcmVzXCIsXCJ2YWx1ZVwiOlwiQXRsYW50aWMvQXpvcmVzXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMDowMCkgQ2FzYWJsYW5jYSwgTW9ucm92aWEsIFJleWtqYXZpa1wiLFwidmFsdWVcIjpcIkFmcmljYS9DYXNhYmxhbmNhXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMDowMCkgR3JlZW53aWNoIE1lYW4gVGltZSA6IER1YmxpbiwgRWRpbmJ1cmdoLCBMaXNib24sIExvbmRvblwiLFwidmFsdWVcIjpcIkV0Yy9HcmVlbndpY2hcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAxOjAwKSBBbXN0ZXJkYW0sIEJlcmxpbiwgQmVybiwgUm9tZSwgU3RvY2tob2xtLCBWaWVubmFcIixcInZhbHVlXCI6XCJFdXJvcGUvQW1zdGVyZGFtXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMTowMCkgQmVsZ3JhZGUsIEJyYXRpc2xhdmEsIEJ1ZGFwZXN0LCBManVibGphbmEsIFByYWd1ZVwiLFwidmFsdWVcIjpcIkV1cm9wZS9CZWxncmFkZVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDE6MDApIEJydXNzZWxzLCBDb3BlbmhhZ2VuLCBNYWRyaWQsIFBhcmlzXCIsXCJ2YWx1ZVwiOlwiRXVyb3BlL0JydXNzZWxzXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMTowMCkgU2FyYWpldm8sIFNrb3BqZSwgV2Fyc2F3LCBaYWdyZWJcIixcInZhbHVlXCI6XCJFdXJvcGUvU2FyYWpldm9cIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAxOjAwKSBXZXN0IENlbnRyYWwgQWZyaWNhXCIsXCJ2YWx1ZVwiOlwiQWZyaWNhL0xhZ29zXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMjowMCkgQW1tYW5cIixcInZhbHVlXCI6XCJBc2lhL0FtbWFuXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMjowMCkgQXRoZW5zLCBCdWNoYXJlc3QsIElzdGFuYnVsXCIsXCJ2YWx1ZVwiOlwiRXVyb3BlL0F0aGVuc1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDI6MDApIEJlaXJ1dFwiLFwidmFsdWVcIjpcIkFzaWEvQmVpcnV0XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMjowMCkgQ2Fpcm9cIixcInZhbHVlXCI6XCJBZnJpY2EvQ2Fpcm9cIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAyOjAwKSBIYXJhcmUsIFByZXRvcmlhXCIsXCJ2YWx1ZVwiOlwiQWZyaWNhL0hhcmFyZVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDI6MDApIEhlbHNpbmtpLCBLeWl2LCBSaWdhLCBTb2ZpYSwgVGFsbGlubiwgVmlsbml1c1wiLFwidmFsdWVcIjpcIkV1cm9wZS9IZWxzaW5raVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDI6MDApIEplcnVzYWxlbVwiLFwidmFsdWVcIjpcIkFzaWEvSmVydXNhbGVtXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMjowMCkgTWluc2tcIixcInZhbHVlXCI6XCJFdXJvcGUvTWluc2tcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAyOjAwKSBXaW5kaG9la1wiLFwidmFsdWVcIjpcIkFmcmljYS9XaW5kaG9la1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDM6MDApIEt1d2FpdCwgUml5YWRoLCBCYWdoZGFkXCIsXCJ2YWx1ZVwiOlwiQXNpYS9LdXdhaXRcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAzOjAwKSBNb3Njb3csIFN0LiBQZXRlcnNidXJnLCBWb2xnb2dyYWRcIixcInZhbHVlXCI6XCJFdXJvcGUvTW9zY293XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMzowMCkgTmFpcm9iaVwiLFwidmFsdWVcIjpcIkFmcmljYS9OYWlyb2JpXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMzowMCkgVGJpbGlzaVwiLFwidmFsdWVcIjpcIkFzaWEvVGJpbGlzaVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDM6MzApIFRlaHJhblwiLFwidmFsdWVcIjpcIkFzaWEvVGVocmFuXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNDowMCkgQWJ1IERoYWJpLCBNdXNjYXRcIixcInZhbHVlXCI6XCJBc2lhL011c2NhdFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDQ6MDApIEJha3VcIixcInZhbHVlXCI6XCJBc2lhL0Jha3VcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA0OjAwKSBZZXJldmFuXCIsXCJ2YWx1ZVwiOlwiQXNpYS9ZZXJldmFuXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNDozMCkgS2FidWxcIixcInZhbHVlXCI6XCJBc2lhL0thYnVsXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNTowMCkgWWVrYXRlcmluYnVyZ1wiLFwidmFsdWVcIjpcIkFzaWEvWWVrYXRlcmluYnVyZ1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDU6MDApIElzbGFtYWJhZCwgS2FyYWNoaSwgVGFzaGtlbnRcIixcInZhbHVlXCI6XCJBc2lhL0thcmFjaGlcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA1OjMwKSBDaGVubmFpLCBLb2xrYXRhLCBNdW1iYWksIE5ldyBEZWxoaVwiLFwidmFsdWVcIjpcIkFzaWEvQ2FsY3V0dGFcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA1OjMwKSBTcmkgSmF5YXdhcmRlbmFwdXJhXCIsXCJ2YWx1ZVwiOlwiQXNpYS9DYWxjdXR0YVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDU6NDUpIEthdGhtYW5kdVwiLFwidmFsdWVcIjpcIkFzaWEvS2F0bWFuZHVcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA2OjAwKSBBbG1hdHksIE5vdm9zaWJpcnNrXCIsXCJ2YWx1ZVwiOlwiQXNpYS9BbG1hdHlcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA2OjAwKSBBc3RhbmEsIERoYWthXCIsXCJ2YWx1ZVwiOlwiQXNpYS9EaGFrYVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDY6MzApIFlhbmdvbiAoUmFuZ29vbilcIixcInZhbHVlXCI6XCJBc2lhL1Jhbmdvb25cIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA3OjAwKSBCYW5na29rLCBIYW5vaSwgSmFrYXJ0YVwiLFwidmFsdWVcIjpcIkFzaWEvQmFuZ2tva1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDc6MDApIEtyYXNub3lhcnNrXCIsXCJ2YWx1ZVwiOlwiQXNpYS9LcmFzbm95YXJza1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDg6MDApIEJlaWppbmcsIENob25ncWluZywgSG9uZyBLb25nLCBVcnVtcWlcIixcInZhbHVlXCI6XCJBc2lhL0hvbmdfS29uZ1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDg6MDApIEt1YWxhIEx1bXB1ciwgU2luZ2Fwb3JlXCIsXCJ2YWx1ZVwiOlwiQXNpYS9LdWFsYV9MdW1wdXJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA4OjAwKSBJcmt1dHNrLCBVbGFhbiBCYXRhYXJcIixcInZhbHVlXCI6XCJBc2lhL0lya3V0c2tcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA4OjAwKSBQZXJ0aFwiLFwidmFsdWVcIjpcIkF1c3RyYWxpYS9QZXJ0aFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDg6MDApIFRhaXBlaVwiLFwidmFsdWVcIjpcIkFzaWEvVGFpcGVpXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswOTowMCkgT3Nha2EsIFNhcHBvcm8sIFRva3lvXCIsXCJ2YWx1ZVwiOlwiQXNpYS9Ub2t5b1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDk6MDApIFNlb3VsXCIsXCJ2YWx1ZVwiOlwiQXNpYS9TZW91bFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDk6MDApIFlha3V0c2tcIixcInZhbHVlXCI6XCJBc2lhL1lha3V0c2tcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA5OjMwKSBBZGVsYWlkZVwiLFwidmFsdWVcIjpcIkF1c3RyYWxpYS9BZGVsYWlkZVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDk6MzApIERhcndpblwiLFwidmFsdWVcIjpcIkF1c3RyYWxpYS9EYXJ3aW5cIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzEwOjAwKSBCcmlzYmFuZVwiLFwidmFsdWVcIjpcIkF1c3RyYWxpYS9CcmlzYmFuZVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMTA6MDApIENhbmJlcnJhLCBNZWxib3VybmUsIFN5ZG5leVwiLFwidmFsdWVcIjpcIkF1c3RyYWxpYS9DYW5iZXJyYVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMTA6MDApIEhvYmFydFwiLFwidmFsdWVcIjpcIkF1c3RyYWxpYS9Ib2JhcnRcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzEwOjAwKSBHdWFtLCBQb3J0IE1vcmVzYnlcIixcInZhbHVlXCI6XCJQYWNpZmljL0d1YW1cIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzEwOjAwKSBWbGFkaXZvc3Rva1wiLFwidmFsdWVcIjpcIkFzaWEvVmxhZGl2b3N0b2tcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzExOjAwKSBNYWdhZGFuLCBTb2xvbW9uIElzLiwgTmV3IENhbGVkb25pYVwiLFwidmFsdWVcIjpcIkFzaWEvTWFnYWRhblwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMTI6MDApIEF1Y2tsYW5kLCBXZWxsaW5ndG9uXCIsXCJ2YWx1ZVwiOlwiUGFjaWZpYy9BdWNrbGFuZFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMTI6MDApIEZpamksIEthbWNoYXRrYSwgTWFyc2hhbGwgSXMuXCIsXCJ2YWx1ZVwiOlwiUGFjaWZpYy9GaWppXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCsxMzowMCkgTnVrdSdhbG9mYVwiLFwidmFsdWVcIjpcIlBhY2lmaWMvVG9uZ2F0YXB1XCJ9XG5dXG5cbmV4cG9ydCBjb25zdCB0aW1lWm9uZUludHMgPSBbXG4gIHtcImxhYmVsXCI6XCIoR01ULTEyOjAwKSBJbnRlcm5hdGlvbmFsIERhdGUgTGluZSBXZXN0XCIsXCJ2YWx1ZVwiOlwiLTEyXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0xMTowMCkgTWlkd2F5IElzbGFuZCwgU2Ftb2FcIixcInZhbHVlXCI6XCItMTFcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTEwOjAwKSBIYXdhaWlcIixcInZhbHVlXCI6XCItMTBcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTA5OjAwKSBBbGFza2FcIixcInZhbHVlXCI6XCItOVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDg6MDApIFBhY2lmaWMgVGltZSAoVVMgJiBDYW5hZGEpXCIsXCJ2YWx1ZVwiOlwiLThcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTA4OjAwKSBUaWp1YW5hLCBCYWphIENhbGlmb3JuaWFcIixcInZhbHVlXCI6XCItOFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDc6MDApIEFyaXpvbmFcIixcInZhbHVlXCI6XCItN1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDc6MDApIENoaWh1YWh1YSwgTGEgUGF6LCBNYXphdGxhblwiLFwidmFsdWVcIjpcIi03XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNzowMCkgTW91bnRhaW4gVGltZSAoVVMgJiBDYW5hZGEpXCIsXCJ2YWx1ZVwiOlwiLTdcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTA2OjAwKSBDZW50cmFsIEFtZXJpY2FcIixcInZhbHVlXCI6XCItNlwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDY6MDApIENlbnRyYWwgVGltZSAoVVMgJiBDYW5hZGEpXCIsXCJ2YWx1ZVwiOlwiLTZcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTA1OjAwKSBCb2dvdGEsIExpbWEsIFF1aXRvLCBSaW8gQnJhbmNvXCIsXCJ2YWx1ZVwiOlwiLTVcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTA1OjAwKSBFYXN0ZXJuIFRpbWUgKFVTICYgQ2FuYWRhKVwiLFwidmFsdWVcIjpcIi01XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNTowMCkgSW5kaWFuYSAoRWFzdClcIixcInZhbHVlXCI6XCItNVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDQ6MDApIEF0bGFudGljIFRpbWUgKENhbmFkYSlcIixcInZhbHVlXCI6XCItNFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDQ6MDApIENhcmFjYXMsIExhIFBhelwiLFwidmFsdWVcIjpcIi00XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wNDowMCkgTWFuYXVzXCIsXCJ2YWx1ZVwiOlwiLTRcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTA0OjAwKSBTYW50aWFnb1wiLFwidmFsdWVcIjpcIi00XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMzozMCkgTmV3Zm91bmRsYW5kXCIsXCJ2YWx1ZVwiOlwiLTMuNVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDM6MDApIEJyYXNpbGlhXCIsXCJ2YWx1ZVwiOlwiLTNcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTAzOjAwKSBCdWVub3MgQWlyZXMsIEdlb3JnZXRvd25cIixcInZhbHVlXCI6XCItM1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQtMDM6MDApIEdyZWVubGFuZFwiLFwidmFsdWVcIjpcIi0zXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMzowMCkgTW9udGV2aWRlb1wiLFwidmFsdWVcIjpcIi0zXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMjowMCkgTWlkLUF0bGFudGljXCIsXCJ2YWx1ZVwiOlwiLTJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01ULTAxOjAwKSBDYXBlIFZlcmRlIElzLlwiLFwidmFsdWVcIjpcIi0xXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVC0wMTowMCkgQXpvcmVzXCIsXCJ2YWx1ZVwiOlwiLTFcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAwOjAwKSBDYXNhYmxhbmNhLCBNb25yb3ZpYSwgUmV5a2phdmlrXCIsXCJ2YWx1ZVwiOlwiMFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDA6MDApIEdyZWVud2ljaCBNZWFuIFRpbWUgOiBEdWJsaW4sIEVkaW5idXJnaCwgTGlzYm9uLCBMb25kb25cIixcInZhbHVlXCI6XCIwXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMTowMCkgQW1zdGVyZGFtLCBCZXJsaW4sIEJlcm4sIFJvbWUsIFN0b2NraG9sbSwgVmllbm5hXCIsXCJ2YWx1ZVwiOlwiMVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDE6MDApIEJlbGdyYWRlLCBCcmF0aXNsYXZhLCBCdWRhcGVzdCwgTGp1YmxqYW5hLCBQcmFndWVcIixcInZhbHVlXCI6XCIxXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMTowMCkgQnJ1c3NlbHMsIENvcGVuaGFnZW4sIE1hZHJpZCwgUGFyaXNcIixcInZhbHVlXCI6XCIxXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMTowMCkgU2FyYWpldm8sIFNrb3BqZSwgV2Fyc2F3LCBaYWdyZWJcIixcInZhbHVlXCI6XCIxXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMTowMCkgV2VzdCBDZW50cmFsIEFmcmljYVwiLFwidmFsdWVcIjpcIjFcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAyOjAwKSBBbW1hblwiLFwidmFsdWVcIjpcIjJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAyOjAwKSBBdGhlbnMsIEJ1Y2hhcmVzdCwgSXN0YW5idWxcIixcInZhbHVlXCI6XCIyXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMjowMCkgQmVpcnV0XCIsXCJ2YWx1ZVwiOlwiMlwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDI6MDApIENhaXJvXCIsXCJ2YWx1ZVwiOlwiMlwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDI6MDApIEhhcmFyZSwgUHJldG9yaWFcIixcInZhbHVlXCI6XCIyXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMjowMCkgSGVsc2lua2ksIEt5aXYsIFJpZ2EsIFNvZmlhLCBUYWxsaW5uLCBWaWxuaXVzXCIsXCJ2YWx1ZVwiOlwiMlwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDI6MDApIEplcnVzYWxlbVwiLFwidmFsdWVcIjpcIjJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAyOjAwKSBNaW5za1wiLFwidmFsdWVcIjpcIjJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAyOjAwKSBXaW5kaG9la1wiLFwidmFsdWVcIjpcIjJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAzOjAwKSBLdXdhaXQsIFJpeWFkaCwgQmFnaGRhZFwiLFwidmFsdWVcIjpcIjNcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAzOjAwKSBNb3Njb3csIFN0LiBQZXRlcnNidXJnLCBWb2xnb2dyYWRcIixcInZhbHVlXCI6XCIzXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswMzowMCkgTmFpcm9iaVwiLFwidmFsdWVcIjpcIjNcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzAzOjAwKSBUYmlsaXNpXCIsXCJ2YWx1ZVwiOlwiM1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDM6MzApIFRlaHJhblwiLFwidmFsdWVcIjpcIjMuNVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDQ6MDApIEFidSBEaGFiaSwgTXVzY2F0XCIsXCJ2YWx1ZVwiOlwiNFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDQ6MDApIEJha3VcIixcInZhbHVlXCI6XCI0XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNDowMCkgWWVyZXZhblwiLFwidmFsdWVcIjpcIjRcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA0OjMwKSBLYWJ1bFwiLFwidmFsdWVcIjpcIjQuNVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDU6MDApIFlla2F0ZXJpbmJ1cmdcIixcInZhbHVlXCI6XCI1XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNTowMCkgSXNsYW1hYmFkLCBLYXJhY2hpLCBUYXNoa2VudFwiLFwidmFsdWVcIjpcIjVcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA1OjMwKSBTcmkgSmF5YXdhcmRlbmFwdXJhXCIsXCJ2YWx1ZVwiOlwiNS41XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNTozMCkgQ2hlbm5haSwgS29sa2F0YSwgTXVtYmFpLCBOZXcgRGVsaGlcIixcInZhbHVlXCI6XCI1LjVcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA1OjQ1KSBLYXRobWFuZHVcIixcInZhbHVlXCI6XCI1Ljc1XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNjowMCkgQWxtYXR5LCBOb3Zvc2liaXJza1wiLFwidmFsdWVcIjpcIjZcIn0se1wibGFiZWxcIjpcIihHTVQrMDY6MDApIEFzdGFuYSwgRGhha2FcIixcInZhbHVlXCI6XCI2XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswNjozMCkgWWFuZ29uIChSYW5nb29uKVwiLFwidmFsdWVcIjpcIjYuNVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDc6MDApIEJhbmdrb2ssIEhhbm9pLCBKYWthcnRhXCIsXCJ2YWx1ZVwiOlwiN1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDc6MDApIEtyYXNub3lhcnNrXCIsXCJ2YWx1ZVwiOlwiN1wifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDg6MDApIEJlaWppbmcsIENob25ncWluZywgSG9uZyBLb25nLCBVcnVtcWlcIixcInZhbHVlXCI6XCI4XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswODowMCkgS3VhbGEgTHVtcHVyLCBTaW5nYXBvcmVcIixcInZhbHVlXCI6XCI4XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswODowMCkgSXJrdXRzaywgVWxhYW4gQmF0YWFyXCIsXCJ2YWx1ZVwiOlwiOFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDg6MDApIFBlcnRoXCIsXCJ2YWx1ZVwiOlwiOFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDg6MDApIFRhaXBlaVwiLFwidmFsdWVcIjpcIjhcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA5OjAwKSBPc2FrYSwgU2FwcG9ybywgVG9reW9cIixcInZhbHVlXCI6XCI5XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswOTowMCkgU2VvdWxcIixcInZhbHVlXCI6XCI5XCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCswOTowMCkgWWFrdXRza1wiLFwidmFsdWVcIjpcIjlcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzA5OjMwKSBBZGVsYWlkZVwiLFwidmFsdWVcIjpcIjkuNVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMDk6MzApIERhcndpblwiLFwidmFsdWVcIjpcIjkuNVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMTA6MDApIEJyaXNiYW5lXCIsXCJ2YWx1ZVwiOlwiMTBcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzEwOjAwKSBDYW5iZXJyYSwgTWVsYm91cm5lLCBTeWRuZXlcIixcInZhbHVlXCI6XCIxMFwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMTA6MDApIEhvYmFydFwiLFwidmFsdWVcIjpcIjEwXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCsxMDowMCkgR3VhbSwgUG9ydCBNb3Jlc2J5XCIsXCJ2YWx1ZVwiOlwiMTBcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzEwOjAwKSBWbGFkaXZvc3Rva1wiLFwidmFsdWVcIjpcIjEwXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCsxMTowMCkgTWFnYWRhbiwgU29sb21vbiBJcy4sIE5ldyBDYWxlZG9uaWFcIixcInZhbHVlXCI6XCIxMVwifSxcbiAge1wibGFiZWxcIjpcIihHTVQrMTI6MDApIEF1Y2tsYW5kLCBXZWxsaW5ndG9uXCIsXCJ2YWx1ZVwiOlwiMTJcIn0sXG4gIHtcImxhYmVsXCI6XCIoR01UKzEyOjAwKSBGaWppLCBLYW1jaGF0a2EsIE1hcnNoYWxsIElzLlwiLFwidmFsdWVcIjpcIjEyXCJ9LFxuICB7XCJsYWJlbFwiOlwiKEdNVCsxMzowMCkgTnVrdSdhbG9mYVwiLFwidmFsdWVcIjpcIjEzXCJ9XG5dIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utility/TimeZone.js\n");

/***/ }),

/***/ "./src/utility/TrajectoryDistance.js":
/*!*******************************************!*\
  !*** ./src/utility/TrajectoryDistance.js ***!
  \*******************************************/
/*! exports provided: distL2, mdistL2, diffInMetersFromLngLat, distL2FromLngLat, mdistL2FromLngLat, distPointToSegmentFromLngLat, distErp, distDtw, minimumDistance */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"distL2\", function() { return distL2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mdistL2\", function() { return mdistL2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"diffInMetersFromLngLat\", function() { return diffInMetersFromLngLat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"distL2FromLngLat\", function() { return distL2FromLngLat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"mdistL2FromLngLat\", function() { return mdistL2FromLngLat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"distPointToSegmentFromLngLat\", function() { return distPointToSegmentFromLngLat; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"distErp\", function() { return distErp; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"distDtw\", function() { return distDtw; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"minimumDistance\", function() { return minimumDistance; });\nconst distL2 = (a, b) => {\n  //Calculate 2D point distance in meters.\n  const diff = [b[0] - a[0], b[1] - a[1]];\n  return Math.hypot(...diff);\n};\n\nconst mdistL2 = (t0, t1) => {\n  //Calculate 2D distance matrix between the trajectory points.\n  const mdist = [];\n  for (const a of t0) {\n    const row = [];\n    for (const b of t1) {\n      row.push(distL2(a, b));\n    }\n    mdist.push(row);\n  }\n  return mdist;\n};\n\nconst diffInMetersFromLngLat = (a, b) => {\n  //Estimate differences of lat and lng degrees in meters.\n  //https://en.wikipedia.org/wiki/Geographic_coordinate_system\n  const latMid = ((a[1] + b[1]) / 2) * (Math.PI / 180);\n  const mPerLat =\n    111132.92 -\n    559.82 * Math.cos(2 * latMid) +\n    1.175 * Math.cos(4 * latMid) -\n    0.0023 * Math.cos(6 * latMid);\n  const mPerLng =\n    111412.84 * Math.cos(latMid) -\n    93.5 * Math.cos(3 * latMid) +\n    0.118 * Math.cos(5 * latMid);\n  return [(b[0] - a[0]) * mPerLng, (b[1] - a[1]) * mPerLat];\n};\n\nconst distL2FromLngLat = (a, b) => {\n  //Estimate the distance between lng, lat coordinates\n  const diffInMeters = diffInMetersFromLngLat(a, b);\n  return Math.hypot(...diffInMeters);\n};\n\nconst mdistL2FromLngLat = (t0, t1) => {\n  //Calculate 2D distance matrix between the trajectory lng,lat coordinates.\n  const mdist = [];\n  for (const a of t0) {\n    const row = [];\n    for (const b of t1) {\n      row.push(distL2FromLngLat(a, b));\n    }\n    mdist.push(row);\n  }\n  return mdist;\n};\n\nconst distPointToSegmentFromLngLat = (p, a, b) => {\n  //Calculate the distance between a lng, lat coordinate and the line defined by other two coordinates\n  //First, project the points to the euclidean space, taking \"a\" as reference\n  const [px, py] = diffInMetersFromLngLat(a, p);\n  const [bx, by] = diffInMetersFromLngLat(a, b);\n\n  //Then, calculate the point to line distance in the euclidean space\n  const dot = px * bx + py * by;\n  const len_sq = bx * bx + by * by;\n  let param = -1;\n  if (len_sq !== 0) {\n    param = dot / len_sq;\n  }\n\n  let xx, yy;\n\n  if (param < 0) {\n    xx = 0;\n    yy = 0;\n  } else if (param > 0 && param < 1) {\n    xx = param * bx;\n    yy = param * by;\n  } else {\n    xx = bx;\n    yy = by;\n  }\n\n  const dx = px - xx;\n  const dy = py - yy;\n  return Math.sqrt(dx * dx + dy * dy);\n};\n\n/**\n * Returns the edit distance with real penalty (ERP) between two GNSS trajectories\n *\n * @param {array} t0 Trajectory (array) of [lng, lat] coordinates\n * @param {array} t1 Trajectory (array) of [lng, lat] coordinates\n * @param {array} g Reference [lng, lat] coordinate\n * @return {number} ERP distance\n *\n * @see {@link https://link.springer.com/article/10.1007/s00778-019-00574-9 | Trajectory distance article}\n * @see {@link https://github.com/bguillouet/traj-dist/tree/master | Python implementation}\n */\nconst distErp = (t0, t1, g) => {\n  const n0 = t0.length;\n  const n1 = t1.length;\n  const C = Array.from({ length: n0 + 1 }).map(() =>\n    Array.from({ length: n1 + 1 }).fill(0)\n  );\n\n  const gt0Dist = t0.map((x) => distL2FromLngLat(g, x));\n  const gt1Dist = t1.map((x) => distL2FromLngLat(g, x));\n  const mdist = mdistL2FromLngLat(t0, t1);\n\n  const sumgt0Dist = gt0Dist.reduce((acc, el) => acc + el, 0);\n  const sumgt1Dist = gt1Dist.reduce((acc, el) => acc + el, 0);\n  for (let i = 1; i < n0 + 1; i++) {\n    C[i][0] = sumgt0Dist;\n  }\n  for (let j = 1; j < n1 + 1; j++) {\n    C[0][j] = sumgt1Dist;\n  }\n  for (let i = 1; i < n0 + 1; ++i) {\n    for (let j = 1; j < n1 + 1; ++j) {\n      const derp0 = C[i - 1][j] + gt0Dist[i - 1];\n      const derp1 = C[i][j - 1] + gt1Dist[j - 1];\n      const derp01 = C[i - 1][j - 1] + mdist[i - 1][j - 1];\n      C[i][j] = Math.min(derp0, derp1, derp01);\n    }\n  }\n  const erp = C[n0][n1];\n  return erp;\n};\n\n/**\n * Returns the dynamic time wrapping distance (DTW) between two GNSS trajectories\n *\n * @param {array} t0 Trajectory (array) of [lng, lat] coordinates\n * @param {array} t1 Trajectory (array) of [lng, lat] coordinates\n * @return {number} DTW distance\n *\n * @see {@link https://link.springer.com/article/10.1007/s00778-019-00574-9 | Trajectory distance article}\n * @see {@link https://github.com/bguillouet/traj-dist/tree/master | Python implementation}\n */\nconst distDtw = (t0, t1) => {\n  const n0 = t0.length;\n  const n1 = t1.length;\n  const C = Array.from({ length: n0 + 1 }).map(() =>\n    Array.from({ length: n1 + 1 }).fill(0)\n  );\n  for (let i = 1; i < n0 + 1; i++) {\n    C[i][0] = Infinity;\n  }\n  for (let j = 1; j < n1 + 1; j++) {\n    C[0][j] = Infinity;\n  }\n  for (let i = 1; i < n0 + 1; ++i) {\n    for (let j = 1; j < n1 + 1; ++j) {\n      C[i][j] =\n        distL2FromLngLat(t0[i - 1], t1[j - 1]) +\n        Math.min(C[i][j - 1], C[i - 1][j - 1], C[i - 1][j]);\n    }\n  }\n  const dtw = C[n0][n1];\n  return dtw;\n};\n\n/**\n * Returns the minimum distance (smallest point-to-line distance) between a source and a target GNSS trajectory\n *\n * @param {array} source Source trajectory (array) of [lng, lat] coordinates\n * @param {array} target Target trajectory (array) of [lng, lat] coordinates\n * @return {number} minimum distance\n *\n */\nconst minimumDistance = (source, target) => {\n  let totalError = source.length > 0 ? 0 : Infinity;\n  source.forEach((p) => {\n    let minDistance = Infinity;\n    for (let i = 0; i < target.length - 1; i++) {\n      const distance = distPointToSegmentFromLngLat(\n        p,\n        target[i],\n        target[i + 1]\n      );\n      if (distance < minDistance) {\n        minDistance = distance;\n      }\n    }\n    totalError += minDistance;\n  });\n  return totalError;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbGl0eS9UcmFqZWN0b3J5RGlzdGFuY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbGl0eS9UcmFqZWN0b3J5RGlzdGFuY2UuanM/Mzc1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZGlzdEwyID0gKGEsIGIpID0+IHtcbiAgLy9DYWxjdWxhdGUgMkQgcG9pbnQgZGlzdGFuY2UgaW4gbWV0ZXJzLlxuICBjb25zdCBkaWZmID0gW2JbMF0gLSBhWzBdLCBiWzFdIC0gYVsxXV07XG4gIHJldHVybiBNYXRoLmh5cG90KC4uLmRpZmYpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1kaXN0TDIgPSAodDAsIHQxKSA9PiB7XG4gIC8vQ2FsY3VsYXRlIDJEIGRpc3RhbmNlIG1hdHJpeCBiZXR3ZWVuIHRoZSB0cmFqZWN0b3J5IHBvaW50cy5cbiAgY29uc3QgbWRpc3QgPSBbXTtcbiAgZm9yIChjb25zdCBhIG9mIHQwKSB7XG4gICAgY29uc3Qgcm93ID0gW107XG4gICAgZm9yIChjb25zdCBiIG9mIHQxKSB7XG4gICAgICByb3cucHVzaChkaXN0TDIoYSwgYikpO1xuICAgIH1cbiAgICBtZGlzdC5wdXNoKHJvdyk7XG4gIH1cbiAgcmV0dXJuIG1kaXN0O1xufTtcblxuZXhwb3J0IGNvbnN0IGRpZmZJbk1ldGVyc0Zyb21MbmdMYXQgPSAoYSwgYikgPT4ge1xuICAvL0VzdGltYXRlIGRpZmZlcmVuY2VzIG9mIGxhdCBhbmQgbG5nIGRlZ3JlZXMgaW4gbWV0ZXJzLlxuICAvL2h0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dlb2dyYXBoaWNfY29vcmRpbmF0ZV9zeXN0ZW1cbiAgY29uc3QgbGF0TWlkID0gKChhWzFdICsgYlsxXSkgLyAyKSAqIChNYXRoLlBJIC8gMTgwKTtcbiAgY29uc3QgbVBlckxhdCA9XG4gICAgMTExMTMyLjkyIC1cbiAgICA1NTkuODIgKiBNYXRoLmNvcygyICogbGF0TWlkKSArXG4gICAgMS4xNzUgKiBNYXRoLmNvcyg0ICogbGF0TWlkKSAtXG4gICAgMC4wMDIzICogTWF0aC5jb3MoNiAqIGxhdE1pZCk7XG4gIGNvbnN0IG1QZXJMbmcgPVxuICAgIDExMTQxMi44NCAqIE1hdGguY29zKGxhdE1pZCkgLVxuICAgIDkzLjUgKiBNYXRoLmNvcygzICogbGF0TWlkKSArXG4gICAgMC4xMTggKiBNYXRoLmNvcyg1ICogbGF0TWlkKTtcbiAgcmV0dXJuIFsoYlswXSAtIGFbMF0pICogbVBlckxuZywgKGJbMV0gLSBhWzFdKSAqIG1QZXJMYXRdO1xufTtcblxuZXhwb3J0IGNvbnN0IGRpc3RMMkZyb21MbmdMYXQgPSAoYSwgYikgPT4ge1xuICAvL0VzdGltYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGxuZywgbGF0IGNvb3JkaW5hdGVzXG4gIGNvbnN0IGRpZmZJbk1ldGVycyA9IGRpZmZJbk1ldGVyc0Zyb21MbmdMYXQoYSwgYik7XG4gIHJldHVybiBNYXRoLmh5cG90KC4uLmRpZmZJbk1ldGVycyk7XG59O1xuXG5leHBvcnQgY29uc3QgbWRpc3RMMkZyb21MbmdMYXQgPSAodDAsIHQxKSA9PiB7XG4gIC8vQ2FsY3VsYXRlIDJEIGRpc3RhbmNlIG1hdHJpeCBiZXR3ZWVuIHRoZSB0cmFqZWN0b3J5IGxuZyxsYXQgY29vcmRpbmF0ZXMuXG4gIGNvbnN0IG1kaXN0ID0gW107XG4gIGZvciAoY29uc3QgYSBvZiB0MCkge1xuICAgIGNvbnN0IHJvdyA9IFtdO1xuICAgIGZvciAoY29uc3QgYiBvZiB0MSkge1xuICAgICAgcm93LnB1c2goZGlzdEwyRnJvbUxuZ0xhdChhLCBiKSk7XG4gICAgfVxuICAgIG1kaXN0LnB1c2gocm93KTtcbiAgfVxuICByZXR1cm4gbWRpc3Q7XG59O1xuXG5leHBvcnQgY29uc3QgZGlzdFBvaW50VG9TZWdtZW50RnJvbUxuZ0xhdCA9IChwLCBhLCBiKSA9PiB7XG4gIC8vQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIGEgbG5nLCBsYXQgY29vcmRpbmF0ZSBhbmQgdGhlIGxpbmUgZGVmaW5lZCBieSBvdGhlciB0d28gY29vcmRpbmF0ZXNcbiAgLy9GaXJzdCwgcHJvamVjdCB0aGUgcG9pbnRzIHRvIHRoZSBldWNsaWRlYW4gc3BhY2UsIHRha2luZyBcImFcIiBhcyByZWZlcmVuY2VcbiAgY29uc3QgW3B4LCBweV0gPSBkaWZmSW5NZXRlcnNGcm9tTG5nTGF0KGEsIHApO1xuICBjb25zdCBbYngsIGJ5XSA9IGRpZmZJbk1ldGVyc0Zyb21MbmdMYXQoYSwgYik7XG5cbiAgLy9UaGVuLCBjYWxjdWxhdGUgdGhlIHBvaW50IHRvIGxpbmUgZGlzdGFuY2UgaW4gdGhlIGV1Y2xpZGVhbiBzcGFjZVxuICBjb25zdCBkb3QgPSBweCAqIGJ4ICsgcHkgKiBieTtcbiAgY29uc3QgbGVuX3NxID0gYnggKiBieCArIGJ5ICogYnk7XG4gIGxldCBwYXJhbSA9IC0xO1xuICBpZiAobGVuX3NxICE9PSAwKSB7XG4gICAgcGFyYW0gPSBkb3QgLyBsZW5fc3E7XG4gIH1cblxuICBsZXQgeHgsIHl5O1xuXG4gIGlmIChwYXJhbSA8IDApIHtcbiAgICB4eCA9IDA7XG4gICAgeXkgPSAwO1xuICB9IGVsc2UgaWYgKHBhcmFtID4gMCAmJiBwYXJhbSA8IDEpIHtcbiAgICB4eCA9IHBhcmFtICogYng7XG4gICAgeXkgPSBwYXJhbSAqIGJ5O1xuICB9IGVsc2Uge1xuICAgIHh4ID0gYng7XG4gICAgeXkgPSBieTtcbiAgfVxuXG4gIGNvbnN0IGR4ID0gcHggLSB4eDtcbiAgY29uc3QgZHkgPSBweSAtIHl5O1xuICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZWRpdCBkaXN0YW5jZSB3aXRoIHJlYWwgcGVuYWx0eSAoRVJQKSBiZXR3ZWVuIHR3byBHTlNTIHRyYWplY3Rvcmllc1xuICpcbiAqIEBwYXJhbSB7YXJyYXl9IHQwIFRyYWplY3RvcnkgKGFycmF5KSBvZiBbbG5nLCBsYXRdIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge2FycmF5fSB0MSBUcmFqZWN0b3J5IChhcnJheSkgb2YgW2xuZywgbGF0XSBjb29yZGluYXRlc1xuICogQHBhcmFtIHthcnJheX0gZyBSZWZlcmVuY2UgW2xuZywgbGF0XSBjb29yZGluYXRlXG4gKiBAcmV0dXJuIHtudW1iZXJ9IEVSUCBkaXN0YW5jZVxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vbGluay5zcHJpbmdlci5jb20vYXJ0aWNsZS8xMC4xMDA3L3MwMDc3OC0wMTktMDA1NzQtOSB8IFRyYWplY3RvcnkgZGlzdGFuY2UgYXJ0aWNsZX1cbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9iZ3VpbGxvdWV0L3RyYWotZGlzdC90cmVlL21hc3RlciB8IFB5dGhvbiBpbXBsZW1lbnRhdGlvbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGRpc3RFcnAgPSAodDAsIHQxLCBnKSA9PiB7XG4gIGNvbnN0IG4wID0gdDAubGVuZ3RoO1xuICBjb25zdCBuMSA9IHQxLmxlbmd0aDtcbiAgY29uc3QgQyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IG4wICsgMSB9KS5tYXAoKCkgPT5cbiAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuMSArIDEgfSkuZmlsbCgwKVxuICApO1xuXG4gIGNvbnN0IGd0MERpc3QgPSB0MC5tYXAoKHgpID0+IGRpc3RMMkZyb21MbmdMYXQoZywgeCkpO1xuICBjb25zdCBndDFEaXN0ID0gdDEubWFwKCh4KSA9PiBkaXN0TDJGcm9tTG5nTGF0KGcsIHgpKTtcbiAgY29uc3QgbWRpc3QgPSBtZGlzdEwyRnJvbUxuZ0xhdCh0MCwgdDEpO1xuXG4gIGNvbnN0IHN1bWd0MERpc3QgPSBndDBEaXN0LnJlZHVjZSgoYWNjLCBlbCkgPT4gYWNjICsgZWwsIDApO1xuICBjb25zdCBzdW1ndDFEaXN0ID0gZ3QxRGlzdC5yZWR1Y2UoKGFjYywgZWwpID0+IGFjYyArIGVsLCAwKTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBuMCArIDE7IGkrKykge1xuICAgIENbaV1bMF0gPSBzdW1ndDBEaXN0O1xuICB9XG4gIGZvciAobGV0IGogPSAxOyBqIDwgbjEgKyAxOyBqKyspIHtcbiAgICBDWzBdW2pdID0gc3VtZ3QxRGlzdDtcbiAgfVxuICBmb3IgKGxldCBpID0gMTsgaSA8IG4wICsgMTsgKytpKSB7XG4gICAgZm9yIChsZXQgaiA9IDE7IGogPCBuMSArIDE7ICsraikge1xuICAgICAgY29uc3QgZGVycDAgPSBDW2kgLSAxXVtqXSArIGd0MERpc3RbaSAtIDFdO1xuICAgICAgY29uc3QgZGVycDEgPSBDW2ldW2ogLSAxXSArIGd0MURpc3RbaiAtIDFdO1xuICAgICAgY29uc3QgZGVycDAxID0gQ1tpIC0gMV1baiAtIDFdICsgbWRpc3RbaSAtIDFdW2ogLSAxXTtcbiAgICAgIENbaV1bal0gPSBNYXRoLm1pbihkZXJwMCwgZGVycDEsIGRlcnAwMSk7XG4gICAgfVxuICB9XG4gIGNvbnN0IGVycCA9IENbbjBdW24xXTtcbiAgcmV0dXJuIGVycDtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZHluYW1pYyB0aW1lIHdyYXBwaW5nIGRpc3RhbmNlIChEVFcpIGJldHdlZW4gdHdvIEdOU1MgdHJhamVjdG9yaWVzXG4gKlxuICogQHBhcmFtIHthcnJheX0gdDAgVHJhamVjdG9yeSAoYXJyYXkpIG9mIFtsbmcsIGxhdF0gY29vcmRpbmF0ZXNcbiAqIEBwYXJhbSB7YXJyYXl9IHQxIFRyYWplY3RvcnkgKGFycmF5KSBvZiBbbG5nLCBsYXRdIGNvb3JkaW5hdGVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IERUVyBkaXN0YW5jZVxuICpcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vbGluay5zcHJpbmdlci5jb20vYXJ0aWNsZS8xMC4xMDA3L3MwMDc3OC0wMTktMDA1NzQtOSB8IFRyYWplY3RvcnkgZGlzdGFuY2UgYXJ0aWNsZX1cbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9iZ3VpbGxvdWV0L3RyYWotZGlzdC90cmVlL21hc3RlciB8IFB5dGhvbiBpbXBsZW1lbnRhdGlvbn1cbiAqL1xuZXhwb3J0IGNvbnN0IGRpc3REdHcgPSAodDAsIHQxKSA9PiB7XG4gIGNvbnN0IG4wID0gdDAubGVuZ3RoO1xuICBjb25zdCBuMSA9IHQxLmxlbmd0aDtcbiAgY29uc3QgQyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IG4wICsgMSB9KS5tYXAoKCkgPT5cbiAgICBBcnJheS5mcm9tKHsgbGVuZ3RoOiBuMSArIDEgfSkuZmlsbCgwKVxuICApO1xuICBmb3IgKGxldCBpID0gMTsgaSA8IG4wICsgMTsgaSsrKSB7XG4gICAgQ1tpXVswXSA9IEluZmluaXR5O1xuICB9XG4gIGZvciAobGV0IGogPSAxOyBqIDwgbjEgKyAxOyBqKyspIHtcbiAgICBDWzBdW2pdID0gSW5maW5pdHk7XG4gIH1cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBuMCArIDE7ICsraSkge1xuICAgIGZvciAobGV0IGogPSAxOyBqIDwgbjEgKyAxOyArK2opIHtcbiAgICAgIENbaV1bal0gPVxuICAgICAgICBkaXN0TDJGcm9tTG5nTGF0KHQwW2kgLSAxXSwgdDFbaiAtIDFdKSArXG4gICAgICAgIE1hdGgubWluKENbaV1baiAtIDFdLCBDW2kgLSAxXVtqIC0gMV0sIENbaSAtIDFdW2pdKTtcbiAgICB9XG4gIH1cbiAgY29uc3QgZHR3ID0gQ1tuMF1bbjFdO1xuICByZXR1cm4gZHR3O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtaW5pbXVtIGRpc3RhbmNlIChzbWFsbGVzdCBwb2ludC10by1saW5lIGRpc3RhbmNlKSBiZXR3ZWVuIGEgc291cmNlIGFuZCBhIHRhcmdldCBHTlNTIHRyYWplY3RvcnlcbiAqXG4gKiBAcGFyYW0ge2FycmF5fSBzb3VyY2UgU291cmNlIHRyYWplY3RvcnkgKGFycmF5KSBvZiBbbG5nLCBsYXRdIGNvb3JkaW5hdGVzXG4gKiBAcGFyYW0ge2FycmF5fSB0YXJnZXQgVGFyZ2V0IHRyYWplY3RvcnkgKGFycmF5KSBvZiBbbG5nLCBsYXRdIGNvb3JkaW5hdGVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9IG1pbmltdW0gZGlzdGFuY2VcbiAqXG4gKi9cbmV4cG9ydCBjb25zdCBtaW5pbXVtRGlzdGFuY2UgPSAoc291cmNlLCB0YXJnZXQpID0+IHtcbiAgbGV0IHRvdGFsRXJyb3IgPSBzb3VyY2UubGVuZ3RoID4gMCA/IDAgOiBJbmZpbml0eTtcbiAgc291cmNlLmZvckVhY2goKHApID0+IHtcbiAgICBsZXQgbWluRGlzdGFuY2UgPSBJbmZpbml0eTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRhcmdldC5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlzdFBvaW50VG9TZWdtZW50RnJvbUxuZ0xhdChcbiAgICAgICAgcCxcbiAgICAgICAgdGFyZ2V0W2ldLFxuICAgICAgICB0YXJnZXRbaSArIDFdXG4gICAgICApO1xuICAgICAgaWYgKGRpc3RhbmNlIDwgbWluRGlzdGFuY2UpIHtcbiAgICAgICAgbWluRGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgIH1cbiAgICB9XG4gICAgdG90YWxFcnJvciArPSBtaW5EaXN0YW5jZTtcbiAgfSk7XG4gIHJldHVybiB0b3RhbEVycm9yO1xufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utility/TrajectoryDistance.js\n");

/***/ })

/******/ });